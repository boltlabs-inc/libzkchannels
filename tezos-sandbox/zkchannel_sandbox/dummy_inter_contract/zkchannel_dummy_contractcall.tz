parameter (or (or (or (unit %addFunding) (unit %custClaim)) (or (pair %custClose (pair (pair (string %g2) (string %merchPk0)) (pair (string %merchPk1) (pair (string %merchPk2) (string %merchPk3)))) (pair (pair (string %merchPk4) (pair (mutez %newCustBal) (mutez %newMerchBal))) (pair (bytes %revLock) (pair (string %s1) (string %s2))))) (unit %merchClaim))) (or (or (unit %merchClose) (bytes %merchDispute)) (or (pair %mutualClose (pair (signature %custSig) (signature %merchSig)) (pair (mutez %newCustBal) (mutez %newMerchBal))) (or (pair %receiveCall (pair (mutez %newCustBal) (mutez %newMerchBal)) (pair (bytes %newRevLock) (bool %valid))) (unit %reclaimFunding)))));
storage   (pair (pair (pair (string %chanID) (pair (address %custAddr) (mutez %custBal))) (pair (pair (mutez %custFunding) (key %custPk)) (pair (timestamp %delayExpiry) (address %merchAddr)))) (pair (pair (mutez %merchBal) (pair (mutez %merchFunding) (key %merchPk))) (pair (pair (address %pssigContract) (bytes %revLock)) (pair (int %selfDelay) (string %status)))));
code
  {
    DUP;        # pair @parameter @storage : pair @parameter @storage
    CDR;        # @storage : pair @parameter @storage
    SWAP;       # pair @parameter @storage : @storage
    CAR;        # @parameter : @storage
    IF_LEFT
      {
        IF_LEFT
          {
            IF_LEFT
              {
                DROP;       # @storage
                # == addFunding ==
                # sp.verify(self.data.status == 'awaitingFunding') # @storage
                DUP;        # @storage : @storage
                CDDDDR;     # string : @storage
                PUSH string "awaitingFunding"; # string : string : @storage
                COMPARE;    # int : @storage
                EQ;         # bool : @storage
                IF
                  {}
                  {
                    PUSH string "WrongCondition: self.data.status == 'awaitingFunding'"; # string : @storage
                    FAILWITH;   # FAILED
                  }; # @storage
                # if self.data.custAddr == sp.sender: # @storage
                DUP;        # @storage : @storage
                CAADAR;     # address : @storage
                SENDER;     # address : address : @storage
                COMPARE;    # int : @storage
                EQ;         # bool : @storage
                IF
                  {
                    # sp.verify(sp.amount == self.data.custFunding) # @storage
                    DUP;        # @storage : @storage
                    CADAAR;     # mutez : @storage
                    AMOUNT;     # mutez : mutez : @storage
                    COMPARE;    # int : @storage
                    EQ;         # bool : @storage
                    IF
                      {}
                      {
                        PUSH string "WrongCondition: sp.amount == self.data.custFunding"; # string : @storage
                        FAILWITH;   # FAILED
                      }; # @storage
                    # self.data.custBal = self.data.custFunding # @storage
                    DUP;        # @storage : @storage
                    DUP;        # @storage : @storage : @storage
                    CDR;        # pair (pair (mutez %merchBal) (pair (mutez %merchFunding) (key %merchPk))) (pair (pair (address %pssigContract) (bytes %revLock)) (pair (int %selfDelay) (string %status))) : @storage : @storage
                    SWAP;       # @storage : pair (pair (mutez %merchBal) (pair (mutez %merchFunding) (key %merchPk))) (pair (pair (address %pssigContract) (bytes %revLock)) (pair (int %selfDelay) (string %status))) : @storage
                    CAR;        # pair (pair (string %chanID) (pair (address %custAddr) (mutez %custBal))) (pair (pair (mutez %custFunding) (key %custPk)) (pair (timestamp %delayExpiry) (address %merchAddr))) : pair (pair (mutez %merchBal) (pair (mutez %merchFunding) (key %merchPk))) (pair (pair (address %pssigContract) (bytes %revLock)) (pair (int %selfDelay) (string %status))) : @storage
                    DUP;        # pair (pair (string %chanID) (pair (address %custAddr) (mutez %custBal))) (pair (pair (mutez %custFunding) (key %custPk)) (pair (timestamp %delayExpiry) (address %merchAddr))) : pair (pair (string %chanID) (pair (address %custAddr) (mutez %custBal))) (pair (pair (mutez %custFunding) (key %custPk)) (pair (timestamp %delayExpiry) (address %merchAddr))) : pair (pair (mutez %merchBal) (pair (mutez %merchFunding) (key %merchPk))) (pair (pair (address %pssigContract) (bytes %revLock)) (pair (int %selfDelay) (string %status))) : @storage
                    CDR;        # pair (pair (mutez %custFunding) (key %custPk)) (pair (timestamp %delayExpiry) (address %merchAddr)) : pair (pair (string %chanID) (pair (address %custAddr) (mutez %custBal))) (pair (pair (mutez %custFunding) (key %custPk)) (pair (timestamp %delayExpiry) (address %merchAddr))) : pair (pair (mutez %merchBal) (pair (mutez %merchFunding) (key %merchPk))) (pair (pair (address %pssigContract) (bytes %revLock)) (pair (int %selfDelay) (string %status))) : @storage
                    SWAP;       # pair (pair (string %chanID) (pair (address %custAddr) (mutez %custBal))) (pair (pair (mutez %custFunding) (key %custPk)) (pair (timestamp %delayExpiry) (address %merchAddr))) : pair (pair (mutez %custFunding) (key %custPk)) (pair (timestamp %delayExpiry) (address %merchAddr)) : pair (pair (mutez %merchBal) (pair (mutez %merchFunding) (key %merchPk))) (pair (pair (address %pssigContract) (bytes %revLock)) (pair (int %selfDelay) (string %status))) : @storage
                    CAR;        # pair (string %chanID) (pair (address %custAddr) (mutez %custBal)) : pair (pair (mutez %custFunding) (key %custPk)) (pair (timestamp %delayExpiry) (address %merchAddr)) : pair (pair (mutez %merchBal) (pair (mutez %merchFunding) (key %merchPk))) (pair (pair (address %pssigContract) (bytes %revLock)) (pair (int %selfDelay) (string %status))) : @storage
                    DUP;        # pair (string %chanID) (pair (address %custAddr) (mutez %custBal)) : pair (string %chanID) (pair (address %custAddr) (mutez %custBal)) : pair (pair (mutez %custFunding) (key %custPk)) (pair (timestamp %delayExpiry) (address %merchAddr)) : pair (pair (mutez %merchBal) (pair (mutez %merchFunding) (key %merchPk))) (pair (pair (address %pssigContract) (bytes %revLock)) (pair (int %selfDelay) (string %status))) : @storage
                    CAR;        # string : pair (string %chanID) (pair (address %custAddr) (mutez %custBal)) : pair (pair (mutez %custFunding) (key %custPk)) (pair (timestamp %delayExpiry) (address %merchAddr)) : pair (pair (mutez %merchBal) (pair (mutez %merchFunding) (key %merchPk))) (pair (pair (address %pssigContract) (bytes %revLock)) (pair (int %selfDelay) (string %status))) : @storage
                    SWAP;       # pair (string %chanID) (pair (address %custAddr) (mutez %custBal)) : string : pair (pair (mutez %custFunding) (key %custPk)) (pair (timestamp %delayExpiry) (address %merchAddr)) : pair (pair (mutez %merchBal) (pair (mutez %merchFunding) (key %merchPk))) (pair (pair (address %pssigContract) (bytes %revLock)) (pair (int %selfDelay) (string %status))) : @storage
                    CDAR;       # address : string : pair (pair (mutez %custFunding) (key %custPk)) (pair (timestamp %delayExpiry) (address %merchAddr)) : pair (pair (mutez %merchBal) (pair (mutez %merchFunding) (key %merchPk))) (pair (pair (address %pssigContract) (bytes %revLock)) (pair (int %selfDelay) (string %status))) : @storage
                    DIG 4;      # @storage : address : string : pair (pair (mutez %custFunding) (key %custPk)) (pair (timestamp %delayExpiry) (address %merchAddr)) : pair (pair (mutez %merchBal) (pair (mutez %merchFunding) (key %merchPk))) (pair (pair (address %pssigContract) (bytes %revLock)) (pair (int %selfDelay) (string %status)))
                    CADAAR;     # mutez : address : string : pair (pair (mutez %custFunding) (key %custPk)) (pair (timestamp %delayExpiry) (address %merchAddr)) : pair (pair (mutez %merchBal) (pair (mutez %merchFunding) (key %merchPk))) (pair (pair (address %pssigContract) (bytes %revLock)) (pair (int %selfDelay) (string %status)))
                    SWAP;       # address : mutez : string : pair (pair (mutez %custFunding) (key %custPk)) (pair (timestamp %delayExpiry) (address %merchAddr)) : pair (pair (mutez %merchBal) (pair (mutez %merchFunding) (key %merchPk))) (pair (pair (address %pssigContract) (bytes %revLock)) (pair (int %selfDelay) (string %status)))
                    PAIR;       # pair address mutez : string : pair (pair (mutez %custFunding) (key %custPk)) (pair (timestamp %delayExpiry) (address %merchAddr)) : pair (pair (mutez %merchBal) (pair (mutez %merchFunding) (key %merchPk))) (pair (pair (address %pssigContract) (bytes %revLock)) (pair (int %selfDelay) (string %status)))
                    SWAP;       # string : pair address mutez : pair (pair (mutez %custFunding) (key %custPk)) (pair (timestamp %delayExpiry) (address %merchAddr)) : pair (pair (mutez %merchBal) (pair (mutez %merchFunding) (key %merchPk))) (pair (pair (address %pssigContract) (bytes %revLock)) (pair (int %selfDelay) (string %status)))
                    PAIR;       # pair string (pair address mutez) : pair (pair (mutez %custFunding) (key %custPk)) (pair (timestamp %delayExpiry) (address %merchAddr)) : pair (pair (mutez %merchBal) (pair (mutez %merchFunding) (key %merchPk))) (pair (pair (address %pssigContract) (bytes %revLock)) (pair (int %selfDelay) (string %status)))
                    PAIR;       # pair (pair string (pair address mutez)) (pair (pair (mutez %custFunding) (key %custPk)) (pair (timestamp %delayExpiry) (address %merchAddr))) : pair (pair (mutez %merchBal) (pair (mutez %merchFunding) (key %merchPk))) (pair (pair (address %pssigContract) (bytes %revLock)) (pair (int %selfDelay) (string %status)))
                    PAIR;       # pair (pair (pair string (pair address mutez)) (pair (pair (mutez %custFunding) (key %custPk)) (pair (timestamp %delayExpiry) (address %merchAddr)))) (pair (pair (mutez %merchBal) (pair (mutez %merchFunding) (key %merchPk))) (pair (pair (address %pssigContract) (bytes %revLock)) (pair (int %selfDelay) (string %status))))
                  }
                  {}; # pair (pair (pair string (pair address mutez)) (pair (pair (mutez %custFunding) (key %custPk)) (pair (timestamp %delayExpiry) (address %merchAddr)))) (pair (pair (mutez %merchBal) (pair (mutez %merchFunding) (key %merchPk))) (pair (pair (address %pssigContract) (bytes %revLock)) (pair (int %selfDelay) (string %status))))
                # if self.data.merchAddr == sp.sender: # pair (pair (pair string (pair address mutez)) (pair (pair (mutez %custFunding) (key %custPk)) (pair (timestamp %delayExpiry) (address %merchAddr)))) (pair (pair (mutez %merchBal) (pair (mutez %merchFunding) (key %merchPk))) (pair (pair (address %pssigContract) (bytes %revLock)) (pair (int %selfDelay) (string %status))))
                DUP;        # pair (pair (pair string (pair address mutez)) (pair (pair (mutez %custFunding) (key %custPk)) (pair (timestamp %delayExpiry) (address %merchAddr)))) (pair (pair (mutez %merchBal) (pair (mutez %merchFunding) (key %merchPk))) (pair (pair (address %pssigContract) (bytes %revLock)) (pair (int %selfDelay) (string %status)))) : pair (pair (pair string (pair address mutez)) (pair (pair (mutez %custFunding) (key %custPk)) (pair (timestamp %delayExpiry) (address %merchAddr)))) (pair (pair (mutez %merchBal) (pair (mutez %merchFunding) (key %merchPk))) (pair (pair (address %pssigContract) (bytes %revLock)) (pair (int %selfDelay) (string %status))))
                CADDDR;     # address : pair (pair (pair string (pair address mutez)) (pair (pair (mutez %custFunding) (key %custPk)) (pair (timestamp %delayExpiry) (address %merchAddr)))) (pair (pair (mutez %merchBal) (pair (mutez %merchFunding) (key %merchPk))) (pair (pair (address %pssigContract) (bytes %revLock)) (pair (int %selfDelay) (string %status))))
                SENDER;     # address : address : pair (pair (pair string (pair address mutez)) (pair (pair (mutez %custFunding) (key %custPk)) (pair (timestamp %delayExpiry) (address %merchAddr)))) (pair (pair (mutez %merchBal) (pair (mutez %merchFunding) (key %merchPk))) (pair (pair (address %pssigContract) (bytes %revLock)) (pair (int %selfDelay) (string %status))))
                COMPARE;    # int : pair (pair (pair string (pair address mutez)) (pair (pair (mutez %custFunding) (key %custPk)) (pair (timestamp %delayExpiry) (address %merchAddr)))) (pair (pair (mutez %merchBal) (pair (mutez %merchFunding) (key %merchPk))) (pair (pair (address %pssigContract) (bytes %revLock)) (pair (int %selfDelay) (string %status))))
                EQ;         # bool : pair (pair (pair string (pair address mutez)) (pair (pair (mutez %custFunding) (key %custPk)) (pair (timestamp %delayExpiry) (address %merchAddr)))) (pair (pair (mutez %merchBal) (pair (mutez %merchFunding) (key %merchPk))) (pair (pair (address %pssigContract) (bytes %revLock)) (pair (int %selfDelay) (string %status))))
                IF
                  {
                    # sp.verify(sp.amount == self.data.merchFunding) # pair (pair (pair string (pair address mutez)) (pair (pair (mutez %custFunding) (key %custPk)) (pair (timestamp %delayExpiry) (address %merchAddr)))) (pair (pair (mutez %merchBal) (pair (mutez %merchFunding) (key %merchPk))) (pair (pair (address %pssigContract) (bytes %revLock)) (pair (int %selfDelay) (string %status))))
                    DUP;        # pair (pair (pair string (pair address mutez)) (pair (pair (mutez %custFunding) (key %custPk)) (pair (timestamp %delayExpiry) (address %merchAddr)))) (pair (pair (mutez %merchBal) (pair (mutez %merchFunding) (key %merchPk))) (pair (pair (address %pssigContract) (bytes %revLock)) (pair (int %selfDelay) (string %status)))) : pair (pair (pair string (pair address mutez)) (pair (pair (mutez %custFunding) (key %custPk)) (pair (timestamp %delayExpiry) (address %merchAddr)))) (pair (pair (mutez %merchBal) (pair (mutez %merchFunding) (key %merchPk))) (pair (pair (address %pssigContract) (bytes %revLock)) (pair (int %selfDelay) (string %status))))
                    CDADAR;     # mutez : pair (pair (pair string (pair address mutez)) (pair (pair (mutez %custFunding) (key %custPk)) (pair (timestamp %delayExpiry) (address %merchAddr)))) (pair (pair (mutez %merchBal) (pair (mutez %merchFunding) (key %merchPk))) (pair (pair (address %pssigContract) (bytes %revLock)) (pair (int %selfDelay) (string %status))))
                    AMOUNT;     # mutez : mutez : pair (pair (pair string (pair address mutez)) (pair (pair (mutez %custFunding) (key %custPk)) (pair (timestamp %delayExpiry) (address %merchAddr)))) (pair (pair (mutez %merchBal) (pair (mutez %merchFunding) (key %merchPk))) (pair (pair (address %pssigContract) (bytes %revLock)) (pair (int %selfDelay) (string %status))))
                    COMPARE;    # int : pair (pair (pair string (pair address mutez)) (pair (pair (mutez %custFunding) (key %custPk)) (pair (timestamp %delayExpiry) (address %merchAddr)))) (pair (pair (mutez %merchBal) (pair (mutez %merchFunding) (key %merchPk))) (pair (pair (address %pssigContract) (bytes %revLock)) (pair (int %selfDelay) (string %status))))
                    EQ;         # bool : pair (pair (pair string (pair address mutez)) (pair (pair (mutez %custFunding) (key %custPk)) (pair (timestamp %delayExpiry) (address %merchAddr)))) (pair (pair (mutez %merchBal) (pair (mutez %merchFunding) (key %merchPk))) (pair (pair (address %pssigContract) (bytes %revLock)) (pair (int %selfDelay) (string %status))))
                    IF
                      {}
                      {
                        PUSH string "WrongCondition: sp.amount == self.data.merchFunding"; # string : pair (pair (pair string (pair address mutez)) (pair (pair (mutez %custFunding) (key %custPk)) (pair (timestamp %delayExpiry) (address %merchAddr)))) (pair (pair (mutez %merchBal) (pair (mutez %merchFunding) (key %merchPk))) (pair (pair (address %pssigContract) (bytes %revLock)) (pair (int %selfDelay) (string %status))))
                        FAILWITH;   # FAILED
                      }; # pair (pair (pair string (pair address mutez)) (pair (pair (mutez %custFunding) (key %custPk)) (pair (timestamp %delayExpiry) (address %merchAddr)))) (pair (pair (mutez %merchBal) (pair (mutez %merchFunding) (key %merchPk))) (pair (pair (address %pssigContract) (bytes %revLock)) (pair (int %selfDelay) (string %status))))
                    # self.data.merchBal = self.data.merchFunding # pair (pair (pair string (pair address mutez)) (pair (pair (mutez %custFunding) (key %custPk)) (pair (timestamp %delayExpiry) (address %merchAddr)))) (pair (pair (mutez %merchBal) (pair (mutez %merchFunding) (key %merchPk))) (pair (pair (address %pssigContract) (bytes %revLock)) (pair (int %selfDelay) (string %status))))
                    DUP;        # pair (pair (pair string (pair address mutez)) (pair (pair (mutez %custFunding) (key %custPk)) (pair (timestamp %delayExpiry) (address %merchAddr)))) (pair (pair (mutez %merchBal) (pair (mutez %merchFunding) (key %merchPk))) (pair (pair (address %pssigContract) (bytes %revLock)) (pair (int %selfDelay) (string %status)))) : pair (pair (pair string (pair address mutez)) (pair (pair (mutez %custFunding) (key %custPk)) (pair (timestamp %delayExpiry) (address %merchAddr)))) (pair (pair (mutez %merchBal) (pair (mutez %merchFunding) (key %merchPk))) (pair (pair (address %pssigContract) (bytes %revLock)) (pair (int %selfDelay) (string %status))))
                    DUP;        # pair (pair (pair string (pair address mutez)) (pair (pair (mutez %custFunding) (key %custPk)) (pair (timestamp %delayExpiry) (address %merchAddr)))) (pair (pair (mutez %merchBal) (pair (mutez %merchFunding) (key %merchPk))) (pair (pair (address %pssigContract) (bytes %revLock)) (pair (int %selfDelay) (string %status)))) : pair (pair (pair string (pair address mutez)) (pair (pair (mutez %custFunding) (key %custPk)) (pair (timestamp %delayExpiry) (address %merchAddr)))) (pair (pair (mutez %merchBal) (pair (mutez %merchFunding) (key %merchPk))) (pair (pair (address %pssigContract) (bytes %revLock)) (pair (int %selfDelay) (string %status)))) : pair (pair (pair string (pair address mutez)) (pair (pair (mutez %custFunding) (key %custPk)) (pair (timestamp %delayExpiry) (address %merchAddr)))) (pair (pair (mutez %merchBal) (pair (mutez %merchFunding) (key %merchPk))) (pair (pair (address %pssigContract) (bytes %revLock)) (pair (int %selfDelay) (string %status))))
                    CAR;        # pair (pair string (pair address mutez)) (pair (pair (mutez %custFunding) (key %custPk)) (pair (timestamp %delayExpiry) (address %merchAddr))) : pair (pair (pair string (pair address mutez)) (pair (pair (mutez %custFunding) (key %custPk)) (pair (timestamp %delayExpiry) (address %merchAddr)))) (pair (pair (mutez %merchBal) (pair (mutez %merchFunding) (key %merchPk))) (pair (pair (address %pssigContract) (bytes %revLock)) (pair (int %selfDelay) (string %status)))) : pair (pair (pair string (pair address mutez)) (pair (pair (mutez %custFunding) (key %custPk)) (pair (timestamp %delayExpiry) (address %merchAddr)))) (pair (pair (mutez %merchBal) (pair (mutez %merchFunding) (key %merchPk))) (pair (pair (address %pssigContract) (bytes %revLock)) (pair (int %selfDelay) (string %status))))
                    SWAP;       # pair (pair (pair string (pair address mutez)) (pair (pair (mutez %custFunding) (key %custPk)) (pair (timestamp %delayExpiry) (address %merchAddr)))) (pair (pair (mutez %merchBal) (pair (mutez %merchFunding) (key %merchPk))) (pair (pair (address %pssigContract) (bytes %revLock)) (pair (int %selfDelay) (string %status)))) : pair (pair string (pair address mutez)) (pair (pair (mutez %custFunding) (key %custPk)) (pair (timestamp %delayExpiry) (address %merchAddr))) : pair (pair (pair string (pair address mutez)) (pair (pair (mutez %custFunding) (key %custPk)) (pair (timestamp %delayExpiry) (address %merchAddr)))) (pair (pair (mutez %merchBal) (pair (mutez %merchFunding) (key %merchPk))) (pair (pair (address %pssigContract) (bytes %revLock)) (pair (int %selfDelay) (string %status))))
                    CDR;        # pair (pair (mutez %merchBal) (pair (mutez %merchFunding) (key %merchPk))) (pair (pair (address %pssigContract) (bytes %revLock)) (pair (int %selfDelay) (string %status))) : pair (pair string (pair address mutez)) (pair (pair (mutez %custFunding) (key %custPk)) (pair (timestamp %delayExpiry) (address %merchAddr))) : pair (pair (pair string (pair address mutez)) (pair (pair (mutez %custFunding) (key %custPk)) (pair (timestamp %delayExpiry) (address %merchAddr)))) (pair (pair (mutez %merchBal) (pair (mutez %merchFunding) (key %merchPk))) (pair (pair (address %pssigContract) (bytes %revLock)) (pair (int %selfDelay) (string %status))))
                    DUP;        # pair (pair (mutez %merchBal) (pair (mutez %merchFunding) (key %merchPk))) (pair (pair (address %pssigContract) (bytes %revLock)) (pair (int %selfDelay) (string %status))) : pair (pair (mutez %merchBal) (pair (mutez %merchFunding) (key %merchPk))) (pair (pair (address %pssigContract) (bytes %revLock)) (pair (int %selfDelay) (string %status))) : pair (pair string (pair address mutez)) (pair (pair (mutez %custFunding) (key %custPk)) (pair (timestamp %delayExpiry) (address %merchAddr))) : pair (pair (pair string (pair address mutez)) (pair (pair (mutez %custFunding) (key %custPk)) (pair (timestamp %delayExpiry) (address %merchAddr)))) (pair (pair (mutez %merchBal) (pair (mutez %merchFunding) (key %merchPk))) (pair (pair (address %pssigContract) (bytes %revLock)) (pair (int %selfDelay) (string %status))))
                    CDR;        # pair (pair (address %pssigContract) (bytes %revLock)) (pair (int %selfDelay) (string %status)) : pair (pair (mutez %merchBal) (pair (mutez %merchFunding) (key %merchPk))) (pair (pair (address %pssigContract) (bytes %revLock)) (pair (int %selfDelay) (string %status))) : pair (pair string (pair address mutez)) (pair (pair (mutez %custFunding) (key %custPk)) (pair (timestamp %delayExpiry) (address %merchAddr))) : pair (pair (pair string (pair address mutez)) (pair (pair (mutez %custFunding) (key %custPk)) (pair (timestamp %delayExpiry) (address %merchAddr)))) (pair (pair (mutez %merchBal) (pair (mutez %merchFunding) (key %merchPk))) (pair (pair (address %pssigContract) (bytes %revLock)) (pair (int %selfDelay) (string %status))))
                    SWAP;       # pair (pair (mutez %merchBal) (pair (mutez %merchFunding) (key %merchPk))) (pair (pair (address %pssigContract) (bytes %revLock)) (pair (int %selfDelay) (string %status))) : pair (pair (address %pssigContract) (bytes %revLock)) (pair (int %selfDelay) (string %status)) : pair (pair string (pair address mutez)) (pair (pair (mutez %custFunding) (key %custPk)) (pair (timestamp %delayExpiry) (address %merchAddr))) : pair (pair (pair string (pair address mutez)) (pair (pair (mutez %custFunding) (key %custPk)) (pair (timestamp %delayExpiry) (address %merchAddr)))) (pair (pair (mutez %merchBal) (pair (mutez %merchFunding) (key %merchPk))) (pair (pair (address %pssigContract) (bytes %revLock)) (pair (int %selfDelay) (string %status))))
                    CADR;       # pair (mutez %merchFunding) (key %merchPk) : pair (pair (address %pssigContract) (bytes %revLock)) (pair (int %selfDelay) (string %status)) : pair (pair string (pair address mutez)) (pair (pair (mutez %custFunding) (key %custPk)) (pair (timestamp %delayExpiry) (address %merchAddr))) : pair (pair (pair string (pair address mutez)) (pair (pair (mutez %custFunding) (key %custPk)) (pair (timestamp %delayExpiry) (address %merchAddr)))) (pair (pair (mutez %merchBal) (pair (mutez %merchFunding) (key %merchPk))) (pair (pair (address %pssigContract) (bytes %revLock)) (pair (int %selfDelay) (string %status))))
                    DIG 3;      # pair (pair (pair string (pair address mutez)) (pair (pair (mutez %custFunding) (key %custPk)) (pair (timestamp %delayExpiry) (address %merchAddr)))) (pair (pair (mutez %merchBal) (pair (mutez %merchFunding) (key %merchPk))) (pair (pair (address %pssigContract) (bytes %revLock)) (pair (int %selfDelay) (string %status)))) : pair (mutez %merchFunding) (key %merchPk) : pair (pair (address %pssigContract) (bytes %revLock)) (pair (int %selfDelay) (string %status)) : pair (pair string (pair address mutez)) (pair (pair (mutez %custFunding) (key %custPk)) (pair (timestamp %delayExpiry) (address %merchAddr)))
                    CDADAR;     # mutez : pair (mutez %merchFunding) (key %merchPk) : pair (pair (address %pssigContract) (bytes %revLock)) (pair (int %selfDelay) (string %status)) : pair (pair string (pair address mutez)) (pair (pair (mutez %custFunding) (key %custPk)) (pair (timestamp %delayExpiry) (address %merchAddr)))
                    PAIR;       # pair mutez (pair (mutez %merchFunding) (key %merchPk)) : pair (pair (address %pssigContract) (bytes %revLock)) (pair (int %selfDelay) (string %status)) : pair (pair string (pair address mutez)) (pair (pair (mutez %custFunding) (key %custPk)) (pair (timestamp %delayExpiry) (address %merchAddr)))
                    PAIR;       # pair (pair mutez (pair (mutez %merchFunding) (key %merchPk))) (pair (pair (address %pssigContract) (bytes %revLock)) (pair (int %selfDelay) (string %status))) : pair (pair string (pair address mutez)) (pair (pair (mutez %custFunding) (key %custPk)) (pair (timestamp %delayExpiry) (address %merchAddr)))
                    SWAP;       # pair (pair string (pair address mutez)) (pair (pair (mutez %custFunding) (key %custPk)) (pair (timestamp %delayExpiry) (address %merchAddr))) : pair (pair mutez (pair (mutez %merchFunding) (key %merchPk))) (pair (pair (address %pssigContract) (bytes %revLock)) (pair (int %selfDelay) (string %status)))
                    PAIR;       # pair (pair (pair string (pair address mutez)) (pair (pair (mutez %custFunding) (key %custPk)) (pair (timestamp %delayExpiry) (address %merchAddr)))) (pair (pair mutez (pair (mutez %merchFunding) (key %merchPk))) (pair (pair (address %pssigContract) (bytes %revLock)) (pair (int %selfDelay) (string %status))))
                  }
                  {}; # pair (pair (pair string (pair address mutez)) (pair (pair (mutez %custFunding) (key %custPk)) (pair (timestamp %delayExpiry) (address %merchAddr)))) (pair (pair mutez (pair (mutez %merchFunding) (key %merchPk))) (pair (pair (address %pssigContract) (bytes %revLock)) (pair (int %selfDelay) (string %status))))
                # if (self.data.custBal == self.data.custFunding) & (self.data.merchBal == self.data.merchFunding): # pair (pair (pair string (pair address mutez)) (pair (pair (mutez %custFunding) (key %custPk)) (pair (timestamp %delayExpiry) (address %merchAddr)))) (pair (pair mutez (pair (mutez %merchFunding) (key %merchPk))) (pair (pair (address %pssigContract) (bytes %revLock)) (pair (int %selfDelay) (string %status))))
                DUP;        # pair (pair (pair string (pair address mutez)) (pair (pair (mutez %custFunding) (key %custPk)) (pair (timestamp %delayExpiry) (address %merchAddr)))) (pair (pair mutez (pair (mutez %merchFunding) (key %merchPk))) (pair (pair (address %pssigContract) (bytes %revLock)) (pair (int %selfDelay) (string %status)))) : pair (pair (pair string (pair address mutez)) (pair (pair (mutez %custFunding) (key %custPk)) (pair (timestamp %delayExpiry) (address %merchAddr)))) (pair (pair mutez (pair (mutez %merchFunding) (key %merchPk))) (pair (pair (address %pssigContract) (bytes %revLock)) (pair (int %selfDelay) (string %status))))
                CADAAR;     # mutez : pair (pair (pair string (pair address mutez)) (pair (pair (mutez %custFunding) (key %custPk)) (pair (timestamp %delayExpiry) (address %merchAddr)))) (pair (pair mutez (pair (mutez %merchFunding) (key %merchPk))) (pair (pair (address %pssigContract) (bytes %revLock)) (pair (int %selfDelay) (string %status))))
                SWAP;       # pair (pair (pair string (pair address mutez)) (pair (pair (mutez %custFunding) (key %custPk)) (pair (timestamp %delayExpiry) (address %merchAddr)))) (pair (pair mutez (pair (mutez %merchFunding) (key %merchPk))) (pair (pair (address %pssigContract) (bytes %revLock)) (pair (int %selfDelay) (string %status)))) : mutez
                DUP;        # pair (pair (pair string (pair address mutez)) (pair (pair (mutez %custFunding) (key %custPk)) (pair (timestamp %delayExpiry) (address %merchAddr)))) (pair (pair mutez (pair (mutez %merchFunding) (key %merchPk))) (pair (pair (address %pssigContract) (bytes %revLock)) (pair (int %selfDelay) (string %status)))) : pair (pair (pair string (pair address mutez)) (pair (pair (mutez %custFunding) (key %custPk)) (pair (timestamp %delayExpiry) (address %merchAddr)))) (pair (pair mutez (pair (mutez %merchFunding) (key %merchPk))) (pair (pair (address %pssigContract) (bytes %revLock)) (pair (int %selfDelay) (string %status)))) : mutez
                DUG 2;      # pair (pair (pair string (pair address mutez)) (pair (pair (mutez %custFunding) (key %custPk)) (pair (timestamp %delayExpiry) (address %merchAddr)))) (pair (pair mutez (pair (mutez %merchFunding) (key %merchPk))) (pair (pair (address %pssigContract) (bytes %revLock)) (pair (int %selfDelay) (string %status)))) : mutez : pair (pair (pair string (pair address mutez)) (pair (pair (mutez %custFunding) (key %custPk)) (pair (timestamp %delayExpiry) (address %merchAddr)))) (pair (pair mutez (pair (mutez %merchFunding) (key %merchPk))) (pair (pair (address %pssigContract) (bytes %revLock)) (pair (int %selfDelay) (string %status))))
                CAADDR;     # mutez : mutez : pair (pair (pair string (pair address mutez)) (pair (pair (mutez %custFunding) (key %custPk)) (pair (timestamp %delayExpiry) (address %merchAddr)))) (pair (pair mutez (pair (mutez %merchFunding) (key %merchPk))) (pair (pair (address %pssigContract) (bytes %revLock)) (pair (int %selfDelay) (string %status))))
                COMPARE;    # int : pair (pair (pair string (pair address mutez)) (pair (pair (mutez %custFunding) (key %custPk)) (pair (timestamp %delayExpiry) (address %merchAddr)))) (pair (pair mutez (pair (mutez %merchFunding) (key %merchPk))) (pair (pair (address %pssigContract) (bytes %revLock)) (pair (int %selfDelay) (string %status))))
                EQ;         # bool : pair (pair (pair string (pair address mutez)) (pair (pair (mutez %custFunding) (key %custPk)) (pair (timestamp %delayExpiry) (address %merchAddr)))) (pair (pair mutez (pair (mutez %merchFunding) (key %merchPk))) (pair (pair (address %pssigContract) (bytes %revLock)) (pair (int %selfDelay) (string %status))))
                IF
                  {
                    DUP;        # pair (pair (pair string (pair address mutez)) (pair (pair (mutez %custFunding) (key %custPk)) (pair (timestamp %delayExpiry) (address %merchAddr)))) (pair (pair mutez (pair (mutez %merchFunding) (key %merchPk))) (pair (pair (address %pssigContract) (bytes %revLock)) (pair (int %selfDelay) (string %status)))) : pair (pair (pair string (pair address mutez)) (pair (pair (mutez %custFunding) (key %custPk)) (pair (timestamp %delayExpiry) (address %merchAddr)))) (pair (pair mutez (pair (mutez %merchFunding) (key %merchPk))) (pair (pair (address %pssigContract) (bytes %revLock)) (pair (int %selfDelay) (string %status))))
                    CDADAR;     # mutez : pair (pair (pair string (pair address mutez)) (pair (pair (mutez %custFunding) (key %custPk)) (pair (timestamp %delayExpiry) (address %merchAddr)))) (pair (pair mutez (pair (mutez %merchFunding) (key %merchPk))) (pair (pair (address %pssigContract) (bytes %revLock)) (pair (int %selfDelay) (string %status))))
                    SWAP;       # pair (pair (pair string (pair address mutez)) (pair (pair (mutez %custFunding) (key %custPk)) (pair (timestamp %delayExpiry) (address %merchAddr)))) (pair (pair mutez (pair (mutez %merchFunding) (key %merchPk))) (pair (pair (address %pssigContract) (bytes %revLock)) (pair (int %selfDelay) (string %status)))) : mutez
                    DUP;        # pair (pair (pair string (pair address mutez)) (pair (pair (mutez %custFunding) (key %custPk)) (pair (timestamp %delayExpiry) (address %merchAddr)))) (pair (pair mutez (pair (mutez %merchFunding) (key %merchPk))) (pair (pair (address %pssigContract) (bytes %revLock)) (pair (int %selfDelay) (string %status)))) : pair (pair (pair string (pair address mutez)) (pair (pair (mutez %custFunding) (key %custPk)) (pair (timestamp %delayExpiry) (address %merchAddr)))) (pair (pair mutez (pair (mutez %merchFunding) (key %merchPk))) (pair (pair (address %pssigContract) (bytes %revLock)) (pair (int %selfDelay) (string %status)))) : mutez
                    DUG 2;      # pair (pair (pair string (pair address mutez)) (pair (pair (mutez %custFunding) (key %custPk)) (pair (timestamp %delayExpiry) (address %merchAddr)))) (pair (pair mutez (pair (mutez %merchFunding) (key %merchPk))) (pair (pair (address %pssigContract) (bytes %revLock)) (pair (int %selfDelay) (string %status)))) : mutez : pair (pair (pair string (pair address mutez)) (pair (pair (mutez %custFunding) (key %custPk)) (pair (timestamp %delayExpiry) (address %merchAddr)))) (pair (pair mutez (pair (mutez %merchFunding) (key %merchPk))) (pair (pair (address %pssigContract) (bytes %revLock)) (pair (int %selfDelay) (string %status))))
                    CDAAR;      # mutez : mutez : pair (pair (pair string (pair address mutez)) (pair (pair (mutez %custFunding) (key %custPk)) (pair (timestamp %delayExpiry) (address %merchAddr)))) (pair (pair mutez (pair (mutez %merchFunding) (key %merchPk))) (pair (pair (address %pssigContract) (bytes %revLock)) (pair (int %selfDelay) (string %status))))
                    COMPARE;    # int : pair (pair (pair string (pair address mutez)) (pair (pair (mutez %custFunding) (key %custPk)) (pair (timestamp %delayExpiry) (address %merchAddr)))) (pair (pair mutez (pair (mutez %merchFunding) (key %merchPk))) (pair (pair (address %pssigContract) (bytes %revLock)) (pair (int %selfDelay) (string %status))))
                    EQ;         # bool : pair (pair (pair string (pair address mutez)) (pair (pair (mutez %custFunding) (key %custPk)) (pair (timestamp %delayExpiry) (address %merchAddr)))) (pair (pair mutez (pair (mutez %merchFunding) (key %merchPk))) (pair (pair (address %pssigContract) (bytes %revLock)) (pair (int %selfDelay) (string %status))))
                  }
                  {
                    PUSH bool False; # bool : pair (pair (pair string (pair address mutez)) (pair (pair (mutez %custFunding) (key %custPk)) (pair (timestamp %delayExpiry) (address %merchAddr)))) (pair (pair mutez (pair (mutez %merchFunding) (key %merchPk))) (pair (pair (address %pssigContract) (bytes %revLock)) (pair (int %selfDelay) (string %status))))
                  }; # bool : pair (pair (pair string (pair address mutez)) (pair (pair (mutez %custFunding) (key %custPk)) (pair (timestamp %delayExpiry) (address %merchAddr)))) (pair (pair mutez (pair (mutez %merchFunding) (key %merchPk))) (pair (pair (address %pssigContract) (bytes %revLock)) (pair (int %selfDelay) (string %status))))
                IF
                  {
                    # self.data.status = 'open' # pair (pair (pair string (pair address mutez)) (pair (pair (mutez %custFunding) (key %custPk)) (pair (timestamp %delayExpiry) (address %merchAddr)))) (pair (pair mutez (pair (mutez %merchFunding) (key %merchPk))) (pair (pair (address %pssigContract) (bytes %revLock)) (pair (int %selfDelay) (string %status))))
                    DUP;        # pair (pair (pair string (pair address mutez)) (pair (pair (mutez %custFunding) (key %custPk)) (pair (timestamp %delayExpiry) (address %merchAddr)))) (pair (pair mutez (pair (mutez %merchFunding) (key %merchPk))) (pair (pair (address %pssigContract) (bytes %revLock)) (pair (int %selfDelay) (string %status)))) : pair (pair (pair string (pair address mutez)) (pair (pair (mutez %custFunding) (key %custPk)) (pair (timestamp %delayExpiry) (address %merchAddr)))) (pair (pair mutez (pair (mutez %merchFunding) (key %merchPk))) (pair (pair (address %pssigContract) (bytes %revLock)) (pair (int %selfDelay) (string %status))))
                    CAR;        # pair (pair string (pair address mutez)) (pair (pair (mutez %custFunding) (key %custPk)) (pair (timestamp %delayExpiry) (address %merchAddr))) : pair (pair (pair string (pair address mutez)) (pair (pair (mutez %custFunding) (key %custPk)) (pair (timestamp %delayExpiry) (address %merchAddr)))) (pair (pair mutez (pair (mutez %merchFunding) (key %merchPk))) (pair (pair (address %pssigContract) (bytes %revLock)) (pair (int %selfDelay) (string %status))))
                    SWAP;       # pair (pair (pair string (pair address mutez)) (pair (pair (mutez %custFunding) (key %custPk)) (pair (timestamp %delayExpiry) (address %merchAddr)))) (pair (pair mutez (pair (mutez %merchFunding) (key %merchPk))) (pair (pair (address %pssigContract) (bytes %revLock)) (pair (int %selfDelay) (string %status)))) : pair (pair string (pair address mutez)) (pair (pair (mutez %custFunding) (key %custPk)) (pair (timestamp %delayExpiry) (address %merchAddr)))
                    CDR;        # pair (pair mutez (pair (mutez %merchFunding) (key %merchPk))) (pair (pair (address %pssigContract) (bytes %revLock)) (pair (int %selfDelay) (string %status))) : pair (pair string (pair address mutez)) (pair (pair (mutez %custFunding) (key %custPk)) (pair (timestamp %delayExpiry) (address %merchAddr)))
                    DUP;        # pair (pair mutez (pair (mutez %merchFunding) (key %merchPk))) (pair (pair (address %pssigContract) (bytes %revLock)) (pair (int %selfDelay) (string %status))) : pair (pair mutez (pair (mutez %merchFunding) (key %merchPk))) (pair (pair (address %pssigContract) (bytes %revLock)) (pair (int %selfDelay) (string %status))) : pair (pair string (pair address mutez)) (pair (pair (mutez %custFunding) (key %custPk)) (pair (timestamp %delayExpiry) (address %merchAddr)))
                    CAR;        # pair mutez (pair (mutez %merchFunding) (key %merchPk)) : pair (pair mutez (pair (mutez %merchFunding) (key %merchPk))) (pair (pair (address %pssigContract) (bytes %revLock)) (pair (int %selfDelay) (string %status))) : pair (pair string (pair address mutez)) (pair (pair (mutez %custFunding) (key %custPk)) (pair (timestamp %delayExpiry) (address %merchAddr)))
                    SWAP;       # pair (pair mutez (pair (mutez %merchFunding) (key %merchPk))) (pair (pair (address %pssigContract) (bytes %revLock)) (pair (int %selfDelay) (string %status))) : pair mutez (pair (mutez %merchFunding) (key %merchPk)) : pair (pair string (pair address mutez)) (pair (pair (mutez %custFunding) (key %custPk)) (pair (timestamp %delayExpiry) (address %merchAddr)))
                    CDR;        # pair (pair (address %pssigContract) (bytes %revLock)) (pair (int %selfDelay) (string %status)) : pair mutez (pair (mutez %merchFunding) (key %merchPk)) : pair (pair string (pair address mutez)) (pair (pair (mutez %custFunding) (key %custPk)) (pair (timestamp %delayExpiry) (address %merchAddr)))
                    DUP;        # pair (pair (address %pssigContract) (bytes %revLock)) (pair (int %selfDelay) (string %status)) : pair (pair (address %pssigContract) (bytes %revLock)) (pair (int %selfDelay) (string %status)) : pair mutez (pair (mutez %merchFunding) (key %merchPk)) : pair (pair string (pair address mutez)) (pair (pair (mutez %custFunding) (key %custPk)) (pair (timestamp %delayExpiry) (address %merchAddr)))
                    CAR;        # pair (address %pssigContract) (bytes %revLock) : pair (pair (address %pssigContract) (bytes %revLock)) (pair (int %selfDelay) (string %status)) : pair mutez (pair (mutez %merchFunding) (key %merchPk)) : pair (pair string (pair address mutez)) (pair (pair (mutez %custFunding) (key %custPk)) (pair (timestamp %delayExpiry) (address %merchAddr)))
                    SWAP;       # pair (pair (address %pssigContract) (bytes %revLock)) (pair (int %selfDelay) (string %status)) : pair (address %pssigContract) (bytes %revLock) : pair mutez (pair (mutez %merchFunding) (key %merchPk)) : pair (pair string (pair address mutez)) (pair (pair (mutez %custFunding) (key %custPk)) (pair (timestamp %delayExpiry) (address %merchAddr)))
                    CDAR;       # int : pair (address %pssigContract) (bytes %revLock) : pair mutez (pair (mutez %merchFunding) (key %merchPk)) : pair (pair string (pair address mutez)) (pair (pair (mutez %custFunding) (key %custPk)) (pair (timestamp %delayExpiry) (address %merchAddr)))
                    PUSH string "open"; # string : int : pair (address %pssigContract) (bytes %revLock) : pair mutez (pair (mutez %merchFunding) (key %merchPk)) : pair (pair string (pair address mutez)) (pair (pair (mutez %custFunding) (key %custPk)) (pair (timestamp %delayExpiry) (address %merchAddr)))
                    SWAP;       # int : string : pair (address %pssigContract) (bytes %revLock) : pair mutez (pair (mutez %merchFunding) (key %merchPk)) : pair (pair string (pair address mutez)) (pair (pair (mutez %custFunding) (key %custPk)) (pair (timestamp %delayExpiry) (address %merchAddr)))
                    PAIR;       # pair int string : pair (address %pssigContract) (bytes %revLock) : pair mutez (pair (mutez %merchFunding) (key %merchPk)) : pair (pair string (pair address mutez)) (pair (pair (mutez %custFunding) (key %custPk)) (pair (timestamp %delayExpiry) (address %merchAddr)))
                    SWAP;       # pair (address %pssigContract) (bytes %revLock) : pair int string : pair mutez (pair (mutez %merchFunding) (key %merchPk)) : pair (pair string (pair address mutez)) (pair (pair (mutez %custFunding) (key %custPk)) (pair (timestamp %delayExpiry) (address %merchAddr)))
                    PAIR;       # pair (pair (address %pssigContract) (bytes %revLock)) (pair int string) : pair mutez (pair (mutez %merchFunding) (key %merchPk)) : pair (pair string (pair address mutez)) (pair (pair (mutez %custFunding) (key %custPk)) (pair (timestamp %delayExpiry) (address %merchAddr)))
                    SWAP;       # pair mutez (pair (mutez %merchFunding) (key %merchPk)) : pair (pair (address %pssigContract) (bytes %revLock)) (pair int string) : pair (pair string (pair address mutez)) (pair (pair (mutez %custFunding) (key %custPk)) (pair (timestamp %delayExpiry) (address %merchAddr)))
                    PAIR;       # pair (pair mutez (pair (mutez %merchFunding) (key %merchPk))) (pair (pair (address %pssigContract) (bytes %revLock)) (pair int string)) : pair (pair string (pair address mutez)) (pair (pair (mutez %custFunding) (key %custPk)) (pair (timestamp %delayExpiry) (address %merchAddr)))
                    SWAP;       # pair (pair string (pair address mutez)) (pair (pair (mutez %custFunding) (key %custPk)) (pair (timestamp %delayExpiry) (address %merchAddr))) : pair (pair mutez (pair (mutez %merchFunding) (key %merchPk))) (pair (pair (address %pssigContract) (bytes %revLock)) (pair int string))
                    PAIR;       # pair (pair (pair string (pair address mutez)) (pair (pair (mutez %custFunding) (key %custPk)) (pair (timestamp %delayExpiry) (address %merchAddr)))) (pair (pair mutez (pair (mutez %merchFunding) (key %merchPk))) (pair (pair (address %pssigContract) (bytes %revLock)) (pair int string)))
                  }
                  {}; # pair (pair (pair string (pair address mutez)) (pair (pair (mutez %custFunding) (key %custPk)) (pair (timestamp %delayExpiry) (address %merchAddr)))) (pair (pair mutez (pair (mutez %merchFunding) (key %merchPk))) (pair (pair (address %pssigContract) (bytes %revLock)) (pair int string)))
                NIL operation; # list operation : pair (pair (pair string (pair address mutez)) (pair (pair (mutez %custFunding) (key %custPk)) (pair (timestamp %delayExpiry) (address %merchAddr)))) (pair (pair mutez (pair (mutez %merchFunding) (key %merchPk))) (pair (pair (address %pssigContract) (bytes %revLock)) (pair int string)))
              }
              {
                DROP;       # @storage
                # == custClaim ==
                # sp.verify(self.data.custAddr == sp.sender) # @storage
                DUP;        # @storage : @storage
                CAADAR;     # address : @storage
                SENDER;     # address : address : @storage
                COMPARE;    # int : @storage
                EQ;         # bool : @storage
                IF
                  {}
                  {
                    PUSH string "WrongCondition: self.data.custAddr == sp.sender"; # string : @storage
                    FAILWITH;   # FAILED
                  }; # @storage
                # sp.verify(self.data.status == 'custClose') # @storage
                DUP;        # @storage : @storage
                CDDDDR;     # string : @storage
                PUSH string "custClose"; # string : string : @storage
                COMPARE;    # int : @storage
                EQ;         # bool : @storage
                IF
                  {}
                  {
                    PUSH string "WrongCondition: self.data.status == 'custClose'"; # string : @storage
                    FAILWITH;   # FAILED
                  }; # @storage
                # sp.verify(self.data.delayExpiry < sp.now) # @storage
                DUP;        # @storage : @storage
                CADDAR;     # timestamp : @storage
                NOW;        # timestamp : timestamp : @storage
                COMPARE;    # int : @storage
                GT;         # bool : @storage
                IF
                  {}
                  {
                    PUSH string "WrongCondition: self.data.delayExpiry < sp.now"; # string : @storage
                    FAILWITH;   # FAILED
                  }; # @storage
                # sp.send(self.data.custAddr, self.data.custBal) # @storage
                DUP;        # @storage : @storage
                CAADAR;     # address : @storage
                CONTRACT unit; # option (contract unit) : @storage
                NIL operation; # list operation : option (contract unit) : @storage
                SWAP;       # option (contract unit) : list operation : @storage
                IF_SOME
                  {}
                  {
                    PUSH int 222; # int : list operation : @storage
                    FAILWITH;   # FAILED
                  }; # @some : list operation : @storage
                DIG 2;      # @storage : @some : list operation
                DUP;        # @storage : @storage : @some : list operation
                DUG 3;      # @storage : @some : list operation : @storage
                CAADDR;     # mutez : @some : list operation : @storage
                UNIT;       # unit : mutez : @some : list operation : @storage
                TRANSFER_TOKENS; # operation : list operation : @storage
                CONS;       # list operation : @storage
                SWAP;       # @storage : list operation
                # self.data.custBal = sp.tez(0) # @storage : list operation
                DUP;        # @storage : @storage : list operation
                CDR;        # pair (pair (mutez %merchBal) (pair (mutez %merchFunding) (key %merchPk))) (pair (pair (address %pssigContract) (bytes %revLock)) (pair (int %selfDelay) (string %status))) : @storage : list operation
                SWAP;       # @storage : pair (pair (mutez %merchBal) (pair (mutez %merchFunding) (key %merchPk))) (pair (pair (address %pssigContract) (bytes %revLock)) (pair (int %selfDelay) (string %status))) : list operation
                CAR;        # pair (pair (string %chanID) (pair (address %custAddr) (mutez %custBal))) (pair (pair (mutez %custFunding) (key %custPk)) (pair (timestamp %delayExpiry) (address %merchAddr))) : pair (pair (mutez %merchBal) (pair (mutez %merchFunding) (key %merchPk))) (pair (pair (address %pssigContract) (bytes %revLock)) (pair (int %selfDelay) (string %status))) : list operation
                DUP;        # pair (pair (string %chanID) (pair (address %custAddr) (mutez %custBal))) (pair (pair (mutez %custFunding) (key %custPk)) (pair (timestamp %delayExpiry) (address %merchAddr))) : pair (pair (string %chanID) (pair (address %custAddr) (mutez %custBal))) (pair (pair (mutez %custFunding) (key %custPk)) (pair (timestamp %delayExpiry) (address %merchAddr))) : pair (pair (mutez %merchBal) (pair (mutez %merchFunding) (key %merchPk))) (pair (pair (address %pssigContract) (bytes %revLock)) (pair (int %selfDelay) (string %status))) : list operation
                CDR;        # pair (pair (mutez %custFunding) (key %custPk)) (pair (timestamp %delayExpiry) (address %merchAddr)) : pair (pair (string %chanID) (pair (address %custAddr) (mutez %custBal))) (pair (pair (mutez %custFunding) (key %custPk)) (pair (timestamp %delayExpiry) (address %merchAddr))) : pair (pair (mutez %merchBal) (pair (mutez %merchFunding) (key %merchPk))) (pair (pair (address %pssigContract) (bytes %revLock)) (pair (int %selfDelay) (string %status))) : list operation
                SWAP;       # pair (pair (string %chanID) (pair (address %custAddr) (mutez %custBal))) (pair (pair (mutez %custFunding) (key %custPk)) (pair (timestamp %delayExpiry) (address %merchAddr))) : pair (pair (mutez %custFunding) (key %custPk)) (pair (timestamp %delayExpiry) (address %merchAddr)) : pair (pair (mutez %merchBal) (pair (mutez %merchFunding) (key %merchPk))) (pair (pair (address %pssigContract) (bytes %revLock)) (pair (int %selfDelay) (string %status))) : list operation
                CAR;        # pair (string %chanID) (pair (address %custAddr) (mutez %custBal)) : pair (pair (mutez %custFunding) (key %custPk)) (pair (timestamp %delayExpiry) (address %merchAddr)) : pair (pair (mutez %merchBal) (pair (mutez %merchFunding) (key %merchPk))) (pair (pair (address %pssigContract) (bytes %revLock)) (pair (int %selfDelay) (string %status))) : list operation
                DUP;        # pair (string %chanID) (pair (address %custAddr) (mutez %custBal)) : pair (string %chanID) (pair (address %custAddr) (mutez %custBal)) : pair (pair (mutez %custFunding) (key %custPk)) (pair (timestamp %delayExpiry) (address %merchAddr)) : pair (pair (mutez %merchBal) (pair (mutez %merchFunding) (key %merchPk))) (pair (pair (address %pssigContract) (bytes %revLock)) (pair (int %selfDelay) (string %status))) : list operation
                CAR;        # string : pair (string %chanID) (pair (address %custAddr) (mutez %custBal)) : pair (pair (mutez %custFunding) (key %custPk)) (pair (timestamp %delayExpiry) (address %merchAddr)) : pair (pair (mutez %merchBal) (pair (mutez %merchFunding) (key %merchPk))) (pair (pair (address %pssigContract) (bytes %revLock)) (pair (int %selfDelay) (string %status))) : list operation
                SWAP;       # pair (string %chanID) (pair (address %custAddr) (mutez %custBal)) : string : pair (pair (mutez %custFunding) (key %custPk)) (pair (timestamp %delayExpiry) (address %merchAddr)) : pair (pair (mutez %merchBal) (pair (mutez %merchFunding) (key %merchPk))) (pair (pair (address %pssigContract) (bytes %revLock)) (pair (int %selfDelay) (string %status))) : list operation
                CDAR;       # address : string : pair (pair (mutez %custFunding) (key %custPk)) (pair (timestamp %delayExpiry) (address %merchAddr)) : pair (pair (mutez %merchBal) (pair (mutez %merchFunding) (key %merchPk))) (pair (pair (address %pssigContract) (bytes %revLock)) (pair (int %selfDelay) (string %status))) : list operation
                PUSH mutez 0; # mutez : address : string : pair (pair (mutez %custFunding) (key %custPk)) (pair (timestamp %delayExpiry) (address %merchAddr)) : pair (pair (mutez %merchBal) (pair (mutez %merchFunding) (key %merchPk))) (pair (pair (address %pssigContract) (bytes %revLock)) (pair (int %selfDelay) (string %status))) : list operation
                SWAP;       # address : mutez : string : pair (pair (mutez %custFunding) (key %custPk)) (pair (timestamp %delayExpiry) (address %merchAddr)) : pair (pair (mutez %merchBal) (pair (mutez %merchFunding) (key %merchPk))) (pair (pair (address %pssigContract) (bytes %revLock)) (pair (int %selfDelay) (string %status))) : list operation
                PAIR;       # pair address mutez : string : pair (pair (mutez %custFunding) (key %custPk)) (pair (timestamp %delayExpiry) (address %merchAddr)) : pair (pair (mutez %merchBal) (pair (mutez %merchFunding) (key %merchPk))) (pair (pair (address %pssigContract) (bytes %revLock)) (pair (int %selfDelay) (string %status))) : list operation
                SWAP;       # string : pair address mutez : pair (pair (mutez %custFunding) (key %custPk)) (pair (timestamp %delayExpiry) (address %merchAddr)) : pair (pair (mutez %merchBal) (pair (mutez %merchFunding) (key %merchPk))) (pair (pair (address %pssigContract) (bytes %revLock)) (pair (int %selfDelay) (string %status))) : list operation
                PAIR;       # pair string (pair address mutez) : pair (pair (mutez %custFunding) (key %custPk)) (pair (timestamp %delayExpiry) (address %merchAddr)) : pair (pair (mutez %merchBal) (pair (mutez %merchFunding) (key %merchPk))) (pair (pair (address %pssigContract) (bytes %revLock)) (pair (int %selfDelay) (string %status))) : list operation
                PAIR;       # pair (pair string (pair address mutez)) (pair (pair (mutez %custFunding) (key %custPk)) (pair (timestamp %delayExpiry) (address %merchAddr))) : pair (pair (mutez %merchBal) (pair (mutez %merchFunding) (key %merchPk))) (pair (pair (address %pssigContract) (bytes %revLock)) (pair (int %selfDelay) (string %status))) : list operation
                PAIR;       # pair (pair (pair string (pair address mutez)) (pair (pair (mutez %custFunding) (key %custPk)) (pair (timestamp %delayExpiry) (address %merchAddr)))) (pair (pair (mutez %merchBal) (pair (mutez %merchFunding) (key %merchPk))) (pair (pair (address %pssigContract) (bytes %revLock)) (pair (int %selfDelay) (string %status)))) : list operation
                # self.data.status = 'closed' # pair (pair (pair string (pair address mutez)) (pair (pair (mutez %custFunding) (key %custPk)) (pair (timestamp %delayExpiry) (address %merchAddr)))) (pair (pair (mutez %merchBal) (pair (mutez %merchFunding) (key %merchPk))) (pair (pair (address %pssigContract) (bytes %revLock)) (pair (int %selfDelay) (string %status)))) : list operation
                DUP;        # pair (pair (pair string (pair address mutez)) (pair (pair (mutez %custFunding) (key %custPk)) (pair (timestamp %delayExpiry) (address %merchAddr)))) (pair (pair (mutez %merchBal) (pair (mutez %merchFunding) (key %merchPk))) (pair (pair (address %pssigContract) (bytes %revLock)) (pair (int %selfDelay) (string %status)))) : pair (pair (pair string (pair address mutez)) (pair (pair (mutez %custFunding) (key %custPk)) (pair (timestamp %delayExpiry) (address %merchAddr)))) (pair (pair (mutez %merchBal) (pair (mutez %merchFunding) (key %merchPk))) (pair (pair (address %pssigContract) (bytes %revLock)) (pair (int %selfDelay) (string %status)))) : list operation
                CAR;        # pair (pair string (pair address mutez)) (pair (pair (mutez %custFunding) (key %custPk)) (pair (timestamp %delayExpiry) (address %merchAddr))) : pair (pair (pair string (pair address mutez)) (pair (pair (mutez %custFunding) (key %custPk)) (pair (timestamp %delayExpiry) (address %merchAddr)))) (pair (pair (mutez %merchBal) (pair (mutez %merchFunding) (key %merchPk))) (pair (pair (address %pssigContract) (bytes %revLock)) (pair (int %selfDelay) (string %status)))) : list operation
                SWAP;       # pair (pair (pair string (pair address mutez)) (pair (pair (mutez %custFunding) (key %custPk)) (pair (timestamp %delayExpiry) (address %merchAddr)))) (pair (pair (mutez %merchBal) (pair (mutez %merchFunding) (key %merchPk))) (pair (pair (address %pssigContract) (bytes %revLock)) (pair (int %selfDelay) (string %status)))) : pair (pair string (pair address mutez)) (pair (pair (mutez %custFunding) (key %custPk)) (pair (timestamp %delayExpiry) (address %merchAddr))) : list operation
                CDR;        # pair (pair (mutez %merchBal) (pair (mutez %merchFunding) (key %merchPk))) (pair (pair (address %pssigContract) (bytes %revLock)) (pair (int %selfDelay) (string %status))) : pair (pair string (pair address mutez)) (pair (pair (mutez %custFunding) (key %custPk)) (pair (timestamp %delayExpiry) (address %merchAddr))) : list operation
                DUP;        # pair (pair (mutez %merchBal) (pair (mutez %merchFunding) (key %merchPk))) (pair (pair (address %pssigContract) (bytes %revLock)) (pair (int %selfDelay) (string %status))) : pair (pair (mutez %merchBal) (pair (mutez %merchFunding) (key %merchPk))) (pair (pair (address %pssigContract) (bytes %revLock)) (pair (int %selfDelay) (string %status))) : pair (pair string (pair address mutez)) (pair (pair (mutez %custFunding) (key %custPk)) (pair (timestamp %delayExpiry) (address %merchAddr))) : list operation
                CAR;        # pair (mutez %merchBal) (pair (mutez %merchFunding) (key %merchPk)) : pair (pair (mutez %merchBal) (pair (mutez %merchFunding) (key %merchPk))) (pair (pair (address %pssigContract) (bytes %revLock)) (pair (int %selfDelay) (string %status))) : pair (pair string (pair address mutez)) (pair (pair (mutez %custFunding) (key %custPk)) (pair (timestamp %delayExpiry) (address %merchAddr))) : list operation
                SWAP;       # pair (pair (mutez %merchBal) (pair (mutez %merchFunding) (key %merchPk))) (pair (pair (address %pssigContract) (bytes %revLock)) (pair (int %selfDelay) (string %status))) : pair (mutez %merchBal) (pair (mutez %merchFunding) (key %merchPk)) : pair (pair string (pair address mutez)) (pair (pair (mutez %custFunding) (key %custPk)) (pair (timestamp %delayExpiry) (address %merchAddr))) : list operation
                CDR;        # pair (pair (address %pssigContract) (bytes %revLock)) (pair (int %selfDelay) (string %status)) : pair (mutez %merchBal) (pair (mutez %merchFunding) (key %merchPk)) : pair (pair string (pair address mutez)) (pair (pair (mutez %custFunding) (key %custPk)) (pair (timestamp %delayExpiry) (address %merchAddr))) : list operation
                DUP;        # pair (pair (address %pssigContract) (bytes %revLock)) (pair (int %selfDelay) (string %status)) : pair (pair (address %pssigContract) (bytes %revLock)) (pair (int %selfDelay) (string %status)) : pair (mutez %merchBal) (pair (mutez %merchFunding) (key %merchPk)) : pair (pair string (pair address mutez)) (pair (pair (mutez %custFunding) (key %custPk)) (pair (timestamp %delayExpiry) (address %merchAddr))) : list operation
                CAR;        # pair (address %pssigContract) (bytes %revLock) : pair (pair (address %pssigContract) (bytes %revLock)) (pair (int %selfDelay) (string %status)) : pair (mutez %merchBal) (pair (mutez %merchFunding) (key %merchPk)) : pair (pair string (pair address mutez)) (pair (pair (mutez %custFunding) (key %custPk)) (pair (timestamp %delayExpiry) (address %merchAddr))) : list operation
                SWAP;       # pair (pair (address %pssigContract) (bytes %revLock)) (pair (int %selfDelay) (string %status)) : pair (address %pssigContract) (bytes %revLock) : pair (mutez %merchBal) (pair (mutez %merchFunding) (key %merchPk)) : pair (pair string (pair address mutez)) (pair (pair (mutez %custFunding) (key %custPk)) (pair (timestamp %delayExpiry) (address %merchAddr))) : list operation
                CDAR;       # int : pair (address %pssigContract) (bytes %revLock) : pair (mutez %merchBal) (pair (mutez %merchFunding) (key %merchPk)) : pair (pair string (pair address mutez)) (pair (pair (mutez %custFunding) (key %custPk)) (pair (timestamp %delayExpiry) (address %merchAddr))) : list operation
                PUSH string "closed"; # string : int : pair (address %pssigContract) (bytes %revLock) : pair (mutez %merchBal) (pair (mutez %merchFunding) (key %merchPk)) : pair (pair string (pair address mutez)) (pair (pair (mutez %custFunding) (key %custPk)) (pair (timestamp %delayExpiry) (address %merchAddr))) : list operation
                SWAP;       # int : string : pair (address %pssigContract) (bytes %revLock) : pair (mutez %merchBal) (pair (mutez %merchFunding) (key %merchPk)) : pair (pair string (pair address mutez)) (pair (pair (mutez %custFunding) (key %custPk)) (pair (timestamp %delayExpiry) (address %merchAddr))) : list operation
                PAIR;       # pair int string : pair (address %pssigContract) (bytes %revLock) : pair (mutez %merchBal) (pair (mutez %merchFunding) (key %merchPk)) : pair (pair string (pair address mutez)) (pair (pair (mutez %custFunding) (key %custPk)) (pair (timestamp %delayExpiry) (address %merchAddr))) : list operation
                SWAP;       # pair (address %pssigContract) (bytes %revLock) : pair int string : pair (mutez %merchBal) (pair (mutez %merchFunding) (key %merchPk)) : pair (pair string (pair address mutez)) (pair (pair (mutez %custFunding) (key %custPk)) (pair (timestamp %delayExpiry) (address %merchAddr))) : list operation
                PAIR;       # pair (pair (address %pssigContract) (bytes %revLock)) (pair int string) : pair (mutez %merchBal) (pair (mutez %merchFunding) (key %merchPk)) : pair (pair string (pair address mutez)) (pair (pair (mutez %custFunding) (key %custPk)) (pair (timestamp %delayExpiry) (address %merchAddr))) : list operation
                SWAP;       # pair (mutez %merchBal) (pair (mutez %merchFunding) (key %merchPk)) : pair (pair (address %pssigContract) (bytes %revLock)) (pair int string) : pair (pair string (pair address mutez)) (pair (pair (mutez %custFunding) (key %custPk)) (pair (timestamp %delayExpiry) (address %merchAddr))) : list operation
                PAIR;       # pair (pair (mutez %merchBal) (pair (mutez %merchFunding) (key %merchPk))) (pair (pair (address %pssigContract) (bytes %revLock)) (pair int string)) : pair (pair string (pair address mutez)) (pair (pair (mutez %custFunding) (key %custPk)) (pair (timestamp %delayExpiry) (address %merchAddr))) : list operation
                SWAP;       # pair (pair string (pair address mutez)) (pair (pair (mutez %custFunding) (key %custPk)) (pair (timestamp %delayExpiry) (address %merchAddr))) : pair (pair (mutez %merchBal) (pair (mutez %merchFunding) (key %merchPk))) (pair (pair (address %pssigContract) (bytes %revLock)) (pair int string)) : list operation
                PAIR;       # pair (pair (pair string (pair address mutez)) (pair (pair (mutez %custFunding) (key %custPk)) (pair (timestamp %delayExpiry) (address %merchAddr)))) (pair (pair (mutez %merchBal) (pair (mutez %merchFunding) (key %merchPk))) (pair (pair (address %pssigContract) (bytes %revLock)) (pair int string))) : list operation
                SWAP;       # list operation : pair (pair (pair string (pair address mutez)) (pair (pair (mutez %custFunding) (key %custPk)) (pair (timestamp %delayExpiry) (address %merchAddr)))) (pair (pair (mutez %merchBal) (pair (mutez %merchFunding) (key %merchPk))) (pair (pair (address %pssigContract) (bytes %revLock)) (pair int string)))
              }; # list operation : pair (pair (pair string (pair address mutez)) (pair (pair (mutez %custFunding) (key %custPk)) (pair (timestamp %delayExpiry) (address %merchAddr)))) (pair (pair mutez (pair (mutez %merchFunding) (key %merchPk))) (pair (pair (address %pssigContract) (bytes %revLock)) (pair int string)))
          }
          {
            IF_LEFT
              {
                # == custClose ==
                # sp.verify(self.data.custAddr == sp.sender) # @parameter%custClose : @storage
                SENDER;     # address : @parameter%custClose : @storage
                DIG 2;      # @storage : address : @parameter%custClose
                DUP;        # @storage : @storage : address : @parameter%custClose
                DUG 3;      # @storage : address : @parameter%custClose : @storage
                CAADAR;     # address : address : @parameter%custClose : @storage
                COMPARE;    # int : @parameter%custClose : @storage
                EQ;         # bool : @parameter%custClose : @storage
                IF
                  {}
                  {
                    PUSH string "WrongCondition: self.data.custAddr == sp.sender"; # string : @parameter%custClose : @storage
                    FAILWITH;   # FAILED
                  }; # @parameter%custClose : @storage
                # sp.verify((self.data.status == 'open') | (self.data.status == 'merchClose')) # @parameter%custClose : @storage
                PUSH string "open"; # string : @parameter%custClose : @storage
                DIG 2;      # @storage : string : @parameter%custClose
                DUP;        # @storage : @storage : string : @parameter%custClose
                DUG 3;      # @storage : string : @parameter%custClose : @storage
                CDDDDR;     # string : string : @parameter%custClose : @storage
                COMPARE;    # int : @parameter%custClose : @storage
                EQ;         # bool : @parameter%custClose : @storage
                IF
                  {
                    PUSH bool True; # bool : @parameter%custClose : @storage
                  }
                  {
                    PUSH string "merchClose"; # string : @parameter%custClose : @storage
                    DIG 2;      # @storage : string : @parameter%custClose
                    DUP;        # @storage : @storage : string : @parameter%custClose
                    DUG 3;      # @storage : string : @parameter%custClose : @storage
                    CDDDDR;     # string : string : @parameter%custClose : @storage
                    COMPARE;    # int : @parameter%custClose : @storage
                    EQ;         # bool : @parameter%custClose : @storage
                  }; # bool : @parameter%custClose : @storage
                IF
                  {}
                  {
                    PUSH string "WrongCondition: (self.data.status == 'open') | (self.data.status == 'merchClose')"; # string : @parameter%custClose : @storage
                    FAILWITH;   # FAILED
                  }; # @parameter%custClose : @storage
                SWAP;       # @storage : @parameter%custClose
                # sp.verify((params.newCustBal + params.newMerchBal) == (self.data.custBal + self.data.merchBal)) # @storage : @parameter%custClose
                DUP;        # @storage : @storage : @parameter%custClose
                CDAAR;      # mutez : @storage : @parameter%custClose
                SWAP;       # @storage : mutez : @parameter%custClose
                DUP;        # @storage : @storage : mutez : @parameter%custClose
                DUG 3;      # @storage : mutez : @parameter%custClose : @storage
                CAADDR;     # mutez : mutez : @parameter%custClose : @storage
                ADD;        # mutez : @parameter%custClose : @storage
                SWAP;       # @parameter%custClose : mutez : @storage
                DUP;        # @parameter%custClose : @parameter%custClose : mutez : @storage
                CDADDR;     # mutez : @parameter%custClose : mutez : @storage
                SWAP;       # @parameter%custClose : mutez : mutez : @storage
                DUP;        # @parameter%custClose : @parameter%custClose : mutez : mutez : @storage
                DUG 3;      # @parameter%custClose : mutez : mutez : @parameter%custClose : @storage
                CDADAR;     # mutez : mutez : mutez : @parameter%custClose : @storage
                ADD;        # mutez : mutez : @parameter%custClose : @storage
                COMPARE;    # int : @parameter%custClose : @storage
                EQ;         # bool : @parameter%custClose : @storage
                IF
                  {}
                  {
                    PUSH string "WrongCondition: (params.newCustBal + params.newMerchBal) == (self.data.custBal + self.data.merchBal)"; # string : @parameter%custClose : @storage
                    FAILWITH;   # FAILED
                  }; # @parameter%custClose : @storage
                # sp.verify(params.newCustBal >= sp.tez(0)) # @parameter%custClose : @storage
                DUP;        # @parameter%custClose : @parameter%custClose : @storage
                CDADAR;     # mutez : @parameter%custClose : @storage
                PUSH mutez 0; # mutez : mutez : @parameter%custClose : @storage
                SWAP;       # mutez : mutez : @parameter%custClose : @storage
                COMPARE;    # int : @parameter%custClose : @storage
                GE;         # bool : @parameter%custClose : @storage
                IF
                  {}
                  {
                    PUSH string "WrongCondition: params.newCustBal >= sp.tez(0)"; # string : @parameter%custClose : @storage
                    FAILWITH;   # FAILED
                  }; # @parameter%custClose : @storage
                # sp.verify(params.newMerchBal >= sp.tez(0)) # @parameter%custClose : @storage
                DUP;        # @parameter%custClose : @parameter%custClose : @storage
                CDADDR;     # mutez : @parameter%custClose : @storage
                PUSH mutez 0; # mutez : mutez : @parameter%custClose : @storage
                SWAP;       # mutez : mutez : @parameter%custClose : @storage
                COMPARE;    # int : @parameter%custClose : @storage
                GE;         # bool : @parameter%custClose : @storage
                IF
                  {}
                  {
                    PUSH string "WrongCondition: params.newMerchBal >= sp.tez(0)"; # string : @parameter%custClose : @storage
                    FAILWITH;   # FAILED
                  }; # @parameter%custClose : @storage
                SWAP;       # @storage : @parameter%custClose
                # self.data.custBal = params.newCustBal # @storage : @parameter%custClose
                DUP;        # @storage : @storage : @parameter%custClose
                CDR;        # pair (pair (mutez %merchBal) (pair (mutez %merchFunding) (key %merchPk))) (pair (pair (address %pssigContract) (bytes %revLock)) (pair (int %selfDelay) (string %status))) : @storage : @parameter%custClose
                SWAP;       # @storage : pair (pair (mutez %merchBal) (pair (mutez %merchFunding) (key %merchPk))) (pair (pair (address %pssigContract) (bytes %revLock)) (pair (int %selfDelay) (string %status))) : @parameter%custClose
                CAR;        # pair (pair (string %chanID) (pair (address %custAddr) (mutez %custBal))) (pair (pair (mutez %custFunding) (key %custPk)) (pair (timestamp %delayExpiry) (address %merchAddr))) : pair (pair (mutez %merchBal) (pair (mutez %merchFunding) (key %merchPk))) (pair (pair (address %pssigContract) (bytes %revLock)) (pair (int %selfDelay) (string %status))) : @parameter%custClose
                DUP;        # pair (pair (string %chanID) (pair (address %custAddr) (mutez %custBal))) (pair (pair (mutez %custFunding) (key %custPk)) (pair (timestamp %delayExpiry) (address %merchAddr))) : pair (pair (string %chanID) (pair (address %custAddr) (mutez %custBal))) (pair (pair (mutez %custFunding) (key %custPk)) (pair (timestamp %delayExpiry) (address %merchAddr))) : pair (pair (mutez %merchBal) (pair (mutez %merchFunding) (key %merchPk))) (pair (pair (address %pssigContract) (bytes %revLock)) (pair (int %selfDelay) (string %status))) : @parameter%custClose
                CDR;        # pair (pair (mutez %custFunding) (key %custPk)) (pair (timestamp %delayExpiry) (address %merchAddr)) : pair (pair (string %chanID) (pair (address %custAddr) (mutez %custBal))) (pair (pair (mutez %custFunding) (key %custPk)) (pair (timestamp %delayExpiry) (address %merchAddr))) : pair (pair (mutez %merchBal) (pair (mutez %merchFunding) (key %merchPk))) (pair (pair (address %pssigContract) (bytes %revLock)) (pair (int %selfDelay) (string %status))) : @parameter%custClose
                SWAP;       # pair (pair (string %chanID) (pair (address %custAddr) (mutez %custBal))) (pair (pair (mutez %custFunding) (key %custPk)) (pair (timestamp %delayExpiry) (address %merchAddr))) : pair (pair (mutez %custFunding) (key %custPk)) (pair (timestamp %delayExpiry) (address %merchAddr)) : pair (pair (mutez %merchBal) (pair (mutez %merchFunding) (key %merchPk))) (pair (pair (address %pssigContract) (bytes %revLock)) (pair (int %selfDelay) (string %status))) : @parameter%custClose
                CAR;        # pair (string %chanID) (pair (address %custAddr) (mutez %custBal)) : pair (pair (mutez %custFunding) (key %custPk)) (pair (timestamp %delayExpiry) (address %merchAddr)) : pair (pair (mutez %merchBal) (pair (mutez %merchFunding) (key %merchPk))) (pair (pair (address %pssigContract) (bytes %revLock)) (pair (int %selfDelay) (string %status))) : @parameter%custClose
                DUP;        # pair (string %chanID) (pair (address %custAddr) (mutez %custBal)) : pair (string %chanID) (pair (address %custAddr) (mutez %custBal)) : pair (pair (mutez %custFunding) (key %custPk)) (pair (timestamp %delayExpiry) (address %merchAddr)) : pair (pair (mutez %merchBal) (pair (mutez %merchFunding) (key %merchPk))) (pair (pair (address %pssigContract) (bytes %revLock)) (pair (int %selfDelay) (string %status))) : @parameter%custClose
                CAR;        # string : pair (string %chanID) (pair (address %custAddr) (mutez %custBal)) : pair (pair (mutez %custFunding) (key %custPk)) (pair (timestamp %delayExpiry) (address %merchAddr)) : pair (pair (mutez %merchBal) (pair (mutez %merchFunding) (key %merchPk))) (pair (pair (address %pssigContract) (bytes %revLock)) (pair (int %selfDelay) (string %status))) : @parameter%custClose
                SWAP;       # pair (string %chanID) (pair (address %custAddr) (mutez %custBal)) : string : pair (pair (mutez %custFunding) (key %custPk)) (pair (timestamp %delayExpiry) (address %merchAddr)) : pair (pair (mutez %merchBal) (pair (mutez %merchFunding) (key %merchPk))) (pair (pair (address %pssigContract) (bytes %revLock)) (pair (int %selfDelay) (string %status))) : @parameter%custClose
                CDAR;       # address : string : pair (pair (mutez %custFunding) (key %custPk)) (pair (timestamp %delayExpiry) (address %merchAddr)) : pair (pair (mutez %merchBal) (pair (mutez %merchFunding) (key %merchPk))) (pair (pair (address %pssigContract) (bytes %revLock)) (pair (int %selfDelay) (string %status))) : @parameter%custClose
                DIG 4;      # @parameter%custClose : address : string : pair (pair (mutez %custFunding) (key %custPk)) (pair (timestamp %delayExpiry) (address %merchAddr)) : pair (pair (mutez %merchBal) (pair (mutez %merchFunding) (key %merchPk))) (pair (pair (address %pssigContract) (bytes %revLock)) (pair (int %selfDelay) (string %status)))
                DUP;        # @parameter%custClose : @parameter%custClose : address : string : pair (pair (mutez %custFunding) (key %custPk)) (pair (timestamp %delayExpiry) (address %merchAddr)) : pair (pair (mutez %merchBal) (pair (mutez %merchFunding) (key %merchPk))) (pair (pair (address %pssigContract) (bytes %revLock)) (pair (int %selfDelay) (string %status)))
                DUG 5;      # @parameter%custClose : address : string : pair (pair (mutez %custFunding) (key %custPk)) (pair (timestamp %delayExpiry) (address %merchAddr)) : pair (pair (mutez %merchBal) (pair (mutez %merchFunding) (key %merchPk))) (pair (pair (address %pssigContract) (bytes %revLock)) (pair (int %selfDelay) (string %status))) : @parameter%custClose
                CDADAR;     # mutez : address : string : pair (pair (mutez %custFunding) (key %custPk)) (pair (timestamp %delayExpiry) (address %merchAddr)) : pair (pair (mutez %merchBal) (pair (mutez %merchFunding) (key %merchPk))) (pair (pair (address %pssigContract) (bytes %revLock)) (pair (int %selfDelay) (string %status))) : @parameter%custClose
                SWAP;       # address : mutez : string : pair (pair (mutez %custFunding) (key %custPk)) (pair (timestamp %delayExpiry) (address %merchAddr)) : pair (pair (mutez %merchBal) (pair (mutez %merchFunding) (key %merchPk))) (pair (pair (address %pssigContract) (bytes %revLock)) (pair (int %selfDelay) (string %status))) : @parameter%custClose
                PAIR;       # pair address mutez : string : pair (pair (mutez %custFunding) (key %custPk)) (pair (timestamp %delayExpiry) (address %merchAddr)) : pair (pair (mutez %merchBal) (pair (mutez %merchFunding) (key %merchPk))) (pair (pair (address %pssigContract) (bytes %revLock)) (pair (int %selfDelay) (string %status))) : @parameter%custClose
                SWAP;       # string : pair address mutez : pair (pair (mutez %custFunding) (key %custPk)) (pair (timestamp %delayExpiry) (address %merchAddr)) : pair (pair (mutez %merchBal) (pair (mutez %merchFunding) (key %merchPk))) (pair (pair (address %pssigContract) (bytes %revLock)) (pair (int %selfDelay) (string %status))) : @parameter%custClose
                PAIR;       # pair string (pair address mutez) : pair (pair (mutez %custFunding) (key %custPk)) (pair (timestamp %delayExpiry) (address %merchAddr)) : pair (pair (mutez %merchBal) (pair (mutez %merchFunding) (key %merchPk))) (pair (pair (address %pssigContract) (bytes %revLock)) (pair (int %selfDelay) (string %status))) : @parameter%custClose
                PAIR;       # pair (pair string (pair address mutez)) (pair (pair (mutez %custFunding) (key %custPk)) (pair (timestamp %delayExpiry) (address %merchAddr))) : pair (pair (mutez %merchBal) (pair (mutez %merchFunding) (key %merchPk))) (pair (pair (address %pssigContract) (bytes %revLock)) (pair (int %selfDelay) (string %status))) : @parameter%custClose
                PAIR;       # pair (pair (pair string (pair address mutez)) (pair (pair (mutez %custFunding) (key %custPk)) (pair (timestamp %delayExpiry) (address %merchAddr)))) (pair (pair (mutez %merchBal) (pair (mutez %merchFunding) (key %merchPk))) (pair (pair (address %pssigContract) (bytes %revLock)) (pair (int %selfDelay) (string %status)))) : @parameter%custClose
                # self.data.merchBal = params.newMerchBal # pair (pair (pair string (pair address mutez)) (pair (pair (mutez %custFunding) (key %custPk)) (pair (timestamp %delayExpiry) (address %merchAddr)))) (pair (pair (mutez %merchBal) (pair (mutez %merchFunding) (key %merchPk))) (pair (pair (address %pssigContract) (bytes %revLock)) (pair (int %selfDelay) (string %status)))) : @parameter%custClose
                DUP;        # pair (pair (pair string (pair address mutez)) (pair (pair (mutez %custFunding) (key %custPk)) (pair (timestamp %delayExpiry) (address %merchAddr)))) (pair (pair (mutez %merchBal) (pair (mutez %merchFunding) (key %merchPk))) (pair (pair (address %pssigContract) (bytes %revLock)) (pair (int %selfDelay) (string %status)))) : pair (pair (pair string (pair address mutez)) (pair (pair (mutez %custFunding) (key %custPk)) (pair (timestamp %delayExpiry) (address %merchAddr)))) (pair (pair (mutez %merchBal) (pair (mutez %merchFunding) (key %merchPk))) (pair (pair (address %pssigContract) (bytes %revLock)) (pair (int %selfDelay) (string %status)))) : @parameter%custClose
                CAR;        # pair (pair string (pair address mutez)) (pair (pair (mutez %custFunding) (key %custPk)) (pair (timestamp %delayExpiry) (address %merchAddr))) : pair (pair (pair string (pair address mutez)) (pair (pair (mutez %custFunding) (key %custPk)) (pair (timestamp %delayExpiry) (address %merchAddr)))) (pair (pair (mutez %merchBal) (pair (mutez %merchFunding) (key %merchPk))) (pair (pair (address %pssigContract) (bytes %revLock)) (pair (int %selfDelay) (string %status)))) : @parameter%custClose
                SWAP;       # pair (pair (pair string (pair address mutez)) (pair (pair (mutez %custFunding) (key %custPk)) (pair (timestamp %delayExpiry) (address %merchAddr)))) (pair (pair (mutez %merchBal) (pair (mutez %merchFunding) (key %merchPk))) (pair (pair (address %pssigContract) (bytes %revLock)) (pair (int %selfDelay) (string %status)))) : pair (pair string (pair address mutez)) (pair (pair (mutez %custFunding) (key %custPk)) (pair (timestamp %delayExpiry) (address %merchAddr))) : @parameter%custClose
                CDR;        # pair (pair (mutez %merchBal) (pair (mutez %merchFunding) (key %merchPk))) (pair (pair (address %pssigContract) (bytes %revLock)) (pair (int %selfDelay) (string %status))) : pair (pair string (pair address mutez)) (pair (pair (mutez %custFunding) (key %custPk)) (pair (timestamp %delayExpiry) (address %merchAddr))) : @parameter%custClose
                DUP;        # pair (pair (mutez %merchBal) (pair (mutez %merchFunding) (key %merchPk))) (pair (pair (address %pssigContract) (bytes %revLock)) (pair (int %selfDelay) (string %status))) : pair (pair (mutez %merchBal) (pair (mutez %merchFunding) (key %merchPk))) (pair (pair (address %pssigContract) (bytes %revLock)) (pair (int %selfDelay) (string %status))) : pair (pair string (pair address mutez)) (pair (pair (mutez %custFunding) (key %custPk)) (pair (timestamp %delayExpiry) (address %merchAddr))) : @parameter%custClose
                CDR;        # pair (pair (address %pssigContract) (bytes %revLock)) (pair (int %selfDelay) (string %status)) : pair (pair (mutez %merchBal) (pair (mutez %merchFunding) (key %merchPk))) (pair (pair (address %pssigContract) (bytes %revLock)) (pair (int %selfDelay) (string %status))) : pair (pair string (pair address mutez)) (pair (pair (mutez %custFunding) (key %custPk)) (pair (timestamp %delayExpiry) (address %merchAddr))) : @parameter%custClose
                SWAP;       # pair (pair (mutez %merchBal) (pair (mutez %merchFunding) (key %merchPk))) (pair (pair (address %pssigContract) (bytes %revLock)) (pair (int %selfDelay) (string %status))) : pair (pair (address %pssigContract) (bytes %revLock)) (pair (int %selfDelay) (string %status)) : pair (pair string (pair address mutez)) (pair (pair (mutez %custFunding) (key %custPk)) (pair (timestamp %delayExpiry) (address %merchAddr))) : @parameter%custClose
                CADR;       # pair (mutez %merchFunding) (key %merchPk) : pair (pair (address %pssigContract) (bytes %revLock)) (pair (int %selfDelay) (string %status)) : pair (pair string (pair address mutez)) (pair (pair (mutez %custFunding) (key %custPk)) (pair (timestamp %delayExpiry) (address %merchAddr))) : @parameter%custClose
                DIG 3;      # @parameter%custClose : pair (mutez %merchFunding) (key %merchPk) : pair (pair (address %pssigContract) (bytes %revLock)) (pair (int %selfDelay) (string %status)) : pair (pair string (pair address mutez)) (pair (pair (mutez %custFunding) (key %custPk)) (pair (timestamp %delayExpiry) (address %merchAddr)))
                DUP;        # @parameter%custClose : @parameter%custClose : pair (mutez %merchFunding) (key %merchPk) : pair (pair (address %pssigContract) (bytes %revLock)) (pair (int %selfDelay) (string %status)) : pair (pair string (pair address mutez)) (pair (pair (mutez %custFunding) (key %custPk)) (pair (timestamp %delayExpiry) (address %merchAddr)))
                DUG 4;      # @parameter%custClose : pair (mutez %merchFunding) (key %merchPk) : pair (pair (address %pssigContract) (bytes %revLock)) (pair (int %selfDelay) (string %status)) : pair (pair string (pair address mutez)) (pair (pair (mutez %custFunding) (key %custPk)) (pair (timestamp %delayExpiry) (address %merchAddr))) : @parameter%custClose
                CDADDR;     # mutez : pair (mutez %merchFunding) (key %merchPk) : pair (pair (address %pssigContract) (bytes %revLock)) (pair (int %selfDelay) (string %status)) : pair (pair string (pair address mutez)) (pair (pair (mutez %custFunding) (key %custPk)) (pair (timestamp %delayExpiry) (address %merchAddr))) : @parameter%custClose
                PAIR;       # pair mutez (pair (mutez %merchFunding) (key %merchPk)) : pair (pair (address %pssigContract) (bytes %revLock)) (pair (int %selfDelay) (string %status)) : pair (pair string (pair address mutez)) (pair (pair (mutez %custFunding) (key %custPk)) (pair (timestamp %delayExpiry) (address %merchAddr))) : @parameter%custClose
                PAIR;       # pair (pair mutez (pair (mutez %merchFunding) (key %merchPk))) (pair (pair (address %pssigContract) (bytes %revLock)) (pair (int %selfDelay) (string %status))) : pair (pair string (pair address mutez)) (pair (pair (mutez %custFunding) (key %custPk)) (pair (timestamp %delayExpiry) (address %merchAddr))) : @parameter%custClose
                SWAP;       # pair (pair string (pair address mutez)) (pair (pair (mutez %custFunding) (key %custPk)) (pair (timestamp %delayExpiry) (address %merchAddr))) : pair (pair mutez (pair (mutez %merchFunding) (key %merchPk))) (pair (pair (address %pssigContract) (bytes %revLock)) (pair (int %selfDelay) (string %status))) : @parameter%custClose
                PAIR;       # pair (pair (pair string (pair address mutez)) (pair (pair (mutez %custFunding) (key %custPk)) (pair (timestamp %delayExpiry) (address %merchAddr)))) (pair (pair mutez (pair (mutez %merchFunding) (key %merchPk))) (pair (pair (address %pssigContract) (bytes %revLock)) (pair (int %selfDelay) (string %status)))) : @parameter%custClose
                # self.data.revLock = params.revLock # pair (pair (pair string (pair address mutez)) (pair (pair (mutez %custFunding) (key %custPk)) (pair (timestamp %delayExpiry) (address %merchAddr)))) (pair (pair mutez (pair (mutez %merchFunding) (key %merchPk))) (pair (pair (address %pssigContract) (bytes %revLock)) (pair (int %selfDelay) (string %status)))) : @parameter%custClose
                DUP;        # pair (pair (pair string (pair address mutez)) (pair (pair (mutez %custFunding) (key %custPk)) (pair (timestamp %delayExpiry) (address %merchAddr)))) (pair (pair mutez (pair (mutez %merchFunding) (key %merchPk))) (pair (pair (address %pssigContract) (bytes %revLock)) (pair (int %selfDelay) (string %status)))) : pair (pair (pair string (pair address mutez)) (pair (pair (mutez %custFunding) (key %custPk)) (pair (timestamp %delayExpiry) (address %merchAddr)))) (pair (pair mutez (pair (mutez %merchFunding) (key %merchPk))) (pair (pair (address %pssigContract) (bytes %revLock)) (pair (int %selfDelay) (string %status)))) : @parameter%custClose
                CAR;        # pair (pair string (pair address mutez)) (pair (pair (mutez %custFunding) (key %custPk)) (pair (timestamp %delayExpiry) (address %merchAddr))) : pair (pair (pair string (pair address mutez)) (pair (pair (mutez %custFunding) (key %custPk)) (pair (timestamp %delayExpiry) (address %merchAddr)))) (pair (pair mutez (pair (mutez %merchFunding) (key %merchPk))) (pair (pair (address %pssigContract) (bytes %revLock)) (pair (int %selfDelay) (string %status)))) : @parameter%custClose
                SWAP;       # pair (pair (pair string (pair address mutez)) (pair (pair (mutez %custFunding) (key %custPk)) (pair (timestamp %delayExpiry) (address %merchAddr)))) (pair (pair mutez (pair (mutez %merchFunding) (key %merchPk))) (pair (pair (address %pssigContract) (bytes %revLock)) (pair (int %selfDelay) (string %status)))) : pair (pair string (pair address mutez)) (pair (pair (mutez %custFunding) (key %custPk)) (pair (timestamp %delayExpiry) (address %merchAddr))) : @parameter%custClose
                CDR;        # pair (pair mutez (pair (mutez %merchFunding) (key %merchPk))) (pair (pair (address %pssigContract) (bytes %revLock)) (pair (int %selfDelay) (string %status))) : pair (pair string (pair address mutez)) (pair (pair (mutez %custFunding) (key %custPk)) (pair (timestamp %delayExpiry) (address %merchAddr))) : @parameter%custClose
                DUP;        # pair (pair mutez (pair (mutez %merchFunding) (key %merchPk))) (pair (pair (address %pssigContract) (bytes %revLock)) (pair (int %selfDelay) (string %status))) : pair (pair mutez (pair (mutez %merchFunding) (key %merchPk))) (pair (pair (address %pssigContract) (bytes %revLock)) (pair (int %selfDelay) (string %status))) : pair (pair string (pair address mutez)) (pair (pair (mutez %custFunding) (key %custPk)) (pair (timestamp %delayExpiry) (address %merchAddr))) : @parameter%custClose
                CAR;        # pair mutez (pair (mutez %merchFunding) (key %merchPk)) : pair (pair mutez (pair (mutez %merchFunding) (key %merchPk))) (pair (pair (address %pssigContract) (bytes %revLock)) (pair (int %selfDelay) (string %status))) : pair (pair string (pair address mutez)) (pair (pair (mutez %custFunding) (key %custPk)) (pair (timestamp %delayExpiry) (address %merchAddr))) : @parameter%custClose
                SWAP;       # pair (pair mutez (pair (mutez %merchFunding) (key %merchPk))) (pair (pair (address %pssigContract) (bytes %revLock)) (pair (int %selfDelay) (string %status))) : pair mutez (pair (mutez %merchFunding) (key %merchPk)) : pair (pair string (pair address mutez)) (pair (pair (mutez %custFunding) (key %custPk)) (pair (timestamp %delayExpiry) (address %merchAddr))) : @parameter%custClose
                CDR;        # pair (pair (address %pssigContract) (bytes %revLock)) (pair (int %selfDelay) (string %status)) : pair mutez (pair (mutez %merchFunding) (key %merchPk)) : pair (pair string (pair address mutez)) (pair (pair (mutez %custFunding) (key %custPk)) (pair (timestamp %delayExpiry) (address %merchAddr))) : @parameter%custClose
                DUP;        # pair (pair (address %pssigContract) (bytes %revLock)) (pair (int %selfDelay) (string %status)) : pair (pair (address %pssigContract) (bytes %revLock)) (pair (int %selfDelay) (string %status)) : pair mutez (pair (mutez %merchFunding) (key %merchPk)) : pair (pair string (pair address mutez)) (pair (pair (mutez %custFunding) (key %custPk)) (pair (timestamp %delayExpiry) (address %merchAddr))) : @parameter%custClose
                CDR;        # pair (int %selfDelay) (string %status) : pair (pair (address %pssigContract) (bytes %revLock)) (pair (int %selfDelay) (string %status)) : pair mutez (pair (mutez %merchFunding) (key %merchPk)) : pair (pair string (pair address mutez)) (pair (pair (mutez %custFunding) (key %custPk)) (pair (timestamp %delayExpiry) (address %merchAddr))) : @parameter%custClose
                SWAP;       # pair (pair (address %pssigContract) (bytes %revLock)) (pair (int %selfDelay) (string %status)) : pair (int %selfDelay) (string %status) : pair mutez (pair (mutez %merchFunding) (key %merchPk)) : pair (pair string (pair address mutez)) (pair (pair (mutez %custFunding) (key %custPk)) (pair (timestamp %delayExpiry) (address %merchAddr))) : @parameter%custClose
                CAAR;       # address : pair (int %selfDelay) (string %status) : pair mutez (pair (mutez %merchFunding) (key %merchPk)) : pair (pair string (pair address mutez)) (pair (pair (mutez %custFunding) (key %custPk)) (pair (timestamp %delayExpiry) (address %merchAddr))) : @parameter%custClose
                DIG 4;      # @parameter%custClose : address : pair (int %selfDelay) (string %status) : pair mutez (pair (mutez %merchFunding) (key %merchPk)) : pair (pair string (pair address mutez)) (pair (pair (mutez %custFunding) (key %custPk)) (pair (timestamp %delayExpiry) (address %merchAddr)))
                DUP;        # @parameter%custClose : @parameter%custClose : address : pair (int %selfDelay) (string %status) : pair mutez (pair (mutez %merchFunding) (key %merchPk)) : pair (pair string (pair address mutez)) (pair (pair (mutez %custFunding) (key %custPk)) (pair (timestamp %delayExpiry) (address %merchAddr)))
                DUG 5;      # @parameter%custClose : address : pair (int %selfDelay) (string %status) : pair mutez (pair (mutez %merchFunding) (key %merchPk)) : pair (pair string (pair address mutez)) (pair (pair (mutez %custFunding) (key %custPk)) (pair (timestamp %delayExpiry) (address %merchAddr))) : @parameter%custClose
                CDDAR;      # bytes : address : pair (int %selfDelay) (string %status) : pair mutez (pair (mutez %merchFunding) (key %merchPk)) : pair (pair string (pair address mutez)) (pair (pair (mutez %custFunding) (key %custPk)) (pair (timestamp %delayExpiry) (address %merchAddr))) : @parameter%custClose
                SWAP;       # address : bytes : pair (int %selfDelay) (string %status) : pair mutez (pair (mutez %merchFunding) (key %merchPk)) : pair (pair string (pair address mutez)) (pair (pair (mutez %custFunding) (key %custPk)) (pair (timestamp %delayExpiry) (address %merchAddr))) : @parameter%custClose
                PAIR;       # pair address bytes : pair (int %selfDelay) (string %status) : pair mutez (pair (mutez %merchFunding) (key %merchPk)) : pair (pair string (pair address mutez)) (pair (pair (mutez %custFunding) (key %custPk)) (pair (timestamp %delayExpiry) (address %merchAddr))) : @parameter%custClose
                PAIR;       # pair (pair address bytes) (pair (int %selfDelay) (string %status)) : pair mutez (pair (mutez %merchFunding) (key %merchPk)) : pair (pair string (pair address mutez)) (pair (pair (mutez %custFunding) (key %custPk)) (pair (timestamp %delayExpiry) (address %merchAddr))) : @parameter%custClose
                SWAP;       # pair mutez (pair (mutez %merchFunding) (key %merchPk)) : pair (pair address bytes) (pair (int %selfDelay) (string %status)) : pair (pair string (pair address mutez)) (pair (pair (mutez %custFunding) (key %custPk)) (pair (timestamp %delayExpiry) (address %merchAddr))) : @parameter%custClose
                PAIR;       # pair (pair mutez (pair (mutez %merchFunding) (key %merchPk))) (pair (pair address bytes) (pair (int %selfDelay) (string %status))) : pair (pair string (pair address mutez)) (pair (pair (mutez %custFunding) (key %custPk)) (pair (timestamp %delayExpiry) (address %merchAddr))) : @parameter%custClose
                SWAP;       # pair (pair string (pair address mutez)) (pair (pair (mutez %custFunding) (key %custPk)) (pair (timestamp %delayExpiry) (address %merchAddr))) : pair (pair mutez (pair (mutez %merchFunding) (key %merchPk))) (pair (pair address bytes) (pair (int %selfDelay) (string %status))) : @parameter%custClose
                PAIR;       # pair (pair (pair string (pair address mutez)) (pair (pair (mutez %custFunding) (key %custPk)) (pair (timestamp %delayExpiry) (address %merchAddr)))) (pair (pair mutez (pair (mutez %merchFunding) (key %merchPk))) (pair (pair address bytes) (pair (int %selfDelay) (string %status)))) : @parameter%custClose
                # self.data.status = 'checkingSig' # pair (pair (pair string (pair address mutez)) (pair (pair (mutez %custFunding) (key %custPk)) (pair (timestamp %delayExpiry) (address %merchAddr)))) (pair (pair mutez (pair (mutez %merchFunding) (key %merchPk))) (pair (pair address bytes) (pair (int %selfDelay) (string %status)))) : @parameter%custClose
                DUP;        # pair (pair (pair string (pair address mutez)) (pair (pair (mutez %custFunding) (key %custPk)) (pair (timestamp %delayExpiry) (address %merchAddr)))) (pair (pair mutez (pair (mutez %merchFunding) (key %merchPk))) (pair (pair address bytes) (pair (int %selfDelay) (string %status)))) : pair (pair (pair string (pair address mutez)) (pair (pair (mutez %custFunding) (key %custPk)) (pair (timestamp %delayExpiry) (address %merchAddr)))) (pair (pair mutez (pair (mutez %merchFunding) (key %merchPk))) (pair (pair address bytes) (pair (int %selfDelay) (string %status)))) : @parameter%custClose
                CAR;        # pair (pair string (pair address mutez)) (pair (pair (mutez %custFunding) (key %custPk)) (pair (timestamp %delayExpiry) (address %merchAddr))) : pair (pair (pair string (pair address mutez)) (pair (pair (mutez %custFunding) (key %custPk)) (pair (timestamp %delayExpiry) (address %merchAddr)))) (pair (pair mutez (pair (mutez %merchFunding) (key %merchPk))) (pair (pair address bytes) (pair (int %selfDelay) (string %status)))) : @parameter%custClose
                SWAP;       # pair (pair (pair string (pair address mutez)) (pair (pair (mutez %custFunding) (key %custPk)) (pair (timestamp %delayExpiry) (address %merchAddr)))) (pair (pair mutez (pair (mutez %merchFunding) (key %merchPk))) (pair (pair address bytes) (pair (int %selfDelay) (string %status)))) : pair (pair string (pair address mutez)) (pair (pair (mutez %custFunding) (key %custPk)) (pair (timestamp %delayExpiry) (address %merchAddr))) : @parameter%custClose
                CDR;        # pair (pair mutez (pair (mutez %merchFunding) (key %merchPk))) (pair (pair address bytes) (pair (int %selfDelay) (string %status))) : pair (pair string (pair address mutez)) (pair (pair (mutez %custFunding) (key %custPk)) (pair (timestamp %delayExpiry) (address %merchAddr))) : @parameter%custClose
                DUP;        # pair (pair mutez (pair (mutez %merchFunding) (key %merchPk))) (pair (pair address bytes) (pair (int %selfDelay) (string %status))) : pair (pair mutez (pair (mutez %merchFunding) (key %merchPk))) (pair (pair address bytes) (pair (int %selfDelay) (string %status))) : pair (pair string (pair address mutez)) (pair (pair (mutez %custFunding) (key %custPk)) (pair (timestamp %delayExpiry) (address %merchAddr))) : @parameter%custClose
                CAR;        # pair mutez (pair (mutez %merchFunding) (key %merchPk)) : pair (pair mutez (pair (mutez %merchFunding) (key %merchPk))) (pair (pair address bytes) (pair (int %selfDelay) (string %status))) : pair (pair string (pair address mutez)) (pair (pair (mutez %custFunding) (key %custPk)) (pair (timestamp %delayExpiry) (address %merchAddr))) : @parameter%custClose
                SWAP;       # pair (pair mutez (pair (mutez %merchFunding) (key %merchPk))) (pair (pair address bytes) (pair (int %selfDelay) (string %status))) : pair mutez (pair (mutez %merchFunding) (key %merchPk)) : pair (pair string (pair address mutez)) (pair (pair (mutez %custFunding) (key %custPk)) (pair (timestamp %delayExpiry) (address %merchAddr))) : @parameter%custClose
                CDR;        # pair (pair address bytes) (pair (int %selfDelay) (string %status)) : pair mutez (pair (mutez %merchFunding) (key %merchPk)) : pair (pair string (pair address mutez)) (pair (pair (mutez %custFunding) (key %custPk)) (pair (timestamp %delayExpiry) (address %merchAddr))) : @parameter%custClose
                DUP;        # pair (pair address bytes) (pair (int %selfDelay) (string %status)) : pair (pair address bytes) (pair (int %selfDelay) (string %status)) : pair mutez (pair (mutez %merchFunding) (key %merchPk)) : pair (pair string (pair address mutez)) (pair (pair (mutez %custFunding) (key %custPk)) (pair (timestamp %delayExpiry) (address %merchAddr))) : @parameter%custClose
                CAR;        # pair address bytes : pair (pair address bytes) (pair (int %selfDelay) (string %status)) : pair mutez (pair (mutez %merchFunding) (key %merchPk)) : pair (pair string (pair address mutez)) (pair (pair (mutez %custFunding) (key %custPk)) (pair (timestamp %delayExpiry) (address %merchAddr))) : @parameter%custClose
                SWAP;       # pair (pair address bytes) (pair (int %selfDelay) (string %status)) : pair address bytes : pair mutez (pair (mutez %merchFunding) (key %merchPk)) : pair (pair string (pair address mutez)) (pair (pair (mutez %custFunding) (key %custPk)) (pair (timestamp %delayExpiry) (address %merchAddr))) : @parameter%custClose
                CDAR;       # int : pair address bytes : pair mutez (pair (mutez %merchFunding) (key %merchPk)) : pair (pair string (pair address mutez)) (pair (pair (mutez %custFunding) (key %custPk)) (pair (timestamp %delayExpiry) (address %merchAddr))) : @parameter%custClose
                PUSH string "checkingSig"; # string : int : pair address bytes : pair mutez (pair (mutez %merchFunding) (key %merchPk)) : pair (pair string (pair address mutez)) (pair (pair (mutez %custFunding) (key %custPk)) (pair (timestamp %delayExpiry) (address %merchAddr))) : @parameter%custClose
                SWAP;       # int : string : pair address bytes : pair mutez (pair (mutez %merchFunding) (key %merchPk)) : pair (pair string (pair address mutez)) (pair (pair (mutez %custFunding) (key %custPk)) (pair (timestamp %delayExpiry) (address %merchAddr))) : @parameter%custClose
                PAIR;       # pair int string : pair address bytes : pair mutez (pair (mutez %merchFunding) (key %merchPk)) : pair (pair string (pair address mutez)) (pair (pair (mutez %custFunding) (key %custPk)) (pair (timestamp %delayExpiry) (address %merchAddr))) : @parameter%custClose
                SWAP;       # pair address bytes : pair int string : pair mutez (pair (mutez %merchFunding) (key %merchPk)) : pair (pair string (pair address mutez)) (pair (pair (mutez %custFunding) (key %custPk)) (pair (timestamp %delayExpiry) (address %merchAddr))) : @parameter%custClose
                PAIR;       # pair (pair address bytes) (pair int string) : pair mutez (pair (mutez %merchFunding) (key %merchPk)) : pair (pair string (pair address mutez)) (pair (pair (mutez %custFunding) (key %custPk)) (pair (timestamp %delayExpiry) (address %merchAddr))) : @parameter%custClose
                SWAP;       # pair mutez (pair (mutez %merchFunding) (key %merchPk)) : pair (pair address bytes) (pair int string) : pair (pair string (pair address mutez)) (pair (pair (mutez %custFunding) (key %custPk)) (pair (timestamp %delayExpiry) (address %merchAddr))) : @parameter%custClose
                PAIR;       # pair (pair mutez (pair (mutez %merchFunding) (key %merchPk))) (pair (pair address bytes) (pair int string)) : pair (pair string (pair address mutez)) (pair (pair (mutez %custFunding) (key %custPk)) (pair (timestamp %delayExpiry) (address %merchAddr))) : @parameter%custClose
                SWAP;       # pair (pair string (pair address mutez)) (pair (pair (mutez %custFunding) (key %custPk)) (pair (timestamp %delayExpiry) (address %merchAddr))) : pair (pair mutez (pair (mutez %merchFunding) (key %merchPk))) (pair (pair address bytes) (pair int string)) : @parameter%custClose
                PAIR;       # pair (pair (pair string (pair address mutez)) (pair (pair (mutez %custFunding) (key %custPk)) (pair (timestamp %delayExpiry) (address %merchAddr)))) (pair (pair mutez (pair (mutez %merchFunding) (key %merchPk))) (pair (pair address bytes) (pair int string))) : @parameter%custClose
                SWAP;       # @parameter%custClose : pair (pair (pair string (pair address mutez)) (pair (pair (mutez %custFunding) (key %custPk)) (pair (timestamp %delayExpiry) (address %merchAddr)))) (pair (pair mutez (pair (mutez %merchFunding) (key %merchPk))) (pair (pair address bytes) (pair int string)))
                # sp.transfer(sp.record(chanID = self.data.chanID, custBal = params.newCustBal, g2 = params.g2, k = sp.self_entry_point('receiveCall'), merchBal = params.newMerchBal, merchPk0 = params.merchPk0, merchPk1 = params.merchPk1, merchPk2 = params.merchPk2, merchPk3 = params.merchPk3, merchPk4 = params.merchPk4, revLock = params.revLock, s1 = params.s1, s2 = params.s2), sp.tez(0), sp.contract(sp.TRecord(chanID = sp.TString, custBal = sp.TMutez, g2 = sp.TString, k = sp.TContract(sp.TRecord(newCustBal = sp.TMutez, newMerchBal = sp.TMutez, newRevLock = sp.TBytes, valid = sp.TBool).layout((("newCustBal", "newMerchBal"), ("newRevLock", "valid")))), merchBal = sp.TMutez, merchPk0 = sp.TString, merchPk1 = sp.TString, merchPk2 = sp.TString, merchPk3 = sp.TString, merchPk4 = sp.TString, revLock = sp.TBytes, s1 = sp.TString, s2 = sp.TString).layout(((("chanID", ("custBal", "g2")), ("k", ("merchBal", "merchPk0"))), (("merchPk1", ("merchPk2", "merchPk3")), (("merchPk4", "revLock"), ("s1", "s2"))))), self.data.pssigContract).open_some()) # @parameter%custClose : pair (pair (pair string (pair address mutez)) (pair (pair (mutez %custFunding) (key %custPk)) (pair (timestamp %delayExpiry) (address %merchAddr)))) (pair (pair mutez (pair (mutez %merchFunding) (key %merchPk))) (pair (pair address bytes) (pair int string)))
                NIL operation; # list operation : @parameter%custClose : pair (pair (pair string (pair address mutez)) (pair (pair (mutez %custFunding) (key %custPk)) (pair (timestamp %delayExpiry) (address %merchAddr)))) (pair (pair mutez (pair (mutez %merchFunding) (key %merchPk))) (pair (pair address bytes) (pair int string)))
                DIG 2;      # pair (pair (pair string (pair address mutez)) (pair (pair (mutez %custFunding) (key %custPk)) (pair (timestamp %delayExpiry) (address %merchAddr)))) (pair (pair mutez (pair (mutez %merchFunding) (key %merchPk))) (pair (pair address bytes) (pair int string))) : list operation : @parameter%custClose
                DUP;        # pair (pair (pair string (pair address mutez)) (pair (pair (mutez %custFunding) (key %custPk)) (pair (timestamp %delayExpiry) (address %merchAddr)))) (pair (pair mutez (pair (mutez %merchFunding) (key %merchPk))) (pair (pair address bytes) (pair int string))) : pair (pair (pair string (pair address mutez)) (pair (pair (mutez %custFunding) (key %custPk)) (pair (timestamp %delayExpiry) (address %merchAddr)))) (pair (pair mutez (pair (mutez %merchFunding) (key %merchPk))) (pair (pair address bytes) (pair int string))) : list operation : @parameter%custClose
                DUG 3;      # pair (pair (pair string (pair address mutez)) (pair (pair (mutez %custFunding) (key %custPk)) (pair (timestamp %delayExpiry) (address %merchAddr)))) (pair (pair mutez (pair (mutez %merchFunding) (key %merchPk))) (pair (pair address bytes) (pair int string))) : list operation : @parameter%custClose : pair (pair (pair string (pair address mutez)) (pair (pair (mutez %custFunding) (key %custPk)) (pair (timestamp %delayExpiry) (address %merchAddr)))) (pair (pair mutez (pair (mutez %merchFunding) (key %merchPk))) (pair (pair address bytes) (pair int string)))
                CDDAAR;     # address : list operation : @parameter%custClose : pair (pair (pair string (pair address mutez)) (pair (pair (mutez %custFunding) (key %custPk)) (pair (timestamp %delayExpiry) (address %merchAddr)))) (pair (pair mutez (pair (mutez %merchFunding) (key %merchPk))) (pair (pair address bytes) (pair int string)))
                CONTRACT (pair (pair (pair (string %chanID) (pair (mutez %custBal) (string %g2))) (pair (contract %k (pair (pair (mutez %newCustBal) (mutez %newMerchBal)) (pair (bytes %newRevLock) (bool %valid)))) (pair (mutez %merchBal) (string %merchPk0)))) (pair (pair (string %merchPk1) (pair (string %merchPk2) (string %merchPk3))) (pair (pair (string %merchPk4) (bytes %revLock)) (pair (string %s1) (string %s2))))); # option (contract (pair (pair (pair (string %chanID) (pair (mutez %custBal) (string %g2))) (pair (contract %k (pair (pair (mutez %newCustBal) (mutez %newMerchBal)) (pair (bytes %newRevLock) (bool %valid)))) (pair (mutez %merchBal) (string %merchPk0)))) (pair (pair (string %merchPk1) (pair (string %merchPk2) (string %merchPk3))) (pair (pair (string %merchPk4) (bytes %revLock)) (pair (string %s1) (string %s2)))))) : list operation : @parameter%custClose : pair (pair (pair string (pair address mutez)) (pair (pair (mutez %custFunding) (key %custPk)) (pair (timestamp %delayExpiry) (address %merchAddr)))) (pair (pair mutez (pair (mutez %merchFunding) (key %merchPk))) (pair (pair address bytes) (pair int string)))
                IF_SOME
                  {}
                  {
                    PUSH int 185; # int : list operation : @parameter%custClose : pair (pair (pair string (pair address mutez)) (pair (pair (mutez %custFunding) (key %custPk)) (pair (timestamp %delayExpiry) (address %merchAddr)))) (pair (pair mutez (pair (mutez %merchFunding) (key %merchPk))) (pair (pair address bytes) (pair int string)))
                    FAILWITH;   # FAILED
                  }; # @some : list operation : @parameter%custClose : pair (pair (pair string (pair address mutez)) (pair (pair (mutez %custFunding) (key %custPk)) (pair (timestamp %delayExpiry) (address %merchAddr)))) (pair (pair mutez (pair (mutez %merchFunding) (key %merchPk))) (pair (pair address bytes) (pair int string)))
                PUSH mutez 0; # mutez : @some : list operation : @parameter%custClose : pair (pair (pair string (pair address mutez)) (pair (pair (mutez %custFunding) (key %custPk)) (pair (timestamp %delayExpiry) (address %merchAddr)))) (pair (pair mutez (pair (mutez %merchFunding) (key %merchPk))) (pair (pair address bytes) (pair int string)))
                DIG 3;      # @parameter%custClose : mutez : @some : list operation : pair (pair (pair string (pair address mutez)) (pair (pair (mutez %custFunding) (key %custPk)) (pair (timestamp %delayExpiry) (address %merchAddr)))) (pair (pair mutez (pair (mutez %merchFunding) (key %merchPk))) (pair (pair address bytes) (pair int string)))
                DUP;        # @parameter%custClose : @parameter%custClose : mutez : @some : list operation : pair (pair (pair string (pair address mutez)) (pair (pair (mutez %custFunding) (key %custPk)) (pair (timestamp %delayExpiry) (address %merchAddr)))) (pair (pair mutez (pair (mutez %merchFunding) (key %merchPk))) (pair (pair address bytes) (pair int string)))
                CDDDDR;     # string : @parameter%custClose : mutez : @some : list operation : pair (pair (pair string (pair address mutez)) (pair (pair (mutez %custFunding) (key %custPk)) (pair (timestamp %delayExpiry) (address %merchAddr)))) (pair (pair mutez (pair (mutez %merchFunding) (key %merchPk))) (pair (pair address bytes) (pair int string)))
                SWAP;       # @parameter%custClose : string : mutez : @some : list operation : pair (pair (pair string (pair address mutez)) (pair (pair (mutez %custFunding) (key %custPk)) (pair (timestamp %delayExpiry) (address %merchAddr)))) (pair (pair mutez (pair (mutez %merchFunding) (key %merchPk))) (pair (pair address bytes) (pair int string)))
                DUP;        # @parameter%custClose : @parameter%custClose : string : mutez : @some : list operation : pair (pair (pair string (pair address mutez)) (pair (pair (mutez %custFunding) (key %custPk)) (pair (timestamp %delayExpiry) (address %merchAddr)))) (pair (pair mutez (pair (mutez %merchFunding) (key %merchPk))) (pair (pair address bytes) (pair int string)))
                DUG 5;      # @parameter%custClose : string : mutez : @some : list operation : @parameter%custClose : pair (pair (pair string (pair address mutez)) (pair (pair (mutez %custFunding) (key %custPk)) (pair (timestamp %delayExpiry) (address %merchAddr)))) (pair (pair mutez (pair (mutez %merchFunding) (key %merchPk))) (pair (pair address bytes) (pair int string)))
                CDDDAR;     # string : string : mutez : @some : list operation : @parameter%custClose : pair (pair (pair string (pair address mutez)) (pair (pair (mutez %custFunding) (key %custPk)) (pair (timestamp %delayExpiry) (address %merchAddr)))) (pair (pair mutez (pair (mutez %merchFunding) (key %merchPk))) (pair (pair address bytes) (pair int string)))
                PAIR %s1 %s2; # pair (string %s1) (string %s2) : mutez : @some : list operation : @parameter%custClose : pair (pair (pair string (pair address mutez)) (pair (pair (mutez %custFunding) (key %custPk)) (pair (timestamp %delayExpiry) (address %merchAddr)))) (pair (pair mutez (pair (mutez %merchFunding) (key %merchPk))) (pair (pair address bytes) (pair int string)))
                DIG 4;      # @parameter%custClose : pair (string %s1) (string %s2) : mutez : @some : list operation : pair (pair (pair string (pair address mutez)) (pair (pair (mutez %custFunding) (key %custPk)) (pair (timestamp %delayExpiry) (address %merchAddr)))) (pair (pair mutez (pair (mutez %merchFunding) (key %merchPk))) (pair (pair address bytes) (pair int string)))
                DUP;        # @parameter%custClose : @parameter%custClose : pair (string %s1) (string %s2) : mutez : @some : list operation : pair (pair (pair string (pair address mutez)) (pair (pair (mutez %custFunding) (key %custPk)) (pair (timestamp %delayExpiry) (address %merchAddr)))) (pair (pair mutez (pair (mutez %merchFunding) (key %merchPk))) (pair (pair address bytes) (pair int string)))
                CDDAR;      # bytes : @parameter%custClose : pair (string %s1) (string %s2) : mutez : @some : list operation : pair (pair (pair string (pair address mutez)) (pair (pair (mutez %custFunding) (key %custPk)) (pair (timestamp %delayExpiry) (address %merchAddr)))) (pair (pair mutez (pair (mutez %merchFunding) (key %merchPk))) (pair (pair address bytes) (pair int string)))
                SWAP;       # @parameter%custClose : bytes : pair (string %s1) (string %s2) : mutez : @some : list operation : pair (pair (pair string (pair address mutez)) (pair (pair (mutez %custFunding) (key %custPk)) (pair (timestamp %delayExpiry) (address %merchAddr)))) (pair (pair mutez (pair (mutez %merchFunding) (key %merchPk))) (pair (pair address bytes) (pair int string)))
                DUP;        # @parameter%custClose : @parameter%custClose : bytes : pair (string %s1) (string %s2) : mutez : @some : list operation : pair (pair (pair string (pair address mutez)) (pair (pair (mutez %custFunding) (key %custPk)) (pair (timestamp %delayExpiry) (address %merchAddr)))) (pair (pair mutez (pair (mutez %merchFunding) (key %merchPk))) (pair (pair address bytes) (pair int string)))
                DUG 6;      # @parameter%custClose : bytes : pair (string %s1) (string %s2) : mutez : @some : list operation : @parameter%custClose : pair (pair (pair string (pair address mutez)) (pair (pair (mutez %custFunding) (key %custPk)) (pair (timestamp %delayExpiry) (address %merchAddr)))) (pair (pair mutez (pair (mutez %merchFunding) (key %merchPk))) (pair (pair address bytes) (pair int string)))
                CDAAR;      # string : bytes : pair (string %s1) (string %s2) : mutez : @some : list operation : @parameter%custClose : pair (pair (pair string (pair address mutez)) (pair (pair (mutez %custFunding) (key %custPk)) (pair (timestamp %delayExpiry) (address %merchAddr)))) (pair (pair mutez (pair (mutez %merchFunding) (key %merchPk))) (pair (pair address bytes) (pair int string)))
                PAIR %merchPk4 %revLock; # pair (string %merchPk4) (bytes %revLock) : pair (string %s1) (string %s2) : mutez : @some : list operation : @parameter%custClose : pair (pair (pair string (pair address mutez)) (pair (pair (mutez %custFunding) (key %custPk)) (pair (timestamp %delayExpiry) (address %merchAddr)))) (pair (pair mutez (pair (mutez %merchFunding) (key %merchPk))) (pair (pair address bytes) (pair int string)))
                PAIR;       # pair (pair (string %merchPk4) (bytes %revLock)) (pair (string %s1) (string %s2)) : mutez : @some : list operation : @parameter%custClose : pair (pair (pair string (pair address mutez)) (pair (pair (mutez %custFunding) (key %custPk)) (pair (timestamp %delayExpiry) (address %merchAddr)))) (pair (pair mutez (pair (mutez %merchFunding) (key %merchPk))) (pair (pair address bytes) (pair int string)))
                DIG 4;      # @parameter%custClose : pair (pair (string %merchPk4) (bytes %revLock)) (pair (string %s1) (string %s2)) : mutez : @some : list operation : pair (pair (pair string (pair address mutez)) (pair (pair (mutez %custFunding) (key %custPk)) (pair (timestamp %delayExpiry) (address %merchAddr)))) (pair (pair mutez (pair (mutez %merchFunding) (key %merchPk))) (pair (pair address bytes) (pair int string)))
                DUP;        # @parameter%custClose : @parameter%custClose : pair (pair (string %merchPk4) (bytes %revLock)) (pair (string %s1) (string %s2)) : mutez : @some : list operation : pair (pair (pair string (pair address mutez)) (pair (pair (mutez %custFunding) (key %custPk)) (pair (timestamp %delayExpiry) (address %merchAddr)))) (pair (pair mutez (pair (mutez %merchFunding) (key %merchPk))) (pair (pair address bytes) (pair int string)))
                CADDDR;     # string : @parameter%custClose : pair (pair (string %merchPk4) (bytes %revLock)) (pair (string %s1) (string %s2)) : mutez : @some : list operation : pair (pair (pair string (pair address mutez)) (pair (pair (mutez %custFunding) (key %custPk)) (pair (timestamp %delayExpiry) (address %merchAddr)))) (pair (pair mutez (pair (mutez %merchFunding) (key %merchPk))) (pair (pair address bytes) (pair int string)))
                SWAP;       # @parameter%custClose : string : pair (pair (string %merchPk4) (bytes %revLock)) (pair (string %s1) (string %s2)) : mutez : @some : list operation : pair (pair (pair string (pair address mutez)) (pair (pair (mutez %custFunding) (key %custPk)) (pair (timestamp %delayExpiry) (address %merchAddr)))) (pair (pair mutez (pair (mutez %merchFunding) (key %merchPk))) (pair (pair address bytes) (pair int string)))
                DUP;        # @parameter%custClose : @parameter%custClose : string : pair (pair (string %merchPk4) (bytes %revLock)) (pair (string %s1) (string %s2)) : mutez : @some : list operation : pair (pair (pair string (pair address mutez)) (pair (pair (mutez %custFunding) (key %custPk)) (pair (timestamp %delayExpiry) (address %merchAddr)))) (pair (pair mutez (pair (mutez %merchFunding) (key %merchPk))) (pair (pair address bytes) (pair int string)))
                DUG 6;      # @parameter%custClose : string : pair (pair (string %merchPk4) (bytes %revLock)) (pair (string %s1) (string %s2)) : mutez : @some : list operation : @parameter%custClose : pair (pair (pair string (pair address mutez)) (pair (pair (mutez %custFunding) (key %custPk)) (pair (timestamp %delayExpiry) (address %merchAddr)))) (pair (pair mutez (pair (mutez %merchFunding) (key %merchPk))) (pair (pair address bytes) (pair int string)))
                CADDAR;     # string : string : pair (pair (string %merchPk4) (bytes %revLock)) (pair (string %s1) (string %s2)) : mutez : @some : list operation : @parameter%custClose : pair (pair (pair string (pair address mutez)) (pair (pair (mutez %custFunding) (key %custPk)) (pair (timestamp %delayExpiry) (address %merchAddr)))) (pair (pair mutez (pair (mutez %merchFunding) (key %merchPk))) (pair (pair address bytes) (pair int string)))
                PAIR %merchPk2 %merchPk3; # pair (string %merchPk2) (string %merchPk3) : pair (pair (string %merchPk4) (bytes %revLock)) (pair (string %s1) (string %s2)) : mutez : @some : list operation : @parameter%custClose : pair (pair (pair string (pair address mutez)) (pair (pair (mutez %custFunding) (key %custPk)) (pair (timestamp %delayExpiry) (address %merchAddr)))) (pair (pair mutez (pair (mutez %merchFunding) (key %merchPk))) (pair (pair address bytes) (pair int string)))
                DIG 5;      # @parameter%custClose : pair (string %merchPk2) (string %merchPk3) : pair (pair (string %merchPk4) (bytes %revLock)) (pair (string %s1) (string %s2)) : mutez : @some : list operation : pair (pair (pair string (pair address mutez)) (pair (pair (mutez %custFunding) (key %custPk)) (pair (timestamp %delayExpiry) (address %merchAddr)))) (pair (pair mutez (pair (mutez %merchFunding) (key %merchPk))) (pair (pair address bytes) (pair int string)))
                DUP;        # @parameter%custClose : @parameter%custClose : pair (string %merchPk2) (string %merchPk3) : pair (pair (string %merchPk4) (bytes %revLock)) (pair (string %s1) (string %s2)) : mutez : @some : list operation : pair (pair (pair string (pair address mutez)) (pair (pair (mutez %custFunding) (key %custPk)) (pair (timestamp %delayExpiry) (address %merchAddr)))) (pair (pair mutez (pair (mutez %merchFunding) (key %merchPk))) (pair (pair address bytes) (pair int string)))
                DUG 6;      # @parameter%custClose : pair (string %merchPk2) (string %merchPk3) : pair (pair (string %merchPk4) (bytes %revLock)) (pair (string %s1) (string %s2)) : mutez : @some : list operation : @parameter%custClose : pair (pair (pair string (pair address mutez)) (pair (pair (mutez %custFunding) (key %custPk)) (pair (timestamp %delayExpiry) (address %merchAddr)))) (pair (pair mutez (pair (mutez %merchFunding) (key %merchPk))) (pair (pair address bytes) (pair int string)))
                CADAR;      # string : pair (string %merchPk2) (string %merchPk3) : pair (pair (string %merchPk4) (bytes %revLock)) (pair (string %s1) (string %s2)) : mutez : @some : list operation : @parameter%custClose : pair (pair (pair string (pair address mutez)) (pair (pair (mutez %custFunding) (key %custPk)) (pair (timestamp %delayExpiry) (address %merchAddr)))) (pair (pair mutez (pair (mutez %merchFunding) (key %merchPk))) (pair (pair address bytes) (pair int string)))
                PAIR %merchPk1; # pair (string %merchPk1) (pair (string %merchPk2) (string %merchPk3)) : pair (pair (string %merchPk4) (bytes %revLock)) (pair (string %s1) (string %s2)) : mutez : @some : list operation : @parameter%custClose : pair (pair (pair string (pair address mutez)) (pair (pair (mutez %custFunding) (key %custPk)) (pair (timestamp %delayExpiry) (address %merchAddr)))) (pair (pair mutez (pair (mutez %merchFunding) (key %merchPk))) (pair (pair address bytes) (pair int string)))
                PAIR;       # pair (pair (string %merchPk1) (pair (string %merchPk2) (string %merchPk3))) (pair (pair (string %merchPk4) (bytes %revLock)) (pair (string %s1) (string %s2))) : mutez : @some : list operation : @parameter%custClose : pair (pair (pair string (pair address mutez)) (pair (pair (mutez %custFunding) (key %custPk)) (pair (timestamp %delayExpiry) (address %merchAddr)))) (pair (pair mutez (pair (mutez %merchFunding) (key %merchPk))) (pair (pair address bytes) (pair int string)))
                DIG 4;      # @parameter%custClose : pair (pair (string %merchPk1) (pair (string %merchPk2) (string %merchPk3))) (pair (pair (string %merchPk4) (bytes %revLock)) (pair (string %s1) (string %s2))) : mutez : @some : list operation : pair (pair (pair string (pair address mutez)) (pair (pair (mutez %custFunding) (key %custPk)) (pair (timestamp %delayExpiry) (address %merchAddr)))) (pair (pair mutez (pair (mutez %merchFunding) (key %merchPk))) (pair (pair address bytes) (pair int string)))
                DUP;        # @parameter%custClose : @parameter%custClose : pair (pair (string %merchPk1) (pair (string %merchPk2) (string %merchPk3))) (pair (pair (string %merchPk4) (bytes %revLock)) (pair (string %s1) (string %s2))) : mutez : @some : list operation : pair (pair (pair string (pair address mutez)) (pair (pair (mutez %custFunding) (key %custPk)) (pair (timestamp %delayExpiry) (address %merchAddr)))) (pair (pair mutez (pair (mutez %merchFunding) (key %merchPk))) (pair (pair address bytes) (pair int string)))
                CAADR;      # string : @parameter%custClose : pair (pair (string %merchPk1) (pair (string %merchPk2) (string %merchPk3))) (pair (pair (string %merchPk4) (bytes %revLock)) (pair (string %s1) (string %s2))) : mutez : @some : list operation : pair (pair (pair string (pair address mutez)) (pair (pair (mutez %custFunding) (key %custPk)) (pair (timestamp %delayExpiry) (address %merchAddr)))) (pair (pair mutez (pair (mutez %merchFunding) (key %merchPk))) (pair (pair address bytes) (pair int string)))
                SWAP;       # @parameter%custClose : string : pair (pair (string %merchPk1) (pair (string %merchPk2) (string %merchPk3))) (pair (pair (string %merchPk4) (bytes %revLock)) (pair (string %s1) (string %s2))) : mutez : @some : list operation : pair (pair (pair string (pair address mutez)) (pair (pair (mutez %custFunding) (key %custPk)) (pair (timestamp %delayExpiry) (address %merchAddr)))) (pair (pair mutez (pair (mutez %merchFunding) (key %merchPk))) (pair (pair address bytes) (pair int string)))
                DUP;        # @parameter%custClose : @parameter%custClose : string : pair (pair (string %merchPk1) (pair (string %merchPk2) (string %merchPk3))) (pair (pair (string %merchPk4) (bytes %revLock)) (pair (string %s1) (string %s2))) : mutez : @some : list operation : pair (pair (pair string (pair address mutez)) (pair (pair (mutez %custFunding) (key %custPk)) (pair (timestamp %delayExpiry) (address %merchAddr)))) (pair (pair mutez (pair (mutez %merchFunding) (key %merchPk))) (pair (pair address bytes) (pair int string)))
                DUG 6;      # @parameter%custClose : string : pair (pair (string %merchPk1) (pair (string %merchPk2) (string %merchPk3))) (pair (pair (string %merchPk4) (bytes %revLock)) (pair (string %s1) (string %s2))) : mutez : @some : list operation : @parameter%custClose : pair (pair (pair string (pair address mutez)) (pair (pair (mutez %custFunding) (key %custPk)) (pair (timestamp %delayExpiry) (address %merchAddr)))) (pair (pair mutez (pair (mutez %merchFunding) (key %merchPk))) (pair (pair address bytes) (pair int string)))
                CDADDR;     # mutez : string : pair (pair (string %merchPk1) (pair (string %merchPk2) (string %merchPk3))) (pair (pair (string %merchPk4) (bytes %revLock)) (pair (string %s1) (string %s2))) : mutez : @some : list operation : @parameter%custClose : pair (pair (pair string (pair address mutez)) (pair (pair (mutez %custFunding) (key %custPk)) (pair (timestamp %delayExpiry) (address %merchAddr)))) (pair (pair mutez (pair (mutez %merchFunding) (key %merchPk))) (pair (pair address bytes) (pair int string)))
                PAIR %merchBal %merchPk0; # pair (mutez %merchBal) (string %merchPk0) : pair (pair (string %merchPk1) (pair (string %merchPk2) (string %merchPk3))) (pair (pair (string %merchPk4) (bytes %revLock)) (pair (string %s1) (string %s2))) : mutez : @some : list operation : @parameter%custClose : pair (pair (pair string (pair address mutez)) (pair (pair (mutez %custFunding) (key %custPk)) (pair (timestamp %delayExpiry) (address %merchAddr)))) (pair (pair mutez (pair (mutez %merchFunding) (key %merchPk))) (pair (pair address bytes) (pair int string)))
                SELF %receiveCall; # contract (pair (pair (mutez %newCustBal) (mutez %newMerchBal)) (pair (bytes %newRevLock) (bool %valid))) : pair (mutez %merchBal) (string %merchPk0) : pair (pair (string %merchPk1) (pair (string %merchPk2) (string %merchPk3))) (pair (pair (string %merchPk4) (bytes %revLock)) (pair (string %s1) (string %s2))) : mutez : @some : list operation : @parameter%custClose : pair (pair (pair string (pair address mutez)) (pair (pair (mutez %custFunding) (key %custPk)) (pair (timestamp %delayExpiry) (address %merchAddr)))) (pair (pair mutez (pair (mutez %merchFunding) (key %merchPk))) (pair (pair address bytes) (pair int string)))
                PAIR %k;    # pair (contract %k (pair (pair (mutez %newCustBal) (mutez %newMerchBal)) (pair (bytes %newRevLock) (bool %valid)))) (pair (mutez %merchBal) (string %merchPk0)) : pair (pair (string %merchPk1) (pair (string %merchPk2) (string %merchPk3))) (pair (pair (string %merchPk4) (bytes %revLock)) (pair (string %s1) (string %s2))) : mutez : @some : list operation : @parameter%custClose : pair (pair (pair string (pair address mutez)) (pair (pair (mutez %custFunding) (key %custPk)) (pair (timestamp %delayExpiry) (address %merchAddr)))) (pair (pair mutez (pair (mutez %merchFunding) (key %merchPk))) (pair (pair address bytes) (pair int string)))
                DIG 5;      # @parameter%custClose : pair (contract %k (pair (pair (mutez %newCustBal) (mutez %newMerchBal)) (pair (bytes %newRevLock) (bool %valid)))) (pair (mutez %merchBal) (string %merchPk0)) : pair (pair (string %merchPk1) (pair (string %merchPk2) (string %merchPk3))) (pair (pair (string %merchPk4) (bytes %revLock)) (pair (string %s1) (string %s2))) : mutez : @some : list operation : pair (pair (pair string (pair address mutez)) (pair (pair (mutez %custFunding) (key %custPk)) (pair (timestamp %delayExpiry) (address %merchAddr)))) (pair (pair mutez (pair (mutez %merchFunding) (key %merchPk))) (pair (pair address bytes) (pair int string)))
                DUP;        # @parameter%custClose : @parameter%custClose : pair (contract %k (pair (pair (mutez %newCustBal) (mutez %newMerchBal)) (pair (bytes %newRevLock) (bool %valid)))) (pair (mutez %merchBal) (string %merchPk0)) : pair (pair (string %merchPk1) (pair (string %merchPk2) (string %merchPk3))) (pair (pair (string %merchPk4) (bytes %revLock)) (pair (string %s1) (string %s2))) : mutez : @some : list operation : pair (pair (pair string (pair address mutez)) (pair (pair (mutez %custFunding) (key %custPk)) (pair (timestamp %delayExpiry) (address %merchAddr)))) (pair (pair mutez (pair (mutez %merchFunding) (key %merchPk))) (pair (pair address bytes) (pair int string)))
                CAAAR;      # string : @parameter%custClose : pair (contract %k (pair (pair (mutez %newCustBal) (mutez %newMerchBal)) (pair (bytes %newRevLock) (bool %valid)))) (pair (mutez %merchBal) (string %merchPk0)) : pair (pair (string %merchPk1) (pair (string %merchPk2) (string %merchPk3))) (pair (pair (string %merchPk4) (bytes %revLock)) (pair (string %s1) (string %s2))) : mutez : @some : list operation : pair (pair (pair string (pair address mutez)) (pair (pair (mutez %custFunding) (key %custPk)) (pair (timestamp %delayExpiry) (address %merchAddr)))) (pair (pair mutez (pair (mutez %merchFunding) (key %merchPk))) (pair (pair address bytes) (pair int string)))
                SWAP;       # @parameter%custClose : string : pair (contract %k (pair (pair (mutez %newCustBal) (mutez %newMerchBal)) (pair (bytes %newRevLock) (bool %valid)))) (pair (mutez %merchBal) (string %merchPk0)) : pair (pair (string %merchPk1) (pair (string %merchPk2) (string %merchPk3))) (pair (pair (string %merchPk4) (bytes %revLock)) (pair (string %s1) (string %s2))) : mutez : @some : list operation : pair (pair (pair string (pair address mutez)) (pair (pair (mutez %custFunding) (key %custPk)) (pair (timestamp %delayExpiry) (address %merchAddr)))) (pair (pair mutez (pair (mutez %merchFunding) (key %merchPk))) (pair (pair address bytes) (pair int string)))
                CDADAR;     # mutez : string : pair (contract %k (pair (pair (mutez %newCustBal) (mutez %newMerchBal)) (pair (bytes %newRevLock) (bool %valid)))) (pair (mutez %merchBal) (string %merchPk0)) : pair (pair (string %merchPk1) (pair (string %merchPk2) (string %merchPk3))) (pair (pair (string %merchPk4) (bytes %revLock)) (pair (string %s1) (string %s2))) : mutez : @some : list operation : pair (pair (pair string (pair address mutez)) (pair (pair (mutez %custFunding) (key %custPk)) (pair (timestamp %delayExpiry) (address %merchAddr)))) (pair (pair mutez (pair (mutez %merchFunding) (key %merchPk))) (pair (pair address bytes) (pair int string)))
                PAIR %custBal %g2; # pair (mutez %custBal) (string %g2) : pair (contract %k (pair (pair (mutez %newCustBal) (mutez %newMerchBal)) (pair (bytes %newRevLock) (bool %valid)))) (pair (mutez %merchBal) (string %merchPk0)) : pair (pair (string %merchPk1) (pair (string %merchPk2) (string %merchPk3))) (pair (pair (string %merchPk4) (bytes %revLock)) (pair (string %s1) (string %s2))) : mutez : @some : list operation : pair (pair (pair string (pair address mutez)) (pair (pair (mutez %custFunding) (key %custPk)) (pair (timestamp %delayExpiry) (address %merchAddr)))) (pair (pair mutez (pair (mutez %merchFunding) (key %merchPk))) (pair (pair address bytes) (pair int string)))
                DIG 6;      # pair (pair (pair string (pair address mutez)) (pair (pair (mutez %custFunding) (key %custPk)) (pair (timestamp %delayExpiry) (address %merchAddr)))) (pair (pair mutez (pair (mutez %merchFunding) (key %merchPk))) (pair (pair address bytes) (pair int string))) : pair (mutez %custBal) (string %g2) : pair (contract %k (pair (pair (mutez %newCustBal) (mutez %newMerchBal)) (pair (bytes %newRevLock) (bool %valid)))) (pair (mutez %merchBal) (string %merchPk0)) : pair (pair (string %merchPk1) (pair (string %merchPk2) (string %merchPk3))) (pair (pair (string %merchPk4) (bytes %revLock)) (pair (string %s1) (string %s2))) : mutez : @some : list operation
                DUP;        # pair (pair (pair string (pair address mutez)) (pair (pair (mutez %custFunding) (key %custPk)) (pair (timestamp %delayExpiry) (address %merchAddr)))) (pair (pair mutez (pair (mutez %merchFunding) (key %merchPk))) (pair (pair address bytes) (pair int string))) : pair (pair (pair string (pair address mutez)) (pair (pair (mutez %custFunding) (key %custPk)) (pair (timestamp %delayExpiry) (address %merchAddr)))) (pair (pair mutez (pair (mutez %merchFunding) (key %merchPk))) (pair (pair address bytes) (pair int string))) : pair (mutez %custBal) (string %g2) : pair (contract %k (pair (pair (mutez %newCustBal) (mutez %newMerchBal)) (pair (bytes %newRevLock) (bool %valid)))) (pair (mutez %merchBal) (string %merchPk0)) : pair (pair (string %merchPk1) (pair (string %merchPk2) (string %merchPk3))) (pair (pair (string %merchPk4) (bytes %revLock)) (pair (string %s1) (string %s2))) : mutez : @some : list operation
                DUG 7;      # pair (pair (pair string (pair address mutez)) (pair (pair (mutez %custFunding) (key %custPk)) (pair (timestamp %delayExpiry) (address %merchAddr)))) (pair (pair mutez (pair (mutez %merchFunding) (key %merchPk))) (pair (pair address bytes) (pair int string))) : pair (mutez %custBal) (string %g2) : pair (contract %k (pair (pair (mutez %newCustBal) (mutez %newMerchBal)) (pair (bytes %newRevLock) (bool %valid)))) (pair (mutez %merchBal) (string %merchPk0)) : pair (pair (string %merchPk1) (pair (string %merchPk2) (string %merchPk3))) (pair (pair (string %merchPk4) (bytes %revLock)) (pair (string %s1) (string %s2))) : mutez : @some : list operation : pair (pair (pair string (pair address mutez)) (pair (pair (mutez %custFunding) (key %custPk)) (pair (timestamp %delayExpiry) (address %merchAddr)))) (pair (pair mutez (pair (mutez %merchFunding) (key %merchPk))) (pair (pair address bytes) (pair int string)))
                CAAAR;      # string : pair (mutez %custBal) (string %g2) : pair (contract %k (pair (pair (mutez %newCustBal) (mutez %newMerchBal)) (pair (bytes %newRevLock) (bool %valid)))) (pair (mutez %merchBal) (string %merchPk0)) : pair (pair (string %merchPk1) (pair (string %merchPk2) (string %merchPk3))) (pair (pair (string %merchPk4) (bytes %revLock)) (pair (string %s1) (string %s2))) : mutez : @some : list operation : pair (pair (pair string (pair address mutez)) (pair (pair (mutez %custFunding) (key %custPk)) (pair (timestamp %delayExpiry) (address %merchAddr)))) (pair (pair mutez (pair (mutez %merchFunding) (key %merchPk))) (pair (pair address bytes) (pair int string)))
                PAIR %chanID; # pair (string %chanID) (pair (mutez %custBal) (string %g2)) : pair (contract %k (pair (pair (mutez %newCustBal) (mutez %newMerchBal)) (pair (bytes %newRevLock) (bool %valid)))) (pair (mutez %merchBal) (string %merchPk0)) : pair (pair (string %merchPk1) (pair (string %merchPk2) (string %merchPk3))) (pair (pair (string %merchPk4) (bytes %revLock)) (pair (string %s1) (string %s2))) : mutez : @some : list operation : pair (pair (pair string (pair address mutez)) (pair (pair (mutez %custFunding) (key %custPk)) (pair (timestamp %delayExpiry) (address %merchAddr)))) (pair (pair mutez (pair (mutez %merchFunding) (key %merchPk))) (pair (pair address bytes) (pair int string)))
                PAIR;       # pair (pair (string %chanID) (pair (mutez %custBal) (string %g2))) (pair (contract %k (pair (pair (mutez %newCustBal) (mutez %newMerchBal)) (pair (bytes %newRevLock) (bool %valid)))) (pair (mutez %merchBal) (string %merchPk0))) : pair (pair (string %merchPk1) (pair (string %merchPk2) (string %merchPk3))) (pair (pair (string %merchPk4) (bytes %revLock)) (pair (string %s1) (string %s2))) : mutez : @some : list operation : pair (pair (pair string (pair address mutez)) (pair (pair (mutez %custFunding) (key %custPk)) (pair (timestamp %delayExpiry) (address %merchAddr)))) (pair (pair mutez (pair (mutez %merchFunding) (key %merchPk))) (pair (pair address bytes) (pair int string)))
                PAIR;       # pair (pair (pair (string %chanID) (pair (mutez %custBal) (string %g2))) (pair (contract %k (pair (pair (mutez %newCustBal) (mutez %newMerchBal)) (pair (bytes %newRevLock) (bool %valid)))) (pair (mutez %merchBal) (string %merchPk0)))) (pair (pair (string %merchPk1) (pair (string %merchPk2) (string %merchPk3))) (pair (pair (string %merchPk4) (bytes %revLock)) (pair (string %s1) (string %s2)))) : mutez : @some : list operation : pair (pair (pair string (pair address mutez)) (pair (pair (mutez %custFunding) (key %custPk)) (pair (timestamp %delayExpiry) (address %merchAddr)))) (pair (pair mutez (pair (mutez %merchFunding) (key %merchPk))) (pair (pair address bytes) (pair int string)))
                TRANSFER_TOKENS; # operation : list operation : pair (pair (pair string (pair address mutez)) (pair (pair (mutez %custFunding) (key %custPk)) (pair (timestamp %delayExpiry) (address %merchAddr)))) (pair (pair mutez (pair (mutez %merchFunding) (key %merchPk))) (pair (pair address bytes) (pair int string)))
                CONS;       # list operation : pair (pair (pair string (pair address mutez)) (pair (pair (mutez %custFunding) (key %custPk)) (pair (timestamp %delayExpiry) (address %merchAddr)))) (pair (pair mutez (pair (mutez %merchFunding) (key %merchPk))) (pair (pair address bytes) (pair int string)))
              }
              {
                DROP;       # @storage
                # == merchClaim ==
                # sp.verify(self.data.merchAddr == sp.sender) # @storage
                DUP;        # @storage : @storage
                CADDDR;     # address : @storage
                SENDER;     # address : address : @storage
                COMPARE;    # int : @storage
                EQ;         # bool : @storage
                IF
                  {}
                  {
                    PUSH string "WrongCondition: self.data.merchAddr == sp.sender"; # string : @storage
                    FAILWITH;   # FAILED
                  }; # @storage
                # sp.verify(self.data.status == 'merchClose') # @storage
                DUP;        # @storage : @storage
                CDDDDR;     # string : @storage
                PUSH string "merchClose"; # string : string : @storage
                COMPARE;    # int : @storage
                EQ;         # bool : @storage
                IF
                  {}
                  {
                    PUSH string "WrongCondition: self.data.status == 'merchClose'"; # string : @storage
                    FAILWITH;   # FAILED
                  }; # @storage
                # sp.verify(self.data.delayExpiry < sp.now) # @storage
                DUP;        # @storage : @storage
                CADDAR;     # timestamp : @storage
                NOW;        # timestamp : timestamp : @storage
                COMPARE;    # int : @storage
                GT;         # bool : @storage
                IF
                  {}
                  {
                    PUSH string "WrongCondition: self.data.delayExpiry < sp.now"; # string : @storage
                    FAILWITH;   # FAILED
                  }; # @storage
                # sp.send(self.data.merchAddr, self.data.custBal + self.data.merchBal) # @storage
                DUP;        # @storage : @storage
                CADDDR;     # address : @storage
                CONTRACT unit; # option (contract unit) : @storage
                NIL operation; # list operation : option (contract unit) : @storage
                SWAP;       # option (contract unit) : list operation : @storage
                IF_SOME
                  {}
                  {
                    PUSH int 125; # int : list operation : @storage
                    FAILWITH;   # FAILED
                  }; # @some : list operation : @storage
                DIG 2;      # @storage : @some : list operation
                DUP;        # @storage : @storage : @some : list operation
                CDAAR;      # mutez : @storage : @some : list operation
                SWAP;       # @storage : mutez : @some : list operation
                DUP;        # @storage : @storage : mutez : @some : list operation
                DUG 4;      # @storage : mutez : @some : list operation : @storage
                CAADDR;     # mutez : mutez : @some : list operation : @storage
                ADD;        # mutez : @some : list operation : @storage
                UNIT;       # unit : mutez : @some : list operation : @storage
                TRANSFER_TOKENS; # operation : list operation : @storage
                CONS;       # list operation : @storage
                SWAP;       # @storage : list operation
                # self.data.custBal = sp.tez(0) # @storage : list operation
                DUP;        # @storage : @storage : list operation
                CDR;        # pair (pair (mutez %merchBal) (pair (mutez %merchFunding) (key %merchPk))) (pair (pair (address %pssigContract) (bytes %revLock)) (pair (int %selfDelay) (string %status))) : @storage : list operation
                SWAP;       # @storage : pair (pair (mutez %merchBal) (pair (mutez %merchFunding) (key %merchPk))) (pair (pair (address %pssigContract) (bytes %revLock)) (pair (int %selfDelay) (string %status))) : list operation
                CAR;        # pair (pair (string %chanID) (pair (address %custAddr) (mutez %custBal))) (pair (pair (mutez %custFunding) (key %custPk)) (pair (timestamp %delayExpiry) (address %merchAddr))) : pair (pair (mutez %merchBal) (pair (mutez %merchFunding) (key %merchPk))) (pair (pair (address %pssigContract) (bytes %revLock)) (pair (int %selfDelay) (string %status))) : list operation
                DUP;        # pair (pair (string %chanID) (pair (address %custAddr) (mutez %custBal))) (pair (pair (mutez %custFunding) (key %custPk)) (pair (timestamp %delayExpiry) (address %merchAddr))) : pair (pair (string %chanID) (pair (address %custAddr) (mutez %custBal))) (pair (pair (mutez %custFunding) (key %custPk)) (pair (timestamp %delayExpiry) (address %merchAddr))) : pair (pair (mutez %merchBal) (pair (mutez %merchFunding) (key %merchPk))) (pair (pair (address %pssigContract) (bytes %revLock)) (pair (int %selfDelay) (string %status))) : list operation
                CDR;        # pair (pair (mutez %custFunding) (key %custPk)) (pair (timestamp %delayExpiry) (address %merchAddr)) : pair (pair (string %chanID) (pair (address %custAddr) (mutez %custBal))) (pair (pair (mutez %custFunding) (key %custPk)) (pair (timestamp %delayExpiry) (address %merchAddr))) : pair (pair (mutez %merchBal) (pair (mutez %merchFunding) (key %merchPk))) (pair (pair (address %pssigContract) (bytes %revLock)) (pair (int %selfDelay) (string %status))) : list operation
                SWAP;       # pair (pair (string %chanID) (pair (address %custAddr) (mutez %custBal))) (pair (pair (mutez %custFunding) (key %custPk)) (pair (timestamp %delayExpiry) (address %merchAddr))) : pair (pair (mutez %custFunding) (key %custPk)) (pair (timestamp %delayExpiry) (address %merchAddr)) : pair (pair (mutez %merchBal) (pair (mutez %merchFunding) (key %merchPk))) (pair (pair (address %pssigContract) (bytes %revLock)) (pair (int %selfDelay) (string %status))) : list operation
                CAR;        # pair (string %chanID) (pair (address %custAddr) (mutez %custBal)) : pair (pair (mutez %custFunding) (key %custPk)) (pair (timestamp %delayExpiry) (address %merchAddr)) : pair (pair (mutez %merchBal) (pair (mutez %merchFunding) (key %merchPk))) (pair (pair (address %pssigContract) (bytes %revLock)) (pair (int %selfDelay) (string %status))) : list operation
                DUP;        # pair (string %chanID) (pair (address %custAddr) (mutez %custBal)) : pair (string %chanID) (pair (address %custAddr) (mutez %custBal)) : pair (pair (mutez %custFunding) (key %custPk)) (pair (timestamp %delayExpiry) (address %merchAddr)) : pair (pair (mutez %merchBal) (pair (mutez %merchFunding) (key %merchPk))) (pair (pair (address %pssigContract) (bytes %revLock)) (pair (int %selfDelay) (string %status))) : list operation
                CAR;        # string : pair (string %chanID) (pair (address %custAddr) (mutez %custBal)) : pair (pair (mutez %custFunding) (key %custPk)) (pair (timestamp %delayExpiry) (address %merchAddr)) : pair (pair (mutez %merchBal) (pair (mutez %merchFunding) (key %merchPk))) (pair (pair (address %pssigContract) (bytes %revLock)) (pair (int %selfDelay) (string %status))) : list operation
                SWAP;       # pair (string %chanID) (pair (address %custAddr) (mutez %custBal)) : string : pair (pair (mutez %custFunding) (key %custPk)) (pair (timestamp %delayExpiry) (address %merchAddr)) : pair (pair (mutez %merchBal) (pair (mutez %merchFunding) (key %merchPk))) (pair (pair (address %pssigContract) (bytes %revLock)) (pair (int %selfDelay) (string %status))) : list operation
                CDAR;       # address : string : pair (pair (mutez %custFunding) (key %custPk)) (pair (timestamp %delayExpiry) (address %merchAddr)) : pair (pair (mutez %merchBal) (pair (mutez %merchFunding) (key %merchPk))) (pair (pair (address %pssigContract) (bytes %revLock)) (pair (int %selfDelay) (string %status))) : list operation
                PUSH mutez 0; # mutez : address : string : pair (pair (mutez %custFunding) (key %custPk)) (pair (timestamp %delayExpiry) (address %merchAddr)) : pair (pair (mutez %merchBal) (pair (mutez %merchFunding) (key %merchPk))) (pair (pair (address %pssigContract) (bytes %revLock)) (pair (int %selfDelay) (string %status))) : list operation
                SWAP;       # address : mutez : string : pair (pair (mutez %custFunding) (key %custPk)) (pair (timestamp %delayExpiry) (address %merchAddr)) : pair (pair (mutez %merchBal) (pair (mutez %merchFunding) (key %merchPk))) (pair (pair (address %pssigContract) (bytes %revLock)) (pair (int %selfDelay) (string %status))) : list operation
                PAIR;       # pair address mutez : string : pair (pair (mutez %custFunding) (key %custPk)) (pair (timestamp %delayExpiry) (address %merchAddr)) : pair (pair (mutez %merchBal) (pair (mutez %merchFunding) (key %merchPk))) (pair (pair (address %pssigContract) (bytes %revLock)) (pair (int %selfDelay) (string %status))) : list operation
                SWAP;       # string : pair address mutez : pair (pair (mutez %custFunding) (key %custPk)) (pair (timestamp %delayExpiry) (address %merchAddr)) : pair (pair (mutez %merchBal) (pair (mutez %merchFunding) (key %merchPk))) (pair (pair (address %pssigContract) (bytes %revLock)) (pair (int %selfDelay) (string %status))) : list operation
                PAIR;       # pair string (pair address mutez) : pair (pair (mutez %custFunding) (key %custPk)) (pair (timestamp %delayExpiry) (address %merchAddr)) : pair (pair (mutez %merchBal) (pair (mutez %merchFunding) (key %merchPk))) (pair (pair (address %pssigContract) (bytes %revLock)) (pair (int %selfDelay) (string %status))) : list operation
                PAIR;       # pair (pair string (pair address mutez)) (pair (pair (mutez %custFunding) (key %custPk)) (pair (timestamp %delayExpiry) (address %merchAddr))) : pair (pair (mutez %merchBal) (pair (mutez %merchFunding) (key %merchPk))) (pair (pair (address %pssigContract) (bytes %revLock)) (pair (int %selfDelay) (string %status))) : list operation
                PAIR;       # pair (pair (pair string (pair address mutez)) (pair (pair (mutez %custFunding) (key %custPk)) (pair (timestamp %delayExpiry) (address %merchAddr)))) (pair (pair (mutez %merchBal) (pair (mutez %merchFunding) (key %merchPk))) (pair (pair (address %pssigContract) (bytes %revLock)) (pair (int %selfDelay) (string %status)))) : list operation
                # self.data.merchBal = sp.tez(0) # pair (pair (pair string (pair address mutez)) (pair (pair (mutez %custFunding) (key %custPk)) (pair (timestamp %delayExpiry) (address %merchAddr)))) (pair (pair (mutez %merchBal) (pair (mutez %merchFunding) (key %merchPk))) (pair (pair (address %pssigContract) (bytes %revLock)) (pair (int %selfDelay) (string %status)))) : list operation
                DUP;        # pair (pair (pair string (pair address mutez)) (pair (pair (mutez %custFunding) (key %custPk)) (pair (timestamp %delayExpiry) (address %merchAddr)))) (pair (pair (mutez %merchBal) (pair (mutez %merchFunding) (key %merchPk))) (pair (pair (address %pssigContract) (bytes %revLock)) (pair (int %selfDelay) (string %status)))) : pair (pair (pair string (pair address mutez)) (pair (pair (mutez %custFunding) (key %custPk)) (pair (timestamp %delayExpiry) (address %merchAddr)))) (pair (pair (mutez %merchBal) (pair (mutez %merchFunding) (key %merchPk))) (pair (pair (address %pssigContract) (bytes %revLock)) (pair (int %selfDelay) (string %status)))) : list operation
                CAR;        # pair (pair string (pair address mutez)) (pair (pair (mutez %custFunding) (key %custPk)) (pair (timestamp %delayExpiry) (address %merchAddr))) : pair (pair (pair string (pair address mutez)) (pair (pair (mutez %custFunding) (key %custPk)) (pair (timestamp %delayExpiry) (address %merchAddr)))) (pair (pair (mutez %merchBal) (pair (mutez %merchFunding) (key %merchPk))) (pair (pair (address %pssigContract) (bytes %revLock)) (pair (int %selfDelay) (string %status)))) : list operation
                SWAP;       # pair (pair (pair string (pair address mutez)) (pair (pair (mutez %custFunding) (key %custPk)) (pair (timestamp %delayExpiry) (address %merchAddr)))) (pair (pair (mutez %merchBal) (pair (mutez %merchFunding) (key %merchPk))) (pair (pair (address %pssigContract) (bytes %revLock)) (pair (int %selfDelay) (string %status)))) : pair (pair string (pair address mutez)) (pair (pair (mutez %custFunding) (key %custPk)) (pair (timestamp %delayExpiry) (address %merchAddr))) : list operation
                CDR;        # pair (pair (mutez %merchBal) (pair (mutez %merchFunding) (key %merchPk))) (pair (pair (address %pssigContract) (bytes %revLock)) (pair (int %selfDelay) (string %status))) : pair (pair string (pair address mutez)) (pair (pair (mutez %custFunding) (key %custPk)) (pair (timestamp %delayExpiry) (address %merchAddr))) : list operation
                DUP;        # pair (pair (mutez %merchBal) (pair (mutez %merchFunding) (key %merchPk))) (pair (pair (address %pssigContract) (bytes %revLock)) (pair (int %selfDelay) (string %status))) : pair (pair (mutez %merchBal) (pair (mutez %merchFunding) (key %merchPk))) (pair (pair (address %pssigContract) (bytes %revLock)) (pair (int %selfDelay) (string %status))) : pair (pair string (pair address mutez)) (pair (pair (mutez %custFunding) (key %custPk)) (pair (timestamp %delayExpiry) (address %merchAddr))) : list operation
                CDR;        # pair (pair (address %pssigContract) (bytes %revLock)) (pair (int %selfDelay) (string %status)) : pair (pair (mutez %merchBal) (pair (mutez %merchFunding) (key %merchPk))) (pair (pair (address %pssigContract) (bytes %revLock)) (pair (int %selfDelay) (string %status))) : pair (pair string (pair address mutez)) (pair (pair (mutez %custFunding) (key %custPk)) (pair (timestamp %delayExpiry) (address %merchAddr))) : list operation
                SWAP;       # pair (pair (mutez %merchBal) (pair (mutez %merchFunding) (key %merchPk))) (pair (pair (address %pssigContract) (bytes %revLock)) (pair (int %selfDelay) (string %status))) : pair (pair (address %pssigContract) (bytes %revLock)) (pair (int %selfDelay) (string %status)) : pair (pair string (pair address mutez)) (pair (pair (mutez %custFunding) (key %custPk)) (pair (timestamp %delayExpiry) (address %merchAddr))) : list operation
                CADR;       # pair (mutez %merchFunding) (key %merchPk) : pair (pair (address %pssigContract) (bytes %revLock)) (pair (int %selfDelay) (string %status)) : pair (pair string (pair address mutez)) (pair (pair (mutez %custFunding) (key %custPk)) (pair (timestamp %delayExpiry) (address %merchAddr))) : list operation
                PUSH mutez 0; # mutez : pair (mutez %merchFunding) (key %merchPk) : pair (pair (address %pssigContract) (bytes %revLock)) (pair (int %selfDelay) (string %status)) : pair (pair string (pair address mutez)) (pair (pair (mutez %custFunding) (key %custPk)) (pair (timestamp %delayExpiry) (address %merchAddr))) : list operation
                PAIR;       # pair mutez (pair (mutez %merchFunding) (key %merchPk)) : pair (pair (address %pssigContract) (bytes %revLock)) (pair (int %selfDelay) (string %status)) : pair (pair string (pair address mutez)) (pair (pair (mutez %custFunding) (key %custPk)) (pair (timestamp %delayExpiry) (address %merchAddr))) : list operation
                PAIR;       # pair (pair mutez (pair (mutez %merchFunding) (key %merchPk))) (pair (pair (address %pssigContract) (bytes %revLock)) (pair (int %selfDelay) (string %status))) : pair (pair string (pair address mutez)) (pair (pair (mutez %custFunding) (key %custPk)) (pair (timestamp %delayExpiry) (address %merchAddr))) : list operation
                SWAP;       # pair (pair string (pair address mutez)) (pair (pair (mutez %custFunding) (key %custPk)) (pair (timestamp %delayExpiry) (address %merchAddr))) : pair (pair mutez (pair (mutez %merchFunding) (key %merchPk))) (pair (pair (address %pssigContract) (bytes %revLock)) (pair (int %selfDelay) (string %status))) : list operation
                PAIR;       # pair (pair (pair string (pair address mutez)) (pair (pair (mutez %custFunding) (key %custPk)) (pair (timestamp %delayExpiry) (address %merchAddr)))) (pair (pair mutez (pair (mutez %merchFunding) (key %merchPk))) (pair (pair (address %pssigContract) (bytes %revLock)) (pair (int %selfDelay) (string %status)))) : list operation
                # self.data.status = 'closed' # pair (pair (pair string (pair address mutez)) (pair (pair (mutez %custFunding) (key %custPk)) (pair (timestamp %delayExpiry) (address %merchAddr)))) (pair (pair mutez (pair (mutez %merchFunding) (key %merchPk))) (pair (pair (address %pssigContract) (bytes %revLock)) (pair (int %selfDelay) (string %status)))) : list operation
                DUP;        # pair (pair (pair string (pair address mutez)) (pair (pair (mutez %custFunding) (key %custPk)) (pair (timestamp %delayExpiry) (address %merchAddr)))) (pair (pair mutez (pair (mutez %merchFunding) (key %merchPk))) (pair (pair (address %pssigContract) (bytes %revLock)) (pair (int %selfDelay) (string %status)))) : pair (pair (pair string (pair address mutez)) (pair (pair (mutez %custFunding) (key %custPk)) (pair (timestamp %delayExpiry) (address %merchAddr)))) (pair (pair mutez (pair (mutez %merchFunding) (key %merchPk))) (pair (pair (address %pssigContract) (bytes %revLock)) (pair (int %selfDelay) (string %status)))) : list operation
                CAR;        # pair (pair string (pair address mutez)) (pair (pair (mutez %custFunding) (key %custPk)) (pair (timestamp %delayExpiry) (address %merchAddr))) : pair (pair (pair string (pair address mutez)) (pair (pair (mutez %custFunding) (key %custPk)) (pair (timestamp %delayExpiry) (address %merchAddr)))) (pair (pair mutez (pair (mutez %merchFunding) (key %merchPk))) (pair (pair (address %pssigContract) (bytes %revLock)) (pair (int %selfDelay) (string %status)))) : list operation
                SWAP;       # pair (pair (pair string (pair address mutez)) (pair (pair (mutez %custFunding) (key %custPk)) (pair (timestamp %delayExpiry) (address %merchAddr)))) (pair (pair mutez (pair (mutez %merchFunding) (key %merchPk))) (pair (pair (address %pssigContract) (bytes %revLock)) (pair (int %selfDelay) (string %status)))) : pair (pair string (pair address mutez)) (pair (pair (mutez %custFunding) (key %custPk)) (pair (timestamp %delayExpiry) (address %merchAddr))) : list operation
                CDR;        # pair (pair mutez (pair (mutez %merchFunding) (key %merchPk))) (pair (pair (address %pssigContract) (bytes %revLock)) (pair (int %selfDelay) (string %status))) : pair (pair string (pair address mutez)) (pair (pair (mutez %custFunding) (key %custPk)) (pair (timestamp %delayExpiry) (address %merchAddr))) : list operation
                DUP;        # pair (pair mutez (pair (mutez %merchFunding) (key %merchPk))) (pair (pair (address %pssigContract) (bytes %revLock)) (pair (int %selfDelay) (string %status))) : pair (pair mutez (pair (mutez %merchFunding) (key %merchPk))) (pair (pair (address %pssigContract) (bytes %revLock)) (pair (int %selfDelay) (string %status))) : pair (pair string (pair address mutez)) (pair (pair (mutez %custFunding) (key %custPk)) (pair (timestamp %delayExpiry) (address %merchAddr))) : list operation
                CAR;        # pair mutez (pair (mutez %merchFunding) (key %merchPk)) : pair (pair mutez (pair (mutez %merchFunding) (key %merchPk))) (pair (pair (address %pssigContract) (bytes %revLock)) (pair (int %selfDelay) (string %status))) : pair (pair string (pair address mutez)) (pair (pair (mutez %custFunding) (key %custPk)) (pair (timestamp %delayExpiry) (address %merchAddr))) : list operation
                SWAP;       # pair (pair mutez (pair (mutez %merchFunding) (key %merchPk))) (pair (pair (address %pssigContract) (bytes %revLock)) (pair (int %selfDelay) (string %status))) : pair mutez (pair (mutez %merchFunding) (key %merchPk)) : pair (pair string (pair address mutez)) (pair (pair (mutez %custFunding) (key %custPk)) (pair (timestamp %delayExpiry) (address %merchAddr))) : list operation
                CDR;        # pair (pair (address %pssigContract) (bytes %revLock)) (pair (int %selfDelay) (string %status)) : pair mutez (pair (mutez %merchFunding) (key %merchPk)) : pair (pair string (pair address mutez)) (pair (pair (mutez %custFunding) (key %custPk)) (pair (timestamp %delayExpiry) (address %merchAddr))) : list operation
                DUP;        # pair (pair (address %pssigContract) (bytes %revLock)) (pair (int %selfDelay) (string %status)) : pair (pair (address %pssigContract) (bytes %revLock)) (pair (int %selfDelay) (string %status)) : pair mutez (pair (mutez %merchFunding) (key %merchPk)) : pair (pair string (pair address mutez)) (pair (pair (mutez %custFunding) (key %custPk)) (pair (timestamp %delayExpiry) (address %merchAddr))) : list operation
                CAR;        # pair (address %pssigContract) (bytes %revLock) : pair (pair (address %pssigContract) (bytes %revLock)) (pair (int %selfDelay) (string %status)) : pair mutez (pair (mutez %merchFunding) (key %merchPk)) : pair (pair string (pair address mutez)) (pair (pair (mutez %custFunding) (key %custPk)) (pair (timestamp %delayExpiry) (address %merchAddr))) : list operation
                SWAP;       # pair (pair (address %pssigContract) (bytes %revLock)) (pair (int %selfDelay) (string %status)) : pair (address %pssigContract) (bytes %revLock) : pair mutez (pair (mutez %merchFunding) (key %merchPk)) : pair (pair string (pair address mutez)) (pair (pair (mutez %custFunding) (key %custPk)) (pair (timestamp %delayExpiry) (address %merchAddr))) : list operation
                CDAR;       # int : pair (address %pssigContract) (bytes %revLock) : pair mutez (pair (mutez %merchFunding) (key %merchPk)) : pair (pair string (pair address mutez)) (pair (pair (mutez %custFunding) (key %custPk)) (pair (timestamp %delayExpiry) (address %merchAddr))) : list operation
                PUSH string "closed"; # string : int : pair (address %pssigContract) (bytes %revLock) : pair mutez (pair (mutez %merchFunding) (key %merchPk)) : pair (pair string (pair address mutez)) (pair (pair (mutez %custFunding) (key %custPk)) (pair (timestamp %delayExpiry) (address %merchAddr))) : list operation
                SWAP;       # int : string : pair (address %pssigContract) (bytes %revLock) : pair mutez (pair (mutez %merchFunding) (key %merchPk)) : pair (pair string (pair address mutez)) (pair (pair (mutez %custFunding) (key %custPk)) (pair (timestamp %delayExpiry) (address %merchAddr))) : list operation
                PAIR;       # pair int string : pair (address %pssigContract) (bytes %revLock) : pair mutez (pair (mutez %merchFunding) (key %merchPk)) : pair (pair string (pair address mutez)) (pair (pair (mutez %custFunding) (key %custPk)) (pair (timestamp %delayExpiry) (address %merchAddr))) : list operation
                SWAP;       # pair (address %pssigContract) (bytes %revLock) : pair int string : pair mutez (pair (mutez %merchFunding) (key %merchPk)) : pair (pair string (pair address mutez)) (pair (pair (mutez %custFunding) (key %custPk)) (pair (timestamp %delayExpiry) (address %merchAddr))) : list operation
                PAIR;       # pair (pair (address %pssigContract) (bytes %revLock)) (pair int string) : pair mutez (pair (mutez %merchFunding) (key %merchPk)) : pair (pair string (pair address mutez)) (pair (pair (mutez %custFunding) (key %custPk)) (pair (timestamp %delayExpiry) (address %merchAddr))) : list operation
                SWAP;       # pair mutez (pair (mutez %merchFunding) (key %merchPk)) : pair (pair (address %pssigContract) (bytes %revLock)) (pair int string) : pair (pair string (pair address mutez)) (pair (pair (mutez %custFunding) (key %custPk)) (pair (timestamp %delayExpiry) (address %merchAddr))) : list operation
                PAIR;       # pair (pair mutez (pair (mutez %merchFunding) (key %merchPk))) (pair (pair (address %pssigContract) (bytes %revLock)) (pair int string)) : pair (pair string (pair address mutez)) (pair (pair (mutez %custFunding) (key %custPk)) (pair (timestamp %delayExpiry) (address %merchAddr))) : list operation
                SWAP;       # pair (pair string (pair address mutez)) (pair (pair (mutez %custFunding) (key %custPk)) (pair (timestamp %delayExpiry) (address %merchAddr))) : pair (pair mutez (pair (mutez %merchFunding) (key %merchPk))) (pair (pair (address %pssigContract) (bytes %revLock)) (pair int string)) : list operation
                PAIR;       # pair (pair (pair string (pair address mutez)) (pair (pair (mutez %custFunding) (key %custPk)) (pair (timestamp %delayExpiry) (address %merchAddr)))) (pair (pair mutez (pair (mutez %merchFunding) (key %merchPk))) (pair (pair (address %pssigContract) (bytes %revLock)) (pair int string))) : list operation
                SWAP;       # list operation : pair (pair (pair string (pair address mutez)) (pair (pair (mutez %custFunding) (key %custPk)) (pair (timestamp %delayExpiry) (address %merchAddr)))) (pair (pair mutez (pair (mutez %merchFunding) (key %merchPk))) (pair (pair (address %pssigContract) (bytes %revLock)) (pair int string)))
              }; # list operation : pair (pair (pair string (pair address mutez)) (pair (pair (mutez %custFunding) (key %custPk)) (pair (timestamp %delayExpiry) (address %merchAddr)))) (pair (pair mutez (pair (mutez %merchFunding) (key %merchPk))) (pair (pair address bytes) (pair int string)))
          }; # list operation : pair (pair (pair string (pair address mutez)) (pair (pair (mutez %custFunding) (key %custPk)) (pair (timestamp %delayExpiry) (address %merchAddr)))) (pair (pair mutez (pair (mutez %merchFunding) (key %merchPk))) (pair (pair (address %pssigContract) (bytes %revLock)) (pair int string)))
      }
      {
        IF_LEFT
          {
            IF_LEFT
              {
                DROP;       # @storage
                # == merchClose ==
                # sp.verify(self.data.merchAddr == sp.sender) # @storage
                DUP;        # @storage : @storage
                CADDDR;     # address : @storage
                SENDER;     # address : address : @storage
                COMPARE;    # int : @storage
                EQ;         # bool : @storage
                IF
                  {}
                  {
                    PUSH string "WrongCondition: self.data.merchAddr == sp.sender"; # string : @storage
                    FAILWITH;   # FAILED
                  }; # @storage
                # sp.verify(self.data.status == 'open') # @storage
                DUP;        # @storage : @storage
                CDDDDR;     # string : @storage
                PUSH string "open"; # string : string : @storage
                COMPARE;    # int : @storage
                EQ;         # bool : @storage
                IF
                  {}
                  {
                    PUSH string "WrongCondition: self.data.status == 'open'"; # string : @storage
                    FAILWITH;   # FAILED
                  }; # @storage
                # self.data.delayExpiry = sp.add_seconds(sp.now, self.data.selfDelay) # @storage
                DUP;        # @storage : @storage
                DUP;        # @storage : @storage : @storage
                CDR;        # pair (pair (mutez %merchBal) (pair (mutez %merchFunding) (key %merchPk))) (pair (pair (address %pssigContract) (bytes %revLock)) (pair (int %selfDelay) (string %status))) : @storage : @storage
                SWAP;       # @storage : pair (pair (mutez %merchBal) (pair (mutez %merchFunding) (key %merchPk))) (pair (pair (address %pssigContract) (bytes %revLock)) (pair (int %selfDelay) (string %status))) : @storage
                CAR;        # pair (pair (string %chanID) (pair (address %custAddr) (mutez %custBal))) (pair (pair (mutez %custFunding) (key %custPk)) (pair (timestamp %delayExpiry) (address %merchAddr))) : pair (pair (mutez %merchBal) (pair (mutez %merchFunding) (key %merchPk))) (pair (pair (address %pssigContract) (bytes %revLock)) (pair (int %selfDelay) (string %status))) : @storage
                DUP;        # pair (pair (string %chanID) (pair (address %custAddr) (mutez %custBal))) (pair (pair (mutez %custFunding) (key %custPk)) (pair (timestamp %delayExpiry) (address %merchAddr))) : pair (pair (string %chanID) (pair (address %custAddr) (mutez %custBal))) (pair (pair (mutez %custFunding) (key %custPk)) (pair (timestamp %delayExpiry) (address %merchAddr))) : pair (pair (mutez %merchBal) (pair (mutez %merchFunding) (key %merchPk))) (pair (pair (address %pssigContract) (bytes %revLock)) (pair (int %selfDelay) (string %status))) : @storage
                CAR;        # pair (string %chanID) (pair (address %custAddr) (mutez %custBal)) : pair (pair (string %chanID) (pair (address %custAddr) (mutez %custBal))) (pair (pair (mutez %custFunding) (key %custPk)) (pair (timestamp %delayExpiry) (address %merchAddr))) : pair (pair (mutez %merchBal) (pair (mutez %merchFunding) (key %merchPk))) (pair (pair (address %pssigContract) (bytes %revLock)) (pair (int %selfDelay) (string %status))) : @storage
                SWAP;       # pair (pair (string %chanID) (pair (address %custAddr) (mutez %custBal))) (pair (pair (mutez %custFunding) (key %custPk)) (pair (timestamp %delayExpiry) (address %merchAddr))) : pair (string %chanID) (pair (address %custAddr) (mutez %custBal)) : pair (pair (mutez %merchBal) (pair (mutez %merchFunding) (key %merchPk))) (pair (pair (address %pssigContract) (bytes %revLock)) (pair (int %selfDelay) (string %status))) : @storage
                CDR;        # pair (pair (mutez %custFunding) (key %custPk)) (pair (timestamp %delayExpiry) (address %merchAddr)) : pair (string %chanID) (pair (address %custAddr) (mutez %custBal)) : pair (pair (mutez %merchBal) (pair (mutez %merchFunding) (key %merchPk))) (pair (pair (address %pssigContract) (bytes %revLock)) (pair (int %selfDelay) (string %status))) : @storage
                DUP;        # pair (pair (mutez %custFunding) (key %custPk)) (pair (timestamp %delayExpiry) (address %merchAddr)) : pair (pair (mutez %custFunding) (key %custPk)) (pair (timestamp %delayExpiry) (address %merchAddr)) : pair (string %chanID) (pair (address %custAddr) (mutez %custBal)) : pair (pair (mutez %merchBal) (pair (mutez %merchFunding) (key %merchPk))) (pair (pair (address %pssigContract) (bytes %revLock)) (pair (int %selfDelay) (string %status))) : @storage
                CAR;        # pair (mutez %custFunding) (key %custPk) : pair (pair (mutez %custFunding) (key %custPk)) (pair (timestamp %delayExpiry) (address %merchAddr)) : pair (string %chanID) (pair (address %custAddr) (mutez %custBal)) : pair (pair (mutez %merchBal) (pair (mutez %merchFunding) (key %merchPk))) (pair (pair (address %pssigContract) (bytes %revLock)) (pair (int %selfDelay) (string %status))) : @storage
                SWAP;       # pair (pair (mutez %custFunding) (key %custPk)) (pair (timestamp %delayExpiry) (address %merchAddr)) : pair (mutez %custFunding) (key %custPk) : pair (string %chanID) (pair (address %custAddr) (mutez %custBal)) : pair (pair (mutez %merchBal) (pair (mutez %merchFunding) (key %merchPk))) (pair (pair (address %pssigContract) (bytes %revLock)) (pair (int %selfDelay) (string %status))) : @storage
                CDDR;       # address : pair (mutez %custFunding) (key %custPk) : pair (string %chanID) (pair (address %custAddr) (mutez %custBal)) : pair (pair (mutez %merchBal) (pair (mutez %merchFunding) (key %merchPk))) (pair (pair (address %pssigContract) (bytes %revLock)) (pair (int %selfDelay) (string %status))) : @storage
                NOW;        # timestamp : address : pair (mutez %custFunding) (key %custPk) : pair (string %chanID) (pair (address %custAddr) (mutez %custBal)) : pair (pair (mutez %merchBal) (pair (mutez %merchFunding) (key %merchPk))) (pair (pair (address %pssigContract) (bytes %revLock)) (pair (int %selfDelay) (string %status))) : @storage
                DIG 5;      # @storage : timestamp : address : pair (mutez %custFunding) (key %custPk) : pair (string %chanID) (pair (address %custAddr) (mutez %custBal)) : pair (pair (mutez %merchBal) (pair (mutez %merchFunding) (key %merchPk))) (pair (pair (address %pssigContract) (bytes %revLock)) (pair (int %selfDelay) (string %status)))
                CDDDAR;     # int : timestamp : address : pair (mutez %custFunding) (key %custPk) : pair (string %chanID) (pair (address %custAddr) (mutez %custBal)) : pair (pair (mutez %merchBal) (pair (mutez %merchFunding) (key %merchPk))) (pair (pair (address %pssigContract) (bytes %revLock)) (pair (int %selfDelay) (string %status)))
                ADD;        # timestamp : address : pair (mutez %custFunding) (key %custPk) : pair (string %chanID) (pair (address %custAddr) (mutez %custBal)) : pair (pair (mutez %merchBal) (pair (mutez %merchFunding) (key %merchPk))) (pair (pair (address %pssigContract) (bytes %revLock)) (pair (int %selfDelay) (string %status)))
                PAIR;       # pair timestamp address : pair (mutez %custFunding) (key %custPk) : pair (string %chanID) (pair (address %custAddr) (mutez %custBal)) : pair (pair (mutez %merchBal) (pair (mutez %merchFunding) (key %merchPk))) (pair (pair (address %pssigContract) (bytes %revLock)) (pair (int %selfDelay) (string %status)))
                SWAP;       # pair (mutez %custFunding) (key %custPk) : pair timestamp address : pair (string %chanID) (pair (address %custAddr) (mutez %custBal)) : pair (pair (mutez %merchBal) (pair (mutez %merchFunding) (key %merchPk))) (pair (pair (address %pssigContract) (bytes %revLock)) (pair (int %selfDelay) (string %status)))
                PAIR;       # pair (pair (mutez %custFunding) (key %custPk)) (pair timestamp address) : pair (string %chanID) (pair (address %custAddr) (mutez %custBal)) : pair (pair (mutez %merchBal) (pair (mutez %merchFunding) (key %merchPk))) (pair (pair (address %pssigContract) (bytes %revLock)) (pair (int %selfDelay) (string %status)))
                SWAP;       # pair (string %chanID) (pair (address %custAddr) (mutez %custBal)) : pair (pair (mutez %custFunding) (key %custPk)) (pair timestamp address) : pair (pair (mutez %merchBal) (pair (mutez %merchFunding) (key %merchPk))) (pair (pair (address %pssigContract) (bytes %revLock)) (pair (int %selfDelay) (string %status)))
                PAIR;       # pair (pair (string %chanID) (pair (address %custAddr) (mutez %custBal))) (pair (pair (mutez %custFunding) (key %custPk)) (pair timestamp address)) : pair (pair (mutez %merchBal) (pair (mutez %merchFunding) (key %merchPk))) (pair (pair (address %pssigContract) (bytes %revLock)) (pair (int %selfDelay) (string %status)))
                PAIR;       # pair (pair (pair (string %chanID) (pair (address %custAddr) (mutez %custBal))) (pair (pair (mutez %custFunding) (key %custPk)) (pair timestamp address))) (pair (pair (mutez %merchBal) (pair (mutez %merchFunding) (key %merchPk))) (pair (pair (address %pssigContract) (bytes %revLock)) (pair (int %selfDelay) (string %status))))
                # self.data.status = 'merchClose' # pair (pair (pair (string %chanID) (pair (address %custAddr) (mutez %custBal))) (pair (pair (mutez %custFunding) (key %custPk)) (pair timestamp address))) (pair (pair (mutez %merchBal) (pair (mutez %merchFunding) (key %merchPk))) (pair (pair (address %pssigContract) (bytes %revLock)) (pair (int %selfDelay) (string %status))))
                DUP;        # pair (pair (pair (string %chanID) (pair (address %custAddr) (mutez %custBal))) (pair (pair (mutez %custFunding) (key %custPk)) (pair timestamp address))) (pair (pair (mutez %merchBal) (pair (mutez %merchFunding) (key %merchPk))) (pair (pair (address %pssigContract) (bytes %revLock)) (pair (int %selfDelay) (string %status)))) : pair (pair (pair (string %chanID) (pair (address %custAddr) (mutez %custBal))) (pair (pair (mutez %custFunding) (key %custPk)) (pair timestamp address))) (pair (pair (mutez %merchBal) (pair (mutez %merchFunding) (key %merchPk))) (pair (pair (address %pssigContract) (bytes %revLock)) (pair (int %selfDelay) (string %status))))
                CAR;        # pair (pair (string %chanID) (pair (address %custAddr) (mutez %custBal))) (pair (pair (mutez %custFunding) (key %custPk)) (pair timestamp address)) : pair (pair (pair (string %chanID) (pair (address %custAddr) (mutez %custBal))) (pair (pair (mutez %custFunding) (key %custPk)) (pair timestamp address))) (pair (pair (mutez %merchBal) (pair (mutez %merchFunding) (key %merchPk))) (pair (pair (address %pssigContract) (bytes %revLock)) (pair (int %selfDelay) (string %status))))
                SWAP;       # pair (pair (pair (string %chanID) (pair (address %custAddr) (mutez %custBal))) (pair (pair (mutez %custFunding) (key %custPk)) (pair timestamp address))) (pair (pair (mutez %merchBal) (pair (mutez %merchFunding) (key %merchPk))) (pair (pair (address %pssigContract) (bytes %revLock)) (pair (int %selfDelay) (string %status)))) : pair (pair (string %chanID) (pair (address %custAddr) (mutez %custBal))) (pair (pair (mutez %custFunding) (key %custPk)) (pair timestamp address))
                CDR;        # pair (pair (mutez %merchBal) (pair (mutez %merchFunding) (key %merchPk))) (pair (pair (address %pssigContract) (bytes %revLock)) (pair (int %selfDelay) (string %status))) : pair (pair (string %chanID) (pair (address %custAddr) (mutez %custBal))) (pair (pair (mutez %custFunding) (key %custPk)) (pair timestamp address))
                DUP;        # pair (pair (mutez %merchBal) (pair (mutez %merchFunding) (key %merchPk))) (pair (pair (address %pssigContract) (bytes %revLock)) (pair (int %selfDelay) (string %status))) : pair (pair (mutez %merchBal) (pair (mutez %merchFunding) (key %merchPk))) (pair (pair (address %pssigContract) (bytes %revLock)) (pair (int %selfDelay) (string %status))) : pair (pair (string %chanID) (pair (address %custAddr) (mutez %custBal))) (pair (pair (mutez %custFunding) (key %custPk)) (pair timestamp address))
                CAR;        # pair (mutez %merchBal) (pair (mutez %merchFunding) (key %merchPk)) : pair (pair (mutez %merchBal) (pair (mutez %merchFunding) (key %merchPk))) (pair (pair (address %pssigContract) (bytes %revLock)) (pair (int %selfDelay) (string %status))) : pair (pair (string %chanID) (pair (address %custAddr) (mutez %custBal))) (pair (pair (mutez %custFunding) (key %custPk)) (pair timestamp address))
                SWAP;       # pair (pair (mutez %merchBal) (pair (mutez %merchFunding) (key %merchPk))) (pair (pair (address %pssigContract) (bytes %revLock)) (pair (int %selfDelay) (string %status))) : pair (mutez %merchBal) (pair (mutez %merchFunding) (key %merchPk)) : pair (pair (string %chanID) (pair (address %custAddr) (mutez %custBal))) (pair (pair (mutez %custFunding) (key %custPk)) (pair timestamp address))
                CDR;        # pair (pair (address %pssigContract) (bytes %revLock)) (pair (int %selfDelay) (string %status)) : pair (mutez %merchBal) (pair (mutez %merchFunding) (key %merchPk)) : pair (pair (string %chanID) (pair (address %custAddr) (mutez %custBal))) (pair (pair (mutez %custFunding) (key %custPk)) (pair timestamp address))
                DUP;        # pair (pair (address %pssigContract) (bytes %revLock)) (pair (int %selfDelay) (string %status)) : pair (pair (address %pssigContract) (bytes %revLock)) (pair (int %selfDelay) (string %status)) : pair (mutez %merchBal) (pair (mutez %merchFunding) (key %merchPk)) : pair (pair (string %chanID) (pair (address %custAddr) (mutez %custBal))) (pair (pair (mutez %custFunding) (key %custPk)) (pair timestamp address))
                CAR;        # pair (address %pssigContract) (bytes %revLock) : pair (pair (address %pssigContract) (bytes %revLock)) (pair (int %selfDelay) (string %status)) : pair (mutez %merchBal) (pair (mutez %merchFunding) (key %merchPk)) : pair (pair (string %chanID) (pair (address %custAddr) (mutez %custBal))) (pair (pair (mutez %custFunding) (key %custPk)) (pair timestamp address))
                SWAP;       # pair (pair (address %pssigContract) (bytes %revLock)) (pair (int %selfDelay) (string %status)) : pair (address %pssigContract) (bytes %revLock) : pair (mutez %merchBal) (pair (mutez %merchFunding) (key %merchPk)) : pair (pair (string %chanID) (pair (address %custAddr) (mutez %custBal))) (pair (pair (mutez %custFunding) (key %custPk)) (pair timestamp address))
                CDAR;       # int : pair (address %pssigContract) (bytes %revLock) : pair (mutez %merchBal) (pair (mutez %merchFunding) (key %merchPk)) : pair (pair (string %chanID) (pair (address %custAddr) (mutez %custBal))) (pair (pair (mutez %custFunding) (key %custPk)) (pair timestamp address))
                PUSH string "merchClose"; # string : int : pair (address %pssigContract) (bytes %revLock) : pair (mutez %merchBal) (pair (mutez %merchFunding) (key %merchPk)) : pair (pair (string %chanID) (pair (address %custAddr) (mutez %custBal))) (pair (pair (mutez %custFunding) (key %custPk)) (pair timestamp address))
                SWAP;       # int : string : pair (address %pssigContract) (bytes %revLock) : pair (mutez %merchBal) (pair (mutez %merchFunding) (key %merchPk)) : pair (pair (string %chanID) (pair (address %custAddr) (mutez %custBal))) (pair (pair (mutez %custFunding) (key %custPk)) (pair timestamp address))
                PAIR;       # pair int string : pair (address %pssigContract) (bytes %revLock) : pair (mutez %merchBal) (pair (mutez %merchFunding) (key %merchPk)) : pair (pair (string %chanID) (pair (address %custAddr) (mutez %custBal))) (pair (pair (mutez %custFunding) (key %custPk)) (pair timestamp address))
                SWAP;       # pair (address %pssigContract) (bytes %revLock) : pair int string : pair (mutez %merchBal) (pair (mutez %merchFunding) (key %merchPk)) : pair (pair (string %chanID) (pair (address %custAddr) (mutez %custBal))) (pair (pair (mutez %custFunding) (key %custPk)) (pair timestamp address))
                PAIR;       # pair (pair (address %pssigContract) (bytes %revLock)) (pair int string) : pair (mutez %merchBal) (pair (mutez %merchFunding) (key %merchPk)) : pair (pair (string %chanID) (pair (address %custAddr) (mutez %custBal))) (pair (pair (mutez %custFunding) (key %custPk)) (pair timestamp address))
                SWAP;       # pair (mutez %merchBal) (pair (mutez %merchFunding) (key %merchPk)) : pair (pair (address %pssigContract) (bytes %revLock)) (pair int string) : pair (pair (string %chanID) (pair (address %custAddr) (mutez %custBal))) (pair (pair (mutez %custFunding) (key %custPk)) (pair timestamp address))
                PAIR;       # pair (pair (mutez %merchBal) (pair (mutez %merchFunding) (key %merchPk))) (pair (pair (address %pssigContract) (bytes %revLock)) (pair int string)) : pair (pair (string %chanID) (pair (address %custAddr) (mutez %custBal))) (pair (pair (mutez %custFunding) (key %custPk)) (pair timestamp address))
                SWAP;       # pair (pair (string %chanID) (pair (address %custAddr) (mutez %custBal))) (pair (pair (mutez %custFunding) (key %custPk)) (pair timestamp address)) : pair (pair (mutez %merchBal) (pair (mutez %merchFunding) (key %merchPk))) (pair (pair (address %pssigContract) (bytes %revLock)) (pair int string))
                PAIR;       # pair (pair (pair (string %chanID) (pair (address %custAddr) (mutez %custBal))) (pair (pair (mutez %custFunding) (key %custPk)) (pair timestamp address))) (pair (pair (mutez %merchBal) (pair (mutez %merchFunding) (key %merchPk))) (pair (pair (address %pssigContract) (bytes %revLock)) (pair int string)))
                NIL operation; # list operation : pair (pair (pair (string %chanID) (pair (address %custAddr) (mutez %custBal))) (pair (pair (mutez %custFunding) (key %custPk)) (pair timestamp address))) (pair (pair (mutez %merchBal) (pair (mutez %merchFunding) (key %merchPk))) (pair (pair (address %pssigContract) (bytes %revLock)) (pair int string)))
              }
              {
                # == merchDispute ==
                # sp.verify(self.data.merchAddr == sp.sender) # @parameter%merchDispute : @storage
                SENDER;     # address : @parameter%merchDispute : @storage
                DIG 2;      # @storage : address : @parameter%merchDispute
                DUP;        # @storage : @storage : address : @parameter%merchDispute
                DUG 3;      # @storage : address : @parameter%merchDispute : @storage
                CADDDR;     # address : address : @parameter%merchDispute : @storage
                COMPARE;    # int : @parameter%merchDispute : @storage
                EQ;         # bool : @parameter%merchDispute : @storage
                IF
                  {}
                  {
                    PUSH string "WrongCondition: self.data.merchAddr == sp.sender"; # string : @parameter%merchDispute : @storage
                    FAILWITH;   # FAILED
                  }; # @parameter%merchDispute : @storage
                # sp.verify((self.data.status == 'custClose') | (self.data.status == 'checkingSig')) # @parameter%merchDispute : @storage
                PUSH string "custClose"; # string : @parameter%merchDispute : @storage
                DIG 2;      # @storage : string : @parameter%merchDispute
                DUP;        # @storage : @storage : string : @parameter%merchDispute
                DUG 3;      # @storage : string : @parameter%merchDispute : @storage
                CDDDDR;     # string : string : @parameter%merchDispute : @storage
                COMPARE;    # int : @parameter%merchDispute : @storage
                EQ;         # bool : @parameter%merchDispute : @storage
                IF
                  {
                    PUSH bool True; # bool : @parameter%merchDispute : @storage
                  }
                  {
                    PUSH string "checkingSig"; # string : @parameter%merchDispute : @storage
                    DIG 2;      # @storage : string : @parameter%merchDispute
                    DUP;        # @storage : @storage : string : @parameter%merchDispute
                    DUG 3;      # @storage : string : @parameter%merchDispute : @storage
                    CDDDDR;     # string : string : @parameter%merchDispute : @storage
                    COMPARE;    # int : @parameter%merchDispute : @storage
                    EQ;         # bool : @parameter%merchDispute : @storage
                  }; # bool : @parameter%merchDispute : @storage
                IF
                  {}
                  {
                    PUSH string "WrongCondition: (self.data.status == 'custClose') | (self.data.status == 'checkingSig')"; # string : @parameter%merchDispute : @storage
                    FAILWITH;   # FAILED
                  }; # @parameter%merchDispute : @storage
                # sp.verify(self.data.revLock == sp.blake2b(params.secret)) # @parameter%merchDispute : @storage
                BLAKE2B;    # bytes : @storage
                SWAP;       # @storage : bytes
                DUP;        # @storage : @storage : bytes
                DUG 2;      # @storage : bytes : @storage
                CDDADR;     # bytes : bytes : @storage
                COMPARE;    # int : @storage
                EQ;         # bool : @storage
                IF
                  {}
                  {
                    PUSH string "WrongCondition: self.data.revLock == sp.blake2b(params.secret)"; # string : @storage
                    FAILWITH;   # FAILED
                  }; # @storage
                # sp.send(self.data.merchAddr, self.data.custBal) # @storage
                DUP;        # @storage : @storage
                CADDDR;     # address : @storage
                CONTRACT unit; # option (contract unit) : @storage
                NIL operation; # list operation : option (contract unit) : @storage
                SWAP;       # option (contract unit) : list operation : @storage
                IF_SOME
                  {}
                  {
                    PUSH int 211; # int : list operation : @storage
                    FAILWITH;   # FAILED
                  }; # @some : list operation : @storage
                DIG 2;      # @storage : @some : list operation
                DUP;        # @storage : @storage : @some : list operation
                DUG 3;      # @storage : @some : list operation : @storage
                CAADDR;     # mutez : @some : list operation : @storage
                UNIT;       # unit : mutez : @some : list operation : @storage
                TRANSFER_TOKENS; # operation : list operation : @storage
                CONS;       # list operation : @storage
                SWAP;       # @storage : list operation
                # self.data.custBal = sp.tez(0) # @storage : list operation
                DUP;        # @storage : @storage : list operation
                CDR;        # pair (pair (mutez %merchBal) (pair (mutez %merchFunding) (key %merchPk))) (pair (pair (address %pssigContract) (bytes %revLock)) (pair (int %selfDelay) (string %status))) : @storage : list operation
                SWAP;       # @storage : pair (pair (mutez %merchBal) (pair (mutez %merchFunding) (key %merchPk))) (pair (pair (address %pssigContract) (bytes %revLock)) (pair (int %selfDelay) (string %status))) : list operation
                CAR;        # pair (pair (string %chanID) (pair (address %custAddr) (mutez %custBal))) (pair (pair (mutez %custFunding) (key %custPk)) (pair (timestamp %delayExpiry) (address %merchAddr))) : pair (pair (mutez %merchBal) (pair (mutez %merchFunding) (key %merchPk))) (pair (pair (address %pssigContract) (bytes %revLock)) (pair (int %selfDelay) (string %status))) : list operation
                DUP;        # pair (pair (string %chanID) (pair (address %custAddr) (mutez %custBal))) (pair (pair (mutez %custFunding) (key %custPk)) (pair (timestamp %delayExpiry) (address %merchAddr))) : pair (pair (string %chanID) (pair (address %custAddr) (mutez %custBal))) (pair (pair (mutez %custFunding) (key %custPk)) (pair (timestamp %delayExpiry) (address %merchAddr))) : pair (pair (mutez %merchBal) (pair (mutez %merchFunding) (key %merchPk))) (pair (pair (address %pssigContract) (bytes %revLock)) (pair (int %selfDelay) (string %status))) : list operation
                CDR;        # pair (pair (mutez %custFunding) (key %custPk)) (pair (timestamp %delayExpiry) (address %merchAddr)) : pair (pair (string %chanID) (pair (address %custAddr) (mutez %custBal))) (pair (pair (mutez %custFunding) (key %custPk)) (pair (timestamp %delayExpiry) (address %merchAddr))) : pair (pair (mutez %merchBal) (pair (mutez %merchFunding) (key %merchPk))) (pair (pair (address %pssigContract) (bytes %revLock)) (pair (int %selfDelay) (string %status))) : list operation
                SWAP;       # pair (pair (string %chanID) (pair (address %custAddr) (mutez %custBal))) (pair (pair (mutez %custFunding) (key %custPk)) (pair (timestamp %delayExpiry) (address %merchAddr))) : pair (pair (mutez %custFunding) (key %custPk)) (pair (timestamp %delayExpiry) (address %merchAddr)) : pair (pair (mutez %merchBal) (pair (mutez %merchFunding) (key %merchPk))) (pair (pair (address %pssigContract) (bytes %revLock)) (pair (int %selfDelay) (string %status))) : list operation
                CAR;        # pair (string %chanID) (pair (address %custAddr) (mutez %custBal)) : pair (pair (mutez %custFunding) (key %custPk)) (pair (timestamp %delayExpiry) (address %merchAddr)) : pair (pair (mutez %merchBal) (pair (mutez %merchFunding) (key %merchPk))) (pair (pair (address %pssigContract) (bytes %revLock)) (pair (int %selfDelay) (string %status))) : list operation
                DUP;        # pair (string %chanID) (pair (address %custAddr) (mutez %custBal)) : pair (string %chanID) (pair (address %custAddr) (mutez %custBal)) : pair (pair (mutez %custFunding) (key %custPk)) (pair (timestamp %delayExpiry) (address %merchAddr)) : pair (pair (mutez %merchBal) (pair (mutez %merchFunding) (key %merchPk))) (pair (pair (address %pssigContract) (bytes %revLock)) (pair (int %selfDelay) (string %status))) : list operation
                CAR;        # string : pair (string %chanID) (pair (address %custAddr) (mutez %custBal)) : pair (pair (mutez %custFunding) (key %custPk)) (pair (timestamp %delayExpiry) (address %merchAddr)) : pair (pair (mutez %merchBal) (pair (mutez %merchFunding) (key %merchPk))) (pair (pair (address %pssigContract) (bytes %revLock)) (pair (int %selfDelay) (string %status))) : list operation
                SWAP;       # pair (string %chanID) (pair (address %custAddr) (mutez %custBal)) : string : pair (pair (mutez %custFunding) (key %custPk)) (pair (timestamp %delayExpiry) (address %merchAddr)) : pair (pair (mutez %merchBal) (pair (mutez %merchFunding) (key %merchPk))) (pair (pair (address %pssigContract) (bytes %revLock)) (pair (int %selfDelay) (string %status))) : list operation
                CDAR;       # address : string : pair (pair (mutez %custFunding) (key %custPk)) (pair (timestamp %delayExpiry) (address %merchAddr)) : pair (pair (mutez %merchBal) (pair (mutez %merchFunding) (key %merchPk))) (pair (pair (address %pssigContract) (bytes %revLock)) (pair (int %selfDelay) (string %status))) : list operation
                PUSH mutez 0; # mutez : address : string : pair (pair (mutez %custFunding) (key %custPk)) (pair (timestamp %delayExpiry) (address %merchAddr)) : pair (pair (mutez %merchBal) (pair (mutez %merchFunding) (key %merchPk))) (pair (pair (address %pssigContract) (bytes %revLock)) (pair (int %selfDelay) (string %status))) : list operation
                SWAP;       # address : mutez : string : pair (pair (mutez %custFunding) (key %custPk)) (pair (timestamp %delayExpiry) (address %merchAddr)) : pair (pair (mutez %merchBal) (pair (mutez %merchFunding) (key %merchPk))) (pair (pair (address %pssigContract) (bytes %revLock)) (pair (int %selfDelay) (string %status))) : list operation
                PAIR;       # pair address mutez : string : pair (pair (mutez %custFunding) (key %custPk)) (pair (timestamp %delayExpiry) (address %merchAddr)) : pair (pair (mutez %merchBal) (pair (mutez %merchFunding) (key %merchPk))) (pair (pair (address %pssigContract) (bytes %revLock)) (pair (int %selfDelay) (string %status))) : list operation
                SWAP;       # string : pair address mutez : pair (pair (mutez %custFunding) (key %custPk)) (pair (timestamp %delayExpiry) (address %merchAddr)) : pair (pair (mutez %merchBal) (pair (mutez %merchFunding) (key %merchPk))) (pair (pair (address %pssigContract) (bytes %revLock)) (pair (int %selfDelay) (string %status))) : list operation
                PAIR;       # pair string (pair address mutez) : pair (pair (mutez %custFunding) (key %custPk)) (pair (timestamp %delayExpiry) (address %merchAddr)) : pair (pair (mutez %merchBal) (pair (mutez %merchFunding) (key %merchPk))) (pair (pair (address %pssigContract) (bytes %revLock)) (pair (int %selfDelay) (string %status))) : list operation
                PAIR;       # pair (pair string (pair address mutez)) (pair (pair (mutez %custFunding) (key %custPk)) (pair (timestamp %delayExpiry) (address %merchAddr))) : pair (pair (mutez %merchBal) (pair (mutez %merchFunding) (key %merchPk))) (pair (pair (address %pssigContract) (bytes %revLock)) (pair (int %selfDelay) (string %status))) : list operation
                PAIR;       # pair (pair (pair string (pair address mutez)) (pair (pair (mutez %custFunding) (key %custPk)) (pair (timestamp %delayExpiry) (address %merchAddr)))) (pair (pair (mutez %merchBal) (pair (mutez %merchFunding) (key %merchPk))) (pair (pair (address %pssigContract) (bytes %revLock)) (pair (int %selfDelay) (string %status)))) : list operation
                # self.data.status = 'closed' # pair (pair (pair string (pair address mutez)) (pair (pair (mutez %custFunding) (key %custPk)) (pair (timestamp %delayExpiry) (address %merchAddr)))) (pair (pair (mutez %merchBal) (pair (mutez %merchFunding) (key %merchPk))) (pair (pair (address %pssigContract) (bytes %revLock)) (pair (int %selfDelay) (string %status)))) : list operation
                DUP;        # pair (pair (pair string (pair address mutez)) (pair (pair (mutez %custFunding) (key %custPk)) (pair (timestamp %delayExpiry) (address %merchAddr)))) (pair (pair (mutez %merchBal) (pair (mutez %merchFunding) (key %merchPk))) (pair (pair (address %pssigContract) (bytes %revLock)) (pair (int %selfDelay) (string %status)))) : pair (pair (pair string (pair address mutez)) (pair (pair (mutez %custFunding) (key %custPk)) (pair (timestamp %delayExpiry) (address %merchAddr)))) (pair (pair (mutez %merchBal) (pair (mutez %merchFunding) (key %merchPk))) (pair (pair (address %pssigContract) (bytes %revLock)) (pair (int %selfDelay) (string %status)))) : list operation
                CAR;        # pair (pair string (pair address mutez)) (pair (pair (mutez %custFunding) (key %custPk)) (pair (timestamp %delayExpiry) (address %merchAddr))) : pair (pair (pair string (pair address mutez)) (pair (pair (mutez %custFunding) (key %custPk)) (pair (timestamp %delayExpiry) (address %merchAddr)))) (pair (pair (mutez %merchBal) (pair (mutez %merchFunding) (key %merchPk))) (pair (pair (address %pssigContract) (bytes %revLock)) (pair (int %selfDelay) (string %status)))) : list operation
                SWAP;       # pair (pair (pair string (pair address mutez)) (pair (pair (mutez %custFunding) (key %custPk)) (pair (timestamp %delayExpiry) (address %merchAddr)))) (pair (pair (mutez %merchBal) (pair (mutez %merchFunding) (key %merchPk))) (pair (pair (address %pssigContract) (bytes %revLock)) (pair (int %selfDelay) (string %status)))) : pair (pair string (pair address mutez)) (pair (pair (mutez %custFunding) (key %custPk)) (pair (timestamp %delayExpiry) (address %merchAddr))) : list operation
                CDR;        # pair (pair (mutez %merchBal) (pair (mutez %merchFunding) (key %merchPk))) (pair (pair (address %pssigContract) (bytes %revLock)) (pair (int %selfDelay) (string %status))) : pair (pair string (pair address mutez)) (pair (pair (mutez %custFunding) (key %custPk)) (pair (timestamp %delayExpiry) (address %merchAddr))) : list operation
                DUP;        # pair (pair (mutez %merchBal) (pair (mutez %merchFunding) (key %merchPk))) (pair (pair (address %pssigContract) (bytes %revLock)) (pair (int %selfDelay) (string %status))) : pair (pair (mutez %merchBal) (pair (mutez %merchFunding) (key %merchPk))) (pair (pair (address %pssigContract) (bytes %revLock)) (pair (int %selfDelay) (string %status))) : pair (pair string (pair address mutez)) (pair (pair (mutez %custFunding) (key %custPk)) (pair (timestamp %delayExpiry) (address %merchAddr))) : list operation
                CAR;        # pair (mutez %merchBal) (pair (mutez %merchFunding) (key %merchPk)) : pair (pair (mutez %merchBal) (pair (mutez %merchFunding) (key %merchPk))) (pair (pair (address %pssigContract) (bytes %revLock)) (pair (int %selfDelay) (string %status))) : pair (pair string (pair address mutez)) (pair (pair (mutez %custFunding) (key %custPk)) (pair (timestamp %delayExpiry) (address %merchAddr))) : list operation
                SWAP;       # pair (pair (mutez %merchBal) (pair (mutez %merchFunding) (key %merchPk))) (pair (pair (address %pssigContract) (bytes %revLock)) (pair (int %selfDelay) (string %status))) : pair (mutez %merchBal) (pair (mutez %merchFunding) (key %merchPk)) : pair (pair string (pair address mutez)) (pair (pair (mutez %custFunding) (key %custPk)) (pair (timestamp %delayExpiry) (address %merchAddr))) : list operation
                CDR;        # pair (pair (address %pssigContract) (bytes %revLock)) (pair (int %selfDelay) (string %status)) : pair (mutez %merchBal) (pair (mutez %merchFunding) (key %merchPk)) : pair (pair string (pair address mutez)) (pair (pair (mutez %custFunding) (key %custPk)) (pair (timestamp %delayExpiry) (address %merchAddr))) : list operation
                DUP;        # pair (pair (address %pssigContract) (bytes %revLock)) (pair (int %selfDelay) (string %status)) : pair (pair (address %pssigContract) (bytes %revLock)) (pair (int %selfDelay) (string %status)) : pair (mutez %merchBal) (pair (mutez %merchFunding) (key %merchPk)) : pair (pair string (pair address mutez)) (pair (pair (mutez %custFunding) (key %custPk)) (pair (timestamp %delayExpiry) (address %merchAddr))) : list operation
                CAR;        # pair (address %pssigContract) (bytes %revLock) : pair (pair (address %pssigContract) (bytes %revLock)) (pair (int %selfDelay) (string %status)) : pair (mutez %merchBal) (pair (mutez %merchFunding) (key %merchPk)) : pair (pair string (pair address mutez)) (pair (pair (mutez %custFunding) (key %custPk)) (pair (timestamp %delayExpiry) (address %merchAddr))) : list operation
                SWAP;       # pair (pair (address %pssigContract) (bytes %revLock)) (pair (int %selfDelay) (string %status)) : pair (address %pssigContract) (bytes %revLock) : pair (mutez %merchBal) (pair (mutez %merchFunding) (key %merchPk)) : pair (pair string (pair address mutez)) (pair (pair (mutez %custFunding) (key %custPk)) (pair (timestamp %delayExpiry) (address %merchAddr))) : list operation
                CDAR;       # int : pair (address %pssigContract) (bytes %revLock) : pair (mutez %merchBal) (pair (mutez %merchFunding) (key %merchPk)) : pair (pair string (pair address mutez)) (pair (pair (mutez %custFunding) (key %custPk)) (pair (timestamp %delayExpiry) (address %merchAddr))) : list operation
                PUSH string "closed"; # string : int : pair (address %pssigContract) (bytes %revLock) : pair (mutez %merchBal) (pair (mutez %merchFunding) (key %merchPk)) : pair (pair string (pair address mutez)) (pair (pair (mutez %custFunding) (key %custPk)) (pair (timestamp %delayExpiry) (address %merchAddr))) : list operation
                SWAP;       # int : string : pair (address %pssigContract) (bytes %revLock) : pair (mutez %merchBal) (pair (mutez %merchFunding) (key %merchPk)) : pair (pair string (pair address mutez)) (pair (pair (mutez %custFunding) (key %custPk)) (pair (timestamp %delayExpiry) (address %merchAddr))) : list operation
                PAIR;       # pair int string : pair (address %pssigContract) (bytes %revLock) : pair (mutez %merchBal) (pair (mutez %merchFunding) (key %merchPk)) : pair (pair string (pair address mutez)) (pair (pair (mutez %custFunding) (key %custPk)) (pair (timestamp %delayExpiry) (address %merchAddr))) : list operation
                SWAP;       # pair (address %pssigContract) (bytes %revLock) : pair int string : pair (mutez %merchBal) (pair (mutez %merchFunding) (key %merchPk)) : pair (pair string (pair address mutez)) (pair (pair (mutez %custFunding) (key %custPk)) (pair (timestamp %delayExpiry) (address %merchAddr))) : list operation
                PAIR;       # pair (pair (address %pssigContract) (bytes %revLock)) (pair int string) : pair (mutez %merchBal) (pair (mutez %merchFunding) (key %merchPk)) : pair (pair string (pair address mutez)) (pair (pair (mutez %custFunding) (key %custPk)) (pair (timestamp %delayExpiry) (address %merchAddr))) : list operation
                SWAP;       # pair (mutez %merchBal) (pair (mutez %merchFunding) (key %merchPk)) : pair (pair (address %pssigContract) (bytes %revLock)) (pair int string) : pair (pair string (pair address mutez)) (pair (pair (mutez %custFunding) (key %custPk)) (pair (timestamp %delayExpiry) (address %merchAddr))) : list operation
                PAIR;       # pair (pair (mutez %merchBal) (pair (mutez %merchFunding) (key %merchPk))) (pair (pair (address %pssigContract) (bytes %revLock)) (pair int string)) : pair (pair string (pair address mutez)) (pair (pair (mutez %custFunding) (key %custPk)) (pair (timestamp %delayExpiry) (address %merchAddr))) : list operation
                SWAP;       # pair (pair string (pair address mutez)) (pair (pair (mutez %custFunding) (key %custPk)) (pair (timestamp %delayExpiry) (address %merchAddr))) : pair (pair (mutez %merchBal) (pair (mutez %merchFunding) (key %merchPk))) (pair (pair (address %pssigContract) (bytes %revLock)) (pair int string)) : list operation
                PAIR;       # pair (pair (pair string (pair address mutez)) (pair (pair (mutez %custFunding) (key %custPk)) (pair (timestamp %delayExpiry) (address %merchAddr)))) (pair (pair (mutez %merchBal) (pair (mutez %merchFunding) (key %merchPk))) (pair (pair (address %pssigContract) (bytes %revLock)) (pair int string))) : list operation
                SWAP;       # list operation : pair (pair (pair string (pair address mutez)) (pair (pair (mutez %custFunding) (key %custPk)) (pair (timestamp %delayExpiry) (address %merchAddr)))) (pair (pair (mutez %merchBal) (pair (mutez %merchFunding) (key %merchPk))) (pair (pair (address %pssigContract) (bytes %revLock)) (pair int string)))
              }; # list operation : pair (pair (pair (string %chanID) (pair (address %custAddr) (mutez %custBal))) (pair (pair (mutez %custFunding) (key %custPk)) (pair timestamp address))) (pair (pair (mutez %merchBal) (pair (mutez %merchFunding) (key %merchPk))) (pair (pair (address %pssigContract) (bytes %revLock)) (pair int string)))
          }
          {
            IF_LEFT
              {
                # == mutualClose ==
                # sp.verify(self.data.status == 'open') # @parameter%mutualClose : @storage
                PUSH string "open"; # string : @parameter%mutualClose : @storage
                DIG 2;      # @storage : string : @parameter%mutualClose
                DUP;        # @storage : @storage : string : @parameter%mutualClose
                DUG 3;      # @storage : string : @parameter%mutualClose : @storage
                CDDDDR;     # string : string : @parameter%mutualClose : @storage
                COMPARE;    # int : @parameter%mutualClose : @storage
                EQ;         # bool : @parameter%mutualClose : @storage
                IF
                  {}
                  {
                    PUSH string "WrongCondition: self.data.status == 'open'"; # string : @parameter%mutualClose : @storage
                    FAILWITH;   # FAILED
                  }; # @parameter%mutualClose : @storage
                # sp.verify(sp.check_signature(self.data.custPk, params.custSig, sp.pack(sp.record(chanID = self.data.chanID, custAddr = self.data.custAddr, merchAddr = self.data.merchAddr, newCustBal = params.newCustBal, newMerchBal = params.newMerchBal)))) # @parameter%mutualClose : @storage
                DUP;        # @parameter%mutualClose : @parameter%mutualClose : @storage
                CDDR;       # mutez : @parameter%mutualClose : @storage
                SWAP;       # @parameter%mutualClose : mutez : @storage
                DUP;        # @parameter%mutualClose : @parameter%mutualClose : mutez : @storage
                DUG 2;      # @parameter%mutualClose : mutez : @parameter%mutualClose : @storage
                CDAR;       # mutez : mutez : @parameter%mutualClose : @storage
                PAIR %newCustBal %newMerchBal; # pair (mutez %newCustBal) (mutez %newMerchBal) : @parameter%mutualClose : @storage
                DIG 2;      # @storage : pair (mutez %newCustBal) (mutez %newMerchBal) : @parameter%mutualClose
                DUP;        # @storage : @storage : pair (mutez %newCustBal) (mutez %newMerchBal) : @parameter%mutualClose
                DUG 3;      # @storage : pair (mutez %newCustBal) (mutez %newMerchBal) : @parameter%mutualClose : @storage
                CADDDR;     # address : pair (mutez %newCustBal) (mutez %newMerchBal) : @parameter%mutualClose : @storage
                PAIR %merchAddr; # pair (address %merchAddr) (pair (mutez %newCustBal) (mutez %newMerchBal)) : @parameter%mutualClose : @storage
                DIG 2;      # @storage : pair (address %merchAddr) (pair (mutez %newCustBal) (mutez %newMerchBal)) : @parameter%mutualClose
                DUP;        # @storage : @storage : pair (address %merchAddr) (pair (mutez %newCustBal) (mutez %newMerchBal)) : @parameter%mutualClose
                CAADAR;     # address : @storage : pair (address %merchAddr) (pair (mutez %newCustBal) (mutez %newMerchBal)) : @parameter%mutualClose
                SWAP;       # @storage : address : pair (address %merchAddr) (pair (mutez %newCustBal) (mutez %newMerchBal)) : @parameter%mutualClose
                DUP;        # @storage : @storage : address : pair (address %merchAddr) (pair (mutez %newCustBal) (mutez %newMerchBal)) : @parameter%mutualClose
                DUG 4;      # @storage : address : pair (address %merchAddr) (pair (mutez %newCustBal) (mutez %newMerchBal)) : @parameter%mutualClose : @storage
                CAAAR;      # string : address : pair (address %merchAddr) (pair (mutez %newCustBal) (mutez %newMerchBal)) : @parameter%mutualClose : @storage
                PAIR %chanID %custAddr; # pair (string %chanID) (address %custAddr) : pair (address %merchAddr) (pair (mutez %newCustBal) (mutez %newMerchBal)) : @parameter%mutualClose : @storage
                PAIR;       # pair (pair (string %chanID) (address %custAddr)) (pair (address %merchAddr) (pair (mutez %newCustBal) (mutez %newMerchBal))) : @parameter%mutualClose : @storage
                PACK;       # bytes : @parameter%mutualClose : @storage
                SWAP;       # @parameter%mutualClose : bytes : @storage
                DUP;        # @parameter%mutualClose : @parameter%mutualClose : bytes : @storage
                DUG 2;      # @parameter%mutualClose : bytes : @parameter%mutualClose : @storage
                CAAR;       # signature : bytes : @parameter%mutualClose : @storage
                DIG 3;      # @storage : signature : bytes : @parameter%mutualClose
                DUP;        # @storage : @storage : signature : bytes : @parameter%mutualClose
                DUG 4;      # @storage : signature : bytes : @parameter%mutualClose : @storage
                CADADR;     # key : signature : bytes : @parameter%mutualClose : @storage
                CHECK_SIGNATURE; # bool : @parameter%mutualClose : @storage
                IF
                  {}
                  {
                    PUSH string "WrongCondition: sp.check_signature(self.data.custPk, params.custSig, sp.pack(sp.record(chanID = self.data.chanID, custAddr = self.data.custAddr, merchAddr = self.data.merchAddr, newCustBal = params.newCustBal, newMerchBal = params.newMerchBal)))"; # string : @parameter%mutualClose : @storage
                    FAILWITH;   # FAILED
                  }; # @parameter%mutualClose : @storage
                # sp.verify(sp.check_signature(self.data.merchPk, params.merchSig, sp.pack(sp.record(chanID = self.data.chanID, custAddr = self.data.custAddr, merchAddr = self.data.merchAddr, newCustBal = params.newCustBal, newMerchBal = params.newMerchBal)))) # @parameter%mutualClose : @storage
                DUP;        # @parameter%mutualClose : @parameter%mutualClose : @storage
                CDDR;       # mutez : @parameter%mutualClose : @storage
                SWAP;       # @parameter%mutualClose : mutez : @storage
                DUP;        # @parameter%mutualClose : @parameter%mutualClose : mutez : @storage
                DUG 2;      # @parameter%mutualClose : mutez : @parameter%mutualClose : @storage
                CDAR;       # mutez : mutez : @parameter%mutualClose : @storage
                PAIR %newCustBal %newMerchBal; # pair (mutez %newCustBal) (mutez %newMerchBal) : @parameter%mutualClose : @storage
                DIG 2;      # @storage : pair (mutez %newCustBal) (mutez %newMerchBal) : @parameter%mutualClose
                DUP;        # @storage : @storage : pair (mutez %newCustBal) (mutez %newMerchBal) : @parameter%mutualClose
                DUG 3;      # @storage : pair (mutez %newCustBal) (mutez %newMerchBal) : @parameter%mutualClose : @storage
                CADDDR;     # address : pair (mutez %newCustBal) (mutez %newMerchBal) : @parameter%mutualClose : @storage
                PAIR %merchAddr; # pair (address %merchAddr) (pair (mutez %newCustBal) (mutez %newMerchBal)) : @parameter%mutualClose : @storage
                DIG 2;      # @storage : pair (address %merchAddr) (pair (mutez %newCustBal) (mutez %newMerchBal)) : @parameter%mutualClose
                DUP;        # @storage : @storage : pair (address %merchAddr) (pair (mutez %newCustBal) (mutez %newMerchBal)) : @parameter%mutualClose
                CAADAR;     # address : @storage : pair (address %merchAddr) (pair (mutez %newCustBal) (mutez %newMerchBal)) : @parameter%mutualClose
                SWAP;       # @storage : address : pair (address %merchAddr) (pair (mutez %newCustBal) (mutez %newMerchBal)) : @parameter%mutualClose
                DUP;        # @storage : @storage : address : pair (address %merchAddr) (pair (mutez %newCustBal) (mutez %newMerchBal)) : @parameter%mutualClose
                DUG 4;      # @storage : address : pair (address %merchAddr) (pair (mutez %newCustBal) (mutez %newMerchBal)) : @parameter%mutualClose : @storage
                CAAAR;      # string : address : pair (address %merchAddr) (pair (mutez %newCustBal) (mutez %newMerchBal)) : @parameter%mutualClose : @storage
                PAIR %chanID %custAddr; # pair (string %chanID) (address %custAddr) : pair (address %merchAddr) (pair (mutez %newCustBal) (mutez %newMerchBal)) : @parameter%mutualClose : @storage
                PAIR;       # pair (pair (string %chanID) (address %custAddr)) (pair (address %merchAddr) (pair (mutez %newCustBal) (mutez %newMerchBal))) : @parameter%mutualClose : @storage
                PACK;       # bytes : @parameter%mutualClose : @storage
                SWAP;       # @parameter%mutualClose : bytes : @storage
                DUP;        # @parameter%mutualClose : @parameter%mutualClose : bytes : @storage
                DUG 2;      # @parameter%mutualClose : bytes : @parameter%mutualClose : @storage
                CADR;       # signature : bytes : @parameter%mutualClose : @storage
                DIG 3;      # @storage : signature : bytes : @parameter%mutualClose
                DUP;        # @storage : @storage : signature : bytes : @parameter%mutualClose
                DUG 4;      # @storage : signature : bytes : @parameter%mutualClose : @storage
                CDADDR;     # key : signature : bytes : @parameter%mutualClose : @storage
                CHECK_SIGNATURE; # bool : @parameter%mutualClose : @storage
                IF
                  {}
                  {
                    PUSH string "WrongCondition: sp.check_signature(self.data.merchPk, params.merchSig, sp.pack(sp.record(chanID = self.data.chanID, custAddr = self.data.custAddr, merchAddr = self.data.merchAddr, newCustBal = params.newCustBal, newMerchBal = params.newMerchBal)))"; # string : @parameter%mutualClose : @storage
                    FAILWITH;   # FAILED
                  }; # @parameter%mutualClose : @storage
                SWAP;       # @storage : @parameter%mutualClose
                # self.data.custBal = params.newCustBal # @storage : @parameter%mutualClose
                DUP;        # @storage : @storage : @parameter%mutualClose
                CDR;        # pair (pair (mutez %merchBal) (pair (mutez %merchFunding) (key %merchPk))) (pair (pair (address %pssigContract) (bytes %revLock)) (pair (int %selfDelay) (string %status))) : @storage : @parameter%mutualClose
                SWAP;       # @storage : pair (pair (mutez %merchBal) (pair (mutez %merchFunding) (key %merchPk))) (pair (pair (address %pssigContract) (bytes %revLock)) (pair (int %selfDelay) (string %status))) : @parameter%mutualClose
                CAR;        # pair (pair (string %chanID) (pair (address %custAddr) (mutez %custBal))) (pair (pair (mutez %custFunding) (key %custPk)) (pair (timestamp %delayExpiry) (address %merchAddr))) : pair (pair (mutez %merchBal) (pair (mutez %merchFunding) (key %merchPk))) (pair (pair (address %pssigContract) (bytes %revLock)) (pair (int %selfDelay) (string %status))) : @parameter%mutualClose
                DUP;        # pair (pair (string %chanID) (pair (address %custAddr) (mutez %custBal))) (pair (pair (mutez %custFunding) (key %custPk)) (pair (timestamp %delayExpiry) (address %merchAddr))) : pair (pair (string %chanID) (pair (address %custAddr) (mutez %custBal))) (pair (pair (mutez %custFunding) (key %custPk)) (pair (timestamp %delayExpiry) (address %merchAddr))) : pair (pair (mutez %merchBal) (pair (mutez %merchFunding) (key %merchPk))) (pair (pair (address %pssigContract) (bytes %revLock)) (pair (int %selfDelay) (string %status))) : @parameter%mutualClose
                CDR;        # pair (pair (mutez %custFunding) (key %custPk)) (pair (timestamp %delayExpiry) (address %merchAddr)) : pair (pair (string %chanID) (pair (address %custAddr) (mutez %custBal))) (pair (pair (mutez %custFunding) (key %custPk)) (pair (timestamp %delayExpiry) (address %merchAddr))) : pair (pair (mutez %merchBal) (pair (mutez %merchFunding) (key %merchPk))) (pair (pair (address %pssigContract) (bytes %revLock)) (pair (int %selfDelay) (string %status))) : @parameter%mutualClose
                SWAP;       # pair (pair (string %chanID) (pair (address %custAddr) (mutez %custBal))) (pair (pair (mutez %custFunding) (key %custPk)) (pair (timestamp %delayExpiry) (address %merchAddr))) : pair (pair (mutez %custFunding) (key %custPk)) (pair (timestamp %delayExpiry) (address %merchAddr)) : pair (pair (mutez %merchBal) (pair (mutez %merchFunding) (key %merchPk))) (pair (pair (address %pssigContract) (bytes %revLock)) (pair (int %selfDelay) (string %status))) : @parameter%mutualClose
                CAR;        # pair (string %chanID) (pair (address %custAddr) (mutez %custBal)) : pair (pair (mutez %custFunding) (key %custPk)) (pair (timestamp %delayExpiry) (address %merchAddr)) : pair (pair (mutez %merchBal) (pair (mutez %merchFunding) (key %merchPk))) (pair (pair (address %pssigContract) (bytes %revLock)) (pair (int %selfDelay) (string %status))) : @parameter%mutualClose
                DUP;        # pair (string %chanID) (pair (address %custAddr) (mutez %custBal)) : pair (string %chanID) (pair (address %custAddr) (mutez %custBal)) : pair (pair (mutez %custFunding) (key %custPk)) (pair (timestamp %delayExpiry) (address %merchAddr)) : pair (pair (mutez %merchBal) (pair (mutez %merchFunding) (key %merchPk))) (pair (pair (address %pssigContract) (bytes %revLock)) (pair (int %selfDelay) (string %status))) : @parameter%mutualClose
                CAR;        # string : pair (string %chanID) (pair (address %custAddr) (mutez %custBal)) : pair (pair (mutez %custFunding) (key %custPk)) (pair (timestamp %delayExpiry) (address %merchAddr)) : pair (pair (mutez %merchBal) (pair (mutez %merchFunding) (key %merchPk))) (pair (pair (address %pssigContract) (bytes %revLock)) (pair (int %selfDelay) (string %status))) : @parameter%mutualClose
                SWAP;       # pair (string %chanID) (pair (address %custAddr) (mutez %custBal)) : string : pair (pair (mutez %custFunding) (key %custPk)) (pair (timestamp %delayExpiry) (address %merchAddr)) : pair (pair (mutez %merchBal) (pair (mutez %merchFunding) (key %merchPk))) (pair (pair (address %pssigContract) (bytes %revLock)) (pair (int %selfDelay) (string %status))) : @parameter%mutualClose
                CDAR;       # address : string : pair (pair (mutez %custFunding) (key %custPk)) (pair (timestamp %delayExpiry) (address %merchAddr)) : pair (pair (mutez %merchBal) (pair (mutez %merchFunding) (key %merchPk))) (pair (pair (address %pssigContract) (bytes %revLock)) (pair (int %selfDelay) (string %status))) : @parameter%mutualClose
                DIG 4;      # @parameter%mutualClose : address : string : pair (pair (mutez %custFunding) (key %custPk)) (pair (timestamp %delayExpiry) (address %merchAddr)) : pair (pair (mutez %merchBal) (pair (mutez %merchFunding) (key %merchPk))) (pair (pair (address %pssigContract) (bytes %revLock)) (pair (int %selfDelay) (string %status)))
                DUP;        # @parameter%mutualClose : @parameter%mutualClose : address : string : pair (pair (mutez %custFunding) (key %custPk)) (pair (timestamp %delayExpiry) (address %merchAddr)) : pair (pair (mutez %merchBal) (pair (mutez %merchFunding) (key %merchPk))) (pair (pair (address %pssigContract) (bytes %revLock)) (pair (int %selfDelay) (string %status)))
                DUG 5;      # @parameter%mutualClose : address : string : pair (pair (mutez %custFunding) (key %custPk)) (pair (timestamp %delayExpiry) (address %merchAddr)) : pair (pair (mutez %merchBal) (pair (mutez %merchFunding) (key %merchPk))) (pair (pair (address %pssigContract) (bytes %revLock)) (pair (int %selfDelay) (string %status))) : @parameter%mutualClose
                CDAR;       # mutez : address : string : pair (pair (mutez %custFunding) (key %custPk)) (pair (timestamp %delayExpiry) (address %merchAddr)) : pair (pair (mutez %merchBal) (pair (mutez %merchFunding) (key %merchPk))) (pair (pair (address %pssigContract) (bytes %revLock)) (pair (int %selfDelay) (string %status))) : @parameter%mutualClose
                SWAP;       # address : mutez : string : pair (pair (mutez %custFunding) (key %custPk)) (pair (timestamp %delayExpiry) (address %merchAddr)) : pair (pair (mutez %merchBal) (pair (mutez %merchFunding) (key %merchPk))) (pair (pair (address %pssigContract) (bytes %revLock)) (pair (int %selfDelay) (string %status))) : @parameter%mutualClose
                PAIR;       # pair address mutez : string : pair (pair (mutez %custFunding) (key %custPk)) (pair (timestamp %delayExpiry) (address %merchAddr)) : pair (pair (mutez %merchBal) (pair (mutez %merchFunding) (key %merchPk))) (pair (pair (address %pssigContract) (bytes %revLock)) (pair (int %selfDelay) (string %status))) : @parameter%mutualClose
                SWAP;       # string : pair address mutez : pair (pair (mutez %custFunding) (key %custPk)) (pair (timestamp %delayExpiry) (address %merchAddr)) : pair (pair (mutez %merchBal) (pair (mutez %merchFunding) (key %merchPk))) (pair (pair (address %pssigContract) (bytes %revLock)) (pair (int %selfDelay) (string %status))) : @parameter%mutualClose
                PAIR;       # pair string (pair address mutez) : pair (pair (mutez %custFunding) (key %custPk)) (pair (timestamp %delayExpiry) (address %merchAddr)) : pair (pair (mutez %merchBal) (pair (mutez %merchFunding) (key %merchPk))) (pair (pair (address %pssigContract) (bytes %revLock)) (pair (int %selfDelay) (string %status))) : @parameter%mutualClose
                PAIR;       # pair (pair string (pair address mutez)) (pair (pair (mutez %custFunding) (key %custPk)) (pair (timestamp %delayExpiry) (address %merchAddr))) : pair (pair (mutez %merchBal) (pair (mutez %merchFunding) (key %merchPk))) (pair (pair (address %pssigContract) (bytes %revLock)) (pair (int %selfDelay) (string %status))) : @parameter%mutualClose
                PAIR;       # pair (pair (pair string (pair address mutez)) (pair (pair (mutez %custFunding) (key %custPk)) (pair (timestamp %delayExpiry) (address %merchAddr)))) (pair (pair (mutez %merchBal) (pair (mutez %merchFunding) (key %merchPk))) (pair (pair (address %pssigContract) (bytes %revLock)) (pair (int %selfDelay) (string %status)))) : @parameter%mutualClose
                # self.data.merchBal = params.newMerchBal # pair (pair (pair string (pair address mutez)) (pair (pair (mutez %custFunding) (key %custPk)) (pair (timestamp %delayExpiry) (address %merchAddr)))) (pair (pair (mutez %merchBal) (pair (mutez %merchFunding) (key %merchPk))) (pair (pair (address %pssigContract) (bytes %revLock)) (pair (int %selfDelay) (string %status)))) : @parameter%mutualClose
                DUP;        # pair (pair (pair string (pair address mutez)) (pair (pair (mutez %custFunding) (key %custPk)) (pair (timestamp %delayExpiry) (address %merchAddr)))) (pair (pair (mutez %merchBal) (pair (mutez %merchFunding) (key %merchPk))) (pair (pair (address %pssigContract) (bytes %revLock)) (pair (int %selfDelay) (string %status)))) : pair (pair (pair string (pair address mutez)) (pair (pair (mutez %custFunding) (key %custPk)) (pair (timestamp %delayExpiry) (address %merchAddr)))) (pair (pair (mutez %merchBal) (pair (mutez %merchFunding) (key %merchPk))) (pair (pair (address %pssigContract) (bytes %revLock)) (pair (int %selfDelay) (string %status)))) : @parameter%mutualClose
                CAR;        # pair (pair string (pair address mutez)) (pair (pair (mutez %custFunding) (key %custPk)) (pair (timestamp %delayExpiry) (address %merchAddr))) : pair (pair (pair string (pair address mutez)) (pair (pair (mutez %custFunding) (key %custPk)) (pair (timestamp %delayExpiry) (address %merchAddr)))) (pair (pair (mutez %merchBal) (pair (mutez %merchFunding) (key %merchPk))) (pair (pair (address %pssigContract) (bytes %revLock)) (pair (int %selfDelay) (string %status)))) : @parameter%mutualClose
                SWAP;       # pair (pair (pair string (pair address mutez)) (pair (pair (mutez %custFunding) (key %custPk)) (pair (timestamp %delayExpiry) (address %merchAddr)))) (pair (pair (mutez %merchBal) (pair (mutez %merchFunding) (key %merchPk))) (pair (pair (address %pssigContract) (bytes %revLock)) (pair (int %selfDelay) (string %status)))) : pair (pair string (pair address mutez)) (pair (pair (mutez %custFunding) (key %custPk)) (pair (timestamp %delayExpiry) (address %merchAddr))) : @parameter%mutualClose
                CDR;        # pair (pair (mutez %merchBal) (pair (mutez %merchFunding) (key %merchPk))) (pair (pair (address %pssigContract) (bytes %revLock)) (pair (int %selfDelay) (string %status))) : pair (pair string (pair address mutez)) (pair (pair (mutez %custFunding) (key %custPk)) (pair (timestamp %delayExpiry) (address %merchAddr))) : @parameter%mutualClose
                DUP;        # pair (pair (mutez %merchBal) (pair (mutez %merchFunding) (key %merchPk))) (pair (pair (address %pssigContract) (bytes %revLock)) (pair (int %selfDelay) (string %status))) : pair (pair (mutez %merchBal) (pair (mutez %merchFunding) (key %merchPk))) (pair (pair (address %pssigContract) (bytes %revLock)) (pair (int %selfDelay) (string %status))) : pair (pair string (pair address mutez)) (pair (pair (mutez %custFunding) (key %custPk)) (pair (timestamp %delayExpiry) (address %merchAddr))) : @parameter%mutualClose
                CDR;        # pair (pair (address %pssigContract) (bytes %revLock)) (pair (int %selfDelay) (string %status)) : pair (pair (mutez %merchBal) (pair (mutez %merchFunding) (key %merchPk))) (pair (pair (address %pssigContract) (bytes %revLock)) (pair (int %selfDelay) (string %status))) : pair (pair string (pair address mutez)) (pair (pair (mutez %custFunding) (key %custPk)) (pair (timestamp %delayExpiry) (address %merchAddr))) : @parameter%mutualClose
                SWAP;       # pair (pair (mutez %merchBal) (pair (mutez %merchFunding) (key %merchPk))) (pair (pair (address %pssigContract) (bytes %revLock)) (pair (int %selfDelay) (string %status))) : pair (pair (address %pssigContract) (bytes %revLock)) (pair (int %selfDelay) (string %status)) : pair (pair string (pair address mutez)) (pair (pair (mutez %custFunding) (key %custPk)) (pair (timestamp %delayExpiry) (address %merchAddr))) : @parameter%mutualClose
                CADR;       # pair (mutez %merchFunding) (key %merchPk) : pair (pair (address %pssigContract) (bytes %revLock)) (pair (int %selfDelay) (string %status)) : pair (pair string (pair address mutez)) (pair (pair (mutez %custFunding) (key %custPk)) (pair (timestamp %delayExpiry) (address %merchAddr))) : @parameter%mutualClose
                DIG 3;      # @parameter%mutualClose : pair (mutez %merchFunding) (key %merchPk) : pair (pair (address %pssigContract) (bytes %revLock)) (pair (int %selfDelay) (string %status)) : pair (pair string (pair address mutez)) (pair (pair (mutez %custFunding) (key %custPk)) (pair (timestamp %delayExpiry) (address %merchAddr)))
                CDDR;       # mutez : pair (mutez %merchFunding) (key %merchPk) : pair (pair (address %pssigContract) (bytes %revLock)) (pair (int %selfDelay) (string %status)) : pair (pair string (pair address mutez)) (pair (pair (mutez %custFunding) (key %custPk)) (pair (timestamp %delayExpiry) (address %merchAddr)))
                PAIR;       # pair mutez (pair (mutez %merchFunding) (key %merchPk)) : pair (pair (address %pssigContract) (bytes %revLock)) (pair (int %selfDelay) (string %status)) : pair (pair string (pair address mutez)) (pair (pair (mutez %custFunding) (key %custPk)) (pair (timestamp %delayExpiry) (address %merchAddr)))
                PAIR;       # pair (pair mutez (pair (mutez %merchFunding) (key %merchPk))) (pair (pair (address %pssigContract) (bytes %revLock)) (pair (int %selfDelay) (string %status))) : pair (pair string (pair address mutez)) (pair (pair (mutez %custFunding) (key %custPk)) (pair (timestamp %delayExpiry) (address %merchAddr)))
                SWAP;       # pair (pair string (pair address mutez)) (pair (pair (mutez %custFunding) (key %custPk)) (pair (timestamp %delayExpiry) (address %merchAddr))) : pair (pair mutez (pair (mutez %merchFunding) (key %merchPk))) (pair (pair (address %pssigContract) (bytes %revLock)) (pair (int %selfDelay) (string %status)))
                PAIR;       # pair (pair (pair string (pair address mutez)) (pair (pair (mutez %custFunding) (key %custPk)) (pair (timestamp %delayExpiry) (address %merchAddr)))) (pair (pair mutez (pair (mutez %merchFunding) (key %merchPk))) (pair (pair (address %pssigContract) (bytes %revLock)) (pair (int %selfDelay) (string %status))))
                # sp.send(self.data.custAddr, self.data.custBal) # pair (pair (pair string (pair address mutez)) (pair (pair (mutez %custFunding) (key %custPk)) (pair (timestamp %delayExpiry) (address %merchAddr)))) (pair (pair mutez (pair (mutez %merchFunding) (key %merchPk))) (pair (pair (address %pssigContract) (bytes %revLock)) (pair (int %selfDelay) (string %status))))
                DUP;        # pair (pair (pair string (pair address mutez)) (pair (pair (mutez %custFunding) (key %custPk)) (pair (timestamp %delayExpiry) (address %merchAddr)))) (pair (pair mutez (pair (mutez %merchFunding) (key %merchPk))) (pair (pair (address %pssigContract) (bytes %revLock)) (pair (int %selfDelay) (string %status)))) : pair (pair (pair string (pair address mutez)) (pair (pair (mutez %custFunding) (key %custPk)) (pair (timestamp %delayExpiry) (address %merchAddr)))) (pair (pair mutez (pair (mutez %merchFunding) (key %merchPk))) (pair (pair (address %pssigContract) (bytes %revLock)) (pair (int %selfDelay) (string %status))))
                CAADAR;     # address : pair (pair (pair string (pair address mutez)) (pair (pair (mutez %custFunding) (key %custPk)) (pair (timestamp %delayExpiry) (address %merchAddr)))) (pair (pair mutez (pair (mutez %merchFunding) (key %merchPk))) (pair (pair (address %pssigContract) (bytes %revLock)) (pair (int %selfDelay) (string %status))))
                CONTRACT unit; # option (contract unit) : pair (pair (pair string (pair address mutez)) (pair (pair (mutez %custFunding) (key %custPk)) (pair (timestamp %delayExpiry) (address %merchAddr)))) (pair (pair mutez (pair (mutez %merchFunding) (key %merchPk))) (pair (pair (address %pssigContract) (bytes %revLock)) (pair (int %selfDelay) (string %status))))
                NIL operation; # list operation : option (contract unit) : pair (pair (pair string (pair address mutez)) (pair (pair (mutez %custFunding) (key %custPk)) (pair (timestamp %delayExpiry) (address %merchAddr)))) (pair (pair mutez (pair (mutez %merchFunding) (key %merchPk))) (pair (pair (address %pssigContract) (bytes %revLock)) (pair (int %selfDelay) (string %status))))
                SWAP;       # option (contract unit) : list operation : pair (pair (pair string (pair address mutez)) (pair (pair (mutez %custFunding) (key %custPk)) (pair (timestamp %delayExpiry) (address %merchAddr)))) (pair (pair mutez (pair (mutez %merchFunding) (key %merchPk))) (pair (pair (address %pssigContract) (bytes %revLock)) (pair (int %selfDelay) (string %status))))
                IF_SOME
                  {}
                  {
                    PUSH int 256; # int : list operation : pair (pair (pair string (pair address mutez)) (pair (pair (mutez %custFunding) (key %custPk)) (pair (timestamp %delayExpiry) (address %merchAddr)))) (pair (pair mutez (pair (mutez %merchFunding) (key %merchPk))) (pair (pair (address %pssigContract) (bytes %revLock)) (pair (int %selfDelay) (string %status))))
                    FAILWITH;   # FAILED
                  }; # @some : list operation : pair (pair (pair string (pair address mutez)) (pair (pair (mutez %custFunding) (key %custPk)) (pair (timestamp %delayExpiry) (address %merchAddr)))) (pair (pair mutez (pair (mutez %merchFunding) (key %merchPk))) (pair (pair (address %pssigContract) (bytes %revLock)) (pair (int %selfDelay) (string %status))))
                DIG 2;      # pair (pair (pair string (pair address mutez)) (pair (pair (mutez %custFunding) (key %custPk)) (pair (timestamp %delayExpiry) (address %merchAddr)))) (pair (pair mutez (pair (mutez %merchFunding) (key %merchPk))) (pair (pair (address %pssigContract) (bytes %revLock)) (pair (int %selfDelay) (string %status)))) : @some : list operation
                DUP;        # pair (pair (pair string (pair address mutez)) (pair (pair (mutez %custFunding) (key %custPk)) (pair (timestamp %delayExpiry) (address %merchAddr)))) (pair (pair mutez (pair (mutez %merchFunding) (key %merchPk))) (pair (pair (address %pssigContract) (bytes %revLock)) (pair (int %selfDelay) (string %status)))) : pair (pair (pair string (pair address mutez)) (pair (pair (mutez %custFunding) (key %custPk)) (pair (timestamp %delayExpiry) (address %merchAddr)))) (pair (pair mutez (pair (mutez %merchFunding) (key %merchPk))) (pair (pair (address %pssigContract) (bytes %revLock)) (pair (int %selfDelay) (string %status)))) : @some : list operation
                DUG 3;      # pair (pair (pair string (pair address mutez)) (pair (pair (mutez %custFunding) (key %custPk)) (pair (timestamp %delayExpiry) (address %merchAddr)))) (pair (pair mutez (pair (mutez %merchFunding) (key %merchPk))) (pair (pair (address %pssigContract) (bytes %revLock)) (pair (int %selfDelay) (string %status)))) : @some : list operation : pair (pair (pair string (pair address mutez)) (pair (pair (mutez %custFunding) (key %custPk)) (pair (timestamp %delayExpiry) (address %merchAddr)))) (pair (pair mutez (pair (mutez %merchFunding) (key %merchPk))) (pair (pair (address %pssigContract) (bytes %revLock)) (pair (int %selfDelay) (string %status))))
                CAADDR;     # mutez : @some : list operation : pair (pair (pair string (pair address mutez)) (pair (pair (mutez %custFunding) (key %custPk)) (pair (timestamp %delayExpiry) (address %merchAddr)))) (pair (pair mutez (pair (mutez %merchFunding) (key %merchPk))) (pair (pair (address %pssigContract) (bytes %revLock)) (pair (int %selfDelay) (string %status))))
                UNIT;       # unit : mutez : @some : list operation : pair (pair (pair string (pair address mutez)) (pair (pair (mutez %custFunding) (key %custPk)) (pair (timestamp %delayExpiry) (address %merchAddr)))) (pair (pair mutez (pair (mutez %merchFunding) (key %merchPk))) (pair (pair (address %pssigContract) (bytes %revLock)) (pair (int %selfDelay) (string %status))))
                TRANSFER_TOKENS; # operation : list operation : pair (pair (pair string (pair address mutez)) (pair (pair (mutez %custFunding) (key %custPk)) (pair (timestamp %delayExpiry) (address %merchAddr)))) (pair (pair mutez (pair (mutez %merchFunding) (key %merchPk))) (pair (pair (address %pssigContract) (bytes %revLock)) (pair (int %selfDelay) (string %status))))
                CONS;       # list operation : pair (pair (pair string (pair address mutez)) (pair (pair (mutez %custFunding) (key %custPk)) (pair (timestamp %delayExpiry) (address %merchAddr)))) (pair (pair mutez (pair (mutez %merchFunding) (key %merchPk))) (pair (pair (address %pssigContract) (bytes %revLock)) (pair (int %selfDelay) (string %status))))
                SWAP;       # pair (pair (pair string (pair address mutez)) (pair (pair (mutez %custFunding) (key %custPk)) (pair (timestamp %delayExpiry) (address %merchAddr)))) (pair (pair mutez (pair (mutez %merchFunding) (key %merchPk))) (pair (pair (address %pssigContract) (bytes %revLock)) (pair (int %selfDelay) (string %status)))) : list operation
                # sp.send(self.data.merchAddr, self.data.merchBal) # pair (pair (pair string (pair address mutez)) (pair (pair (mutez %custFunding) (key %custPk)) (pair (timestamp %delayExpiry) (address %merchAddr)))) (pair (pair mutez (pair (mutez %merchFunding) (key %merchPk))) (pair (pair (address %pssigContract) (bytes %revLock)) (pair (int %selfDelay) (string %status)))) : list operation
                DUP;        # pair (pair (pair string (pair address mutez)) (pair (pair (mutez %custFunding) (key %custPk)) (pair (timestamp %delayExpiry) (address %merchAddr)))) (pair (pair mutez (pair (mutez %merchFunding) (key %merchPk))) (pair (pair (address %pssigContract) (bytes %revLock)) (pair (int %selfDelay) (string %status)))) : pair (pair (pair string (pair address mutez)) (pair (pair (mutez %custFunding) (key %custPk)) (pair (timestamp %delayExpiry) (address %merchAddr)))) (pair (pair mutez (pair (mutez %merchFunding) (key %merchPk))) (pair (pair (address %pssigContract) (bytes %revLock)) (pair (int %selfDelay) (string %status)))) : list operation
                DUG 2;      # pair (pair (pair string (pair address mutez)) (pair (pair (mutez %custFunding) (key %custPk)) (pair (timestamp %delayExpiry) (address %merchAddr)))) (pair (pair mutez (pair (mutez %merchFunding) (key %merchPk))) (pair (pair (address %pssigContract) (bytes %revLock)) (pair (int %selfDelay) (string %status)))) : list operation : pair (pair (pair string (pair address mutez)) (pair (pair (mutez %custFunding) (key %custPk)) (pair (timestamp %delayExpiry) (address %merchAddr)))) (pair (pair mutez (pair (mutez %merchFunding) (key %merchPk))) (pair (pair (address %pssigContract) (bytes %revLock)) (pair (int %selfDelay) (string %status))))
                CADDDR;     # address : list operation : pair (pair (pair string (pair address mutez)) (pair (pair (mutez %custFunding) (key %custPk)) (pair (timestamp %delayExpiry) (address %merchAddr)))) (pair (pair mutez (pair (mutez %merchFunding) (key %merchPk))) (pair (pair (address %pssigContract) (bytes %revLock)) (pair (int %selfDelay) (string %status))))
                CONTRACT unit; # option (contract unit) : list operation : pair (pair (pair string (pair address mutez)) (pair (pair (mutez %custFunding) (key %custPk)) (pair (timestamp %delayExpiry) (address %merchAddr)))) (pair (pair mutez (pair (mutez %merchFunding) (key %merchPk))) (pair (pair (address %pssigContract) (bytes %revLock)) (pair (int %selfDelay) (string %status))))
                IF_SOME
                  {}
                  {
                    PUSH int 257; # int : list operation : pair (pair (pair string (pair address mutez)) (pair (pair (mutez %custFunding) (key %custPk)) (pair (timestamp %delayExpiry) (address %merchAddr)))) (pair (pair mutez (pair (mutez %merchFunding) (key %merchPk))) (pair (pair (address %pssigContract) (bytes %revLock)) (pair (int %selfDelay) (string %status))))
                    FAILWITH;   # FAILED
                  }; # @some : list operation : pair (pair (pair string (pair address mutez)) (pair (pair (mutez %custFunding) (key %custPk)) (pair (timestamp %delayExpiry) (address %merchAddr)))) (pair (pair mutez (pair (mutez %merchFunding) (key %merchPk))) (pair (pair (address %pssigContract) (bytes %revLock)) (pair (int %selfDelay) (string %status))))
                DIG 2;      # pair (pair (pair string (pair address mutez)) (pair (pair (mutez %custFunding) (key %custPk)) (pair (timestamp %delayExpiry) (address %merchAddr)))) (pair (pair mutez (pair (mutez %merchFunding) (key %merchPk))) (pair (pair (address %pssigContract) (bytes %revLock)) (pair (int %selfDelay) (string %status)))) : @some : list operation
                DUP;        # pair (pair (pair string (pair address mutez)) (pair (pair (mutez %custFunding) (key %custPk)) (pair (timestamp %delayExpiry) (address %merchAddr)))) (pair (pair mutez (pair (mutez %merchFunding) (key %merchPk))) (pair (pair (address %pssigContract) (bytes %revLock)) (pair (int %selfDelay) (string %status)))) : pair (pair (pair string (pair address mutez)) (pair (pair (mutez %custFunding) (key %custPk)) (pair (timestamp %delayExpiry) (address %merchAddr)))) (pair (pair mutez (pair (mutez %merchFunding) (key %merchPk))) (pair (pair (address %pssigContract) (bytes %revLock)) (pair (int %selfDelay) (string %status)))) : @some : list operation
                DUG 3;      # pair (pair (pair string (pair address mutez)) (pair (pair (mutez %custFunding) (key %custPk)) (pair (timestamp %delayExpiry) (address %merchAddr)))) (pair (pair mutez (pair (mutez %merchFunding) (key %merchPk))) (pair (pair (address %pssigContract) (bytes %revLock)) (pair (int %selfDelay) (string %status)))) : @some : list operation : pair (pair (pair string (pair address mutez)) (pair (pair (mutez %custFunding) (key %custPk)) (pair (timestamp %delayExpiry) (address %merchAddr)))) (pair (pair mutez (pair (mutez %merchFunding) (key %merchPk))) (pair (pair (address %pssigContract) (bytes %revLock)) (pair (int %selfDelay) (string %status))))
                CDAAR;      # mutez : @some : list operation : pair (pair (pair string (pair address mutez)) (pair (pair (mutez %custFunding) (key %custPk)) (pair (timestamp %delayExpiry) (address %merchAddr)))) (pair (pair mutez (pair (mutez %merchFunding) (key %merchPk))) (pair (pair (address %pssigContract) (bytes %revLock)) (pair (int %selfDelay) (string %status))))
                UNIT;       # unit : mutez : @some : list operation : pair (pair (pair string (pair address mutez)) (pair (pair (mutez %custFunding) (key %custPk)) (pair (timestamp %delayExpiry) (address %merchAddr)))) (pair (pair mutez (pair (mutez %merchFunding) (key %merchPk))) (pair (pair (address %pssigContract) (bytes %revLock)) (pair (int %selfDelay) (string %status))))
                TRANSFER_TOKENS; # operation : list operation : pair (pair (pair string (pair address mutez)) (pair (pair (mutez %custFunding) (key %custPk)) (pair (timestamp %delayExpiry) (address %merchAddr)))) (pair (pair mutez (pair (mutez %merchFunding) (key %merchPk))) (pair (pair (address %pssigContract) (bytes %revLock)) (pair (int %selfDelay) (string %status))))
                CONS;       # list operation : pair (pair (pair string (pair address mutez)) (pair (pair (mutez %custFunding) (key %custPk)) (pair (timestamp %delayExpiry) (address %merchAddr)))) (pair (pair mutez (pair (mutez %merchFunding) (key %merchPk))) (pair (pair (address %pssigContract) (bytes %revLock)) (pair (int %selfDelay) (string %status))))
                SWAP;       # pair (pair (pair string (pair address mutez)) (pair (pair (mutez %custFunding) (key %custPk)) (pair (timestamp %delayExpiry) (address %merchAddr)))) (pair (pair mutez (pair (mutez %merchFunding) (key %merchPk))) (pair (pair (address %pssigContract) (bytes %revLock)) (pair (int %selfDelay) (string %status)))) : list operation
                # self.data.custBal = sp.tez(0) # pair (pair (pair string (pair address mutez)) (pair (pair (mutez %custFunding) (key %custPk)) (pair (timestamp %delayExpiry) (address %merchAddr)))) (pair (pair mutez (pair (mutez %merchFunding) (key %merchPk))) (pair (pair (address %pssigContract) (bytes %revLock)) (pair (int %selfDelay) (string %status)))) : list operation
                DUP;        # pair (pair (pair string (pair address mutez)) (pair (pair (mutez %custFunding) (key %custPk)) (pair (timestamp %delayExpiry) (address %merchAddr)))) (pair (pair mutez (pair (mutez %merchFunding) (key %merchPk))) (pair (pair (address %pssigContract) (bytes %revLock)) (pair (int %selfDelay) (string %status)))) : pair (pair (pair string (pair address mutez)) (pair (pair (mutez %custFunding) (key %custPk)) (pair (timestamp %delayExpiry) (address %merchAddr)))) (pair (pair mutez (pair (mutez %merchFunding) (key %merchPk))) (pair (pair (address %pssigContract) (bytes %revLock)) (pair (int %selfDelay) (string %status)))) : list operation
                CDR;        # pair (pair mutez (pair (mutez %merchFunding) (key %merchPk))) (pair (pair (address %pssigContract) (bytes %revLock)) (pair (int %selfDelay) (string %status))) : pair (pair (pair string (pair address mutez)) (pair (pair (mutez %custFunding) (key %custPk)) (pair (timestamp %delayExpiry) (address %merchAddr)))) (pair (pair mutez (pair (mutez %merchFunding) (key %merchPk))) (pair (pair (address %pssigContract) (bytes %revLock)) (pair (int %selfDelay) (string %status)))) : list operation
                SWAP;       # pair (pair (pair string (pair address mutez)) (pair (pair (mutez %custFunding) (key %custPk)) (pair (timestamp %delayExpiry) (address %merchAddr)))) (pair (pair mutez (pair (mutez %merchFunding) (key %merchPk))) (pair (pair (address %pssigContract) (bytes %revLock)) (pair (int %selfDelay) (string %status)))) : pair (pair mutez (pair (mutez %merchFunding) (key %merchPk))) (pair (pair (address %pssigContract) (bytes %revLock)) (pair (int %selfDelay) (string %status))) : list operation
                CAR;        # pair (pair string (pair address mutez)) (pair (pair (mutez %custFunding) (key %custPk)) (pair (timestamp %delayExpiry) (address %merchAddr))) : pair (pair mutez (pair (mutez %merchFunding) (key %merchPk))) (pair (pair (address %pssigContract) (bytes %revLock)) (pair (int %selfDelay) (string %status))) : list operation
                DUP;        # pair (pair string (pair address mutez)) (pair (pair (mutez %custFunding) (key %custPk)) (pair (timestamp %delayExpiry) (address %merchAddr))) : pair (pair string (pair address mutez)) (pair (pair (mutez %custFunding) (key %custPk)) (pair (timestamp %delayExpiry) (address %merchAddr))) : pair (pair mutez (pair (mutez %merchFunding) (key %merchPk))) (pair (pair (address %pssigContract) (bytes %revLock)) (pair (int %selfDelay) (string %status))) : list operation
                CDR;        # pair (pair (mutez %custFunding) (key %custPk)) (pair (timestamp %delayExpiry) (address %merchAddr)) : pair (pair string (pair address mutez)) (pair (pair (mutez %custFunding) (key %custPk)) (pair (timestamp %delayExpiry) (address %merchAddr))) : pair (pair mutez (pair (mutez %merchFunding) (key %merchPk))) (pair (pair (address %pssigContract) (bytes %revLock)) (pair (int %selfDelay) (string %status))) : list operation
                SWAP;       # pair (pair string (pair address mutez)) (pair (pair (mutez %custFunding) (key %custPk)) (pair (timestamp %delayExpiry) (address %merchAddr))) : pair (pair (mutez %custFunding) (key %custPk)) (pair (timestamp %delayExpiry) (address %merchAddr)) : pair (pair mutez (pair (mutez %merchFunding) (key %merchPk))) (pair (pair (address %pssigContract) (bytes %revLock)) (pair (int %selfDelay) (string %status))) : list operation
                CAR;        # pair string (pair address mutez) : pair (pair (mutez %custFunding) (key %custPk)) (pair (timestamp %delayExpiry) (address %merchAddr)) : pair (pair mutez (pair (mutez %merchFunding) (key %merchPk))) (pair (pair (address %pssigContract) (bytes %revLock)) (pair (int %selfDelay) (string %status))) : list operation
                DUP;        # pair string (pair address mutez) : pair string (pair address mutez) : pair (pair (mutez %custFunding) (key %custPk)) (pair (timestamp %delayExpiry) (address %merchAddr)) : pair (pair mutez (pair (mutez %merchFunding) (key %merchPk))) (pair (pair (address %pssigContract) (bytes %revLock)) (pair (int %selfDelay) (string %status))) : list operation
                CAR;        # string : pair string (pair address mutez) : pair (pair (mutez %custFunding) (key %custPk)) (pair (timestamp %delayExpiry) (address %merchAddr)) : pair (pair mutez (pair (mutez %merchFunding) (key %merchPk))) (pair (pair (address %pssigContract) (bytes %revLock)) (pair (int %selfDelay) (string %status))) : list operation
                SWAP;       # pair string (pair address mutez) : string : pair (pair (mutez %custFunding) (key %custPk)) (pair (timestamp %delayExpiry) (address %merchAddr)) : pair (pair mutez (pair (mutez %merchFunding) (key %merchPk))) (pair (pair (address %pssigContract) (bytes %revLock)) (pair (int %selfDelay) (string %status))) : list operation
                CDAR;       # address : string : pair (pair (mutez %custFunding) (key %custPk)) (pair (timestamp %delayExpiry) (address %merchAddr)) : pair (pair mutez (pair (mutez %merchFunding) (key %merchPk))) (pair (pair (address %pssigContract) (bytes %revLock)) (pair (int %selfDelay) (string %status))) : list operation
                PUSH mutez 0; # mutez : address : string : pair (pair (mutez %custFunding) (key %custPk)) (pair (timestamp %delayExpiry) (address %merchAddr)) : pair (pair mutez (pair (mutez %merchFunding) (key %merchPk))) (pair (pair (address %pssigContract) (bytes %revLock)) (pair (int %selfDelay) (string %status))) : list operation
                SWAP;       # address : mutez : string : pair (pair (mutez %custFunding) (key %custPk)) (pair (timestamp %delayExpiry) (address %merchAddr)) : pair (pair mutez (pair (mutez %merchFunding) (key %merchPk))) (pair (pair (address %pssigContract) (bytes %revLock)) (pair (int %selfDelay) (string %status))) : list operation
                PAIR;       # pair address mutez : string : pair (pair (mutez %custFunding) (key %custPk)) (pair (timestamp %delayExpiry) (address %merchAddr)) : pair (pair mutez (pair (mutez %merchFunding) (key %merchPk))) (pair (pair (address %pssigContract) (bytes %revLock)) (pair (int %selfDelay) (string %status))) : list operation
                SWAP;       # string : pair address mutez : pair (pair (mutez %custFunding) (key %custPk)) (pair (timestamp %delayExpiry) (address %merchAddr)) : pair (pair mutez (pair (mutez %merchFunding) (key %merchPk))) (pair (pair (address %pssigContract) (bytes %revLock)) (pair (int %selfDelay) (string %status))) : list operation
                PAIR;       # pair string (pair address mutez) : pair (pair (mutez %custFunding) (key %custPk)) (pair (timestamp %delayExpiry) (address %merchAddr)) : pair (pair mutez (pair (mutez %merchFunding) (key %merchPk))) (pair (pair (address %pssigContract) (bytes %revLock)) (pair (int %selfDelay) (string %status))) : list operation
                PAIR;       # pair (pair string (pair address mutez)) (pair (pair (mutez %custFunding) (key %custPk)) (pair (timestamp %delayExpiry) (address %merchAddr))) : pair (pair mutez (pair (mutez %merchFunding) (key %merchPk))) (pair (pair (address %pssigContract) (bytes %revLock)) (pair (int %selfDelay) (string %status))) : list operation
                PAIR;       # pair (pair (pair string (pair address mutez)) (pair (pair (mutez %custFunding) (key %custPk)) (pair (timestamp %delayExpiry) (address %merchAddr)))) (pair (pair mutez (pair (mutez %merchFunding) (key %merchPk))) (pair (pair (address %pssigContract) (bytes %revLock)) (pair (int %selfDelay) (string %status)))) : list operation
                # self.data.merchBal = sp.tez(0) # pair (pair (pair string (pair address mutez)) (pair (pair (mutez %custFunding) (key %custPk)) (pair (timestamp %delayExpiry) (address %merchAddr)))) (pair (pair mutez (pair (mutez %merchFunding) (key %merchPk))) (pair (pair (address %pssigContract) (bytes %revLock)) (pair (int %selfDelay) (string %status)))) : list operation
                DUP;        # pair (pair (pair string (pair address mutez)) (pair (pair (mutez %custFunding) (key %custPk)) (pair (timestamp %delayExpiry) (address %merchAddr)))) (pair (pair mutez (pair (mutez %merchFunding) (key %merchPk))) (pair (pair (address %pssigContract) (bytes %revLock)) (pair (int %selfDelay) (string %status)))) : pair (pair (pair string (pair address mutez)) (pair (pair (mutez %custFunding) (key %custPk)) (pair (timestamp %delayExpiry) (address %merchAddr)))) (pair (pair mutez (pair (mutez %merchFunding) (key %merchPk))) (pair (pair (address %pssigContract) (bytes %revLock)) (pair (int %selfDelay) (string %status)))) : list operation
                CAR;        # pair (pair string (pair address mutez)) (pair (pair (mutez %custFunding) (key %custPk)) (pair (timestamp %delayExpiry) (address %merchAddr))) : pair (pair (pair string (pair address mutez)) (pair (pair (mutez %custFunding) (key %custPk)) (pair (timestamp %delayExpiry) (address %merchAddr)))) (pair (pair mutez (pair (mutez %merchFunding) (key %merchPk))) (pair (pair (address %pssigContract) (bytes %revLock)) (pair (int %selfDelay) (string %status)))) : list operation
                SWAP;       # pair (pair (pair string (pair address mutez)) (pair (pair (mutez %custFunding) (key %custPk)) (pair (timestamp %delayExpiry) (address %merchAddr)))) (pair (pair mutez (pair (mutez %merchFunding) (key %merchPk))) (pair (pair (address %pssigContract) (bytes %revLock)) (pair (int %selfDelay) (string %status)))) : pair (pair string (pair address mutez)) (pair (pair (mutez %custFunding) (key %custPk)) (pair (timestamp %delayExpiry) (address %merchAddr))) : list operation
                CDR;        # pair (pair mutez (pair (mutez %merchFunding) (key %merchPk))) (pair (pair (address %pssigContract) (bytes %revLock)) (pair (int %selfDelay) (string %status))) : pair (pair string (pair address mutez)) (pair (pair (mutez %custFunding) (key %custPk)) (pair (timestamp %delayExpiry) (address %merchAddr))) : list operation
                DUP;        # pair (pair mutez (pair (mutez %merchFunding) (key %merchPk))) (pair (pair (address %pssigContract) (bytes %revLock)) (pair (int %selfDelay) (string %status))) : pair (pair mutez (pair (mutez %merchFunding) (key %merchPk))) (pair (pair (address %pssigContract) (bytes %revLock)) (pair (int %selfDelay) (string %status))) : pair (pair string (pair address mutez)) (pair (pair (mutez %custFunding) (key %custPk)) (pair (timestamp %delayExpiry) (address %merchAddr))) : list operation
                CDR;        # pair (pair (address %pssigContract) (bytes %revLock)) (pair (int %selfDelay) (string %status)) : pair (pair mutez (pair (mutez %merchFunding) (key %merchPk))) (pair (pair (address %pssigContract) (bytes %revLock)) (pair (int %selfDelay) (string %status))) : pair (pair string (pair address mutez)) (pair (pair (mutez %custFunding) (key %custPk)) (pair (timestamp %delayExpiry) (address %merchAddr))) : list operation
                SWAP;       # pair (pair mutez (pair (mutez %merchFunding) (key %merchPk))) (pair (pair (address %pssigContract) (bytes %revLock)) (pair (int %selfDelay) (string %status))) : pair (pair (address %pssigContract) (bytes %revLock)) (pair (int %selfDelay) (string %status)) : pair (pair string (pair address mutez)) (pair (pair (mutez %custFunding) (key %custPk)) (pair (timestamp %delayExpiry) (address %merchAddr))) : list operation
                CADR;       # pair (mutez %merchFunding) (key %merchPk) : pair (pair (address %pssigContract) (bytes %revLock)) (pair (int %selfDelay) (string %status)) : pair (pair string (pair address mutez)) (pair (pair (mutez %custFunding) (key %custPk)) (pair (timestamp %delayExpiry) (address %merchAddr))) : list operation
                PUSH mutez 0; # mutez : pair (mutez %merchFunding) (key %merchPk) : pair (pair (address %pssigContract) (bytes %revLock)) (pair (int %selfDelay) (string %status)) : pair (pair string (pair address mutez)) (pair (pair (mutez %custFunding) (key %custPk)) (pair (timestamp %delayExpiry) (address %merchAddr))) : list operation
                PAIR;       # pair mutez (pair (mutez %merchFunding) (key %merchPk)) : pair (pair (address %pssigContract) (bytes %revLock)) (pair (int %selfDelay) (string %status)) : pair (pair string (pair address mutez)) (pair (pair (mutez %custFunding) (key %custPk)) (pair (timestamp %delayExpiry) (address %merchAddr))) : list operation
                PAIR;       # pair (pair mutez (pair (mutez %merchFunding) (key %merchPk))) (pair (pair (address %pssigContract) (bytes %revLock)) (pair (int %selfDelay) (string %status))) : pair (pair string (pair address mutez)) (pair (pair (mutez %custFunding) (key %custPk)) (pair (timestamp %delayExpiry) (address %merchAddr))) : list operation
                SWAP;       # pair (pair string (pair address mutez)) (pair (pair (mutez %custFunding) (key %custPk)) (pair (timestamp %delayExpiry) (address %merchAddr))) : pair (pair mutez (pair (mutez %merchFunding) (key %merchPk))) (pair (pair (address %pssigContract) (bytes %revLock)) (pair (int %selfDelay) (string %status))) : list operation
                PAIR;       # pair (pair (pair string (pair address mutez)) (pair (pair (mutez %custFunding) (key %custPk)) (pair (timestamp %delayExpiry) (address %merchAddr)))) (pair (pair mutez (pair (mutez %merchFunding) (key %merchPk))) (pair (pair (address %pssigContract) (bytes %revLock)) (pair (int %selfDelay) (string %status)))) : list operation
                # self.data.status = 'closed' # pair (pair (pair string (pair address mutez)) (pair (pair (mutez %custFunding) (key %custPk)) (pair (timestamp %delayExpiry) (address %merchAddr)))) (pair (pair mutez (pair (mutez %merchFunding) (key %merchPk))) (pair (pair (address %pssigContract) (bytes %revLock)) (pair (int %selfDelay) (string %status)))) : list operation
                DUP;        # pair (pair (pair string (pair address mutez)) (pair (pair (mutez %custFunding) (key %custPk)) (pair (timestamp %delayExpiry) (address %merchAddr)))) (pair (pair mutez (pair (mutez %merchFunding) (key %merchPk))) (pair (pair (address %pssigContract) (bytes %revLock)) (pair (int %selfDelay) (string %status)))) : pair (pair (pair string (pair address mutez)) (pair (pair (mutez %custFunding) (key %custPk)) (pair (timestamp %delayExpiry) (address %merchAddr)))) (pair (pair mutez (pair (mutez %merchFunding) (key %merchPk))) (pair (pair (address %pssigContract) (bytes %revLock)) (pair (int %selfDelay) (string %status)))) : list operation
                CAR;        # pair (pair string (pair address mutez)) (pair (pair (mutez %custFunding) (key %custPk)) (pair (timestamp %delayExpiry) (address %merchAddr))) : pair (pair (pair string (pair address mutez)) (pair (pair (mutez %custFunding) (key %custPk)) (pair (timestamp %delayExpiry) (address %merchAddr)))) (pair (pair mutez (pair (mutez %merchFunding) (key %merchPk))) (pair (pair (address %pssigContract) (bytes %revLock)) (pair (int %selfDelay) (string %status)))) : list operation
                SWAP;       # pair (pair (pair string (pair address mutez)) (pair (pair (mutez %custFunding) (key %custPk)) (pair (timestamp %delayExpiry) (address %merchAddr)))) (pair (pair mutez (pair (mutez %merchFunding) (key %merchPk))) (pair (pair (address %pssigContract) (bytes %revLock)) (pair (int %selfDelay) (string %status)))) : pair (pair string (pair address mutez)) (pair (pair (mutez %custFunding) (key %custPk)) (pair (timestamp %delayExpiry) (address %merchAddr))) : list operation
                CDR;        # pair (pair mutez (pair (mutez %merchFunding) (key %merchPk))) (pair (pair (address %pssigContract) (bytes %revLock)) (pair (int %selfDelay) (string %status))) : pair (pair string (pair address mutez)) (pair (pair (mutez %custFunding) (key %custPk)) (pair (timestamp %delayExpiry) (address %merchAddr))) : list operation
                DUP;        # pair (pair mutez (pair (mutez %merchFunding) (key %merchPk))) (pair (pair (address %pssigContract) (bytes %revLock)) (pair (int %selfDelay) (string %status))) : pair (pair mutez (pair (mutez %merchFunding) (key %merchPk))) (pair (pair (address %pssigContract) (bytes %revLock)) (pair (int %selfDelay) (string %status))) : pair (pair string (pair address mutez)) (pair (pair (mutez %custFunding) (key %custPk)) (pair (timestamp %delayExpiry) (address %merchAddr))) : list operation
                CAR;        # pair mutez (pair (mutez %merchFunding) (key %merchPk)) : pair (pair mutez (pair (mutez %merchFunding) (key %merchPk))) (pair (pair (address %pssigContract) (bytes %revLock)) (pair (int %selfDelay) (string %status))) : pair (pair string (pair address mutez)) (pair (pair (mutez %custFunding) (key %custPk)) (pair (timestamp %delayExpiry) (address %merchAddr))) : list operation
                SWAP;       # pair (pair mutez (pair (mutez %merchFunding) (key %merchPk))) (pair (pair (address %pssigContract) (bytes %revLock)) (pair (int %selfDelay) (string %status))) : pair mutez (pair (mutez %merchFunding) (key %merchPk)) : pair (pair string (pair address mutez)) (pair (pair (mutez %custFunding) (key %custPk)) (pair (timestamp %delayExpiry) (address %merchAddr))) : list operation
                CDR;        # pair (pair (address %pssigContract) (bytes %revLock)) (pair (int %selfDelay) (string %status)) : pair mutez (pair (mutez %merchFunding) (key %merchPk)) : pair (pair string (pair address mutez)) (pair (pair (mutez %custFunding) (key %custPk)) (pair (timestamp %delayExpiry) (address %merchAddr))) : list operation
                DUP;        # pair (pair (address %pssigContract) (bytes %revLock)) (pair (int %selfDelay) (string %status)) : pair (pair (address %pssigContract) (bytes %revLock)) (pair (int %selfDelay) (string %status)) : pair mutez (pair (mutez %merchFunding) (key %merchPk)) : pair (pair string (pair address mutez)) (pair (pair (mutez %custFunding) (key %custPk)) (pair (timestamp %delayExpiry) (address %merchAddr))) : list operation
                CAR;        # pair (address %pssigContract) (bytes %revLock) : pair (pair (address %pssigContract) (bytes %revLock)) (pair (int %selfDelay) (string %status)) : pair mutez (pair (mutez %merchFunding) (key %merchPk)) : pair (pair string (pair address mutez)) (pair (pair (mutez %custFunding) (key %custPk)) (pair (timestamp %delayExpiry) (address %merchAddr))) : list operation
                SWAP;       # pair (pair (address %pssigContract) (bytes %revLock)) (pair (int %selfDelay) (string %status)) : pair (address %pssigContract) (bytes %revLock) : pair mutez (pair (mutez %merchFunding) (key %merchPk)) : pair (pair string (pair address mutez)) (pair (pair (mutez %custFunding) (key %custPk)) (pair (timestamp %delayExpiry) (address %merchAddr))) : list operation
                CDAR;       # int : pair (address %pssigContract) (bytes %revLock) : pair mutez (pair (mutez %merchFunding) (key %merchPk)) : pair (pair string (pair address mutez)) (pair (pair (mutez %custFunding) (key %custPk)) (pair (timestamp %delayExpiry) (address %merchAddr))) : list operation
                PUSH string "closed"; # string : int : pair (address %pssigContract) (bytes %revLock) : pair mutez (pair (mutez %merchFunding) (key %merchPk)) : pair (pair string (pair address mutez)) (pair (pair (mutez %custFunding) (key %custPk)) (pair (timestamp %delayExpiry) (address %merchAddr))) : list operation
                SWAP;       # int : string : pair (address %pssigContract) (bytes %revLock) : pair mutez (pair (mutez %merchFunding) (key %merchPk)) : pair (pair string (pair address mutez)) (pair (pair (mutez %custFunding) (key %custPk)) (pair (timestamp %delayExpiry) (address %merchAddr))) : list operation
                PAIR;       # pair int string : pair (address %pssigContract) (bytes %revLock) : pair mutez (pair (mutez %merchFunding) (key %merchPk)) : pair (pair string (pair address mutez)) (pair (pair (mutez %custFunding) (key %custPk)) (pair (timestamp %delayExpiry) (address %merchAddr))) : list operation
                SWAP;       # pair (address %pssigContract) (bytes %revLock) : pair int string : pair mutez (pair (mutez %merchFunding) (key %merchPk)) : pair (pair string (pair address mutez)) (pair (pair (mutez %custFunding) (key %custPk)) (pair (timestamp %delayExpiry) (address %merchAddr))) : list operation
                PAIR;       # pair (pair (address %pssigContract) (bytes %revLock)) (pair int string) : pair mutez (pair (mutez %merchFunding) (key %merchPk)) : pair (pair string (pair address mutez)) (pair (pair (mutez %custFunding) (key %custPk)) (pair (timestamp %delayExpiry) (address %merchAddr))) : list operation
                SWAP;       # pair mutez (pair (mutez %merchFunding) (key %merchPk)) : pair (pair (address %pssigContract) (bytes %revLock)) (pair int string) : pair (pair string (pair address mutez)) (pair (pair (mutez %custFunding) (key %custPk)) (pair (timestamp %delayExpiry) (address %merchAddr))) : list operation
                PAIR;       # pair (pair mutez (pair (mutez %merchFunding) (key %merchPk))) (pair (pair (address %pssigContract) (bytes %revLock)) (pair int string)) : pair (pair string (pair address mutez)) (pair (pair (mutez %custFunding) (key %custPk)) (pair (timestamp %delayExpiry) (address %merchAddr))) : list operation
                SWAP;       # pair (pair string (pair address mutez)) (pair (pair (mutez %custFunding) (key %custPk)) (pair (timestamp %delayExpiry) (address %merchAddr))) : pair (pair mutez (pair (mutez %merchFunding) (key %merchPk))) (pair (pair (address %pssigContract) (bytes %revLock)) (pair int string)) : list operation
                PAIR;       # pair (pair (pair string (pair address mutez)) (pair (pair (mutez %custFunding) (key %custPk)) (pair (timestamp %delayExpiry) (address %merchAddr)))) (pair (pair mutez (pair (mutez %merchFunding) (key %merchPk))) (pair (pair (address %pssigContract) (bytes %revLock)) (pair int string))) : list operation
                SWAP;       # list operation : pair (pair (pair string (pair address mutez)) (pair (pair (mutez %custFunding) (key %custPk)) (pair (timestamp %delayExpiry) (address %merchAddr)))) (pair (pair mutez (pair (mutez %merchFunding) (key %merchPk))) (pair (pair (address %pssigContract) (bytes %revLock)) (pair int string)))
              }
              {
                IF_LEFT
                  {
                    # == receiveCall ==
                    # sp.verify(self.data.pssigContract == sp.sender) # @parameter%receiveCall : @storage
                    SENDER;     # address : @parameter%receiveCall : @storage
                    DIG 2;      # @storage : address : @parameter%receiveCall
                    DUP;        # @storage : @storage : address : @parameter%receiveCall
                    DUG 3;      # @storage : address : @parameter%receiveCall : @storage
                    CDDAAR;     # address : address : @parameter%receiveCall : @storage
                    COMPARE;    # int : @parameter%receiveCall : @storage
                    EQ;         # bool : @parameter%receiveCall : @storage
                    IF
                      {}
                      {
                        PUSH string "WrongCondition: self.data.pssigContract == sp.sender"; # string : @parameter%receiveCall : @storage
                        FAILWITH;   # FAILED
                      }; # @parameter%receiveCall : @storage
                    # sp.verify(self.data.status == 'checkingSig') # @parameter%receiveCall : @storage
                    PUSH string "checkingSig"; # string : @parameter%receiveCall : @storage
                    DIG 2;      # @storage : string : @parameter%receiveCall
                    DUP;        # @storage : @storage : string : @parameter%receiveCall
                    DUG 3;      # @storage : string : @parameter%receiveCall : @storage
                    CDDDDR;     # string : string : @parameter%receiveCall : @storage
                    COMPARE;    # int : @parameter%receiveCall : @storage
                    EQ;         # bool : @parameter%receiveCall : @storage
                    IF
                      {}
                      {
                        PUSH string "WrongCondition: self.data.status == 'checkingSig'"; # string : @parameter%receiveCall : @storage
                        FAILWITH;   # FAILED
                      }; # @parameter%receiveCall : @storage
                    # sp.verify(params.valid == True) # @parameter%receiveCall : @storage
                    DUP;        # @parameter%receiveCall : @parameter%receiveCall : @storage
                    CDDR;       # bool : @parameter%receiveCall : @storage
                    PUSH bool True; # bool : bool : @parameter%receiveCall : @storage
                    COMPARE;    # int : @parameter%receiveCall : @storage
                    EQ;         # bool : @parameter%receiveCall : @storage
                    IF
                      {}
                      {
                        PUSH string "WrongCondition: params.valid == True"; # string : @parameter%receiveCall : @storage
                        FAILWITH;   # FAILED
                      }; # @parameter%receiveCall : @storage
                    SWAP;       # @storage : @parameter%receiveCall
                    # self.data.custBal = params.newCustBal # @storage : @parameter%receiveCall
                    DUP;        # @storage : @storage : @parameter%receiveCall
                    CDR;        # pair (pair (mutez %merchBal) (pair (mutez %merchFunding) (key %merchPk))) (pair (pair (address %pssigContract) (bytes %revLock)) (pair (int %selfDelay) (string %status))) : @storage : @parameter%receiveCall
                    SWAP;       # @storage : pair (pair (mutez %merchBal) (pair (mutez %merchFunding) (key %merchPk))) (pair (pair (address %pssigContract) (bytes %revLock)) (pair (int %selfDelay) (string %status))) : @parameter%receiveCall
                    CAR;        # pair (pair (string %chanID) (pair (address %custAddr) (mutez %custBal))) (pair (pair (mutez %custFunding) (key %custPk)) (pair (timestamp %delayExpiry) (address %merchAddr))) : pair (pair (mutez %merchBal) (pair (mutez %merchFunding) (key %merchPk))) (pair (pair (address %pssigContract) (bytes %revLock)) (pair (int %selfDelay) (string %status))) : @parameter%receiveCall
                    DUP;        # pair (pair (string %chanID) (pair (address %custAddr) (mutez %custBal))) (pair (pair (mutez %custFunding) (key %custPk)) (pair (timestamp %delayExpiry) (address %merchAddr))) : pair (pair (string %chanID) (pair (address %custAddr) (mutez %custBal))) (pair (pair (mutez %custFunding) (key %custPk)) (pair (timestamp %delayExpiry) (address %merchAddr))) : pair (pair (mutez %merchBal) (pair (mutez %merchFunding) (key %merchPk))) (pair (pair (address %pssigContract) (bytes %revLock)) (pair (int %selfDelay) (string %status))) : @parameter%receiveCall
                    CDR;        # pair (pair (mutez %custFunding) (key %custPk)) (pair (timestamp %delayExpiry) (address %merchAddr)) : pair (pair (string %chanID) (pair (address %custAddr) (mutez %custBal))) (pair (pair (mutez %custFunding) (key %custPk)) (pair (timestamp %delayExpiry) (address %merchAddr))) : pair (pair (mutez %merchBal) (pair (mutez %merchFunding) (key %merchPk))) (pair (pair (address %pssigContract) (bytes %revLock)) (pair (int %selfDelay) (string %status))) : @parameter%receiveCall
                    SWAP;       # pair (pair (string %chanID) (pair (address %custAddr) (mutez %custBal))) (pair (pair (mutez %custFunding) (key %custPk)) (pair (timestamp %delayExpiry) (address %merchAddr))) : pair (pair (mutez %custFunding) (key %custPk)) (pair (timestamp %delayExpiry) (address %merchAddr)) : pair (pair (mutez %merchBal) (pair (mutez %merchFunding) (key %merchPk))) (pair (pair (address %pssigContract) (bytes %revLock)) (pair (int %selfDelay) (string %status))) : @parameter%receiveCall
                    CAR;        # pair (string %chanID) (pair (address %custAddr) (mutez %custBal)) : pair (pair (mutez %custFunding) (key %custPk)) (pair (timestamp %delayExpiry) (address %merchAddr)) : pair (pair (mutez %merchBal) (pair (mutez %merchFunding) (key %merchPk))) (pair (pair (address %pssigContract) (bytes %revLock)) (pair (int %selfDelay) (string %status))) : @parameter%receiveCall
                    DUP;        # pair (string %chanID) (pair (address %custAddr) (mutez %custBal)) : pair (string %chanID) (pair (address %custAddr) (mutez %custBal)) : pair (pair (mutez %custFunding) (key %custPk)) (pair (timestamp %delayExpiry) (address %merchAddr)) : pair (pair (mutez %merchBal) (pair (mutez %merchFunding) (key %merchPk))) (pair (pair (address %pssigContract) (bytes %revLock)) (pair (int %selfDelay) (string %status))) : @parameter%receiveCall
                    CAR;        # string : pair (string %chanID) (pair (address %custAddr) (mutez %custBal)) : pair (pair (mutez %custFunding) (key %custPk)) (pair (timestamp %delayExpiry) (address %merchAddr)) : pair (pair (mutez %merchBal) (pair (mutez %merchFunding) (key %merchPk))) (pair (pair (address %pssigContract) (bytes %revLock)) (pair (int %selfDelay) (string %status))) : @parameter%receiveCall
                    SWAP;       # pair (string %chanID) (pair (address %custAddr) (mutez %custBal)) : string : pair (pair (mutez %custFunding) (key %custPk)) (pair (timestamp %delayExpiry) (address %merchAddr)) : pair (pair (mutez %merchBal) (pair (mutez %merchFunding) (key %merchPk))) (pair (pair (address %pssigContract) (bytes %revLock)) (pair (int %selfDelay) (string %status))) : @parameter%receiveCall
                    CDAR;       # address : string : pair (pair (mutez %custFunding) (key %custPk)) (pair (timestamp %delayExpiry) (address %merchAddr)) : pair (pair (mutez %merchBal) (pair (mutez %merchFunding) (key %merchPk))) (pair (pair (address %pssigContract) (bytes %revLock)) (pair (int %selfDelay) (string %status))) : @parameter%receiveCall
                    DIG 4;      # @parameter%receiveCall : address : string : pair (pair (mutez %custFunding) (key %custPk)) (pair (timestamp %delayExpiry) (address %merchAddr)) : pair (pair (mutez %merchBal) (pair (mutez %merchFunding) (key %merchPk))) (pair (pair (address %pssigContract) (bytes %revLock)) (pair (int %selfDelay) (string %status)))
                    DUP;        # @parameter%receiveCall : @parameter%receiveCall : address : string : pair (pair (mutez %custFunding) (key %custPk)) (pair (timestamp %delayExpiry) (address %merchAddr)) : pair (pair (mutez %merchBal) (pair (mutez %merchFunding) (key %merchPk))) (pair (pair (address %pssigContract) (bytes %revLock)) (pair (int %selfDelay) (string %status)))
                    DUG 5;      # @parameter%receiveCall : address : string : pair (pair (mutez %custFunding) (key %custPk)) (pair (timestamp %delayExpiry) (address %merchAddr)) : pair (pair (mutez %merchBal) (pair (mutez %merchFunding) (key %merchPk))) (pair (pair (address %pssigContract) (bytes %revLock)) (pair (int %selfDelay) (string %status))) : @parameter%receiveCall
                    CAAR;       # mutez : address : string : pair (pair (mutez %custFunding) (key %custPk)) (pair (timestamp %delayExpiry) (address %merchAddr)) : pair (pair (mutez %merchBal) (pair (mutez %merchFunding) (key %merchPk))) (pair (pair (address %pssigContract) (bytes %revLock)) (pair (int %selfDelay) (string %status))) : @parameter%receiveCall
                    SWAP;       # address : mutez : string : pair (pair (mutez %custFunding) (key %custPk)) (pair (timestamp %delayExpiry) (address %merchAddr)) : pair (pair (mutez %merchBal) (pair (mutez %merchFunding) (key %merchPk))) (pair (pair (address %pssigContract) (bytes %revLock)) (pair (int %selfDelay) (string %status))) : @parameter%receiveCall
                    PAIR;       # pair address mutez : string : pair (pair (mutez %custFunding) (key %custPk)) (pair (timestamp %delayExpiry) (address %merchAddr)) : pair (pair (mutez %merchBal) (pair (mutez %merchFunding) (key %merchPk))) (pair (pair (address %pssigContract) (bytes %revLock)) (pair (int %selfDelay) (string %status))) : @parameter%receiveCall
                    SWAP;       # string : pair address mutez : pair (pair (mutez %custFunding) (key %custPk)) (pair (timestamp %delayExpiry) (address %merchAddr)) : pair (pair (mutez %merchBal) (pair (mutez %merchFunding) (key %merchPk))) (pair (pair (address %pssigContract) (bytes %revLock)) (pair (int %selfDelay) (string %status))) : @parameter%receiveCall
                    PAIR;       # pair string (pair address mutez) : pair (pair (mutez %custFunding) (key %custPk)) (pair (timestamp %delayExpiry) (address %merchAddr)) : pair (pair (mutez %merchBal) (pair (mutez %merchFunding) (key %merchPk))) (pair (pair (address %pssigContract) (bytes %revLock)) (pair (int %selfDelay) (string %status))) : @parameter%receiveCall
                    PAIR;       # pair (pair string (pair address mutez)) (pair (pair (mutez %custFunding) (key %custPk)) (pair (timestamp %delayExpiry) (address %merchAddr))) : pair (pair (mutez %merchBal) (pair (mutez %merchFunding) (key %merchPk))) (pair (pair (address %pssigContract) (bytes %revLock)) (pair (int %selfDelay) (string %status))) : @parameter%receiveCall
                    PAIR;       # pair (pair (pair string (pair address mutez)) (pair (pair (mutez %custFunding) (key %custPk)) (pair (timestamp %delayExpiry) (address %merchAddr)))) (pair (pair (mutez %merchBal) (pair (mutez %merchFunding) (key %merchPk))) (pair (pair (address %pssigContract) (bytes %revLock)) (pair (int %selfDelay) (string %status)))) : @parameter%receiveCall
                    # self.data.merchBal = params.newMerchBal # pair (pair (pair string (pair address mutez)) (pair (pair (mutez %custFunding) (key %custPk)) (pair (timestamp %delayExpiry) (address %merchAddr)))) (pair (pair (mutez %merchBal) (pair (mutez %merchFunding) (key %merchPk))) (pair (pair (address %pssigContract) (bytes %revLock)) (pair (int %selfDelay) (string %status)))) : @parameter%receiveCall
                    DUP;        # pair (pair (pair string (pair address mutez)) (pair (pair (mutez %custFunding) (key %custPk)) (pair (timestamp %delayExpiry) (address %merchAddr)))) (pair (pair (mutez %merchBal) (pair (mutez %merchFunding) (key %merchPk))) (pair (pair (address %pssigContract) (bytes %revLock)) (pair (int %selfDelay) (string %status)))) : pair (pair (pair string (pair address mutez)) (pair (pair (mutez %custFunding) (key %custPk)) (pair (timestamp %delayExpiry) (address %merchAddr)))) (pair (pair (mutez %merchBal) (pair (mutez %merchFunding) (key %merchPk))) (pair (pair (address %pssigContract) (bytes %revLock)) (pair (int %selfDelay) (string %status)))) : @parameter%receiveCall
                    CAR;        # pair (pair string (pair address mutez)) (pair (pair (mutez %custFunding) (key %custPk)) (pair (timestamp %delayExpiry) (address %merchAddr))) : pair (pair (pair string (pair address mutez)) (pair (pair (mutez %custFunding) (key %custPk)) (pair (timestamp %delayExpiry) (address %merchAddr)))) (pair (pair (mutez %merchBal) (pair (mutez %merchFunding) (key %merchPk))) (pair (pair (address %pssigContract) (bytes %revLock)) (pair (int %selfDelay) (string %status)))) : @parameter%receiveCall
                    SWAP;       # pair (pair (pair string (pair address mutez)) (pair (pair (mutez %custFunding) (key %custPk)) (pair (timestamp %delayExpiry) (address %merchAddr)))) (pair (pair (mutez %merchBal) (pair (mutez %merchFunding) (key %merchPk))) (pair (pair (address %pssigContract) (bytes %revLock)) (pair (int %selfDelay) (string %status)))) : pair (pair string (pair address mutez)) (pair (pair (mutez %custFunding) (key %custPk)) (pair (timestamp %delayExpiry) (address %merchAddr))) : @parameter%receiveCall
                    CDR;        # pair (pair (mutez %merchBal) (pair (mutez %merchFunding) (key %merchPk))) (pair (pair (address %pssigContract) (bytes %revLock)) (pair (int %selfDelay) (string %status))) : pair (pair string (pair address mutez)) (pair (pair (mutez %custFunding) (key %custPk)) (pair (timestamp %delayExpiry) (address %merchAddr))) : @parameter%receiveCall
                    DUP;        # pair (pair (mutez %merchBal) (pair (mutez %merchFunding) (key %merchPk))) (pair (pair (address %pssigContract) (bytes %revLock)) (pair (int %selfDelay) (string %status))) : pair (pair (mutez %merchBal) (pair (mutez %merchFunding) (key %merchPk))) (pair (pair (address %pssigContract) (bytes %revLock)) (pair (int %selfDelay) (string %status))) : pair (pair string (pair address mutez)) (pair (pair (mutez %custFunding) (key %custPk)) (pair (timestamp %delayExpiry) (address %merchAddr))) : @parameter%receiveCall
                    CDR;        # pair (pair (address %pssigContract) (bytes %revLock)) (pair (int %selfDelay) (string %status)) : pair (pair (mutez %merchBal) (pair (mutez %merchFunding) (key %merchPk))) (pair (pair (address %pssigContract) (bytes %revLock)) (pair (int %selfDelay) (string %status))) : pair (pair string (pair address mutez)) (pair (pair (mutez %custFunding) (key %custPk)) (pair (timestamp %delayExpiry) (address %merchAddr))) : @parameter%receiveCall
                    SWAP;       # pair (pair (mutez %merchBal) (pair (mutez %merchFunding) (key %merchPk))) (pair (pair (address %pssigContract) (bytes %revLock)) (pair (int %selfDelay) (string %status))) : pair (pair (address %pssigContract) (bytes %revLock)) (pair (int %selfDelay) (string %status)) : pair (pair string (pair address mutez)) (pair (pair (mutez %custFunding) (key %custPk)) (pair (timestamp %delayExpiry) (address %merchAddr))) : @parameter%receiveCall
                    CADR;       # pair (mutez %merchFunding) (key %merchPk) : pair (pair (address %pssigContract) (bytes %revLock)) (pair (int %selfDelay) (string %status)) : pair (pair string (pair address mutez)) (pair (pair (mutez %custFunding) (key %custPk)) (pair (timestamp %delayExpiry) (address %merchAddr))) : @parameter%receiveCall
                    DIG 3;      # @parameter%receiveCall : pair (mutez %merchFunding) (key %merchPk) : pair (pair (address %pssigContract) (bytes %revLock)) (pair (int %selfDelay) (string %status)) : pair (pair string (pair address mutez)) (pair (pair (mutez %custFunding) (key %custPk)) (pair (timestamp %delayExpiry) (address %merchAddr)))
                    DUP;        # @parameter%receiveCall : @parameter%receiveCall : pair (mutez %merchFunding) (key %merchPk) : pair (pair (address %pssigContract) (bytes %revLock)) (pair (int %selfDelay) (string %status)) : pair (pair string (pair address mutez)) (pair (pair (mutez %custFunding) (key %custPk)) (pair (timestamp %delayExpiry) (address %merchAddr)))
                    DUG 4;      # @parameter%receiveCall : pair (mutez %merchFunding) (key %merchPk) : pair (pair (address %pssigContract) (bytes %revLock)) (pair (int %selfDelay) (string %status)) : pair (pair string (pair address mutez)) (pair (pair (mutez %custFunding) (key %custPk)) (pair (timestamp %delayExpiry) (address %merchAddr))) : @parameter%receiveCall
                    CADR;       # mutez : pair (mutez %merchFunding) (key %merchPk) : pair (pair (address %pssigContract) (bytes %revLock)) (pair (int %selfDelay) (string %status)) : pair (pair string (pair address mutez)) (pair (pair (mutez %custFunding) (key %custPk)) (pair (timestamp %delayExpiry) (address %merchAddr))) : @parameter%receiveCall
                    PAIR;       # pair mutez (pair (mutez %merchFunding) (key %merchPk)) : pair (pair (address %pssigContract) (bytes %revLock)) (pair (int %selfDelay) (string %status)) : pair (pair string (pair address mutez)) (pair (pair (mutez %custFunding) (key %custPk)) (pair (timestamp %delayExpiry) (address %merchAddr))) : @parameter%receiveCall
                    PAIR;       # pair (pair mutez (pair (mutez %merchFunding) (key %merchPk))) (pair (pair (address %pssigContract) (bytes %revLock)) (pair (int %selfDelay) (string %status))) : pair (pair string (pair address mutez)) (pair (pair (mutez %custFunding) (key %custPk)) (pair (timestamp %delayExpiry) (address %merchAddr))) : @parameter%receiveCall
                    SWAP;       # pair (pair string (pair address mutez)) (pair (pair (mutez %custFunding) (key %custPk)) (pair (timestamp %delayExpiry) (address %merchAddr))) : pair (pair mutez (pair (mutez %merchFunding) (key %merchPk))) (pair (pair (address %pssigContract) (bytes %revLock)) (pair (int %selfDelay) (string %status))) : @parameter%receiveCall
                    PAIR;       # pair (pair (pair string (pair address mutez)) (pair (pair (mutez %custFunding) (key %custPk)) (pair (timestamp %delayExpiry) (address %merchAddr)))) (pair (pair mutez (pair (mutez %merchFunding) (key %merchPk))) (pair (pair (address %pssigContract) (bytes %revLock)) (pair (int %selfDelay) (string %status)))) : @parameter%receiveCall
                    # self.data.revLock = params.newRevLock # pair (pair (pair string (pair address mutez)) (pair (pair (mutez %custFunding) (key %custPk)) (pair (timestamp %delayExpiry) (address %merchAddr)))) (pair (pair mutez (pair (mutez %merchFunding) (key %merchPk))) (pair (pair (address %pssigContract) (bytes %revLock)) (pair (int %selfDelay) (string %status)))) : @parameter%receiveCall
                    DUP;        # pair (pair (pair string (pair address mutez)) (pair (pair (mutez %custFunding) (key %custPk)) (pair (timestamp %delayExpiry) (address %merchAddr)))) (pair (pair mutez (pair (mutez %merchFunding) (key %merchPk))) (pair (pair (address %pssigContract) (bytes %revLock)) (pair (int %selfDelay) (string %status)))) : pair (pair (pair string (pair address mutez)) (pair (pair (mutez %custFunding) (key %custPk)) (pair (timestamp %delayExpiry) (address %merchAddr)))) (pair (pair mutez (pair (mutez %merchFunding) (key %merchPk))) (pair (pair (address %pssigContract) (bytes %revLock)) (pair (int %selfDelay) (string %status)))) : @parameter%receiveCall
                    CAR;        # pair (pair string (pair address mutez)) (pair (pair (mutez %custFunding) (key %custPk)) (pair (timestamp %delayExpiry) (address %merchAddr))) : pair (pair (pair string (pair address mutez)) (pair (pair (mutez %custFunding) (key %custPk)) (pair (timestamp %delayExpiry) (address %merchAddr)))) (pair (pair mutez (pair (mutez %merchFunding) (key %merchPk))) (pair (pair (address %pssigContract) (bytes %revLock)) (pair (int %selfDelay) (string %status)))) : @parameter%receiveCall
                    SWAP;       # pair (pair (pair string (pair address mutez)) (pair (pair (mutez %custFunding) (key %custPk)) (pair (timestamp %delayExpiry) (address %merchAddr)))) (pair (pair mutez (pair (mutez %merchFunding) (key %merchPk))) (pair (pair (address %pssigContract) (bytes %revLock)) (pair (int %selfDelay) (string %status)))) : pair (pair string (pair address mutez)) (pair (pair (mutez %custFunding) (key %custPk)) (pair (timestamp %delayExpiry) (address %merchAddr))) : @parameter%receiveCall
                    CDR;        # pair (pair mutez (pair (mutez %merchFunding) (key %merchPk))) (pair (pair (address %pssigContract) (bytes %revLock)) (pair (int %selfDelay) (string %status))) : pair (pair string (pair address mutez)) (pair (pair (mutez %custFunding) (key %custPk)) (pair (timestamp %delayExpiry) (address %merchAddr))) : @parameter%receiveCall
                    DUP;        # pair (pair mutez (pair (mutez %merchFunding) (key %merchPk))) (pair (pair (address %pssigContract) (bytes %revLock)) (pair (int %selfDelay) (string %status))) : pair (pair mutez (pair (mutez %merchFunding) (key %merchPk))) (pair (pair (address %pssigContract) (bytes %revLock)) (pair (int %selfDelay) (string %status))) : pair (pair string (pair address mutez)) (pair (pair (mutez %custFunding) (key %custPk)) (pair (timestamp %delayExpiry) (address %merchAddr))) : @parameter%receiveCall
                    CAR;        # pair mutez (pair (mutez %merchFunding) (key %merchPk)) : pair (pair mutez (pair (mutez %merchFunding) (key %merchPk))) (pair (pair (address %pssigContract) (bytes %revLock)) (pair (int %selfDelay) (string %status))) : pair (pair string (pair address mutez)) (pair (pair (mutez %custFunding) (key %custPk)) (pair (timestamp %delayExpiry) (address %merchAddr))) : @parameter%receiveCall
                    SWAP;       # pair (pair mutez (pair (mutez %merchFunding) (key %merchPk))) (pair (pair (address %pssigContract) (bytes %revLock)) (pair (int %selfDelay) (string %status))) : pair mutez (pair (mutez %merchFunding) (key %merchPk)) : pair (pair string (pair address mutez)) (pair (pair (mutez %custFunding) (key %custPk)) (pair (timestamp %delayExpiry) (address %merchAddr))) : @parameter%receiveCall
                    CDR;        # pair (pair (address %pssigContract) (bytes %revLock)) (pair (int %selfDelay) (string %status)) : pair mutez (pair (mutez %merchFunding) (key %merchPk)) : pair (pair string (pair address mutez)) (pair (pair (mutez %custFunding) (key %custPk)) (pair (timestamp %delayExpiry) (address %merchAddr))) : @parameter%receiveCall
                    DUP;        # pair (pair (address %pssigContract) (bytes %revLock)) (pair (int %selfDelay) (string %status)) : pair (pair (address %pssigContract) (bytes %revLock)) (pair (int %selfDelay) (string %status)) : pair mutez (pair (mutez %merchFunding) (key %merchPk)) : pair (pair string (pair address mutez)) (pair (pair (mutez %custFunding) (key %custPk)) (pair (timestamp %delayExpiry) (address %merchAddr))) : @parameter%receiveCall
                    CDR;        # pair (int %selfDelay) (string %status) : pair (pair (address %pssigContract) (bytes %revLock)) (pair (int %selfDelay) (string %status)) : pair mutez (pair (mutez %merchFunding) (key %merchPk)) : pair (pair string (pair address mutez)) (pair (pair (mutez %custFunding) (key %custPk)) (pair (timestamp %delayExpiry) (address %merchAddr))) : @parameter%receiveCall
                    SWAP;       # pair (pair (address %pssigContract) (bytes %revLock)) (pair (int %selfDelay) (string %status)) : pair (int %selfDelay) (string %status) : pair mutez (pair (mutez %merchFunding) (key %merchPk)) : pair (pair string (pair address mutez)) (pair (pair (mutez %custFunding) (key %custPk)) (pair (timestamp %delayExpiry) (address %merchAddr))) : @parameter%receiveCall
                    CAAR;       # address : pair (int %selfDelay) (string %status) : pair mutez (pair (mutez %merchFunding) (key %merchPk)) : pair (pair string (pair address mutez)) (pair (pair (mutez %custFunding) (key %custPk)) (pair (timestamp %delayExpiry) (address %merchAddr))) : @parameter%receiveCall
                    DIG 4;      # @parameter%receiveCall : address : pair (int %selfDelay) (string %status) : pair mutez (pair (mutez %merchFunding) (key %merchPk)) : pair (pair string (pair address mutez)) (pair (pair (mutez %custFunding) (key %custPk)) (pair (timestamp %delayExpiry) (address %merchAddr)))
                    CDAR;       # bytes : address : pair (int %selfDelay) (string %status) : pair mutez (pair (mutez %merchFunding) (key %merchPk)) : pair (pair string (pair address mutez)) (pair (pair (mutez %custFunding) (key %custPk)) (pair (timestamp %delayExpiry) (address %merchAddr)))
                    SWAP;       # address : bytes : pair (int %selfDelay) (string %status) : pair mutez (pair (mutez %merchFunding) (key %merchPk)) : pair (pair string (pair address mutez)) (pair (pair (mutez %custFunding) (key %custPk)) (pair (timestamp %delayExpiry) (address %merchAddr)))
                    PAIR;       # pair address bytes : pair (int %selfDelay) (string %status) : pair mutez (pair (mutez %merchFunding) (key %merchPk)) : pair (pair string (pair address mutez)) (pair (pair (mutez %custFunding) (key %custPk)) (pair (timestamp %delayExpiry) (address %merchAddr)))
                    PAIR;       # pair (pair address bytes) (pair (int %selfDelay) (string %status)) : pair mutez (pair (mutez %merchFunding) (key %merchPk)) : pair (pair string (pair address mutez)) (pair (pair (mutez %custFunding) (key %custPk)) (pair (timestamp %delayExpiry) (address %merchAddr)))
                    SWAP;       # pair mutez (pair (mutez %merchFunding) (key %merchPk)) : pair (pair address bytes) (pair (int %selfDelay) (string %status)) : pair (pair string (pair address mutez)) (pair (pair (mutez %custFunding) (key %custPk)) (pair (timestamp %delayExpiry) (address %merchAddr)))
                    PAIR;       # pair (pair mutez (pair (mutez %merchFunding) (key %merchPk))) (pair (pair address bytes) (pair (int %selfDelay) (string %status))) : pair (pair string (pair address mutez)) (pair (pair (mutez %custFunding) (key %custPk)) (pair (timestamp %delayExpiry) (address %merchAddr)))
                    SWAP;       # pair (pair string (pair address mutez)) (pair (pair (mutez %custFunding) (key %custPk)) (pair (timestamp %delayExpiry) (address %merchAddr))) : pair (pair mutez (pair (mutez %merchFunding) (key %merchPk))) (pair (pair address bytes) (pair (int %selfDelay) (string %status)))
                    PAIR;       # pair (pair (pair string (pair address mutez)) (pair (pair (mutez %custFunding) (key %custPk)) (pair (timestamp %delayExpiry) (address %merchAddr)))) (pair (pair mutez (pair (mutez %merchFunding) (key %merchPk))) (pair (pair address bytes) (pair (int %selfDelay) (string %status))))
                    # self.data.delayExpiry = sp.add_seconds(sp.now, self.data.selfDelay) # pair (pair (pair string (pair address mutez)) (pair (pair (mutez %custFunding) (key %custPk)) (pair (timestamp %delayExpiry) (address %merchAddr)))) (pair (pair mutez (pair (mutez %merchFunding) (key %merchPk))) (pair (pair address bytes) (pair (int %selfDelay) (string %status))))
                    DUP;        # pair (pair (pair string (pair address mutez)) (pair (pair (mutez %custFunding) (key %custPk)) (pair (timestamp %delayExpiry) (address %merchAddr)))) (pair (pair mutez (pair (mutez %merchFunding) (key %merchPk))) (pair (pair address bytes) (pair (int %selfDelay) (string %status)))) : pair (pair (pair string (pair address mutez)) (pair (pair (mutez %custFunding) (key %custPk)) (pair (timestamp %delayExpiry) (address %merchAddr)))) (pair (pair mutez (pair (mutez %merchFunding) (key %merchPk))) (pair (pair address bytes) (pair (int %selfDelay) (string %status))))
                    DUP;        # pair (pair (pair string (pair address mutez)) (pair (pair (mutez %custFunding) (key %custPk)) (pair (timestamp %delayExpiry) (address %merchAddr)))) (pair (pair mutez (pair (mutez %merchFunding) (key %merchPk))) (pair (pair address bytes) (pair (int %selfDelay) (string %status)))) : pair (pair (pair string (pair address mutez)) (pair (pair (mutez %custFunding) (key %custPk)) (pair (timestamp %delayExpiry) (address %merchAddr)))) (pair (pair mutez (pair (mutez %merchFunding) (key %merchPk))) (pair (pair address bytes) (pair (int %selfDelay) (string %status)))) : pair (pair (pair string (pair address mutez)) (pair (pair (mutez %custFunding) (key %custPk)) (pair (timestamp %delayExpiry) (address %merchAddr)))) (pair (pair mutez (pair (mutez %merchFunding) (key %merchPk))) (pair (pair address bytes) (pair (int %selfDelay) (string %status))))
                    CDR;        # pair (pair mutez (pair (mutez %merchFunding) (key %merchPk))) (pair (pair address bytes) (pair (int %selfDelay) (string %status))) : pair (pair (pair string (pair address mutez)) (pair (pair (mutez %custFunding) (key %custPk)) (pair (timestamp %delayExpiry) (address %merchAddr)))) (pair (pair mutez (pair (mutez %merchFunding) (key %merchPk))) (pair (pair address bytes) (pair (int %selfDelay) (string %status)))) : pair (pair (pair string (pair address mutez)) (pair (pair (mutez %custFunding) (key %custPk)) (pair (timestamp %delayExpiry) (address %merchAddr)))) (pair (pair mutez (pair (mutez %merchFunding) (key %merchPk))) (pair (pair address bytes) (pair (int %selfDelay) (string %status))))
                    SWAP;       # pair (pair (pair string (pair address mutez)) (pair (pair (mutez %custFunding) (key %custPk)) (pair (timestamp %delayExpiry) (address %merchAddr)))) (pair (pair mutez (pair (mutez %merchFunding) (key %merchPk))) (pair (pair address bytes) (pair (int %selfDelay) (string %status)))) : pair (pair mutez (pair (mutez %merchFunding) (key %merchPk))) (pair (pair address bytes) (pair (int %selfDelay) (string %status))) : pair (pair (pair string (pair address mutez)) (pair (pair (mutez %custFunding) (key %custPk)) (pair (timestamp %delayExpiry) (address %merchAddr)))) (pair (pair mutez (pair (mutez %merchFunding) (key %merchPk))) (pair (pair address bytes) (pair (int %selfDelay) (string %status))))
                    CAR;        # pair (pair string (pair address mutez)) (pair (pair (mutez %custFunding) (key %custPk)) (pair (timestamp %delayExpiry) (address %merchAddr))) : pair (pair mutez (pair (mutez %merchFunding) (key %merchPk))) (pair (pair address bytes) (pair (int %selfDelay) (string %status))) : pair (pair (pair string (pair address mutez)) (pair (pair (mutez %custFunding) (key %custPk)) (pair (timestamp %delayExpiry) (address %merchAddr)))) (pair (pair mutez (pair (mutez %merchFunding) (key %merchPk))) (pair (pair address bytes) (pair (int %selfDelay) (string %status))))
                    DUP;        # pair (pair string (pair address mutez)) (pair (pair (mutez %custFunding) (key %custPk)) (pair (timestamp %delayExpiry) (address %merchAddr))) : pair (pair string (pair address mutez)) (pair (pair (mutez %custFunding) (key %custPk)) (pair (timestamp %delayExpiry) (address %merchAddr))) : pair (pair mutez (pair (mutez %merchFunding) (key %merchPk))) (pair (pair address bytes) (pair (int %selfDelay) (string %status))) : pair (pair (pair string (pair address mutez)) (pair (pair (mutez %custFunding) (key %custPk)) (pair (timestamp %delayExpiry) (address %merchAddr)))) (pair (pair mutez (pair (mutez %merchFunding) (key %merchPk))) (pair (pair address bytes) (pair (int %selfDelay) (string %status))))
                    CAR;        # pair string (pair address mutez) : pair (pair string (pair address mutez)) (pair (pair (mutez %custFunding) (key %custPk)) (pair (timestamp %delayExpiry) (address %merchAddr))) : pair (pair mutez (pair (mutez %merchFunding) (key %merchPk))) (pair (pair address bytes) (pair (int %selfDelay) (string %status))) : pair (pair (pair string (pair address mutez)) (pair (pair (mutez %custFunding) (key %custPk)) (pair (timestamp %delayExpiry) (address %merchAddr)))) (pair (pair mutez (pair (mutez %merchFunding) (key %merchPk))) (pair (pair address bytes) (pair (int %selfDelay) (string %status))))
                    SWAP;       # pair (pair string (pair address mutez)) (pair (pair (mutez %custFunding) (key %custPk)) (pair (timestamp %delayExpiry) (address %merchAddr))) : pair string (pair address mutez) : pair (pair mutez (pair (mutez %merchFunding) (key %merchPk))) (pair (pair address bytes) (pair (int %selfDelay) (string %status))) : pair (pair (pair string (pair address mutez)) (pair (pair (mutez %custFunding) (key %custPk)) (pair (timestamp %delayExpiry) (address %merchAddr)))) (pair (pair mutez (pair (mutez %merchFunding) (key %merchPk))) (pair (pair address bytes) (pair (int %selfDelay) (string %status))))
                    CDR;        # pair (pair (mutez %custFunding) (key %custPk)) (pair (timestamp %delayExpiry) (address %merchAddr)) : pair string (pair address mutez) : pair (pair mutez (pair (mutez %merchFunding) (key %merchPk))) (pair (pair address bytes) (pair (int %selfDelay) (string %status))) : pair (pair (pair string (pair address mutez)) (pair (pair (mutez %custFunding) (key %custPk)) (pair (timestamp %delayExpiry) (address %merchAddr)))) (pair (pair mutez (pair (mutez %merchFunding) (key %merchPk))) (pair (pair address bytes) (pair (int %selfDelay) (string %status))))
                    DUP;        # pair (pair (mutez %custFunding) (key %custPk)) (pair (timestamp %delayExpiry) (address %merchAddr)) : pair (pair (mutez %custFunding) (key %custPk)) (pair (timestamp %delayExpiry) (address %merchAddr)) : pair string (pair address mutez) : pair (pair mutez (pair (mutez %merchFunding) (key %merchPk))) (pair (pair address bytes) (pair (int %selfDelay) (string %status))) : pair (pair (pair string (pair address mutez)) (pair (pair (mutez %custFunding) (key %custPk)) (pair (timestamp %delayExpiry) (address %merchAddr)))) (pair (pair mutez (pair (mutez %merchFunding) (key %merchPk))) (pair (pair address bytes) (pair (int %selfDelay) (string %status))))
                    CAR;        # pair (mutez %custFunding) (key %custPk) : pair (pair (mutez %custFunding) (key %custPk)) (pair (timestamp %delayExpiry) (address %merchAddr)) : pair string (pair address mutez) : pair (pair mutez (pair (mutez %merchFunding) (key %merchPk))) (pair (pair address bytes) (pair (int %selfDelay) (string %status))) : pair (pair (pair string (pair address mutez)) (pair (pair (mutez %custFunding) (key %custPk)) (pair (timestamp %delayExpiry) (address %merchAddr)))) (pair (pair mutez (pair (mutez %merchFunding) (key %merchPk))) (pair (pair address bytes) (pair (int %selfDelay) (string %status))))
                    SWAP;       # pair (pair (mutez %custFunding) (key %custPk)) (pair (timestamp %delayExpiry) (address %merchAddr)) : pair (mutez %custFunding) (key %custPk) : pair string (pair address mutez) : pair (pair mutez (pair (mutez %merchFunding) (key %merchPk))) (pair (pair address bytes) (pair (int %selfDelay) (string %status))) : pair (pair (pair string (pair address mutez)) (pair (pair (mutez %custFunding) (key %custPk)) (pair (timestamp %delayExpiry) (address %merchAddr)))) (pair (pair mutez (pair (mutez %merchFunding) (key %merchPk))) (pair (pair address bytes) (pair (int %selfDelay) (string %status))))
                    CDDR;       # address : pair (mutez %custFunding) (key %custPk) : pair string (pair address mutez) : pair (pair mutez (pair (mutez %merchFunding) (key %merchPk))) (pair (pair address bytes) (pair (int %selfDelay) (string %status))) : pair (pair (pair string (pair address mutez)) (pair (pair (mutez %custFunding) (key %custPk)) (pair (timestamp %delayExpiry) (address %merchAddr)))) (pair (pair mutez (pair (mutez %merchFunding) (key %merchPk))) (pair (pair address bytes) (pair (int %selfDelay) (string %status))))
                    NOW;        # timestamp : address : pair (mutez %custFunding) (key %custPk) : pair string (pair address mutez) : pair (pair mutez (pair (mutez %merchFunding) (key %merchPk))) (pair (pair address bytes) (pair (int %selfDelay) (string %status))) : pair (pair (pair string (pair address mutez)) (pair (pair (mutez %custFunding) (key %custPk)) (pair (timestamp %delayExpiry) (address %merchAddr)))) (pair (pair mutez (pair (mutez %merchFunding) (key %merchPk))) (pair (pair address bytes) (pair (int %selfDelay) (string %status))))
                    DIG 5;      # pair (pair (pair string (pair address mutez)) (pair (pair (mutez %custFunding) (key %custPk)) (pair (timestamp %delayExpiry) (address %merchAddr)))) (pair (pair mutez (pair (mutez %merchFunding) (key %merchPk))) (pair (pair address bytes) (pair (int %selfDelay) (string %status)))) : timestamp : address : pair (mutez %custFunding) (key %custPk) : pair string (pair address mutez) : pair (pair mutez (pair (mutez %merchFunding) (key %merchPk))) (pair (pair address bytes) (pair (int %selfDelay) (string %status)))
                    CDDDAR;     # int : timestamp : address : pair (mutez %custFunding) (key %custPk) : pair string (pair address mutez) : pair (pair mutez (pair (mutez %merchFunding) (key %merchPk))) (pair (pair address bytes) (pair (int %selfDelay) (string %status)))
                    ADD;        # timestamp : address : pair (mutez %custFunding) (key %custPk) : pair string (pair address mutez) : pair (pair mutez (pair (mutez %merchFunding) (key %merchPk))) (pair (pair address bytes) (pair (int %selfDelay) (string %status)))
                    PAIR;       # pair timestamp address : pair (mutez %custFunding) (key %custPk) : pair string (pair address mutez) : pair (pair mutez (pair (mutez %merchFunding) (key %merchPk))) (pair (pair address bytes) (pair (int %selfDelay) (string %status)))
                    SWAP;       # pair (mutez %custFunding) (key %custPk) : pair timestamp address : pair string (pair address mutez) : pair (pair mutez (pair (mutez %merchFunding) (key %merchPk))) (pair (pair address bytes) (pair (int %selfDelay) (string %status)))
                    PAIR;       # pair (pair (mutez %custFunding) (key %custPk)) (pair timestamp address) : pair string (pair address mutez) : pair (pair mutez (pair (mutez %merchFunding) (key %merchPk))) (pair (pair address bytes) (pair (int %selfDelay) (string %status)))
                    SWAP;       # pair string (pair address mutez) : pair (pair (mutez %custFunding) (key %custPk)) (pair timestamp address) : pair (pair mutez (pair (mutez %merchFunding) (key %merchPk))) (pair (pair address bytes) (pair (int %selfDelay) (string %status)))
                    PAIR;       # pair (pair string (pair address mutez)) (pair (pair (mutez %custFunding) (key %custPk)) (pair timestamp address)) : pair (pair mutez (pair (mutez %merchFunding) (key %merchPk))) (pair (pair address bytes) (pair (int %selfDelay) (string %status)))
                    PAIR;       # pair (pair (pair string (pair address mutez)) (pair (pair (mutez %custFunding) (key %custPk)) (pair timestamp address))) (pair (pair mutez (pair (mutez %merchFunding) (key %merchPk))) (pair (pair address bytes) (pair (int %selfDelay) (string %status))))
                    # sp.send(self.data.merchAddr, self.data.merchBal) # pair (pair (pair string (pair address mutez)) (pair (pair (mutez %custFunding) (key %custPk)) (pair timestamp address))) (pair (pair mutez (pair (mutez %merchFunding) (key %merchPk))) (pair (pair address bytes) (pair (int %selfDelay) (string %status))))
                    DUP;        # pair (pair (pair string (pair address mutez)) (pair (pair (mutez %custFunding) (key %custPk)) (pair timestamp address))) (pair (pair mutez (pair (mutez %merchFunding) (key %merchPk))) (pair (pair address bytes) (pair (int %selfDelay) (string %status)))) : pair (pair (pair string (pair address mutez)) (pair (pair (mutez %custFunding) (key %custPk)) (pair timestamp address))) (pair (pair mutez (pair (mutez %merchFunding) (key %merchPk))) (pair (pair address bytes) (pair (int %selfDelay) (string %status))))
                    CADDDR;     # address : pair (pair (pair string (pair address mutez)) (pair (pair (mutez %custFunding) (key %custPk)) (pair timestamp address))) (pair (pair mutez (pair (mutez %merchFunding) (key %merchPk))) (pair (pair address bytes) (pair (int %selfDelay) (string %status))))
                    CONTRACT unit; # option (contract unit) : pair (pair (pair string (pair address mutez)) (pair (pair (mutez %custFunding) (key %custPk)) (pair timestamp address))) (pair (pair mutez (pair (mutez %merchFunding) (key %merchPk))) (pair (pair address bytes) (pair (int %selfDelay) (string %status))))
                    NIL operation; # list operation : option (contract unit) : pair (pair (pair string (pair address mutez)) (pair (pair (mutez %custFunding) (key %custPk)) (pair timestamp address))) (pair (pair mutez (pair (mutez %merchFunding) (key %merchPk))) (pair (pair address bytes) (pair (int %selfDelay) (string %status))))
                    SWAP;       # option (contract unit) : list operation : pair (pair (pair string (pair address mutez)) (pair (pair (mutez %custFunding) (key %custPk)) (pair timestamp address))) (pair (pair mutez (pair (mutez %merchFunding) (key %merchPk))) (pair (pair address bytes) (pair (int %selfDelay) (string %status))))
                    IF_SOME
                      {}
                      {
                        PUSH int 199; # int : list operation : pair (pair (pair string (pair address mutez)) (pair (pair (mutez %custFunding) (key %custPk)) (pair timestamp address))) (pair (pair mutez (pair (mutez %merchFunding) (key %merchPk))) (pair (pair address bytes) (pair (int %selfDelay) (string %status))))
                        FAILWITH;   # FAILED
                      }; # @some : list operation : pair (pair (pair string (pair address mutez)) (pair (pair (mutez %custFunding) (key %custPk)) (pair timestamp address))) (pair (pair mutez (pair (mutez %merchFunding) (key %merchPk))) (pair (pair address bytes) (pair (int %selfDelay) (string %status))))
                    DIG 2;      # pair (pair (pair string (pair address mutez)) (pair (pair (mutez %custFunding) (key %custPk)) (pair timestamp address))) (pair (pair mutez (pair (mutez %merchFunding) (key %merchPk))) (pair (pair address bytes) (pair (int %selfDelay) (string %status)))) : @some : list operation
                    DUP;        # pair (pair (pair string (pair address mutez)) (pair (pair (mutez %custFunding) (key %custPk)) (pair timestamp address))) (pair (pair mutez (pair (mutez %merchFunding) (key %merchPk))) (pair (pair address bytes) (pair (int %selfDelay) (string %status)))) : pair (pair (pair string (pair address mutez)) (pair (pair (mutez %custFunding) (key %custPk)) (pair timestamp address))) (pair (pair mutez (pair (mutez %merchFunding) (key %merchPk))) (pair (pair address bytes) (pair (int %selfDelay) (string %status)))) : @some : list operation
                    DUG 3;      # pair (pair (pair string (pair address mutez)) (pair (pair (mutez %custFunding) (key %custPk)) (pair timestamp address))) (pair (pair mutez (pair (mutez %merchFunding) (key %merchPk))) (pair (pair address bytes) (pair (int %selfDelay) (string %status)))) : @some : list operation : pair (pair (pair string (pair address mutez)) (pair (pair (mutez %custFunding) (key %custPk)) (pair timestamp address))) (pair (pair mutez (pair (mutez %merchFunding) (key %merchPk))) (pair (pair address bytes) (pair (int %selfDelay) (string %status))))
                    CDAAR;      # mutez : @some : list operation : pair (pair (pair string (pair address mutez)) (pair (pair (mutez %custFunding) (key %custPk)) (pair timestamp address))) (pair (pair mutez (pair (mutez %merchFunding) (key %merchPk))) (pair (pair address bytes) (pair (int %selfDelay) (string %status))))
                    UNIT;       # unit : mutez : @some : list operation : pair (pair (pair string (pair address mutez)) (pair (pair (mutez %custFunding) (key %custPk)) (pair timestamp address))) (pair (pair mutez (pair (mutez %merchFunding) (key %merchPk))) (pair (pair address bytes) (pair (int %selfDelay) (string %status))))
                    TRANSFER_TOKENS; # operation : list operation : pair (pair (pair string (pair address mutez)) (pair (pair (mutez %custFunding) (key %custPk)) (pair timestamp address))) (pair (pair mutez (pair (mutez %merchFunding) (key %merchPk))) (pair (pair address bytes) (pair (int %selfDelay) (string %status))))
                    CONS;       # list operation : pair (pair (pair string (pair address mutez)) (pair (pair (mutez %custFunding) (key %custPk)) (pair timestamp address))) (pair (pair mutez (pair (mutez %merchFunding) (key %merchPk))) (pair (pair address bytes) (pair (int %selfDelay) (string %status))))
                    SWAP;       # pair (pair (pair string (pair address mutez)) (pair (pair (mutez %custFunding) (key %custPk)) (pair timestamp address))) (pair (pair mutez (pair (mutez %merchFunding) (key %merchPk))) (pair (pair address bytes) (pair (int %selfDelay) (string %status)))) : list operation
                    # self.data.merchBal = sp.tez(0) # pair (pair (pair string (pair address mutez)) (pair (pair (mutez %custFunding) (key %custPk)) (pair timestamp address))) (pair (pair mutez (pair (mutez %merchFunding) (key %merchPk))) (pair (pair address bytes) (pair (int %selfDelay) (string %status)))) : list operation
                    DUP;        # pair (pair (pair string (pair address mutez)) (pair (pair (mutez %custFunding) (key %custPk)) (pair timestamp address))) (pair (pair mutez (pair (mutez %merchFunding) (key %merchPk))) (pair (pair address bytes) (pair (int %selfDelay) (string %status)))) : pair (pair (pair string (pair address mutez)) (pair (pair (mutez %custFunding) (key %custPk)) (pair timestamp address))) (pair (pair mutez (pair (mutez %merchFunding) (key %merchPk))) (pair (pair address bytes) (pair (int %selfDelay) (string %status)))) : list operation
                    CAR;        # pair (pair string (pair address mutez)) (pair (pair (mutez %custFunding) (key %custPk)) (pair timestamp address)) : pair (pair (pair string (pair address mutez)) (pair (pair (mutez %custFunding) (key %custPk)) (pair timestamp address))) (pair (pair mutez (pair (mutez %merchFunding) (key %merchPk))) (pair (pair address bytes) (pair (int %selfDelay) (string %status)))) : list operation
                    SWAP;       # pair (pair (pair string (pair address mutez)) (pair (pair (mutez %custFunding) (key %custPk)) (pair timestamp address))) (pair (pair mutez (pair (mutez %merchFunding) (key %merchPk))) (pair (pair address bytes) (pair (int %selfDelay) (string %status)))) : pair (pair string (pair address mutez)) (pair (pair (mutez %custFunding) (key %custPk)) (pair timestamp address)) : list operation
                    CDR;        # pair (pair mutez (pair (mutez %merchFunding) (key %merchPk))) (pair (pair address bytes) (pair (int %selfDelay) (string %status))) : pair (pair string (pair address mutez)) (pair (pair (mutez %custFunding) (key %custPk)) (pair timestamp address)) : list operation
                    DUP;        # pair (pair mutez (pair (mutez %merchFunding) (key %merchPk))) (pair (pair address bytes) (pair (int %selfDelay) (string %status))) : pair (pair mutez (pair (mutez %merchFunding) (key %merchPk))) (pair (pair address bytes) (pair (int %selfDelay) (string %status))) : pair (pair string (pair address mutez)) (pair (pair (mutez %custFunding) (key %custPk)) (pair timestamp address)) : list operation
                    CDR;        # pair (pair address bytes) (pair (int %selfDelay) (string %status)) : pair (pair mutez (pair (mutez %merchFunding) (key %merchPk))) (pair (pair address bytes) (pair (int %selfDelay) (string %status))) : pair (pair string (pair address mutez)) (pair (pair (mutez %custFunding) (key %custPk)) (pair timestamp address)) : list operation
                    SWAP;       # pair (pair mutez (pair (mutez %merchFunding) (key %merchPk))) (pair (pair address bytes) (pair (int %selfDelay) (string %status))) : pair (pair address bytes) (pair (int %selfDelay) (string %status)) : pair (pair string (pair address mutez)) (pair (pair (mutez %custFunding) (key %custPk)) (pair timestamp address)) : list operation
                    CADR;       # pair (mutez %merchFunding) (key %merchPk) : pair (pair address bytes) (pair (int %selfDelay) (string %status)) : pair (pair string (pair address mutez)) (pair (pair (mutez %custFunding) (key %custPk)) (pair timestamp address)) : list operation
                    PUSH mutez 0; # mutez : pair (mutez %merchFunding) (key %merchPk) : pair (pair address bytes) (pair (int %selfDelay) (string %status)) : pair (pair string (pair address mutez)) (pair (pair (mutez %custFunding) (key %custPk)) (pair timestamp address)) : list operation
                    PAIR;       # pair mutez (pair (mutez %merchFunding) (key %merchPk)) : pair (pair address bytes) (pair (int %selfDelay) (string %status)) : pair (pair string (pair address mutez)) (pair (pair (mutez %custFunding) (key %custPk)) (pair timestamp address)) : list operation
                    PAIR;       # pair (pair mutez (pair (mutez %merchFunding) (key %merchPk))) (pair (pair address bytes) (pair (int %selfDelay) (string %status))) : pair (pair string (pair address mutez)) (pair (pair (mutez %custFunding) (key %custPk)) (pair timestamp address)) : list operation
                    SWAP;       # pair (pair string (pair address mutez)) (pair (pair (mutez %custFunding) (key %custPk)) (pair timestamp address)) : pair (pair mutez (pair (mutez %merchFunding) (key %merchPk))) (pair (pair address bytes) (pair (int %selfDelay) (string %status))) : list operation
                    PAIR;       # pair (pair (pair string (pair address mutez)) (pair (pair (mutez %custFunding) (key %custPk)) (pair timestamp address))) (pair (pair mutez (pair (mutez %merchFunding) (key %merchPk))) (pair (pair address bytes) (pair (int %selfDelay) (string %status)))) : list operation
                    # self.data.status = 'custClose' # pair (pair (pair string (pair address mutez)) (pair (pair (mutez %custFunding) (key %custPk)) (pair timestamp address))) (pair (pair mutez (pair (mutez %merchFunding) (key %merchPk))) (pair (pair address bytes) (pair (int %selfDelay) (string %status)))) : list operation
                    DUP;        # pair (pair (pair string (pair address mutez)) (pair (pair (mutez %custFunding) (key %custPk)) (pair timestamp address))) (pair (pair mutez (pair (mutez %merchFunding) (key %merchPk))) (pair (pair address bytes) (pair (int %selfDelay) (string %status)))) : pair (pair (pair string (pair address mutez)) (pair (pair (mutez %custFunding) (key %custPk)) (pair timestamp address))) (pair (pair mutez (pair (mutez %merchFunding) (key %merchPk))) (pair (pair address bytes) (pair (int %selfDelay) (string %status)))) : list operation
                    CAR;        # pair (pair string (pair address mutez)) (pair (pair (mutez %custFunding) (key %custPk)) (pair timestamp address)) : pair (pair (pair string (pair address mutez)) (pair (pair (mutez %custFunding) (key %custPk)) (pair timestamp address))) (pair (pair mutez (pair (mutez %merchFunding) (key %merchPk))) (pair (pair address bytes) (pair (int %selfDelay) (string %status)))) : list operation
                    SWAP;       # pair (pair (pair string (pair address mutez)) (pair (pair (mutez %custFunding) (key %custPk)) (pair timestamp address))) (pair (pair mutez (pair (mutez %merchFunding) (key %merchPk))) (pair (pair address bytes) (pair (int %selfDelay) (string %status)))) : pair (pair string (pair address mutez)) (pair (pair (mutez %custFunding) (key %custPk)) (pair timestamp address)) : list operation
                    CDR;        # pair (pair mutez (pair (mutez %merchFunding) (key %merchPk))) (pair (pair address bytes) (pair (int %selfDelay) (string %status))) : pair (pair string (pair address mutez)) (pair (pair (mutez %custFunding) (key %custPk)) (pair timestamp address)) : list operation
                    DUP;        # pair (pair mutez (pair (mutez %merchFunding) (key %merchPk))) (pair (pair address bytes) (pair (int %selfDelay) (string %status))) : pair (pair mutez (pair (mutez %merchFunding) (key %merchPk))) (pair (pair address bytes) (pair (int %selfDelay) (string %status))) : pair (pair string (pair address mutez)) (pair (pair (mutez %custFunding) (key %custPk)) (pair timestamp address)) : list operation
                    CAR;        # pair mutez (pair (mutez %merchFunding) (key %merchPk)) : pair (pair mutez (pair (mutez %merchFunding) (key %merchPk))) (pair (pair address bytes) (pair (int %selfDelay) (string %status))) : pair (pair string (pair address mutez)) (pair (pair (mutez %custFunding) (key %custPk)) (pair timestamp address)) : list operation
                    SWAP;       # pair (pair mutez (pair (mutez %merchFunding) (key %merchPk))) (pair (pair address bytes) (pair (int %selfDelay) (string %status))) : pair mutez (pair (mutez %merchFunding) (key %merchPk)) : pair (pair string (pair address mutez)) (pair (pair (mutez %custFunding) (key %custPk)) (pair timestamp address)) : list operation
                    CDR;        # pair (pair address bytes) (pair (int %selfDelay) (string %status)) : pair mutez (pair (mutez %merchFunding) (key %merchPk)) : pair (pair string (pair address mutez)) (pair (pair (mutez %custFunding) (key %custPk)) (pair timestamp address)) : list operation
                    DUP;        # pair (pair address bytes) (pair (int %selfDelay) (string %status)) : pair (pair address bytes) (pair (int %selfDelay) (string %status)) : pair mutez (pair (mutez %merchFunding) (key %merchPk)) : pair (pair string (pair address mutez)) (pair (pair (mutez %custFunding) (key %custPk)) (pair timestamp address)) : list operation
                    CAR;        # pair address bytes : pair (pair address bytes) (pair (int %selfDelay) (string %status)) : pair mutez (pair (mutez %merchFunding) (key %merchPk)) : pair (pair string (pair address mutez)) (pair (pair (mutez %custFunding) (key %custPk)) (pair timestamp address)) : list operation
                    SWAP;       # pair (pair address bytes) (pair (int %selfDelay) (string %status)) : pair address bytes : pair mutez (pair (mutez %merchFunding) (key %merchPk)) : pair (pair string (pair address mutez)) (pair (pair (mutez %custFunding) (key %custPk)) (pair timestamp address)) : list operation
                    CDAR;       # int : pair address bytes : pair mutez (pair (mutez %merchFunding) (key %merchPk)) : pair (pair string (pair address mutez)) (pair (pair (mutez %custFunding) (key %custPk)) (pair timestamp address)) : list operation
                    PUSH string "custClose"; # string : int : pair address bytes : pair mutez (pair (mutez %merchFunding) (key %merchPk)) : pair (pair string (pair address mutez)) (pair (pair (mutez %custFunding) (key %custPk)) (pair timestamp address)) : list operation
                    SWAP;       # int : string : pair address bytes : pair mutez (pair (mutez %merchFunding) (key %merchPk)) : pair (pair string (pair address mutez)) (pair (pair (mutez %custFunding) (key %custPk)) (pair timestamp address)) : list operation
                    PAIR;       # pair int string : pair address bytes : pair mutez (pair (mutez %merchFunding) (key %merchPk)) : pair (pair string (pair address mutez)) (pair (pair (mutez %custFunding) (key %custPk)) (pair timestamp address)) : list operation
                    SWAP;       # pair address bytes : pair int string : pair mutez (pair (mutez %merchFunding) (key %merchPk)) : pair (pair string (pair address mutez)) (pair (pair (mutez %custFunding) (key %custPk)) (pair timestamp address)) : list operation
                    PAIR;       # pair (pair address bytes) (pair int string) : pair mutez (pair (mutez %merchFunding) (key %merchPk)) : pair (pair string (pair address mutez)) (pair (pair (mutez %custFunding) (key %custPk)) (pair timestamp address)) : list operation
                    SWAP;       # pair mutez (pair (mutez %merchFunding) (key %merchPk)) : pair (pair address bytes) (pair int string) : pair (pair string (pair address mutez)) (pair (pair (mutez %custFunding) (key %custPk)) (pair timestamp address)) : list operation
                    PAIR;       # pair (pair mutez (pair (mutez %merchFunding) (key %merchPk))) (pair (pair address bytes) (pair int string)) : pair (pair string (pair address mutez)) (pair (pair (mutez %custFunding) (key %custPk)) (pair timestamp address)) : list operation
                    SWAP;       # pair (pair string (pair address mutez)) (pair (pair (mutez %custFunding) (key %custPk)) (pair timestamp address)) : pair (pair mutez (pair (mutez %merchFunding) (key %merchPk))) (pair (pair address bytes) (pair int string)) : list operation
                    PAIR;       # pair (pair (pair string (pair address mutez)) (pair (pair (mutez %custFunding) (key %custPk)) (pair timestamp address))) (pair (pair mutez (pair (mutez %merchFunding) (key %merchPk))) (pair (pair address bytes) (pair int string))) : list operation
                    SWAP;       # list operation : pair (pair (pair string (pair address mutez)) (pair (pair (mutez %custFunding) (key %custPk)) (pair timestamp address))) (pair (pair mutez (pair (mutez %merchFunding) (key %merchPk))) (pair (pair address bytes) (pair int string)))
                  }
                  {
                    # == reclaimFunding ==
                    # sp.verify(self.data.status == 'awaitingFunding') # @parameter%reclaimFunding : @storage
                    PUSH string "awaitingFunding"; # string : @parameter%reclaimFunding : @storage
                    DIG 2;      # @storage : string : @parameter%reclaimFunding
                    DUP;        # @storage : @storage : string : @parameter%reclaimFunding
                    DUG 3;      # @storage : string : @parameter%reclaimFunding : @storage
                    CDDDDR;     # string : string : @parameter%reclaimFunding : @storage
                    COMPARE;    # int : @parameter%reclaimFunding : @storage
                    EQ;         # bool : @parameter%reclaimFunding : @storage
                    IF
                      {}
                      {
                        PUSH string "WrongCondition: self.data.status == 'awaitingFunding'"; # string : @parameter%reclaimFunding : @storage
                        FAILWITH;   # FAILED
                      }; # @parameter%reclaimFunding : @storage
                    # if self.data.custAddr == sp.sender: # @parameter%reclaimFunding : @storage
                    SENDER;     # address : @parameter%reclaimFunding : @storage
                    DIG 2;      # @storage : address : @parameter%reclaimFunding
                    DUP;        # @storage : @storage : address : @parameter%reclaimFunding
                    DUG 3;      # @storage : address : @parameter%reclaimFunding : @storage
                    CAADAR;     # address : address : @parameter%reclaimFunding : @storage
                    COMPARE;    # int : @parameter%reclaimFunding : @storage
                    EQ;         # bool : @parameter%reclaimFunding : @storage
                    IF
                      {
                        SWAP;       # @storage : @parameter%reclaimFunding
                        # sp.verify(self.data.custBal == self.data.custFunding) # @storage : @parameter%reclaimFunding
                        DUP;        # @storage : @storage : @parameter%reclaimFunding
                        CADAAR;     # mutez : @storage : @parameter%reclaimFunding
                        SWAP;       # @storage : mutez : @parameter%reclaimFunding
                        DUP;        # @storage : @storage : mutez : @parameter%reclaimFunding
                        DUG 3;      # @storage : mutez : @parameter%reclaimFunding : @storage
                        CAADDR;     # mutez : mutez : @parameter%reclaimFunding : @storage
                        COMPARE;    # int : @parameter%reclaimFunding : @storage
                        EQ;         # bool : @parameter%reclaimFunding : @storage
                        IF
                          {}
                          {
                            PUSH string "WrongCondition: self.data.custBal == self.data.custFunding"; # string : @parameter%reclaimFunding : @storage
                            FAILWITH;   # FAILED
                          }; # @parameter%reclaimFunding : @storage
                        # sp.send(self.data.custAddr, self.data.custBal) # @parameter%reclaimFunding : @storage
                        NIL operation; # list operation : @parameter%reclaimFunding : @storage
                        DIG 2;      # @storage : list operation : @parameter%reclaimFunding
                        DUP;        # @storage : @storage : list operation : @parameter%reclaimFunding
                        DUG 3;      # @storage : list operation : @parameter%reclaimFunding : @storage
                        CAADAR;     # address : list operation : @parameter%reclaimFunding : @storage
                        CONTRACT unit; # option (contract unit) : list operation : @parameter%reclaimFunding : @storage
                        IF_SOME
                          {}
                          {
                            PUSH int 100; # int : list operation : @parameter%reclaimFunding : @storage
                            FAILWITH;   # FAILED
                          }; # @some : list operation : @parameter%reclaimFunding : @storage
                        DIG 3;      # @storage : @some : list operation : @parameter%reclaimFunding
                        DUP;        # @storage : @storage : @some : list operation : @parameter%reclaimFunding
                        DUG 4;      # @storage : @some : list operation : @parameter%reclaimFunding : @storage
                        CAADDR;     # mutez : @some : list operation : @parameter%reclaimFunding : @storage
                        UNIT;       # unit : mutez : @some : list operation : @parameter%reclaimFunding : @storage
                        TRANSFER_TOKENS; # operation : list operation : @parameter%reclaimFunding : @storage
                        CONS;       # list operation : @parameter%reclaimFunding : @storage
                        # self.data.custBal = sp.tez(0) # list operation : @parameter%reclaimFunding : @storage
                        DIG 2;      # @storage : list operation : @parameter%reclaimFunding
                        DUP;        # @storage : @storage : list operation : @parameter%reclaimFunding
                        CDR;        # pair (pair (mutez %merchBal) (pair (mutez %merchFunding) (key %merchPk))) (pair (pair (address %pssigContract) (bytes %revLock)) (pair (int %selfDelay) (string %status))) : @storage : list operation : @parameter%reclaimFunding
                        SWAP;       # @storage : pair (pair (mutez %merchBal) (pair (mutez %merchFunding) (key %merchPk))) (pair (pair (address %pssigContract) (bytes %revLock)) (pair (int %selfDelay) (string %status))) : list operation : @parameter%reclaimFunding
                        CAR;        # pair (pair (string %chanID) (pair (address %custAddr) (mutez %custBal))) (pair (pair (mutez %custFunding) (key %custPk)) (pair (timestamp %delayExpiry) (address %merchAddr))) : pair (pair (mutez %merchBal) (pair (mutez %merchFunding) (key %merchPk))) (pair (pair (address %pssigContract) (bytes %revLock)) (pair (int %selfDelay) (string %status))) : list operation : @parameter%reclaimFunding
                        DUP;        # pair (pair (string %chanID) (pair (address %custAddr) (mutez %custBal))) (pair (pair (mutez %custFunding) (key %custPk)) (pair (timestamp %delayExpiry) (address %merchAddr))) : pair (pair (string %chanID) (pair (address %custAddr) (mutez %custBal))) (pair (pair (mutez %custFunding) (key %custPk)) (pair (timestamp %delayExpiry) (address %merchAddr))) : pair (pair (mutez %merchBal) (pair (mutez %merchFunding) (key %merchPk))) (pair (pair (address %pssigContract) (bytes %revLock)) (pair (int %selfDelay) (string %status))) : list operation : @parameter%reclaimFunding
                        CDR;        # pair (pair (mutez %custFunding) (key %custPk)) (pair (timestamp %delayExpiry) (address %merchAddr)) : pair (pair (string %chanID) (pair (address %custAddr) (mutez %custBal))) (pair (pair (mutez %custFunding) (key %custPk)) (pair (timestamp %delayExpiry) (address %merchAddr))) : pair (pair (mutez %merchBal) (pair (mutez %merchFunding) (key %merchPk))) (pair (pair (address %pssigContract) (bytes %revLock)) (pair (int %selfDelay) (string %status))) : list operation : @parameter%reclaimFunding
                        SWAP;       # pair (pair (string %chanID) (pair (address %custAddr) (mutez %custBal))) (pair (pair (mutez %custFunding) (key %custPk)) (pair (timestamp %delayExpiry) (address %merchAddr))) : pair (pair (mutez %custFunding) (key %custPk)) (pair (timestamp %delayExpiry) (address %merchAddr)) : pair (pair (mutez %merchBal) (pair (mutez %merchFunding) (key %merchPk))) (pair (pair (address %pssigContract) (bytes %revLock)) (pair (int %selfDelay) (string %status))) : list operation : @parameter%reclaimFunding
                        CAR;        # pair (string %chanID) (pair (address %custAddr) (mutez %custBal)) : pair (pair (mutez %custFunding) (key %custPk)) (pair (timestamp %delayExpiry) (address %merchAddr)) : pair (pair (mutez %merchBal) (pair (mutez %merchFunding) (key %merchPk))) (pair (pair (address %pssigContract) (bytes %revLock)) (pair (int %selfDelay) (string %status))) : list operation : @parameter%reclaimFunding
                        DUP;        # pair (string %chanID) (pair (address %custAddr) (mutez %custBal)) : pair (string %chanID) (pair (address %custAddr) (mutez %custBal)) : pair (pair (mutez %custFunding) (key %custPk)) (pair (timestamp %delayExpiry) (address %merchAddr)) : pair (pair (mutez %merchBal) (pair (mutez %merchFunding) (key %merchPk))) (pair (pair (address %pssigContract) (bytes %revLock)) (pair (int %selfDelay) (string %status))) : list operation : @parameter%reclaimFunding
                        CAR;        # string : pair (string %chanID) (pair (address %custAddr) (mutez %custBal)) : pair (pair (mutez %custFunding) (key %custPk)) (pair (timestamp %delayExpiry) (address %merchAddr)) : pair (pair (mutez %merchBal) (pair (mutez %merchFunding) (key %merchPk))) (pair (pair (address %pssigContract) (bytes %revLock)) (pair (int %selfDelay) (string %status))) : list operation : @parameter%reclaimFunding
                        SWAP;       # pair (string %chanID) (pair (address %custAddr) (mutez %custBal)) : string : pair (pair (mutez %custFunding) (key %custPk)) (pair (timestamp %delayExpiry) (address %merchAddr)) : pair (pair (mutez %merchBal) (pair (mutez %merchFunding) (key %merchPk))) (pair (pair (address %pssigContract) (bytes %revLock)) (pair (int %selfDelay) (string %status))) : list operation : @parameter%reclaimFunding
                        CDAR;       # address : string : pair (pair (mutez %custFunding) (key %custPk)) (pair (timestamp %delayExpiry) (address %merchAddr)) : pair (pair (mutez %merchBal) (pair (mutez %merchFunding) (key %merchPk))) (pair (pair (address %pssigContract) (bytes %revLock)) (pair (int %selfDelay) (string %status))) : list operation : @parameter%reclaimFunding
                        PUSH mutez 0; # mutez : address : string : pair (pair (mutez %custFunding) (key %custPk)) (pair (timestamp %delayExpiry) (address %merchAddr)) : pair (pair (mutez %merchBal) (pair (mutez %merchFunding) (key %merchPk))) (pair (pair (address %pssigContract) (bytes %revLock)) (pair (int %selfDelay) (string %status))) : list operation : @parameter%reclaimFunding
                        SWAP;       # address : mutez : string : pair (pair (mutez %custFunding) (key %custPk)) (pair (timestamp %delayExpiry) (address %merchAddr)) : pair (pair (mutez %merchBal) (pair (mutez %merchFunding) (key %merchPk))) (pair (pair (address %pssigContract) (bytes %revLock)) (pair (int %selfDelay) (string %status))) : list operation : @parameter%reclaimFunding
                        PAIR;       # pair address mutez : string : pair (pair (mutez %custFunding) (key %custPk)) (pair (timestamp %delayExpiry) (address %merchAddr)) : pair (pair (mutez %merchBal) (pair (mutez %merchFunding) (key %merchPk))) (pair (pair (address %pssigContract) (bytes %revLock)) (pair (int %selfDelay) (string %status))) : list operation : @parameter%reclaimFunding
                        SWAP;       # string : pair address mutez : pair (pair (mutez %custFunding) (key %custPk)) (pair (timestamp %delayExpiry) (address %merchAddr)) : pair (pair (mutez %merchBal) (pair (mutez %merchFunding) (key %merchPk))) (pair (pair (address %pssigContract) (bytes %revLock)) (pair (int %selfDelay) (string %status))) : list operation : @parameter%reclaimFunding
                        PAIR;       # pair string (pair address mutez) : pair (pair (mutez %custFunding) (key %custPk)) (pair (timestamp %delayExpiry) (address %merchAddr)) : pair (pair (mutez %merchBal) (pair (mutez %merchFunding) (key %merchPk))) (pair (pair (address %pssigContract) (bytes %revLock)) (pair (int %selfDelay) (string %status))) : list operation : @parameter%reclaimFunding
                        PAIR;       # pair (pair string (pair address mutez)) (pair (pair (mutez %custFunding) (key %custPk)) (pair (timestamp %delayExpiry) (address %merchAddr))) : pair (pair (mutez %merchBal) (pair (mutez %merchFunding) (key %merchPk))) (pair (pair (address %pssigContract) (bytes %revLock)) (pair (int %selfDelay) (string %status))) : list operation : @parameter%reclaimFunding
                        PAIR;       # pair (pair (pair string (pair address mutez)) (pair (pair (mutez %custFunding) (key %custPk)) (pair (timestamp %delayExpiry) (address %merchAddr)))) (pair (pair (mutez %merchBal) (pair (mutez %merchFunding) (key %merchPk))) (pair (pair (address %pssigContract) (bytes %revLock)) (pair (int %selfDelay) (string %status)))) : list operation : @parameter%reclaimFunding
                        DUG 2;      # list operation : @parameter%reclaimFunding : pair (pair (pair string (pair address mutez)) (pair (pair (mutez %custFunding) (key %custPk)) (pair (timestamp %delayExpiry) (address %merchAddr)))) (pair (pair (mutez %merchBal) (pair (mutez %merchFunding) (key %merchPk))) (pair (pair (address %pssigContract) (bytes %revLock)) (pair (int %selfDelay) (string %status))))
                      }
                      {
                        NIL operation; # list operation : @parameter%reclaimFunding : @storage
                      }; # list operation : @parameter%reclaimFunding : pair (pair (pair string (pair address mutez)) (pair (pair (mutez %custFunding) (key %custPk)) (pair (timestamp %delayExpiry) (address %merchAddr)))) (pair (pair (mutez %merchBal) (pair (mutez %merchFunding) (key %merchPk))) (pair (pair (address %pssigContract) (bytes %revLock)) (pair (int %selfDelay) (string %status))))
                    # if self.data.merchAddr == sp.sender: # list operation : @parameter%reclaimFunding : pair (pair (pair string (pair address mutez)) (pair (pair (mutez %custFunding) (key %custPk)) (pair (timestamp %delayExpiry) (address %merchAddr)))) (pair (pair (mutez %merchBal) (pair (mutez %merchFunding) (key %merchPk))) (pair (pair (address %pssigContract) (bytes %revLock)) (pair (int %selfDelay) (string %status))))
                    SENDER;     # address : list operation : @parameter%reclaimFunding : pair (pair (pair string (pair address mutez)) (pair (pair (mutez %custFunding) (key %custPk)) (pair (timestamp %delayExpiry) (address %merchAddr)))) (pair (pair (mutez %merchBal) (pair (mutez %merchFunding) (key %merchPk))) (pair (pair (address %pssigContract) (bytes %revLock)) (pair (int %selfDelay) (string %status))))
                    DIG 3;      # pair (pair (pair string (pair address mutez)) (pair (pair (mutez %custFunding) (key %custPk)) (pair (timestamp %delayExpiry) (address %merchAddr)))) (pair (pair (mutez %merchBal) (pair (mutez %merchFunding) (key %merchPk))) (pair (pair (address %pssigContract) (bytes %revLock)) (pair (int %selfDelay) (string %status)))) : address : list operation : @parameter%reclaimFunding
                    DUP;        # pair (pair (pair string (pair address mutez)) (pair (pair (mutez %custFunding) (key %custPk)) (pair (timestamp %delayExpiry) (address %merchAddr)))) (pair (pair (mutez %merchBal) (pair (mutez %merchFunding) (key %merchPk))) (pair (pair (address %pssigContract) (bytes %revLock)) (pair (int %selfDelay) (string %status)))) : pair (pair (pair string (pair address mutez)) (pair (pair (mutez %custFunding) (key %custPk)) (pair (timestamp %delayExpiry) (address %merchAddr)))) (pair (pair (mutez %merchBal) (pair (mutez %merchFunding) (key %merchPk))) (pair (pair (address %pssigContract) (bytes %revLock)) (pair (int %selfDelay) (string %status)))) : address : list operation : @parameter%reclaimFunding
                    DUG 4;      # pair (pair (pair string (pair address mutez)) (pair (pair (mutez %custFunding) (key %custPk)) (pair (timestamp %delayExpiry) (address %merchAddr)))) (pair (pair (mutez %merchBal) (pair (mutez %merchFunding) (key %merchPk))) (pair (pair (address %pssigContract) (bytes %revLock)) (pair (int %selfDelay) (string %status)))) : address : list operation : @parameter%reclaimFunding : pair (pair (pair string (pair address mutez)) (pair (pair (mutez %custFunding) (key %custPk)) (pair (timestamp %delayExpiry) (address %merchAddr)))) (pair (pair (mutez %merchBal) (pair (mutez %merchFunding) (key %merchPk))) (pair (pair (address %pssigContract) (bytes %revLock)) (pair (int %selfDelay) (string %status))))
                    CADDDR;     # address : address : list operation : @parameter%reclaimFunding : pair (pair (pair string (pair address mutez)) (pair (pair (mutez %custFunding) (key %custPk)) (pair (timestamp %delayExpiry) (address %merchAddr)))) (pair (pair (mutez %merchBal) (pair (mutez %merchFunding) (key %merchPk))) (pair (pair (address %pssigContract) (bytes %revLock)) (pair (int %selfDelay) (string %status))))
                    COMPARE;    # int : list operation : @parameter%reclaimFunding : pair (pair (pair string (pair address mutez)) (pair (pair (mutez %custFunding) (key %custPk)) (pair (timestamp %delayExpiry) (address %merchAddr)))) (pair (pair (mutez %merchBal) (pair (mutez %merchFunding) (key %merchPk))) (pair (pair (address %pssigContract) (bytes %revLock)) (pair (int %selfDelay) (string %status))))
                    EQ;         # bool : list operation : @parameter%reclaimFunding : pair (pair (pair string (pair address mutez)) (pair (pair (mutez %custFunding) (key %custPk)) (pair (timestamp %delayExpiry) (address %merchAddr)))) (pair (pair (mutez %merchBal) (pair (mutez %merchFunding) (key %merchPk))) (pair (pair (address %pssigContract) (bytes %revLock)) (pair (int %selfDelay) (string %status))))
                    IF
                      {
                        # sp.verify(self.data.merchBal == self.data.merchFunding) # list operation : @parameter%reclaimFunding : pair (pair (pair string (pair address mutez)) (pair (pair (mutez %custFunding) (key %custPk)) (pair (timestamp %delayExpiry) (address %merchAddr)))) (pair (pair (mutez %merchBal) (pair (mutez %merchFunding) (key %merchPk))) (pair (pair (address %pssigContract) (bytes %revLock)) (pair (int %selfDelay) (string %status))))
                        DIG 2;      # pair (pair (pair string (pair address mutez)) (pair (pair (mutez %custFunding) (key %custPk)) (pair (timestamp %delayExpiry) (address %merchAddr)))) (pair (pair (mutez %merchBal) (pair (mutez %merchFunding) (key %merchPk))) (pair (pair (address %pssigContract) (bytes %revLock)) (pair (int %selfDelay) (string %status)))) : list operation : @parameter%reclaimFunding
                        DUP;        # pair (pair (pair string (pair address mutez)) (pair (pair (mutez %custFunding) (key %custPk)) (pair (timestamp %delayExpiry) (address %merchAddr)))) (pair (pair (mutez %merchBal) (pair (mutez %merchFunding) (key %merchPk))) (pair (pair (address %pssigContract) (bytes %revLock)) (pair (int %selfDelay) (string %status)))) : pair (pair (pair string (pair address mutez)) (pair (pair (mutez %custFunding) (key %custPk)) (pair (timestamp %delayExpiry) (address %merchAddr)))) (pair (pair (mutez %merchBal) (pair (mutez %merchFunding) (key %merchPk))) (pair (pair (address %pssigContract) (bytes %revLock)) (pair (int %selfDelay) (string %status)))) : list operation : @parameter%reclaimFunding
                        CDADAR;     # mutez : pair (pair (pair string (pair address mutez)) (pair (pair (mutez %custFunding) (key %custPk)) (pair (timestamp %delayExpiry) (address %merchAddr)))) (pair (pair (mutez %merchBal) (pair (mutez %merchFunding) (key %merchPk))) (pair (pair (address %pssigContract) (bytes %revLock)) (pair (int %selfDelay) (string %status)))) : list operation : @parameter%reclaimFunding
                        SWAP;       # pair (pair (pair string (pair address mutez)) (pair (pair (mutez %custFunding) (key %custPk)) (pair (timestamp %delayExpiry) (address %merchAddr)))) (pair (pair (mutez %merchBal) (pair (mutez %merchFunding) (key %merchPk))) (pair (pair (address %pssigContract) (bytes %revLock)) (pair (int %selfDelay) (string %status)))) : mutez : list operation : @parameter%reclaimFunding
                        DUP;        # pair (pair (pair string (pair address mutez)) (pair (pair (mutez %custFunding) (key %custPk)) (pair (timestamp %delayExpiry) (address %merchAddr)))) (pair (pair (mutez %merchBal) (pair (mutez %merchFunding) (key %merchPk))) (pair (pair (address %pssigContract) (bytes %revLock)) (pair (int %selfDelay) (string %status)))) : pair (pair (pair string (pair address mutez)) (pair (pair (mutez %custFunding) (key %custPk)) (pair (timestamp %delayExpiry) (address %merchAddr)))) (pair (pair (mutez %merchBal) (pair (mutez %merchFunding) (key %merchPk))) (pair (pair (address %pssigContract) (bytes %revLock)) (pair (int %selfDelay) (string %status)))) : mutez : list operation : @parameter%reclaimFunding
                        DUG 4;      # pair (pair (pair string (pair address mutez)) (pair (pair (mutez %custFunding) (key %custPk)) (pair (timestamp %delayExpiry) (address %merchAddr)))) (pair (pair (mutez %merchBal) (pair (mutez %merchFunding) (key %merchPk))) (pair (pair (address %pssigContract) (bytes %revLock)) (pair (int %selfDelay) (string %status)))) : mutez : list operation : @parameter%reclaimFunding : pair (pair (pair string (pair address mutez)) (pair (pair (mutez %custFunding) (key %custPk)) (pair (timestamp %delayExpiry) (address %merchAddr)))) (pair (pair (mutez %merchBal) (pair (mutez %merchFunding) (key %merchPk))) (pair (pair (address %pssigContract) (bytes %revLock)) (pair (int %selfDelay) (string %status))))
                        CDAAR;      # mutez : mutez : list operation : @parameter%reclaimFunding : pair (pair (pair string (pair address mutez)) (pair (pair (mutez %custFunding) (key %custPk)) (pair (timestamp %delayExpiry) (address %merchAddr)))) (pair (pair (mutez %merchBal) (pair (mutez %merchFunding) (key %merchPk))) (pair (pair (address %pssigContract) (bytes %revLock)) (pair (int %selfDelay) (string %status))))
                        COMPARE;    # int : list operation : @parameter%reclaimFunding : pair (pair (pair string (pair address mutez)) (pair (pair (mutez %custFunding) (key %custPk)) (pair (timestamp %delayExpiry) (address %merchAddr)))) (pair (pair (mutez %merchBal) (pair (mutez %merchFunding) (key %merchPk))) (pair (pair (address %pssigContract) (bytes %revLock)) (pair (int %selfDelay) (string %status))))
                        EQ;         # bool : list operation : @parameter%reclaimFunding : pair (pair (pair string (pair address mutez)) (pair (pair (mutez %custFunding) (key %custPk)) (pair (timestamp %delayExpiry) (address %merchAddr)))) (pair (pair (mutez %merchBal) (pair (mutez %merchFunding) (key %merchPk))) (pair (pair (address %pssigContract) (bytes %revLock)) (pair (int %selfDelay) (string %status))))
                        IF
                          {
                            SWAP;       # @parameter%reclaimFunding : list operation : pair (pair (pair string (pair address mutez)) (pair (pair (mutez %custFunding) (key %custPk)) (pair (timestamp %delayExpiry) (address %merchAddr)))) (pair (pair (mutez %merchBal) (pair (mutez %merchFunding) (key %merchPk))) (pair (pair (address %pssigContract) (bytes %revLock)) (pair (int %selfDelay) (string %status))))
                            DROP;       # list operation : pair (pair (pair string (pair address mutez)) (pair (pair (mutez %custFunding) (key %custPk)) (pair (timestamp %delayExpiry) (address %merchAddr)))) (pair (pair (mutez %merchBal) (pair (mutez %merchFunding) (key %merchPk))) (pair (pair (address %pssigContract) (bytes %revLock)) (pair (int %selfDelay) (string %status))))
                          }
                          {
                            PUSH string "WrongCondition: self.data.merchBal == self.data.merchFunding"; # string : list operation : @parameter%reclaimFunding : pair (pair (pair string (pair address mutez)) (pair (pair (mutez %custFunding) (key %custPk)) (pair (timestamp %delayExpiry) (address %merchAddr)))) (pair (pair (mutez %merchBal) (pair (mutez %merchFunding) (key %merchPk))) (pair (pair (address %pssigContract) (bytes %revLock)) (pair (int %selfDelay) (string %status))))
                            FAILWITH;   # FAILED
                          }; # list operation : pair (pair (pair string (pair address mutez)) (pair (pair (mutez %custFunding) (key %custPk)) (pair (timestamp %delayExpiry) (address %merchAddr)))) (pair (pair (mutez %merchBal) (pair (mutez %merchFunding) (key %merchPk))) (pair (pair (address %pssigContract) (bytes %revLock)) (pair (int %selfDelay) (string %status))))
                        SWAP;       # pair (pair (pair string (pair address mutez)) (pair (pair (mutez %custFunding) (key %custPk)) (pair (timestamp %delayExpiry) (address %merchAddr)))) (pair (pair (mutez %merchBal) (pair (mutez %merchFunding) (key %merchPk))) (pair (pair (address %pssigContract) (bytes %revLock)) (pair (int %selfDelay) (string %status)))) : list operation
                        # sp.send(self.data.merchAddr, self.data.merchBal) # pair (pair (pair string (pair address mutez)) (pair (pair (mutez %custFunding) (key %custPk)) (pair (timestamp %delayExpiry) (address %merchAddr)))) (pair (pair (mutez %merchBal) (pair (mutez %merchFunding) (key %merchPk))) (pair (pair (address %pssigContract) (bytes %revLock)) (pair (int %selfDelay) (string %status)))) : list operation
                        DUP;        # pair (pair (pair string (pair address mutez)) (pair (pair (mutez %custFunding) (key %custPk)) (pair (timestamp %delayExpiry) (address %merchAddr)))) (pair (pair (mutez %merchBal) (pair (mutez %merchFunding) (key %merchPk))) (pair (pair (address %pssigContract) (bytes %revLock)) (pair (int %selfDelay) (string %status)))) : pair (pair (pair string (pair address mutez)) (pair (pair (mutez %custFunding) (key %custPk)) (pair (timestamp %delayExpiry) (address %merchAddr)))) (pair (pair (mutez %merchBal) (pair (mutez %merchFunding) (key %merchPk))) (pair (pair (address %pssigContract) (bytes %revLock)) (pair (int %selfDelay) (string %status)))) : list operation
                        DUG 2;      # pair (pair (pair string (pair address mutez)) (pair (pair (mutez %custFunding) (key %custPk)) (pair (timestamp %delayExpiry) (address %merchAddr)))) (pair (pair (mutez %merchBal) (pair (mutez %merchFunding) (key %merchPk))) (pair (pair (address %pssigContract) (bytes %revLock)) (pair (int %selfDelay) (string %status)))) : list operation : pair (pair (pair string (pair address mutez)) (pair (pair (mutez %custFunding) (key %custPk)) (pair (timestamp %delayExpiry) (address %merchAddr)))) (pair (pair (mutez %merchBal) (pair (mutez %merchFunding) (key %merchPk))) (pair (pair (address %pssigContract) (bytes %revLock)) (pair (int %selfDelay) (string %status))))
                        CADDDR;     # address : list operation : pair (pair (pair string (pair address mutez)) (pair (pair (mutez %custFunding) (key %custPk)) (pair (timestamp %delayExpiry) (address %merchAddr)))) (pair (pair (mutez %merchBal) (pair (mutez %merchFunding) (key %merchPk))) (pair (pair (address %pssigContract) (bytes %revLock)) (pair (int %selfDelay) (string %status))))
                        CONTRACT unit; # option (contract unit) : list operation : pair (pair (pair string (pair address mutez)) (pair (pair (mutez %custFunding) (key %custPk)) (pair (timestamp %delayExpiry) (address %merchAddr)))) (pair (pair (mutez %merchBal) (pair (mutez %merchFunding) (key %merchPk))) (pair (pair (address %pssigContract) (bytes %revLock)) (pair (int %selfDelay) (string %status))))
                        IF_SOME
                          {}
                          {
                            PUSH int 104; # int : list operation : pair (pair (pair string (pair address mutez)) (pair (pair (mutez %custFunding) (key %custPk)) (pair (timestamp %delayExpiry) (address %merchAddr)))) (pair (pair (mutez %merchBal) (pair (mutez %merchFunding) (key %merchPk))) (pair (pair (address %pssigContract) (bytes %revLock)) (pair (int %selfDelay) (string %status))))
                            FAILWITH;   # FAILED
                          }; # @some : list operation : pair (pair (pair string (pair address mutez)) (pair (pair (mutez %custFunding) (key %custPk)) (pair (timestamp %delayExpiry) (address %merchAddr)))) (pair (pair (mutez %merchBal) (pair (mutez %merchFunding) (key %merchPk))) (pair (pair (address %pssigContract) (bytes %revLock)) (pair (int %selfDelay) (string %status))))
                        DIG 2;      # pair (pair (pair string (pair address mutez)) (pair (pair (mutez %custFunding) (key %custPk)) (pair (timestamp %delayExpiry) (address %merchAddr)))) (pair (pair (mutez %merchBal) (pair (mutez %merchFunding) (key %merchPk))) (pair (pair (address %pssigContract) (bytes %revLock)) (pair (int %selfDelay) (string %status)))) : @some : list operation
                        DUP;        # pair (pair (pair string (pair address mutez)) (pair (pair (mutez %custFunding) (key %custPk)) (pair (timestamp %delayExpiry) (address %merchAddr)))) (pair (pair (mutez %merchBal) (pair (mutez %merchFunding) (key %merchPk))) (pair (pair (address %pssigContract) (bytes %revLock)) (pair (int %selfDelay) (string %status)))) : pair (pair (pair string (pair address mutez)) (pair (pair (mutez %custFunding) (key %custPk)) (pair (timestamp %delayExpiry) (address %merchAddr)))) (pair (pair (mutez %merchBal) (pair (mutez %merchFunding) (key %merchPk))) (pair (pair (address %pssigContract) (bytes %revLock)) (pair (int %selfDelay) (string %status)))) : @some : list operation
                        DUG 3;      # pair (pair (pair string (pair address mutez)) (pair (pair (mutez %custFunding) (key %custPk)) (pair (timestamp %delayExpiry) (address %merchAddr)))) (pair (pair (mutez %merchBal) (pair (mutez %merchFunding) (key %merchPk))) (pair (pair (address %pssigContract) (bytes %revLock)) (pair (int %selfDelay) (string %status)))) : @some : list operation : pair (pair (pair string (pair address mutez)) (pair (pair (mutez %custFunding) (key %custPk)) (pair (timestamp %delayExpiry) (address %merchAddr)))) (pair (pair (mutez %merchBal) (pair (mutez %merchFunding) (key %merchPk))) (pair (pair (address %pssigContract) (bytes %revLock)) (pair (int %selfDelay) (string %status))))
                        CDAAR;      # mutez : @some : list operation : pair (pair (pair string (pair address mutez)) (pair (pair (mutez %custFunding) (key %custPk)) (pair (timestamp %delayExpiry) (address %merchAddr)))) (pair (pair (mutez %merchBal) (pair (mutez %merchFunding) (key %merchPk))) (pair (pair (address %pssigContract) (bytes %revLock)) (pair (int %selfDelay) (string %status))))
                        UNIT;       # unit : mutez : @some : list operation : pair (pair (pair string (pair address mutez)) (pair (pair (mutez %custFunding) (key %custPk)) (pair (timestamp %delayExpiry) (address %merchAddr)))) (pair (pair (mutez %merchBal) (pair (mutez %merchFunding) (key %merchPk))) (pair (pair (address %pssigContract) (bytes %revLock)) (pair (int %selfDelay) (string %status))))
                        TRANSFER_TOKENS; # operation : list operation : pair (pair (pair string (pair address mutez)) (pair (pair (mutez %custFunding) (key %custPk)) (pair (timestamp %delayExpiry) (address %merchAddr)))) (pair (pair (mutez %merchBal) (pair (mutez %merchFunding) (key %merchPk))) (pair (pair (address %pssigContract) (bytes %revLock)) (pair (int %selfDelay) (string %status))))
                        CONS;       # list operation : pair (pair (pair string (pair address mutez)) (pair (pair (mutez %custFunding) (key %custPk)) (pair (timestamp %delayExpiry) (address %merchAddr)))) (pair (pair (mutez %merchBal) (pair (mutez %merchFunding) (key %merchPk))) (pair (pair (address %pssigContract) (bytes %revLock)) (pair (int %selfDelay) (string %status))))
                        SWAP;       # pair (pair (pair string (pair address mutez)) (pair (pair (mutez %custFunding) (key %custPk)) (pair (timestamp %delayExpiry) (address %merchAddr)))) (pair (pair (mutez %merchBal) (pair (mutez %merchFunding) (key %merchPk))) (pair (pair (address %pssigContract) (bytes %revLock)) (pair (int %selfDelay) (string %status)))) : list operation
                        # self.data.merchBal = sp.tez(0) # pair (pair (pair string (pair address mutez)) (pair (pair (mutez %custFunding) (key %custPk)) (pair (timestamp %delayExpiry) (address %merchAddr)))) (pair (pair (mutez %merchBal) (pair (mutez %merchFunding) (key %merchPk))) (pair (pair (address %pssigContract) (bytes %revLock)) (pair (int %selfDelay) (string %status)))) : list operation
                        DUP;        # pair (pair (pair string (pair address mutez)) (pair (pair (mutez %custFunding) (key %custPk)) (pair (timestamp %delayExpiry) (address %merchAddr)))) (pair (pair (mutez %merchBal) (pair (mutez %merchFunding) (key %merchPk))) (pair (pair (address %pssigContract) (bytes %revLock)) (pair (int %selfDelay) (string %status)))) : pair (pair (pair string (pair address mutez)) (pair (pair (mutez %custFunding) (key %custPk)) (pair (timestamp %delayExpiry) (address %merchAddr)))) (pair (pair (mutez %merchBal) (pair (mutez %merchFunding) (key %merchPk))) (pair (pair (address %pssigContract) (bytes %revLock)) (pair (int %selfDelay) (string %status)))) : list operation
                        CAR;        # pair (pair string (pair address mutez)) (pair (pair (mutez %custFunding) (key %custPk)) (pair (timestamp %delayExpiry) (address %merchAddr))) : pair (pair (pair string (pair address mutez)) (pair (pair (mutez %custFunding) (key %custPk)) (pair (timestamp %delayExpiry) (address %merchAddr)))) (pair (pair (mutez %merchBal) (pair (mutez %merchFunding) (key %merchPk))) (pair (pair (address %pssigContract) (bytes %revLock)) (pair (int %selfDelay) (string %status)))) : list operation
                        SWAP;       # pair (pair (pair string (pair address mutez)) (pair (pair (mutez %custFunding) (key %custPk)) (pair (timestamp %delayExpiry) (address %merchAddr)))) (pair (pair (mutez %merchBal) (pair (mutez %merchFunding) (key %merchPk))) (pair (pair (address %pssigContract) (bytes %revLock)) (pair (int %selfDelay) (string %status)))) : pair (pair string (pair address mutez)) (pair (pair (mutez %custFunding) (key %custPk)) (pair (timestamp %delayExpiry) (address %merchAddr))) : list operation
                        CDR;        # pair (pair (mutez %merchBal) (pair (mutez %merchFunding) (key %merchPk))) (pair (pair (address %pssigContract) (bytes %revLock)) (pair (int %selfDelay) (string %status))) : pair (pair string (pair address mutez)) (pair (pair (mutez %custFunding) (key %custPk)) (pair (timestamp %delayExpiry) (address %merchAddr))) : list operation
                        DUP;        # pair (pair (mutez %merchBal) (pair (mutez %merchFunding) (key %merchPk))) (pair (pair (address %pssigContract) (bytes %revLock)) (pair (int %selfDelay) (string %status))) : pair (pair (mutez %merchBal) (pair (mutez %merchFunding) (key %merchPk))) (pair (pair (address %pssigContract) (bytes %revLock)) (pair (int %selfDelay) (string %status))) : pair (pair string (pair address mutez)) (pair (pair (mutez %custFunding) (key %custPk)) (pair (timestamp %delayExpiry) (address %merchAddr))) : list operation
                        CDR;        # pair (pair (address %pssigContract) (bytes %revLock)) (pair (int %selfDelay) (string %status)) : pair (pair (mutez %merchBal) (pair (mutez %merchFunding) (key %merchPk))) (pair (pair (address %pssigContract) (bytes %revLock)) (pair (int %selfDelay) (string %status))) : pair (pair string (pair address mutez)) (pair (pair (mutez %custFunding) (key %custPk)) (pair (timestamp %delayExpiry) (address %merchAddr))) : list operation
                        SWAP;       # pair (pair (mutez %merchBal) (pair (mutez %merchFunding) (key %merchPk))) (pair (pair (address %pssigContract) (bytes %revLock)) (pair (int %selfDelay) (string %status))) : pair (pair (address %pssigContract) (bytes %revLock)) (pair (int %selfDelay) (string %status)) : pair (pair string (pair address mutez)) (pair (pair (mutez %custFunding) (key %custPk)) (pair (timestamp %delayExpiry) (address %merchAddr))) : list operation
                        CADR;       # pair (mutez %merchFunding) (key %merchPk) : pair (pair (address %pssigContract) (bytes %revLock)) (pair (int %selfDelay) (string %status)) : pair (pair string (pair address mutez)) (pair (pair (mutez %custFunding) (key %custPk)) (pair (timestamp %delayExpiry) (address %merchAddr))) : list operation
                        PUSH mutez 0; # mutez : pair (mutez %merchFunding) (key %merchPk) : pair (pair (address %pssigContract) (bytes %revLock)) (pair (int %selfDelay) (string %status)) : pair (pair string (pair address mutez)) (pair (pair (mutez %custFunding) (key %custPk)) (pair (timestamp %delayExpiry) (address %merchAddr))) : list operation
                        PAIR;       # pair mutez (pair (mutez %merchFunding) (key %merchPk)) : pair (pair (address %pssigContract) (bytes %revLock)) (pair (int %selfDelay) (string %status)) : pair (pair string (pair address mutez)) (pair (pair (mutez %custFunding) (key %custPk)) (pair (timestamp %delayExpiry) (address %merchAddr))) : list operation
                        PAIR;       # pair (pair mutez (pair (mutez %merchFunding) (key %merchPk))) (pair (pair (address %pssigContract) (bytes %revLock)) (pair (int %selfDelay) (string %status))) : pair (pair string (pair address mutez)) (pair (pair (mutez %custFunding) (key %custPk)) (pair (timestamp %delayExpiry) (address %merchAddr))) : list operation
                        SWAP;       # pair (pair string (pair address mutez)) (pair (pair (mutez %custFunding) (key %custPk)) (pair (timestamp %delayExpiry) (address %merchAddr))) : pair (pair mutez (pair (mutez %merchFunding) (key %merchPk))) (pair (pair (address %pssigContract) (bytes %revLock)) (pair (int %selfDelay) (string %status))) : list operation
                        PAIR;       # pair (pair (pair string (pair address mutez)) (pair (pair (mutez %custFunding) (key %custPk)) (pair (timestamp %delayExpiry) (address %merchAddr)))) (pair (pair mutez (pair (mutez %merchFunding) (key %merchPk))) (pair (pair (address %pssigContract) (bytes %revLock)) (pair (int %selfDelay) (string %status)))) : list operation
                        SWAP;       # list operation : pair (pair (pair string (pair address mutez)) (pair (pair (mutez %custFunding) (key %custPk)) (pair (timestamp %delayExpiry) (address %merchAddr)))) (pair (pair mutez (pair (mutez %merchFunding) (key %merchPk))) (pair (pair (address %pssigContract) (bytes %revLock)) (pair (int %selfDelay) (string %status))))
                      }
                      {
                        SWAP;       # @parameter%reclaimFunding : list operation : pair (pair (pair string (pair address mutez)) (pair (pair (mutez %custFunding) (key %custPk)) (pair (timestamp %delayExpiry) (address %merchAddr)))) (pair (pair (mutez %merchBal) (pair (mutez %merchFunding) (key %merchPk))) (pair (pair (address %pssigContract) (bytes %revLock)) (pair (int %selfDelay) (string %status))))
                        DROP;       # list operation : pair (pair (pair string (pair address mutez)) (pair (pair (mutez %custFunding) (key %custPk)) (pair (timestamp %delayExpiry) (address %merchAddr)))) (pair (pair (mutez %merchBal) (pair (mutez %merchFunding) (key %merchPk))) (pair (pair (address %pssigContract) (bytes %revLock)) (pair (int %selfDelay) (string %status))))
                      }; # list operation : pair (pair (pair string (pair address mutez)) (pair (pair (mutez %custFunding) (key %custPk)) (pair (timestamp %delayExpiry) (address %merchAddr)))) (pair (pair mutez (pair (mutez %merchFunding) (key %merchPk))) (pair (pair (address %pssigContract) (bytes %revLock)) (pair (int %selfDelay) (string %status))))
                  }; # list operation : pair (pair (pair string (pair address mutez)) (pair (pair (mutez %custFunding) (key %custPk)) (pair timestamp address))) (pair (pair mutez (pair (mutez %merchFunding) (key %merchPk))) (pair (pair address bytes) (pair int string)))
              }; # list operation : pair (pair (pair string (pair address mutez)) (pair (pair (mutez %custFunding) (key %custPk)) (pair (timestamp %delayExpiry) (address %merchAddr)))) (pair (pair mutez (pair (mutez %merchFunding) (key %merchPk))) (pair (pair (address %pssigContract) (bytes %revLock)) (pair int string)))
          }; # list operation : pair (pair (pair (string %chanID) (pair (address %custAddr) (mutez %custBal))) (pair (pair (mutez %custFunding) (key %custPk)) (pair timestamp address))) (pair (pair (mutez %merchBal) (pair (mutez %merchFunding) (key %merchPk))) (pair (pair (address %pssigContract) (bytes %revLock)) (pair int string)))
      }; # list operation : pair (pair (pair string (pair address mutez)) (pair (pair (mutez %custFunding) (key %custPk)) (pair (timestamp %delayExpiry) (address %merchAddr)))) (pair (pair mutez (pair (mutez %merchFunding) (key %merchPk))) (pair (pair (address %pssigContract) (bytes %revLock)) (pair int string)))
    NIL operation; # list operation : list operation : pair (pair (pair string (pair address mutez)) (pair (pair (mutez %custFunding) (key %custPk)) (pair (timestamp %delayExpiry) (address %merchAddr)))) (pair (pair mutez (pair (mutez %merchFunding) (key %merchPk))) (pair (pair (address %pssigContract) (bytes %revLock)) (pair int string)))
    SWAP;       # list operation : list operation : pair (pair (pair string (pair address mutez)) (pair (pair (mutez %custFunding) (key %custPk)) (pair (timestamp %delayExpiry) (address %merchAddr)))) (pair (pair mutez (pair (mutez %merchFunding) (key %merchPk))) (pair (pair (address %pssigContract) (bytes %revLock)) (pair int string)))
    ITER
      {
        CONS;       # list operation : pair (pair (pair string (pair address mutez)) (pair (pair (mutez %custFunding) (key %custPk)) (pair (timestamp %delayExpiry) (address %merchAddr)))) (pair (pair mutez (pair (mutez %merchFunding) (key %merchPk))) (pair (pair (address %pssigContract) (bytes %revLock)) (pair int string)))
      }; # list operation : pair (pair (pair string (pair address mutez)) (pair (pair (mutez %custFunding) (key %custPk)) (pair (timestamp %delayExpiry) (address %merchAddr)))) (pair (pair mutez (pair (mutez %merchFunding) (key %merchPk))) (pair (pair (address %pssigContract) (bytes %revLock)) (pair int string)))
    PAIR;       # pair (list operation) (pair (pair (pair string (pair address mutez)) (pair (pair (mutez %custFunding) (key %custPk)) (pair (timestamp %delayExpiry) (address %merchAddr)))) (pair (pair mutez (pair (mutez %merchFunding) (key %merchPk))) (pair (pair (address %pssigContract) (bytes %revLock)) (pair int string))))
  };