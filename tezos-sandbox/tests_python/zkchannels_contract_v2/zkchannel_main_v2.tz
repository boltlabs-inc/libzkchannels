parameter (or (or (or (unit %addFunding) (unit %custClaim)) (or (pair %custClose (pair (pair (mutez %custBal) (bls12_381_g2 %g2)) (pair (mutez %merchBal) (pair (bls12_381_g2 %merchPk0) (bls12_381_g2 %merchPk1)))) (pair (pair (bls12_381_g2 %merchPk2) (pair (bls12_381_g2 %merchPk3) (bls12_381_g2 %merchPk4))) (pair (bytes %revLock) (pair (bls12_381_g1 %s1) (bls12_381_g1 %s2))))) (unit %merchClaim))) (or (or (unit %merchClose) (bytes %merchDispute)) (or (pair %mutualClose (pair (mutez %custBal) (signature %custSig)) (pair (mutez %merchBal) (signature %merchSig))) (unit %reclaimFunding))));
storage   (pair (pair (pair (bls12_381_fr %chanID) (pair (address %custAddr) (mutez %custBal))) (pair (pair (mutez %custFunding) (key %custPk)) (pair (timestamp %delayExpiry) (address %merchAddr)))) (pair (pair (mutez %merchBal) (pair (mutez %merchFunding) (key %merchPk))) (pair (pair (address %pssigContract) (bytes %revLock)) (pair (int %selfDelay) (string %status)))));
code
  {
    DUP;        # pair @parameter @storage : pair @parameter @storage
    CDR;        # @storage : pair @parameter @storage
    SWAP;       # pair @parameter @storage : @storage
    CAR;        # @parameter : @storage
    IF_LEFT
      {
        IF_LEFT
          {
            IF_LEFT
              {
                DROP;       # @storage
                # == addFunding ==
                # sp.verify(self.data.status == 'awaitingFunding') # @storage
                DUP;        # @storage : @storage
                CDR;        # pair (pair (mutez %merchBal) (pair (mutez %merchFunding) (key %merchPk))) (pair (pair (address %pssigContract) (bytes %revLock)) (pair (int %selfDelay) (string %status))) : @storage
                CDR;        # pair (pair (address %pssigContract) (bytes %revLock)) (pair (int %selfDelay) (string %status)) : @storage
                CDR;        # pair (int %selfDelay) (string %status) : @storage
                CDR;        # string : @storage
                PUSH string "awaitingFunding"; # string : string : @storage
                COMPARE;    # int : @storage
                EQ;         # bool : @storage
                IF
                  {}
                  {
                    PUSH string "WrongCondition: self.data.status == 'awaitingFunding'"; # string : @storage
                    FAILWITH;   # FAILED
                  }; # @storage
                # if self.data.custAddr == sp.sender: # @storage
                DUP;        # @storage : @storage
                CAR;        # pair (pair (bls12_381_fr %chanID) (pair (address %custAddr) (mutez %custBal))) (pair (pair (mutez %custFunding) (key %custPk)) (pair (timestamp %delayExpiry) (address %merchAddr))) : @storage
                CAR;        # pair (bls12_381_fr %chanID) (pair (address %custAddr) (mutez %custBal)) : @storage
                CDR;        # pair (address %custAddr) (mutez %custBal) : @storage
                CAR;        # address : @storage
                SENDER;     # address : address : @storage
                COMPARE;    # int : @storage
                EQ;         # bool : @storage
                IF
                  {
                    # sp.verify(sp.amount == self.data.custFunding) # @storage
                    DUP;        # @storage : @storage
                    CAR;        # pair (pair (bls12_381_fr %chanID) (pair (address %custAddr) (mutez %custBal))) (pair (pair (mutez %custFunding) (key %custPk)) (pair (timestamp %delayExpiry) (address %merchAddr))) : @storage
                    CDR;        # pair (pair (mutez %custFunding) (key %custPk)) (pair (timestamp %delayExpiry) (address %merchAddr)) : @storage
                    CAR;        # pair (mutez %custFunding) (key %custPk) : @storage
                    CAR;        # mutez : @storage
                    AMOUNT;     # mutez : mutez : @storage
                    COMPARE;    # int : @storage
                    EQ;         # bool : @storage
                    IF
                      {}
                      {
                        PUSH string "WrongCondition: sp.amount == self.data.custFunding"; # string : @storage
                        FAILWITH;   # FAILED
                      }; # @storage
                    # self.data.custBal = self.data.custFunding # @storage
                    DUP;        # @storage : @storage
                    DUP;        # @storage : @storage : @storage
                    CDR;        # pair (pair (mutez %merchBal) (pair (mutez %merchFunding) (key %merchPk))) (pair (pair (address %pssigContract) (bytes %revLock)) (pair (int %selfDelay) (string %status))) : @storage : @storage
                    SWAP;       # @storage : pair (pair (mutez %merchBal) (pair (mutez %merchFunding) (key %merchPk))) (pair (pair (address %pssigContract) (bytes %revLock)) (pair (int %selfDelay) (string %status))) : @storage
                    CAR;        # pair (pair (bls12_381_fr %chanID) (pair (address %custAddr) (mutez %custBal))) (pair (pair (mutez %custFunding) (key %custPk)) (pair (timestamp %delayExpiry) (address %merchAddr))) : pair (pair (mutez %merchBal) (pair (mutez %merchFunding) (key %merchPk))) (pair (pair (address %pssigContract) (bytes %revLock)) (pair (int %selfDelay) (string %status))) : @storage
                    DUP;        # pair (pair (bls12_381_fr %chanID) (pair (address %custAddr) (mutez %custBal))) (pair (pair (mutez %custFunding) (key %custPk)) (pair (timestamp %delayExpiry) (address %merchAddr))) : pair (pair (bls12_381_fr %chanID) (pair (address %custAddr) (mutez %custBal))) (pair (pair (mutez %custFunding) (key %custPk)) (pair (timestamp %delayExpiry) (address %merchAddr))) : pair (pair (mutez %merchBal) (pair (mutez %merchFunding) (key %merchPk))) (pair (pair (address %pssigContract) (bytes %revLock)) (pair (int %selfDelay) (string %status))) : @storage
                    CDR;        # pair (pair (mutez %custFunding) (key %custPk)) (pair (timestamp %delayExpiry) (address %merchAddr)) : pair (pair (bls12_381_fr %chanID) (pair (address %custAddr) (mutez %custBal))) (pair (pair (mutez %custFunding) (key %custPk)) (pair (timestamp %delayExpiry) (address %merchAddr))) : pair (pair (mutez %merchBal) (pair (mutez %merchFunding) (key %merchPk))) (pair (pair (address %pssigContract) (bytes %revLock)) (pair (int %selfDelay) (string %status))) : @storage
                    SWAP;       # pair (pair (bls12_381_fr %chanID) (pair (address %custAddr) (mutez %custBal))) (pair (pair (mutez %custFunding) (key %custPk)) (pair (timestamp %delayExpiry) (address %merchAddr))) : pair (pair (mutez %custFunding) (key %custPk)) (pair (timestamp %delayExpiry) (address %merchAddr)) : pair (pair (mutez %merchBal) (pair (mutez %merchFunding) (key %merchPk))) (pair (pair (address %pssigContract) (bytes %revLock)) (pair (int %selfDelay) (string %status))) : @storage
                    CAR;        # pair (bls12_381_fr %chanID) (pair (address %custAddr) (mutez %custBal)) : pair (pair (mutez %custFunding) (key %custPk)) (pair (timestamp %delayExpiry) (address %merchAddr)) : pair (pair (mutez %merchBal) (pair (mutez %merchFunding) (key %merchPk))) (pair (pair (address %pssigContract) (bytes %revLock)) (pair (int %selfDelay) (string %status))) : @storage
                    DUP;        # pair (bls12_381_fr %chanID) (pair (address %custAddr) (mutez %custBal)) : pair (bls12_381_fr %chanID) (pair (address %custAddr) (mutez %custBal)) : pair (pair (mutez %custFunding) (key %custPk)) (pair (timestamp %delayExpiry) (address %merchAddr)) : pair (pair (mutez %merchBal) (pair (mutez %merchFunding) (key %merchPk))) (pair (pair (address %pssigContract) (bytes %revLock)) (pair (int %selfDelay) (string %status))) : @storage
                    CAR;        # bls12_381_fr : pair (bls12_381_fr %chanID) (pair (address %custAddr) (mutez %custBal)) : pair (pair (mutez %custFunding) (key %custPk)) (pair (timestamp %delayExpiry) (address %merchAddr)) : pair (pair (mutez %merchBal) (pair (mutez %merchFunding) (key %merchPk))) (pair (pair (address %pssigContract) (bytes %revLock)) (pair (int %selfDelay) (string %status))) : @storage
                    SWAP;       # pair (bls12_381_fr %chanID) (pair (address %custAddr) (mutez %custBal)) : bls12_381_fr : pair (pair (mutez %custFunding) (key %custPk)) (pair (timestamp %delayExpiry) (address %merchAddr)) : pair (pair (mutez %merchBal) (pair (mutez %merchFunding) (key %merchPk))) (pair (pair (address %pssigContract) (bytes %revLock)) (pair (int %selfDelay) (string %status))) : @storage
                    CDR;        # pair (address %custAddr) (mutez %custBal) : bls12_381_fr : pair (pair (mutez %custFunding) (key %custPk)) (pair (timestamp %delayExpiry) (address %merchAddr)) : pair (pair (mutez %merchBal) (pair (mutez %merchFunding) (key %merchPk))) (pair (pair (address %pssigContract) (bytes %revLock)) (pair (int %selfDelay) (string %status))) : @storage
                    CAR;        # address : bls12_381_fr : pair (pair (mutez %custFunding) (key %custPk)) (pair (timestamp %delayExpiry) (address %merchAddr)) : pair (pair (mutez %merchBal) (pair (mutez %merchFunding) (key %merchPk))) (pair (pair (address %pssigContract) (bytes %revLock)) (pair (int %selfDelay) (string %status))) : @storage
                    DIG 4;      # @storage : address : bls12_381_fr : pair (pair (mutez %custFunding) (key %custPk)) (pair (timestamp %delayExpiry) (address %merchAddr)) : pair (pair (mutez %merchBal) (pair (mutez %merchFunding) (key %merchPk))) (pair (pair (address %pssigContract) (bytes %revLock)) (pair (int %selfDelay) (string %status)))
                    CAR;        # pair (pair (bls12_381_fr %chanID) (pair (address %custAddr) (mutez %custBal))) (pair (pair (mutez %custFunding) (key %custPk)) (pair (timestamp %delayExpiry) (address %merchAddr))) : address : bls12_381_fr : pair (pair (mutez %custFunding) (key %custPk)) (pair (timestamp %delayExpiry) (address %merchAddr)) : pair (pair (mutez %merchBal) (pair (mutez %merchFunding) (key %merchPk))) (pair (pair (address %pssigContract) (bytes %revLock)) (pair (int %selfDelay) (string %status)))
                    CDR;        # pair (pair (mutez %custFunding) (key %custPk)) (pair (timestamp %delayExpiry) (address %merchAddr)) : address : bls12_381_fr : pair (pair (mutez %custFunding) (key %custPk)) (pair (timestamp %delayExpiry) (address %merchAddr)) : pair (pair (mutez %merchBal) (pair (mutez %merchFunding) (key %merchPk))) (pair (pair (address %pssigContract) (bytes %revLock)) (pair (int %selfDelay) (string %status)))
                    CAR;        # pair (mutez %custFunding) (key %custPk) : address : bls12_381_fr : pair (pair (mutez %custFunding) (key %custPk)) (pair (timestamp %delayExpiry) (address %merchAddr)) : pair (pair (mutez %merchBal) (pair (mutez %merchFunding) (key %merchPk))) (pair (pair (address %pssigContract) (bytes %revLock)) (pair (int %selfDelay) (string %status)))
                    CAR;        # mutez : address : bls12_381_fr : pair (pair (mutez %custFunding) (key %custPk)) (pair (timestamp %delayExpiry) (address %merchAddr)) : pair (pair (mutez %merchBal) (pair (mutez %merchFunding) (key %merchPk))) (pair (pair (address %pssigContract) (bytes %revLock)) (pair (int %selfDelay) (string %status)))
                    SWAP;       # address : mutez : bls12_381_fr : pair (pair (mutez %custFunding) (key %custPk)) (pair (timestamp %delayExpiry) (address %merchAddr)) : pair (pair (mutez %merchBal) (pair (mutez %merchFunding) (key %merchPk))) (pair (pair (address %pssigContract) (bytes %revLock)) (pair (int %selfDelay) (string %status)))
                    PAIR;       # pair address mutez : bls12_381_fr : pair (pair (mutez %custFunding) (key %custPk)) (pair (timestamp %delayExpiry) (address %merchAddr)) : pair (pair (mutez %merchBal) (pair (mutez %merchFunding) (key %merchPk))) (pair (pair (address %pssigContract) (bytes %revLock)) (pair (int %selfDelay) (string %status)))
                    SWAP;       # bls12_381_fr : pair address mutez : pair (pair (mutez %custFunding) (key %custPk)) (pair (timestamp %delayExpiry) (address %merchAddr)) : pair (pair (mutez %merchBal) (pair (mutez %merchFunding) (key %merchPk))) (pair (pair (address %pssigContract) (bytes %revLock)) (pair (int %selfDelay) (string %status)))
                    PAIR;       # pair bls12_381_fr (pair address mutez) : pair (pair (mutez %custFunding) (key %custPk)) (pair (timestamp %delayExpiry) (address %merchAddr)) : pair (pair (mutez %merchBal) (pair (mutez %merchFunding) (key %merchPk))) (pair (pair (address %pssigContract) (bytes %revLock)) (pair (int %selfDelay) (string %status)))
                    PAIR;       # pair (pair bls12_381_fr (pair address mutez)) (pair (pair (mutez %custFunding) (key %custPk)) (pair (timestamp %delayExpiry) (address %merchAddr))) : pair (pair (mutez %merchBal) (pair (mutez %merchFunding) (key %merchPk))) (pair (pair (address %pssigContract) (bytes %revLock)) (pair (int %selfDelay) (string %status)))
                    PAIR;       # pair (pair (pair bls12_381_fr (pair address mutez)) (pair (pair (mutez %custFunding) (key %custPk)) (pair (timestamp %delayExpiry) (address %merchAddr)))) (pair (pair (mutez %merchBal) (pair (mutez %merchFunding) (key %merchPk))) (pair (pair (address %pssigContract) (bytes %revLock)) (pair (int %selfDelay) (string %status))))
                  }
                  {}; # pair (pair (pair bls12_381_fr (pair address mutez)) (pair (pair (mutez %custFunding) (key %custPk)) (pair (timestamp %delayExpiry) (address %merchAddr)))) (pair (pair (mutez %merchBal) (pair (mutez %merchFunding) (key %merchPk))) (pair (pair (address %pssigContract) (bytes %revLock)) (pair (int %selfDelay) (string %status))))
                # if self.data.merchAddr == sp.sender: # pair (pair (pair bls12_381_fr (pair address mutez)) (pair (pair (mutez %custFunding) (key %custPk)) (pair (timestamp %delayExpiry) (address %merchAddr)))) (pair (pair (mutez %merchBal) (pair (mutez %merchFunding) (key %merchPk))) (pair (pair (address %pssigContract) (bytes %revLock)) (pair (int %selfDelay) (string %status))))
                DUP;        # pair (pair (pair bls12_381_fr (pair address mutez)) (pair (pair (mutez %custFunding) (key %custPk)) (pair (timestamp %delayExpiry) (address %merchAddr)))) (pair (pair (mutez %merchBal) (pair (mutez %merchFunding) (key %merchPk))) (pair (pair (address %pssigContract) (bytes %revLock)) (pair (int %selfDelay) (string %status)))) : pair (pair (pair bls12_381_fr (pair address mutez)) (pair (pair (mutez %custFunding) (key %custPk)) (pair (timestamp %delayExpiry) (address %merchAddr)))) (pair (pair (mutez %merchBal) (pair (mutez %merchFunding) (key %merchPk))) (pair (pair (address %pssigContract) (bytes %revLock)) (pair (int %selfDelay) (string %status))))
                CAR;        # pair (pair bls12_381_fr (pair address mutez)) (pair (pair (mutez %custFunding) (key %custPk)) (pair (timestamp %delayExpiry) (address %merchAddr))) : pair (pair (pair bls12_381_fr (pair address mutez)) (pair (pair (mutez %custFunding) (key %custPk)) (pair (timestamp %delayExpiry) (address %merchAddr)))) (pair (pair (mutez %merchBal) (pair (mutez %merchFunding) (key %merchPk))) (pair (pair (address %pssigContract) (bytes %revLock)) (pair (int %selfDelay) (string %status))))
                CDR;        # pair (pair (mutez %custFunding) (key %custPk)) (pair (timestamp %delayExpiry) (address %merchAddr)) : pair (pair (pair bls12_381_fr (pair address mutez)) (pair (pair (mutez %custFunding) (key %custPk)) (pair (timestamp %delayExpiry) (address %merchAddr)))) (pair (pair (mutez %merchBal) (pair (mutez %merchFunding) (key %merchPk))) (pair (pair (address %pssigContract) (bytes %revLock)) (pair (int %selfDelay) (string %status))))
                CDR;        # pair (timestamp %delayExpiry) (address %merchAddr) : pair (pair (pair bls12_381_fr (pair address mutez)) (pair (pair (mutez %custFunding) (key %custPk)) (pair (timestamp %delayExpiry) (address %merchAddr)))) (pair (pair (mutez %merchBal) (pair (mutez %merchFunding) (key %merchPk))) (pair (pair (address %pssigContract) (bytes %revLock)) (pair (int %selfDelay) (string %status))))
                CDR;        # address : pair (pair (pair bls12_381_fr (pair address mutez)) (pair (pair (mutez %custFunding) (key %custPk)) (pair (timestamp %delayExpiry) (address %merchAddr)))) (pair (pair (mutez %merchBal) (pair (mutez %merchFunding) (key %merchPk))) (pair (pair (address %pssigContract) (bytes %revLock)) (pair (int %selfDelay) (string %status))))
                SENDER;     # address : address : pair (pair (pair bls12_381_fr (pair address mutez)) (pair (pair (mutez %custFunding) (key %custPk)) (pair (timestamp %delayExpiry) (address %merchAddr)))) (pair (pair (mutez %merchBal) (pair (mutez %merchFunding) (key %merchPk))) (pair (pair (address %pssigContract) (bytes %revLock)) (pair (int %selfDelay) (string %status))))
                COMPARE;    # int : pair (pair (pair bls12_381_fr (pair address mutez)) (pair (pair (mutez %custFunding) (key %custPk)) (pair (timestamp %delayExpiry) (address %merchAddr)))) (pair (pair (mutez %merchBal) (pair (mutez %merchFunding) (key %merchPk))) (pair (pair (address %pssigContract) (bytes %revLock)) (pair (int %selfDelay) (string %status))))
                EQ;         # bool : pair (pair (pair bls12_381_fr (pair address mutez)) (pair (pair (mutez %custFunding) (key %custPk)) (pair (timestamp %delayExpiry) (address %merchAddr)))) (pair (pair (mutez %merchBal) (pair (mutez %merchFunding) (key %merchPk))) (pair (pair (address %pssigContract) (bytes %revLock)) (pair (int %selfDelay) (string %status))))
                IF
                  {
                    # sp.verify(sp.amount == self.data.merchFunding) # pair (pair (pair bls12_381_fr (pair address mutez)) (pair (pair (mutez %custFunding) (key %custPk)) (pair (timestamp %delayExpiry) (address %merchAddr)))) (pair (pair (mutez %merchBal) (pair (mutez %merchFunding) (key %merchPk))) (pair (pair (address %pssigContract) (bytes %revLock)) (pair (int %selfDelay) (string %status))))
                    DUP;        # pair (pair (pair bls12_381_fr (pair address mutez)) (pair (pair (mutez %custFunding) (key %custPk)) (pair (timestamp %delayExpiry) (address %merchAddr)))) (pair (pair (mutez %merchBal) (pair (mutez %merchFunding) (key %merchPk))) (pair (pair (address %pssigContract) (bytes %revLock)) (pair (int %selfDelay) (string %status)))) : pair (pair (pair bls12_381_fr (pair address mutez)) (pair (pair (mutez %custFunding) (key %custPk)) (pair (timestamp %delayExpiry) (address %merchAddr)))) (pair (pair (mutez %merchBal) (pair (mutez %merchFunding) (key %merchPk))) (pair (pair (address %pssigContract) (bytes %revLock)) (pair (int %selfDelay) (string %status))))
                    CDR;        # pair (pair (mutez %merchBal) (pair (mutez %merchFunding) (key %merchPk))) (pair (pair (address %pssigContract) (bytes %revLock)) (pair (int %selfDelay) (string %status))) : pair (pair (pair bls12_381_fr (pair address mutez)) (pair (pair (mutez %custFunding) (key %custPk)) (pair (timestamp %delayExpiry) (address %merchAddr)))) (pair (pair (mutez %merchBal) (pair (mutez %merchFunding) (key %merchPk))) (pair (pair (address %pssigContract) (bytes %revLock)) (pair (int %selfDelay) (string %status))))
                    CAR;        # pair (mutez %merchBal) (pair (mutez %merchFunding) (key %merchPk)) : pair (pair (pair bls12_381_fr (pair address mutez)) (pair (pair (mutez %custFunding) (key %custPk)) (pair (timestamp %delayExpiry) (address %merchAddr)))) (pair (pair (mutez %merchBal) (pair (mutez %merchFunding) (key %merchPk))) (pair (pair (address %pssigContract) (bytes %revLock)) (pair (int %selfDelay) (string %status))))
                    CDR;        # pair (mutez %merchFunding) (key %merchPk) : pair (pair (pair bls12_381_fr (pair address mutez)) (pair (pair (mutez %custFunding) (key %custPk)) (pair (timestamp %delayExpiry) (address %merchAddr)))) (pair (pair (mutez %merchBal) (pair (mutez %merchFunding) (key %merchPk))) (pair (pair (address %pssigContract) (bytes %revLock)) (pair (int %selfDelay) (string %status))))
                    CAR;        # mutez : pair (pair (pair bls12_381_fr (pair address mutez)) (pair (pair (mutez %custFunding) (key %custPk)) (pair (timestamp %delayExpiry) (address %merchAddr)))) (pair (pair (mutez %merchBal) (pair (mutez %merchFunding) (key %merchPk))) (pair (pair (address %pssigContract) (bytes %revLock)) (pair (int %selfDelay) (string %status))))
                    AMOUNT;     # mutez : mutez : pair (pair (pair bls12_381_fr (pair address mutez)) (pair (pair (mutez %custFunding) (key %custPk)) (pair (timestamp %delayExpiry) (address %merchAddr)))) (pair (pair (mutez %merchBal) (pair (mutez %merchFunding) (key %merchPk))) (pair (pair (address %pssigContract) (bytes %revLock)) (pair (int %selfDelay) (string %status))))
                    COMPARE;    # int : pair (pair (pair bls12_381_fr (pair address mutez)) (pair (pair (mutez %custFunding) (key %custPk)) (pair (timestamp %delayExpiry) (address %merchAddr)))) (pair (pair (mutez %merchBal) (pair (mutez %merchFunding) (key %merchPk))) (pair (pair (address %pssigContract) (bytes %revLock)) (pair (int %selfDelay) (string %status))))
                    EQ;         # bool : pair (pair (pair bls12_381_fr (pair address mutez)) (pair (pair (mutez %custFunding) (key %custPk)) (pair (timestamp %delayExpiry) (address %merchAddr)))) (pair (pair (mutez %merchBal) (pair (mutez %merchFunding) (key %merchPk))) (pair (pair (address %pssigContract) (bytes %revLock)) (pair (int %selfDelay) (string %status))))
                    IF
                      {}
                      {
                        PUSH string "WrongCondition: sp.amount == self.data.merchFunding"; # string : pair (pair (pair bls12_381_fr (pair address mutez)) (pair (pair (mutez %custFunding) (key %custPk)) (pair (timestamp %delayExpiry) (address %merchAddr)))) (pair (pair (mutez %merchBal) (pair (mutez %merchFunding) (key %merchPk))) (pair (pair (address %pssigContract) (bytes %revLock)) (pair (int %selfDelay) (string %status))))
                        FAILWITH;   # FAILED
                      }; # pair (pair (pair bls12_381_fr (pair address mutez)) (pair (pair (mutez %custFunding) (key %custPk)) (pair (timestamp %delayExpiry) (address %merchAddr)))) (pair (pair (mutez %merchBal) (pair (mutez %merchFunding) (key %merchPk))) (pair (pair (address %pssigContract) (bytes %revLock)) (pair (int %selfDelay) (string %status))))
                    # self.data.merchBal = self.data.merchFunding # pair (pair (pair bls12_381_fr (pair address mutez)) (pair (pair (mutez %custFunding) (key %custPk)) (pair (timestamp %delayExpiry) (address %merchAddr)))) (pair (pair (mutez %merchBal) (pair (mutez %merchFunding) (key %merchPk))) (pair (pair (address %pssigContract) (bytes %revLock)) (pair (int %selfDelay) (string %status))))
                    DUP;        # pair (pair (pair bls12_381_fr (pair address mutez)) (pair (pair (mutez %custFunding) (key %custPk)) (pair (timestamp %delayExpiry) (address %merchAddr)))) (pair (pair (mutez %merchBal) (pair (mutez %merchFunding) (key %merchPk))) (pair (pair (address %pssigContract) (bytes %revLock)) (pair (int %selfDelay) (string %status)))) : pair (pair (pair bls12_381_fr (pair address mutez)) (pair (pair (mutez %custFunding) (key %custPk)) (pair (timestamp %delayExpiry) (address %merchAddr)))) (pair (pair (mutez %merchBal) (pair (mutez %merchFunding) (key %merchPk))) (pair (pair (address %pssigContract) (bytes %revLock)) (pair (int %selfDelay) (string %status))))
                    DUP;        # pair (pair (pair bls12_381_fr (pair address mutez)) (pair (pair (mutez %custFunding) (key %custPk)) (pair (timestamp %delayExpiry) (address %merchAddr)))) (pair (pair (mutez %merchBal) (pair (mutez %merchFunding) (key %merchPk))) (pair (pair (address %pssigContract) (bytes %revLock)) (pair (int %selfDelay) (string %status)))) : pair (pair (pair bls12_381_fr (pair address mutez)) (pair (pair (mutez %custFunding) (key %custPk)) (pair (timestamp %delayExpiry) (address %merchAddr)))) (pair (pair (mutez %merchBal) (pair (mutez %merchFunding) (key %merchPk))) (pair (pair (address %pssigContract) (bytes %revLock)) (pair (int %selfDelay) (string %status)))) : pair (pair (pair bls12_381_fr (pair address mutez)) (pair (pair (mutez %custFunding) (key %custPk)) (pair (timestamp %delayExpiry) (address %merchAddr)))) (pair (pair (mutez %merchBal) (pair (mutez %merchFunding) (key %merchPk))) (pair (pair (address %pssigContract) (bytes %revLock)) (pair (int %selfDelay) (string %status))))
                    CAR;        # pair (pair bls12_381_fr (pair address mutez)) (pair (pair (mutez %custFunding) (key %custPk)) (pair (timestamp %delayExpiry) (address %merchAddr))) : pair (pair (pair bls12_381_fr (pair address mutez)) (pair (pair (mutez %custFunding) (key %custPk)) (pair (timestamp %delayExpiry) (address %merchAddr)))) (pair (pair (mutez %merchBal) (pair (mutez %merchFunding) (key %merchPk))) (pair (pair (address %pssigContract) (bytes %revLock)) (pair (int %selfDelay) (string %status)))) : pair (pair (pair bls12_381_fr (pair address mutez)) (pair (pair (mutez %custFunding) (key %custPk)) (pair (timestamp %delayExpiry) (address %merchAddr)))) (pair (pair (mutez %merchBal) (pair (mutez %merchFunding) (key %merchPk))) (pair (pair (address %pssigContract) (bytes %revLock)) (pair (int %selfDelay) (string %status))))
                    SWAP;       # pair (pair (pair bls12_381_fr (pair address mutez)) (pair (pair (mutez %custFunding) (key %custPk)) (pair (timestamp %delayExpiry) (address %merchAddr)))) (pair (pair (mutez %merchBal) (pair (mutez %merchFunding) (key %merchPk))) (pair (pair (address %pssigContract) (bytes %revLock)) (pair (int %selfDelay) (string %status)))) : pair (pair bls12_381_fr (pair address mutez)) (pair (pair (mutez %custFunding) (key %custPk)) (pair (timestamp %delayExpiry) (address %merchAddr))) : pair (pair (pair bls12_381_fr (pair address mutez)) (pair (pair (mutez %custFunding) (key %custPk)) (pair (timestamp %delayExpiry) (address %merchAddr)))) (pair (pair (mutez %merchBal) (pair (mutez %merchFunding) (key %merchPk))) (pair (pair (address %pssigContract) (bytes %revLock)) (pair (int %selfDelay) (string %status))))
                    CDR;        # pair (pair (mutez %merchBal) (pair (mutez %merchFunding) (key %merchPk))) (pair (pair (address %pssigContract) (bytes %revLock)) (pair (int %selfDelay) (string %status))) : pair (pair bls12_381_fr (pair address mutez)) (pair (pair (mutez %custFunding) (key %custPk)) (pair (timestamp %delayExpiry) (address %merchAddr))) : pair (pair (pair bls12_381_fr (pair address mutez)) (pair (pair (mutez %custFunding) (key %custPk)) (pair (timestamp %delayExpiry) (address %merchAddr)))) (pair (pair (mutez %merchBal) (pair (mutez %merchFunding) (key %merchPk))) (pair (pair (address %pssigContract) (bytes %revLock)) (pair (int %selfDelay) (string %status))))
                    DUP;        # pair (pair (mutez %merchBal) (pair (mutez %merchFunding) (key %merchPk))) (pair (pair (address %pssigContract) (bytes %revLock)) (pair (int %selfDelay) (string %status))) : pair (pair (mutez %merchBal) (pair (mutez %merchFunding) (key %merchPk))) (pair (pair (address %pssigContract) (bytes %revLock)) (pair (int %selfDelay) (string %status))) : pair (pair bls12_381_fr (pair address mutez)) (pair (pair (mutez %custFunding) (key %custPk)) (pair (timestamp %delayExpiry) (address %merchAddr))) : pair (pair (pair bls12_381_fr (pair address mutez)) (pair (pair (mutez %custFunding) (key %custPk)) (pair (timestamp %delayExpiry) (address %merchAddr)))) (pair (pair (mutez %merchBal) (pair (mutez %merchFunding) (key %merchPk))) (pair (pair (address %pssigContract) (bytes %revLock)) (pair (int %selfDelay) (string %status))))
                    CDR;        # pair (pair (address %pssigContract) (bytes %revLock)) (pair (int %selfDelay) (string %status)) : pair (pair (mutez %merchBal) (pair (mutez %merchFunding) (key %merchPk))) (pair (pair (address %pssigContract) (bytes %revLock)) (pair (int %selfDelay) (string %status))) : pair (pair bls12_381_fr (pair address mutez)) (pair (pair (mutez %custFunding) (key %custPk)) (pair (timestamp %delayExpiry) (address %merchAddr))) : pair (pair (pair bls12_381_fr (pair address mutez)) (pair (pair (mutez %custFunding) (key %custPk)) (pair (timestamp %delayExpiry) (address %merchAddr)))) (pair (pair (mutez %merchBal) (pair (mutez %merchFunding) (key %merchPk))) (pair (pair (address %pssigContract) (bytes %revLock)) (pair (int %selfDelay) (string %status))))
                    SWAP;       # pair (pair (mutez %merchBal) (pair (mutez %merchFunding) (key %merchPk))) (pair (pair (address %pssigContract) (bytes %revLock)) (pair (int %selfDelay) (string %status))) : pair (pair (address %pssigContract) (bytes %revLock)) (pair (int %selfDelay) (string %status)) : pair (pair bls12_381_fr (pair address mutez)) (pair (pair (mutez %custFunding) (key %custPk)) (pair (timestamp %delayExpiry) (address %merchAddr))) : pair (pair (pair bls12_381_fr (pair address mutez)) (pair (pair (mutez %custFunding) (key %custPk)) (pair (timestamp %delayExpiry) (address %merchAddr)))) (pair (pair (mutez %merchBal) (pair (mutez %merchFunding) (key %merchPk))) (pair (pair (address %pssigContract) (bytes %revLock)) (pair (int %selfDelay) (string %status))))
                    CAR;        # pair (mutez %merchBal) (pair (mutez %merchFunding) (key %merchPk)) : pair (pair (address %pssigContract) (bytes %revLock)) (pair (int %selfDelay) (string %status)) : pair (pair bls12_381_fr (pair address mutez)) (pair (pair (mutez %custFunding) (key %custPk)) (pair (timestamp %delayExpiry) (address %merchAddr))) : pair (pair (pair bls12_381_fr (pair address mutez)) (pair (pair (mutez %custFunding) (key %custPk)) (pair (timestamp %delayExpiry) (address %merchAddr)))) (pair (pair (mutez %merchBal) (pair (mutez %merchFunding) (key %merchPk))) (pair (pair (address %pssigContract) (bytes %revLock)) (pair (int %selfDelay) (string %status))))
                    CDR;        # pair (mutez %merchFunding) (key %merchPk) : pair (pair (address %pssigContract) (bytes %revLock)) (pair (int %selfDelay) (string %status)) : pair (pair bls12_381_fr (pair address mutez)) (pair (pair (mutez %custFunding) (key %custPk)) (pair (timestamp %delayExpiry) (address %merchAddr))) : pair (pair (pair bls12_381_fr (pair address mutez)) (pair (pair (mutez %custFunding) (key %custPk)) (pair (timestamp %delayExpiry) (address %merchAddr)))) (pair (pair (mutez %merchBal) (pair (mutez %merchFunding) (key %merchPk))) (pair (pair (address %pssigContract) (bytes %revLock)) (pair (int %selfDelay) (string %status))))
                    DIG 3;      # pair (pair (pair bls12_381_fr (pair address mutez)) (pair (pair (mutez %custFunding) (key %custPk)) (pair (timestamp %delayExpiry) (address %merchAddr)))) (pair (pair (mutez %merchBal) (pair (mutez %merchFunding) (key %merchPk))) (pair (pair (address %pssigContract) (bytes %revLock)) (pair (int %selfDelay) (string %status)))) : pair (mutez %merchFunding) (key %merchPk) : pair (pair (address %pssigContract) (bytes %revLock)) (pair (int %selfDelay) (string %status)) : pair (pair bls12_381_fr (pair address mutez)) (pair (pair (mutez %custFunding) (key %custPk)) (pair (timestamp %delayExpiry) (address %merchAddr)))
                    CDR;        # pair (pair (mutez %merchBal) (pair (mutez %merchFunding) (key %merchPk))) (pair (pair (address %pssigContract) (bytes %revLock)) (pair (int %selfDelay) (string %status))) : pair (mutez %merchFunding) (key %merchPk) : pair (pair (address %pssigContract) (bytes %revLock)) (pair (int %selfDelay) (string %status)) : pair (pair bls12_381_fr (pair address mutez)) (pair (pair (mutez %custFunding) (key %custPk)) (pair (timestamp %delayExpiry) (address %merchAddr)))
                    CAR;        # pair (mutez %merchBal) (pair (mutez %merchFunding) (key %merchPk)) : pair (mutez %merchFunding) (key %merchPk) : pair (pair (address %pssigContract) (bytes %revLock)) (pair (int %selfDelay) (string %status)) : pair (pair bls12_381_fr (pair address mutez)) (pair (pair (mutez %custFunding) (key %custPk)) (pair (timestamp %delayExpiry) (address %merchAddr)))
                    CDR;        # pair (mutez %merchFunding) (key %merchPk) : pair (mutez %merchFunding) (key %merchPk) : pair (pair (address %pssigContract) (bytes %revLock)) (pair (int %selfDelay) (string %status)) : pair (pair bls12_381_fr (pair address mutez)) (pair (pair (mutez %custFunding) (key %custPk)) (pair (timestamp %delayExpiry) (address %merchAddr)))
                    CAR;        # mutez : pair (mutez %merchFunding) (key %merchPk) : pair (pair (address %pssigContract) (bytes %revLock)) (pair (int %selfDelay) (string %status)) : pair (pair bls12_381_fr (pair address mutez)) (pair (pair (mutez %custFunding) (key %custPk)) (pair (timestamp %delayExpiry) (address %merchAddr)))
                    PAIR;       # pair mutez (pair (mutez %merchFunding) (key %merchPk)) : pair (pair (address %pssigContract) (bytes %revLock)) (pair (int %selfDelay) (string %status)) : pair (pair bls12_381_fr (pair address mutez)) (pair (pair (mutez %custFunding) (key %custPk)) (pair (timestamp %delayExpiry) (address %merchAddr)))
                    PAIR;       # pair (pair mutez (pair (mutez %merchFunding) (key %merchPk))) (pair (pair (address %pssigContract) (bytes %revLock)) (pair (int %selfDelay) (string %status))) : pair (pair bls12_381_fr (pair address mutez)) (pair (pair (mutez %custFunding) (key %custPk)) (pair (timestamp %delayExpiry) (address %merchAddr)))
                    SWAP;       # pair (pair bls12_381_fr (pair address mutez)) (pair (pair (mutez %custFunding) (key %custPk)) (pair (timestamp %delayExpiry) (address %merchAddr))) : pair (pair mutez (pair (mutez %merchFunding) (key %merchPk))) (pair (pair (address %pssigContract) (bytes %revLock)) (pair (int %selfDelay) (string %status)))
                    PAIR;       # pair (pair (pair bls12_381_fr (pair address mutez)) (pair (pair (mutez %custFunding) (key %custPk)) (pair (timestamp %delayExpiry) (address %merchAddr)))) (pair (pair mutez (pair (mutez %merchFunding) (key %merchPk))) (pair (pair (address %pssigContract) (bytes %revLock)) (pair (int %selfDelay) (string %status))))
                  }
                  {}; # pair (pair (pair bls12_381_fr (pair address mutez)) (pair (pair (mutez %custFunding) (key %custPk)) (pair (timestamp %delayExpiry) (address %merchAddr)))) (pair (pair mutez (pair (mutez %merchFunding) (key %merchPk))) (pair (pair (address %pssigContract) (bytes %revLock)) (pair (int %selfDelay) (string %status))))
                # if (self.data.custBal == self.data.custFunding) & (self.data.merchBal == self.data.merchFunding): # pair (pair (pair bls12_381_fr (pair address mutez)) (pair (pair (mutez %custFunding) (key %custPk)) (pair (timestamp %delayExpiry) (address %merchAddr)))) (pair (pair mutez (pair (mutez %merchFunding) (key %merchPk))) (pair (pair (address %pssigContract) (bytes %revLock)) (pair (int %selfDelay) (string %status))))
                DUP;        # pair (pair (pair bls12_381_fr (pair address mutez)) (pair (pair (mutez %custFunding) (key %custPk)) (pair (timestamp %delayExpiry) (address %merchAddr)))) (pair (pair mutez (pair (mutez %merchFunding) (key %merchPk))) (pair (pair (address %pssigContract) (bytes %revLock)) (pair (int %selfDelay) (string %status)))) : pair (pair (pair bls12_381_fr (pair address mutez)) (pair (pair (mutez %custFunding) (key %custPk)) (pair (timestamp %delayExpiry) (address %merchAddr)))) (pair (pair mutez (pair (mutez %merchFunding) (key %merchPk))) (pair (pair (address %pssigContract) (bytes %revLock)) (pair (int %selfDelay) (string %status))))
                CAR;        # pair (pair bls12_381_fr (pair address mutez)) (pair (pair (mutez %custFunding) (key %custPk)) (pair (timestamp %delayExpiry) (address %merchAddr))) : pair (pair (pair bls12_381_fr (pair address mutez)) (pair (pair (mutez %custFunding) (key %custPk)) (pair (timestamp %delayExpiry) (address %merchAddr)))) (pair (pair mutez (pair (mutez %merchFunding) (key %merchPk))) (pair (pair (address %pssigContract) (bytes %revLock)) (pair (int %selfDelay) (string %status))))
                CDR;        # pair (pair (mutez %custFunding) (key %custPk)) (pair (timestamp %delayExpiry) (address %merchAddr)) : pair (pair (pair bls12_381_fr (pair address mutez)) (pair (pair (mutez %custFunding) (key %custPk)) (pair (timestamp %delayExpiry) (address %merchAddr)))) (pair (pair mutez (pair (mutez %merchFunding) (key %merchPk))) (pair (pair (address %pssigContract) (bytes %revLock)) (pair (int %selfDelay) (string %status))))
                CAR;        # pair (mutez %custFunding) (key %custPk) : pair (pair (pair bls12_381_fr (pair address mutez)) (pair (pair (mutez %custFunding) (key %custPk)) (pair (timestamp %delayExpiry) (address %merchAddr)))) (pair (pair mutez (pair (mutez %merchFunding) (key %merchPk))) (pair (pair (address %pssigContract) (bytes %revLock)) (pair (int %selfDelay) (string %status))))
                CAR;        # mutez : pair (pair (pair bls12_381_fr (pair address mutez)) (pair (pair (mutez %custFunding) (key %custPk)) (pair (timestamp %delayExpiry) (address %merchAddr)))) (pair (pair mutez (pair (mutez %merchFunding) (key %merchPk))) (pair (pair (address %pssigContract) (bytes %revLock)) (pair (int %selfDelay) (string %status))))
                SWAP;       # pair (pair (pair bls12_381_fr (pair address mutez)) (pair (pair (mutez %custFunding) (key %custPk)) (pair (timestamp %delayExpiry) (address %merchAddr)))) (pair (pair mutez (pair (mutez %merchFunding) (key %merchPk))) (pair (pair (address %pssigContract) (bytes %revLock)) (pair (int %selfDelay) (string %status)))) : mutez
                DUP;        # pair (pair (pair bls12_381_fr (pair address mutez)) (pair (pair (mutez %custFunding) (key %custPk)) (pair (timestamp %delayExpiry) (address %merchAddr)))) (pair (pair mutez (pair (mutez %merchFunding) (key %merchPk))) (pair (pair (address %pssigContract) (bytes %revLock)) (pair (int %selfDelay) (string %status)))) : pair (pair (pair bls12_381_fr (pair address mutez)) (pair (pair (mutez %custFunding) (key %custPk)) (pair (timestamp %delayExpiry) (address %merchAddr)))) (pair (pair mutez (pair (mutez %merchFunding) (key %merchPk))) (pair (pair (address %pssigContract) (bytes %revLock)) (pair (int %selfDelay) (string %status)))) : mutez
                DUG 2;      # pair (pair (pair bls12_381_fr (pair address mutez)) (pair (pair (mutez %custFunding) (key %custPk)) (pair (timestamp %delayExpiry) (address %merchAddr)))) (pair (pair mutez (pair (mutez %merchFunding) (key %merchPk))) (pair (pair (address %pssigContract) (bytes %revLock)) (pair (int %selfDelay) (string %status)))) : mutez : pair (pair (pair bls12_381_fr (pair address mutez)) (pair (pair (mutez %custFunding) (key %custPk)) (pair (timestamp %delayExpiry) (address %merchAddr)))) (pair (pair mutez (pair (mutez %merchFunding) (key %merchPk))) (pair (pair (address %pssigContract) (bytes %revLock)) (pair (int %selfDelay) (string %status))))
                CAR;        # pair (pair bls12_381_fr (pair address mutez)) (pair (pair (mutez %custFunding) (key %custPk)) (pair (timestamp %delayExpiry) (address %merchAddr))) : mutez : pair (pair (pair bls12_381_fr (pair address mutez)) (pair (pair (mutez %custFunding) (key %custPk)) (pair (timestamp %delayExpiry) (address %merchAddr)))) (pair (pair mutez (pair (mutez %merchFunding) (key %merchPk))) (pair (pair (address %pssigContract) (bytes %revLock)) (pair (int %selfDelay) (string %status))))
                CAR;        # pair bls12_381_fr (pair address mutez) : mutez : pair (pair (pair bls12_381_fr (pair address mutez)) (pair (pair (mutez %custFunding) (key %custPk)) (pair (timestamp %delayExpiry) (address %merchAddr)))) (pair (pair mutez (pair (mutez %merchFunding) (key %merchPk))) (pair (pair (address %pssigContract) (bytes %revLock)) (pair (int %selfDelay) (string %status))))
                CDR;        # pair address mutez : mutez : pair (pair (pair bls12_381_fr (pair address mutez)) (pair (pair (mutez %custFunding) (key %custPk)) (pair (timestamp %delayExpiry) (address %merchAddr)))) (pair (pair mutez (pair (mutez %merchFunding) (key %merchPk))) (pair (pair (address %pssigContract) (bytes %revLock)) (pair (int %selfDelay) (string %status))))
                CDR;        # mutez : mutez : pair (pair (pair bls12_381_fr (pair address mutez)) (pair (pair (mutez %custFunding) (key %custPk)) (pair (timestamp %delayExpiry) (address %merchAddr)))) (pair (pair mutez (pair (mutez %merchFunding) (key %merchPk))) (pair (pair (address %pssigContract) (bytes %revLock)) (pair (int %selfDelay) (string %status))))
                COMPARE;    # int : pair (pair (pair bls12_381_fr (pair address mutez)) (pair (pair (mutez %custFunding) (key %custPk)) (pair (timestamp %delayExpiry) (address %merchAddr)))) (pair (pair mutez (pair (mutez %merchFunding) (key %merchPk))) (pair (pair (address %pssigContract) (bytes %revLock)) (pair (int %selfDelay) (string %status))))
                EQ;         # bool : pair (pair (pair bls12_381_fr (pair address mutez)) (pair (pair (mutez %custFunding) (key %custPk)) (pair (timestamp %delayExpiry) (address %merchAddr)))) (pair (pair mutez (pair (mutez %merchFunding) (key %merchPk))) (pair (pair (address %pssigContract) (bytes %revLock)) (pair (int %selfDelay) (string %status))))
                IF
                  {
                    DUP;        # pair (pair (pair bls12_381_fr (pair address mutez)) (pair (pair (mutez %custFunding) (key %custPk)) (pair (timestamp %delayExpiry) (address %merchAddr)))) (pair (pair mutez (pair (mutez %merchFunding) (key %merchPk))) (pair (pair (address %pssigContract) (bytes %revLock)) (pair (int %selfDelay) (string %status)))) : pair (pair (pair bls12_381_fr (pair address mutez)) (pair (pair (mutez %custFunding) (key %custPk)) (pair (timestamp %delayExpiry) (address %merchAddr)))) (pair (pair mutez (pair (mutez %merchFunding) (key %merchPk))) (pair (pair (address %pssigContract) (bytes %revLock)) (pair (int %selfDelay) (string %status))))
                    CDR;        # pair (pair mutez (pair (mutez %merchFunding) (key %merchPk))) (pair (pair (address %pssigContract) (bytes %revLock)) (pair (int %selfDelay) (string %status))) : pair (pair (pair bls12_381_fr (pair address mutez)) (pair (pair (mutez %custFunding) (key %custPk)) (pair (timestamp %delayExpiry) (address %merchAddr)))) (pair (pair mutez (pair (mutez %merchFunding) (key %merchPk))) (pair (pair (address %pssigContract) (bytes %revLock)) (pair (int %selfDelay) (string %status))))
                    CAR;        # pair mutez (pair (mutez %merchFunding) (key %merchPk)) : pair (pair (pair bls12_381_fr (pair address mutez)) (pair (pair (mutez %custFunding) (key %custPk)) (pair (timestamp %delayExpiry) (address %merchAddr)))) (pair (pair mutez (pair (mutez %merchFunding) (key %merchPk))) (pair (pair (address %pssigContract) (bytes %revLock)) (pair (int %selfDelay) (string %status))))
                    CDR;        # pair (mutez %merchFunding) (key %merchPk) : pair (pair (pair bls12_381_fr (pair address mutez)) (pair (pair (mutez %custFunding) (key %custPk)) (pair (timestamp %delayExpiry) (address %merchAddr)))) (pair (pair mutez (pair (mutez %merchFunding) (key %merchPk))) (pair (pair (address %pssigContract) (bytes %revLock)) (pair (int %selfDelay) (string %status))))
                    CAR;        # mutez : pair (pair (pair bls12_381_fr (pair address mutez)) (pair (pair (mutez %custFunding) (key %custPk)) (pair (timestamp %delayExpiry) (address %merchAddr)))) (pair (pair mutez (pair (mutez %merchFunding) (key %merchPk))) (pair (pair (address %pssigContract) (bytes %revLock)) (pair (int %selfDelay) (string %status))))
                    SWAP;       # pair (pair (pair bls12_381_fr (pair address mutez)) (pair (pair (mutez %custFunding) (key %custPk)) (pair (timestamp %delayExpiry) (address %merchAddr)))) (pair (pair mutez (pair (mutez %merchFunding) (key %merchPk))) (pair (pair (address %pssigContract) (bytes %revLock)) (pair (int %selfDelay) (string %status)))) : mutez
                    DUP;        # pair (pair (pair bls12_381_fr (pair address mutez)) (pair (pair (mutez %custFunding) (key %custPk)) (pair (timestamp %delayExpiry) (address %merchAddr)))) (pair (pair mutez (pair (mutez %merchFunding) (key %merchPk))) (pair (pair (address %pssigContract) (bytes %revLock)) (pair (int %selfDelay) (string %status)))) : pair (pair (pair bls12_381_fr (pair address mutez)) (pair (pair (mutez %custFunding) (key %custPk)) (pair (timestamp %delayExpiry) (address %merchAddr)))) (pair (pair mutez (pair (mutez %merchFunding) (key %merchPk))) (pair (pair (address %pssigContract) (bytes %revLock)) (pair (int %selfDelay) (string %status)))) : mutez
                    DUG 2;      # pair (pair (pair bls12_381_fr (pair address mutez)) (pair (pair (mutez %custFunding) (key %custPk)) (pair (timestamp %delayExpiry) (address %merchAddr)))) (pair (pair mutez (pair (mutez %merchFunding) (key %merchPk))) (pair (pair (address %pssigContract) (bytes %revLock)) (pair (int %selfDelay) (string %status)))) : mutez : pair (pair (pair bls12_381_fr (pair address mutez)) (pair (pair (mutez %custFunding) (key %custPk)) (pair (timestamp %delayExpiry) (address %merchAddr)))) (pair (pair mutez (pair (mutez %merchFunding) (key %merchPk))) (pair (pair (address %pssigContract) (bytes %revLock)) (pair (int %selfDelay) (string %status))))
                    CDR;        # pair (pair mutez (pair (mutez %merchFunding) (key %merchPk))) (pair (pair (address %pssigContract) (bytes %revLock)) (pair (int %selfDelay) (string %status))) : mutez : pair (pair (pair bls12_381_fr (pair address mutez)) (pair (pair (mutez %custFunding) (key %custPk)) (pair (timestamp %delayExpiry) (address %merchAddr)))) (pair (pair mutez (pair (mutez %merchFunding) (key %merchPk))) (pair (pair (address %pssigContract) (bytes %revLock)) (pair (int %selfDelay) (string %status))))
                    CAR;        # pair mutez (pair (mutez %merchFunding) (key %merchPk)) : mutez : pair (pair (pair bls12_381_fr (pair address mutez)) (pair (pair (mutez %custFunding) (key %custPk)) (pair (timestamp %delayExpiry) (address %merchAddr)))) (pair (pair mutez (pair (mutez %merchFunding) (key %merchPk))) (pair (pair (address %pssigContract) (bytes %revLock)) (pair (int %selfDelay) (string %status))))
                    CAR;        # mutez : mutez : pair (pair (pair bls12_381_fr (pair address mutez)) (pair (pair (mutez %custFunding) (key %custPk)) (pair (timestamp %delayExpiry) (address %merchAddr)))) (pair (pair mutez (pair (mutez %merchFunding) (key %merchPk))) (pair (pair (address %pssigContract) (bytes %revLock)) (pair (int %selfDelay) (string %status))))
                    COMPARE;    # int : pair (pair (pair bls12_381_fr (pair address mutez)) (pair (pair (mutez %custFunding) (key %custPk)) (pair (timestamp %delayExpiry) (address %merchAddr)))) (pair (pair mutez (pair (mutez %merchFunding) (key %merchPk))) (pair (pair (address %pssigContract) (bytes %revLock)) (pair (int %selfDelay) (string %status))))
                    EQ;         # bool : pair (pair (pair bls12_381_fr (pair address mutez)) (pair (pair (mutez %custFunding) (key %custPk)) (pair (timestamp %delayExpiry) (address %merchAddr)))) (pair (pair mutez (pair (mutez %merchFunding) (key %merchPk))) (pair (pair (address %pssigContract) (bytes %revLock)) (pair (int %selfDelay) (string %status))))
                  }
                  {
                    PUSH bool False; # bool : pair (pair (pair bls12_381_fr (pair address mutez)) (pair (pair (mutez %custFunding) (key %custPk)) (pair (timestamp %delayExpiry) (address %merchAddr)))) (pair (pair mutez (pair (mutez %merchFunding) (key %merchPk))) (pair (pair (address %pssigContract) (bytes %revLock)) (pair (int %selfDelay) (string %status))))
                  }; # bool : pair (pair (pair bls12_381_fr (pair address mutez)) (pair (pair (mutez %custFunding) (key %custPk)) (pair (timestamp %delayExpiry) (address %merchAddr)))) (pair (pair mutez (pair (mutez %merchFunding) (key %merchPk))) (pair (pair (address %pssigContract) (bytes %revLock)) (pair (int %selfDelay) (string %status))))
                IF
                  {
                    # self.data.status = 'open' # pair (pair (pair bls12_381_fr (pair address mutez)) (pair (pair (mutez %custFunding) (key %custPk)) (pair (timestamp %delayExpiry) (address %merchAddr)))) (pair (pair mutez (pair (mutez %merchFunding) (key %merchPk))) (pair (pair (address %pssigContract) (bytes %revLock)) (pair (int %selfDelay) (string %status))))
                    DUP;        # pair (pair (pair bls12_381_fr (pair address mutez)) (pair (pair (mutez %custFunding) (key %custPk)) (pair (timestamp %delayExpiry) (address %merchAddr)))) (pair (pair mutez (pair (mutez %merchFunding) (key %merchPk))) (pair (pair (address %pssigContract) (bytes %revLock)) (pair (int %selfDelay) (string %status)))) : pair (pair (pair bls12_381_fr (pair address mutez)) (pair (pair (mutez %custFunding) (key %custPk)) (pair (timestamp %delayExpiry) (address %merchAddr)))) (pair (pair mutez (pair (mutez %merchFunding) (key %merchPk))) (pair (pair (address %pssigContract) (bytes %revLock)) (pair (int %selfDelay) (string %status))))
                    CAR;        # pair (pair bls12_381_fr (pair address mutez)) (pair (pair (mutez %custFunding) (key %custPk)) (pair (timestamp %delayExpiry) (address %merchAddr))) : pair (pair (pair bls12_381_fr (pair address mutez)) (pair (pair (mutez %custFunding) (key %custPk)) (pair (timestamp %delayExpiry) (address %merchAddr)))) (pair (pair mutez (pair (mutez %merchFunding) (key %merchPk))) (pair (pair (address %pssigContract) (bytes %revLock)) (pair (int %selfDelay) (string %status))))
                    SWAP;       # pair (pair (pair bls12_381_fr (pair address mutez)) (pair (pair (mutez %custFunding) (key %custPk)) (pair (timestamp %delayExpiry) (address %merchAddr)))) (pair (pair mutez (pair (mutez %merchFunding) (key %merchPk))) (pair (pair (address %pssigContract) (bytes %revLock)) (pair (int %selfDelay) (string %status)))) : pair (pair bls12_381_fr (pair address mutez)) (pair (pair (mutez %custFunding) (key %custPk)) (pair (timestamp %delayExpiry) (address %merchAddr)))
                    CDR;        # pair (pair mutez (pair (mutez %merchFunding) (key %merchPk))) (pair (pair (address %pssigContract) (bytes %revLock)) (pair (int %selfDelay) (string %status))) : pair (pair bls12_381_fr (pair address mutez)) (pair (pair (mutez %custFunding) (key %custPk)) (pair (timestamp %delayExpiry) (address %merchAddr)))
                    DUP;        # pair (pair mutez (pair (mutez %merchFunding) (key %merchPk))) (pair (pair (address %pssigContract) (bytes %revLock)) (pair (int %selfDelay) (string %status))) : pair (pair mutez (pair (mutez %merchFunding) (key %merchPk))) (pair (pair (address %pssigContract) (bytes %revLock)) (pair (int %selfDelay) (string %status))) : pair (pair bls12_381_fr (pair address mutez)) (pair (pair (mutez %custFunding) (key %custPk)) (pair (timestamp %delayExpiry) (address %merchAddr)))
                    CAR;        # pair mutez (pair (mutez %merchFunding) (key %merchPk)) : pair (pair mutez (pair (mutez %merchFunding) (key %merchPk))) (pair (pair (address %pssigContract) (bytes %revLock)) (pair (int %selfDelay) (string %status))) : pair (pair bls12_381_fr (pair address mutez)) (pair (pair (mutez %custFunding) (key %custPk)) (pair (timestamp %delayExpiry) (address %merchAddr)))
                    SWAP;       # pair (pair mutez (pair (mutez %merchFunding) (key %merchPk))) (pair (pair (address %pssigContract) (bytes %revLock)) (pair (int %selfDelay) (string %status))) : pair mutez (pair (mutez %merchFunding) (key %merchPk)) : pair (pair bls12_381_fr (pair address mutez)) (pair (pair (mutez %custFunding) (key %custPk)) (pair (timestamp %delayExpiry) (address %merchAddr)))
                    CDR;        # pair (pair (address %pssigContract) (bytes %revLock)) (pair (int %selfDelay) (string %status)) : pair mutez (pair (mutez %merchFunding) (key %merchPk)) : pair (pair bls12_381_fr (pair address mutez)) (pair (pair (mutez %custFunding) (key %custPk)) (pair (timestamp %delayExpiry) (address %merchAddr)))
                    DUP;        # pair (pair (address %pssigContract) (bytes %revLock)) (pair (int %selfDelay) (string %status)) : pair (pair (address %pssigContract) (bytes %revLock)) (pair (int %selfDelay) (string %status)) : pair mutez (pair (mutez %merchFunding) (key %merchPk)) : pair (pair bls12_381_fr (pair address mutez)) (pair (pair (mutez %custFunding) (key %custPk)) (pair (timestamp %delayExpiry) (address %merchAddr)))
                    CAR;        # pair (address %pssigContract) (bytes %revLock) : pair (pair (address %pssigContract) (bytes %revLock)) (pair (int %selfDelay) (string %status)) : pair mutez (pair (mutez %merchFunding) (key %merchPk)) : pair (pair bls12_381_fr (pair address mutez)) (pair (pair (mutez %custFunding) (key %custPk)) (pair (timestamp %delayExpiry) (address %merchAddr)))
                    SWAP;       # pair (pair (address %pssigContract) (bytes %revLock)) (pair (int %selfDelay) (string %status)) : pair (address %pssigContract) (bytes %revLock) : pair mutez (pair (mutez %merchFunding) (key %merchPk)) : pair (pair bls12_381_fr (pair address mutez)) (pair (pair (mutez %custFunding) (key %custPk)) (pair (timestamp %delayExpiry) (address %merchAddr)))
                    CDR;        # pair (int %selfDelay) (string %status) : pair (address %pssigContract) (bytes %revLock) : pair mutez (pair (mutez %merchFunding) (key %merchPk)) : pair (pair bls12_381_fr (pair address mutez)) (pair (pair (mutez %custFunding) (key %custPk)) (pair (timestamp %delayExpiry) (address %merchAddr)))
                    CAR;        # int : pair (address %pssigContract) (bytes %revLock) : pair mutez (pair (mutez %merchFunding) (key %merchPk)) : pair (pair bls12_381_fr (pair address mutez)) (pair (pair (mutez %custFunding) (key %custPk)) (pair (timestamp %delayExpiry) (address %merchAddr)))
                    PUSH string "open"; # string : int : pair (address %pssigContract) (bytes %revLock) : pair mutez (pair (mutez %merchFunding) (key %merchPk)) : pair (pair bls12_381_fr (pair address mutez)) (pair (pair (mutez %custFunding) (key %custPk)) (pair (timestamp %delayExpiry) (address %merchAddr)))
                    SWAP;       # int : string : pair (address %pssigContract) (bytes %revLock) : pair mutez (pair (mutez %merchFunding) (key %merchPk)) : pair (pair bls12_381_fr (pair address mutez)) (pair (pair (mutez %custFunding) (key %custPk)) (pair (timestamp %delayExpiry) (address %merchAddr)))
                    PAIR;       # pair int string : pair (address %pssigContract) (bytes %revLock) : pair mutez (pair (mutez %merchFunding) (key %merchPk)) : pair (pair bls12_381_fr (pair address mutez)) (pair (pair (mutez %custFunding) (key %custPk)) (pair (timestamp %delayExpiry) (address %merchAddr)))
                    SWAP;       # pair (address %pssigContract) (bytes %revLock) : pair int string : pair mutez (pair (mutez %merchFunding) (key %merchPk)) : pair (pair bls12_381_fr (pair address mutez)) (pair (pair (mutez %custFunding) (key %custPk)) (pair (timestamp %delayExpiry) (address %merchAddr)))
                    PAIR;       # pair (pair (address %pssigContract) (bytes %revLock)) (pair int string) : pair mutez (pair (mutez %merchFunding) (key %merchPk)) : pair (pair bls12_381_fr (pair address mutez)) (pair (pair (mutez %custFunding) (key %custPk)) (pair (timestamp %delayExpiry) (address %merchAddr)))
                    SWAP;       # pair mutez (pair (mutez %merchFunding) (key %merchPk)) : pair (pair (address %pssigContract) (bytes %revLock)) (pair int string) : pair (pair bls12_381_fr (pair address mutez)) (pair (pair (mutez %custFunding) (key %custPk)) (pair (timestamp %delayExpiry) (address %merchAddr)))
                    PAIR;       # pair (pair mutez (pair (mutez %merchFunding) (key %merchPk))) (pair (pair (address %pssigContract) (bytes %revLock)) (pair int string)) : pair (pair bls12_381_fr (pair address mutez)) (pair (pair (mutez %custFunding) (key %custPk)) (pair (timestamp %delayExpiry) (address %merchAddr)))
                    SWAP;       # pair (pair bls12_381_fr (pair address mutez)) (pair (pair (mutez %custFunding) (key %custPk)) (pair (timestamp %delayExpiry) (address %merchAddr))) : pair (pair mutez (pair (mutez %merchFunding) (key %merchPk))) (pair (pair (address %pssigContract) (bytes %revLock)) (pair int string))
                    PAIR;       # pair (pair (pair bls12_381_fr (pair address mutez)) (pair (pair (mutez %custFunding) (key %custPk)) (pair (timestamp %delayExpiry) (address %merchAddr)))) (pair (pair mutez (pair (mutez %merchFunding) (key %merchPk))) (pair (pair (address %pssigContract) (bytes %revLock)) (pair int string)))
                  }
                  {}; # pair (pair (pair bls12_381_fr (pair address mutez)) (pair (pair (mutez %custFunding) (key %custPk)) (pair (timestamp %delayExpiry) (address %merchAddr)))) (pair (pair mutez (pair (mutez %merchFunding) (key %merchPk))) (pair (pair (address %pssigContract) (bytes %revLock)) (pair int string)))
                NIL operation; # list operation : pair (pair (pair bls12_381_fr (pair address mutez)) (pair (pair (mutez %custFunding) (key %custPk)) (pair (timestamp %delayExpiry) (address %merchAddr)))) (pair (pair mutez (pair (mutez %merchFunding) (key %merchPk))) (pair (pair (address %pssigContract) (bytes %revLock)) (pair int string)))
              }
              {
                DROP;       # @storage
                # == custClaim ==
                # sp.verify(self.data.custAddr == sp.sender) # @storage
                DUP;        # @storage : @storage
                CAR;        # pair (pair (bls12_381_fr %chanID) (pair (address %custAddr) (mutez %custBal))) (pair (pair (mutez %custFunding) (key %custPk)) (pair (timestamp %delayExpiry) (address %merchAddr))) : @storage
                CAR;        # pair (bls12_381_fr %chanID) (pair (address %custAddr) (mutez %custBal)) : @storage
                CDR;        # pair (address %custAddr) (mutez %custBal) : @storage
                CAR;        # address : @storage
                SENDER;     # address : address : @storage
                COMPARE;    # int : @storage
                EQ;         # bool : @storage
                IF
                  {}
                  {
                    PUSH string "WrongCondition: self.data.custAddr == sp.sender"; # string : @storage
                    FAILWITH;   # FAILED
                  }; # @storage
                # sp.verify(self.data.status == 'custClose') # @storage
                DUP;        # @storage : @storage
                CDR;        # pair (pair (mutez %merchBal) (pair (mutez %merchFunding) (key %merchPk))) (pair (pair (address %pssigContract) (bytes %revLock)) (pair (int %selfDelay) (string %status))) : @storage
                CDR;        # pair (pair (address %pssigContract) (bytes %revLock)) (pair (int %selfDelay) (string %status)) : @storage
                CDR;        # pair (int %selfDelay) (string %status) : @storage
                CDR;        # string : @storage
                PUSH string "custClose"; # string : string : @storage
                COMPARE;    # int : @storage
                EQ;         # bool : @storage
                IF
                  {}
                  {
                    PUSH string "WrongCondition: self.data.status == 'custClose'"; # string : @storage
                    FAILWITH;   # FAILED
                  }; # @storage
                # sp.verify(self.data.delayExpiry < sp.now) # @storage
                DUP;        # @storage : @storage
                CAR;        # pair (pair (bls12_381_fr %chanID) (pair (address %custAddr) (mutez %custBal))) (pair (pair (mutez %custFunding) (key %custPk)) (pair (timestamp %delayExpiry) (address %merchAddr))) : @storage
                CDR;        # pair (pair (mutez %custFunding) (key %custPk)) (pair (timestamp %delayExpiry) (address %merchAddr)) : @storage
                CDR;        # pair (timestamp %delayExpiry) (address %merchAddr) : @storage
                CAR;        # timestamp : @storage
                NOW;        # timestamp : timestamp : @storage
                COMPARE;    # int : @storage
                GT;         # bool : @storage
                IF
                  {}
                  {
                    PUSH string "WrongCondition: self.data.delayExpiry < sp.now"; # string : @storage
                    FAILWITH;   # FAILED
                  }; # @storage
                # sp.send(self.data.custAddr, self.data.custBal) # @storage
                DUP;        # @storage : @storage
                CAR;        # pair (pair (bls12_381_fr %chanID) (pair (address %custAddr) (mutez %custBal))) (pair (pair (mutez %custFunding) (key %custPk)) (pair (timestamp %delayExpiry) (address %merchAddr))) : @storage
                CAR;        # pair (bls12_381_fr %chanID) (pair (address %custAddr) (mutez %custBal)) : @storage
                CDR;        # pair (address %custAddr) (mutez %custBal) : @storage
                CAR;        # address : @storage
                CONTRACT unit; # option (contract unit) : @storage
                IF_SOME
                  {}
                  {
                    PUSH int 189; # int : @storage
                    FAILWITH;   # FAILED
                  }; # @some : @storage
                NIL operation; # list operation : @some : @storage
                SWAP;       # @some : list operation : @storage
                DIG 2;      # @storage : @some : list operation
                DUP;        # @storage : @storage : @some : list operation
                DUG 3;      # @storage : @some : list operation : @storage
                CAR;        # pair (pair (bls12_381_fr %chanID) (pair (address %custAddr) (mutez %custBal))) (pair (pair (mutez %custFunding) (key %custPk)) (pair (timestamp %delayExpiry) (address %merchAddr))) : @some : list operation : @storage
                CAR;        # pair (bls12_381_fr %chanID) (pair (address %custAddr) (mutez %custBal)) : @some : list operation : @storage
                CDR;        # pair (address %custAddr) (mutez %custBal) : @some : list operation : @storage
                CDR;        # mutez : @some : list operation : @storage
                UNIT;       # unit : mutez : @some : list operation : @storage
                TRANSFER_TOKENS; # operation : list operation : @storage
                CONS;       # list operation : @storage
                SWAP;       # @storage : list operation
                # self.data.custBal = sp.tez(0) # @storage : list operation
                DUP;        # @storage : @storage : list operation
                CDR;        # pair (pair (mutez %merchBal) (pair (mutez %merchFunding) (key %merchPk))) (pair (pair (address %pssigContract) (bytes %revLock)) (pair (int %selfDelay) (string %status))) : @storage : list operation
                SWAP;       # @storage : pair (pair (mutez %merchBal) (pair (mutez %merchFunding) (key %merchPk))) (pair (pair (address %pssigContract) (bytes %revLock)) (pair (int %selfDelay) (string %status))) : list operation
                CAR;        # pair (pair (bls12_381_fr %chanID) (pair (address %custAddr) (mutez %custBal))) (pair (pair (mutez %custFunding) (key %custPk)) (pair (timestamp %delayExpiry) (address %merchAddr))) : pair (pair (mutez %merchBal) (pair (mutez %merchFunding) (key %merchPk))) (pair (pair (address %pssigContract) (bytes %revLock)) (pair (int %selfDelay) (string %status))) : list operation
                DUP;        # pair (pair (bls12_381_fr %chanID) (pair (address %custAddr) (mutez %custBal))) (pair (pair (mutez %custFunding) (key %custPk)) (pair (timestamp %delayExpiry) (address %merchAddr))) : pair (pair (bls12_381_fr %chanID) (pair (address %custAddr) (mutez %custBal))) (pair (pair (mutez %custFunding) (key %custPk)) (pair (timestamp %delayExpiry) (address %merchAddr))) : pair (pair (mutez %merchBal) (pair (mutez %merchFunding) (key %merchPk))) (pair (pair (address %pssigContract) (bytes %revLock)) (pair (int %selfDelay) (string %status))) : list operation
                CDR;        # pair (pair (mutez %custFunding) (key %custPk)) (pair (timestamp %delayExpiry) (address %merchAddr)) : pair (pair (bls12_381_fr %chanID) (pair (address %custAddr) (mutez %custBal))) (pair (pair (mutez %custFunding) (key %custPk)) (pair (timestamp %delayExpiry) (address %merchAddr))) : pair (pair (mutez %merchBal) (pair (mutez %merchFunding) (key %merchPk))) (pair (pair (address %pssigContract) (bytes %revLock)) (pair (int %selfDelay) (string %status))) : list operation
                SWAP;       # pair (pair (bls12_381_fr %chanID) (pair (address %custAddr) (mutez %custBal))) (pair (pair (mutez %custFunding) (key %custPk)) (pair (timestamp %delayExpiry) (address %merchAddr))) : pair (pair (mutez %custFunding) (key %custPk)) (pair (timestamp %delayExpiry) (address %merchAddr)) : pair (pair (mutez %merchBal) (pair (mutez %merchFunding) (key %merchPk))) (pair (pair (address %pssigContract) (bytes %revLock)) (pair (int %selfDelay) (string %status))) : list operation
                CAR;        # pair (bls12_381_fr %chanID) (pair (address %custAddr) (mutez %custBal)) : pair (pair (mutez %custFunding) (key %custPk)) (pair (timestamp %delayExpiry) (address %merchAddr)) : pair (pair (mutez %merchBal) (pair (mutez %merchFunding) (key %merchPk))) (pair (pair (address %pssigContract) (bytes %revLock)) (pair (int %selfDelay) (string %status))) : list operation
                DUP;        # pair (bls12_381_fr %chanID) (pair (address %custAddr) (mutez %custBal)) : pair (bls12_381_fr %chanID) (pair (address %custAddr) (mutez %custBal)) : pair (pair (mutez %custFunding) (key %custPk)) (pair (timestamp %delayExpiry) (address %merchAddr)) : pair (pair (mutez %merchBal) (pair (mutez %merchFunding) (key %merchPk))) (pair (pair (address %pssigContract) (bytes %revLock)) (pair (int %selfDelay) (string %status))) : list operation
                CAR;        # bls12_381_fr : pair (bls12_381_fr %chanID) (pair (address %custAddr) (mutez %custBal)) : pair (pair (mutez %custFunding) (key %custPk)) (pair (timestamp %delayExpiry) (address %merchAddr)) : pair (pair (mutez %merchBal) (pair (mutez %merchFunding) (key %merchPk))) (pair (pair (address %pssigContract) (bytes %revLock)) (pair (int %selfDelay) (string %status))) : list operation
                SWAP;       # pair (bls12_381_fr %chanID) (pair (address %custAddr) (mutez %custBal)) : bls12_381_fr : pair (pair (mutez %custFunding) (key %custPk)) (pair (timestamp %delayExpiry) (address %merchAddr)) : pair (pair (mutez %merchBal) (pair (mutez %merchFunding) (key %merchPk))) (pair (pair (address %pssigContract) (bytes %revLock)) (pair (int %selfDelay) (string %status))) : list operation
                CDR;        # pair (address %custAddr) (mutez %custBal) : bls12_381_fr : pair (pair (mutez %custFunding) (key %custPk)) (pair (timestamp %delayExpiry) (address %merchAddr)) : pair (pair (mutez %merchBal) (pair (mutez %merchFunding) (key %merchPk))) (pair (pair (address %pssigContract) (bytes %revLock)) (pair (int %selfDelay) (string %status))) : list operation
                CAR;        # address : bls12_381_fr : pair (pair (mutez %custFunding) (key %custPk)) (pair (timestamp %delayExpiry) (address %merchAddr)) : pair (pair (mutez %merchBal) (pair (mutez %merchFunding) (key %merchPk))) (pair (pair (address %pssigContract) (bytes %revLock)) (pair (int %selfDelay) (string %status))) : list operation
                PUSH mutez 0; # mutez : address : bls12_381_fr : pair (pair (mutez %custFunding) (key %custPk)) (pair (timestamp %delayExpiry) (address %merchAddr)) : pair (pair (mutez %merchBal) (pair (mutez %merchFunding) (key %merchPk))) (pair (pair (address %pssigContract) (bytes %revLock)) (pair (int %selfDelay) (string %status))) : list operation
                SWAP;       # address : mutez : bls12_381_fr : pair (pair (mutez %custFunding) (key %custPk)) (pair (timestamp %delayExpiry) (address %merchAddr)) : pair (pair (mutez %merchBal) (pair (mutez %merchFunding) (key %merchPk))) (pair (pair (address %pssigContract) (bytes %revLock)) (pair (int %selfDelay) (string %status))) : list operation
                PAIR;       # pair address mutez : bls12_381_fr : pair (pair (mutez %custFunding) (key %custPk)) (pair (timestamp %delayExpiry) (address %merchAddr)) : pair (pair (mutez %merchBal) (pair (mutez %merchFunding) (key %merchPk))) (pair (pair (address %pssigContract) (bytes %revLock)) (pair (int %selfDelay) (string %status))) : list operation
                SWAP;       # bls12_381_fr : pair address mutez : pair (pair (mutez %custFunding) (key %custPk)) (pair (timestamp %delayExpiry) (address %merchAddr)) : pair (pair (mutez %merchBal) (pair (mutez %merchFunding) (key %merchPk))) (pair (pair (address %pssigContract) (bytes %revLock)) (pair (int %selfDelay) (string %status))) : list operation
                PAIR;       # pair bls12_381_fr (pair address mutez) : pair (pair (mutez %custFunding) (key %custPk)) (pair (timestamp %delayExpiry) (address %merchAddr)) : pair (pair (mutez %merchBal) (pair (mutez %merchFunding) (key %merchPk))) (pair (pair (address %pssigContract) (bytes %revLock)) (pair (int %selfDelay) (string %status))) : list operation
                PAIR;       # pair (pair bls12_381_fr (pair address mutez)) (pair (pair (mutez %custFunding) (key %custPk)) (pair (timestamp %delayExpiry) (address %merchAddr))) : pair (pair (mutez %merchBal) (pair (mutez %merchFunding) (key %merchPk))) (pair (pair (address %pssigContract) (bytes %revLock)) (pair (int %selfDelay) (string %status))) : list operation
                PAIR;       # pair (pair (pair bls12_381_fr (pair address mutez)) (pair (pair (mutez %custFunding) (key %custPk)) (pair (timestamp %delayExpiry) (address %merchAddr)))) (pair (pair (mutez %merchBal) (pair (mutez %merchFunding) (key %merchPk))) (pair (pair (address %pssigContract) (bytes %revLock)) (pair (int %selfDelay) (string %status)))) : list operation
                # self.data.status = 'closed' # pair (pair (pair bls12_381_fr (pair address mutez)) (pair (pair (mutez %custFunding) (key %custPk)) (pair (timestamp %delayExpiry) (address %merchAddr)))) (pair (pair (mutez %merchBal) (pair (mutez %merchFunding) (key %merchPk))) (pair (pair (address %pssigContract) (bytes %revLock)) (pair (int %selfDelay) (string %status)))) : list operation
                DUP;        # pair (pair (pair bls12_381_fr (pair address mutez)) (pair (pair (mutez %custFunding) (key %custPk)) (pair (timestamp %delayExpiry) (address %merchAddr)))) (pair (pair (mutez %merchBal) (pair (mutez %merchFunding) (key %merchPk))) (pair (pair (address %pssigContract) (bytes %revLock)) (pair (int %selfDelay) (string %status)))) : pair (pair (pair bls12_381_fr (pair address mutez)) (pair (pair (mutez %custFunding) (key %custPk)) (pair (timestamp %delayExpiry) (address %merchAddr)))) (pair (pair (mutez %merchBal) (pair (mutez %merchFunding) (key %merchPk))) (pair (pair (address %pssigContract) (bytes %revLock)) (pair (int %selfDelay) (string %status)))) : list operation
                CAR;        # pair (pair bls12_381_fr (pair address mutez)) (pair (pair (mutez %custFunding) (key %custPk)) (pair (timestamp %delayExpiry) (address %merchAddr))) : pair (pair (pair bls12_381_fr (pair address mutez)) (pair (pair (mutez %custFunding) (key %custPk)) (pair (timestamp %delayExpiry) (address %merchAddr)))) (pair (pair (mutez %merchBal) (pair (mutez %merchFunding) (key %merchPk))) (pair (pair (address %pssigContract) (bytes %revLock)) (pair (int %selfDelay) (string %status)))) : list operation
                SWAP;       # pair (pair (pair bls12_381_fr (pair address mutez)) (pair (pair (mutez %custFunding) (key %custPk)) (pair (timestamp %delayExpiry) (address %merchAddr)))) (pair (pair (mutez %merchBal) (pair (mutez %merchFunding) (key %merchPk))) (pair (pair (address %pssigContract) (bytes %revLock)) (pair (int %selfDelay) (string %status)))) : pair (pair bls12_381_fr (pair address mutez)) (pair (pair (mutez %custFunding) (key %custPk)) (pair (timestamp %delayExpiry) (address %merchAddr))) : list operation
                CDR;        # pair (pair (mutez %merchBal) (pair (mutez %merchFunding) (key %merchPk))) (pair (pair (address %pssigContract) (bytes %revLock)) (pair (int %selfDelay) (string %status))) : pair (pair bls12_381_fr (pair address mutez)) (pair (pair (mutez %custFunding) (key %custPk)) (pair (timestamp %delayExpiry) (address %merchAddr))) : list operation
                DUP;        # pair (pair (mutez %merchBal) (pair (mutez %merchFunding) (key %merchPk))) (pair (pair (address %pssigContract) (bytes %revLock)) (pair (int %selfDelay) (string %status))) : pair (pair (mutez %merchBal) (pair (mutez %merchFunding) (key %merchPk))) (pair (pair (address %pssigContract) (bytes %revLock)) (pair (int %selfDelay) (string %status))) : pair (pair bls12_381_fr (pair address mutez)) (pair (pair (mutez %custFunding) (key %custPk)) (pair (timestamp %delayExpiry) (address %merchAddr))) : list operation
                CAR;        # pair (mutez %merchBal) (pair (mutez %merchFunding) (key %merchPk)) : pair (pair (mutez %merchBal) (pair (mutez %merchFunding) (key %merchPk))) (pair (pair (address %pssigContract) (bytes %revLock)) (pair (int %selfDelay) (string %status))) : pair (pair bls12_381_fr (pair address mutez)) (pair (pair (mutez %custFunding) (key %custPk)) (pair (timestamp %delayExpiry) (address %merchAddr))) : list operation
                SWAP;       # pair (pair (mutez %merchBal) (pair (mutez %merchFunding) (key %merchPk))) (pair (pair (address %pssigContract) (bytes %revLock)) (pair (int %selfDelay) (string %status))) : pair (mutez %merchBal) (pair (mutez %merchFunding) (key %merchPk)) : pair (pair bls12_381_fr (pair address mutez)) (pair (pair (mutez %custFunding) (key %custPk)) (pair (timestamp %delayExpiry) (address %merchAddr))) : list operation
                CDR;        # pair (pair (address %pssigContract) (bytes %revLock)) (pair (int %selfDelay) (string %status)) : pair (mutez %merchBal) (pair (mutez %merchFunding) (key %merchPk)) : pair (pair bls12_381_fr (pair address mutez)) (pair (pair (mutez %custFunding) (key %custPk)) (pair (timestamp %delayExpiry) (address %merchAddr))) : list operation
                DUP;        # pair (pair (address %pssigContract) (bytes %revLock)) (pair (int %selfDelay) (string %status)) : pair (pair (address %pssigContract) (bytes %revLock)) (pair (int %selfDelay) (string %status)) : pair (mutez %merchBal) (pair (mutez %merchFunding) (key %merchPk)) : pair (pair bls12_381_fr (pair address mutez)) (pair (pair (mutez %custFunding) (key %custPk)) (pair (timestamp %delayExpiry) (address %merchAddr))) : list operation
                CAR;        # pair (address %pssigContract) (bytes %revLock) : pair (pair (address %pssigContract) (bytes %revLock)) (pair (int %selfDelay) (string %status)) : pair (mutez %merchBal) (pair (mutez %merchFunding) (key %merchPk)) : pair (pair bls12_381_fr (pair address mutez)) (pair (pair (mutez %custFunding) (key %custPk)) (pair (timestamp %delayExpiry) (address %merchAddr))) : list operation
                SWAP;       # pair (pair (address %pssigContract) (bytes %revLock)) (pair (int %selfDelay) (string %status)) : pair (address %pssigContract) (bytes %revLock) : pair (mutez %merchBal) (pair (mutez %merchFunding) (key %merchPk)) : pair (pair bls12_381_fr (pair address mutez)) (pair (pair (mutez %custFunding) (key %custPk)) (pair (timestamp %delayExpiry) (address %merchAddr))) : list operation
                CDR;        # pair (int %selfDelay) (string %status) : pair (address %pssigContract) (bytes %revLock) : pair (mutez %merchBal) (pair (mutez %merchFunding) (key %merchPk)) : pair (pair bls12_381_fr (pair address mutez)) (pair (pair (mutez %custFunding) (key %custPk)) (pair (timestamp %delayExpiry) (address %merchAddr))) : list operation
                CAR;        # int : pair (address %pssigContract) (bytes %revLock) : pair (mutez %merchBal) (pair (mutez %merchFunding) (key %merchPk)) : pair (pair bls12_381_fr (pair address mutez)) (pair (pair (mutez %custFunding) (key %custPk)) (pair (timestamp %delayExpiry) (address %merchAddr))) : list operation
                PUSH string "closed"; # string : int : pair (address %pssigContract) (bytes %revLock) : pair (mutez %merchBal) (pair (mutez %merchFunding) (key %merchPk)) : pair (pair bls12_381_fr (pair address mutez)) (pair (pair (mutez %custFunding) (key %custPk)) (pair (timestamp %delayExpiry) (address %merchAddr))) : list operation
                SWAP;       # int : string : pair (address %pssigContract) (bytes %revLock) : pair (mutez %merchBal) (pair (mutez %merchFunding) (key %merchPk)) : pair (pair bls12_381_fr (pair address mutez)) (pair (pair (mutez %custFunding) (key %custPk)) (pair (timestamp %delayExpiry) (address %merchAddr))) : list operation
                PAIR;       # pair int string : pair (address %pssigContract) (bytes %revLock) : pair (mutez %merchBal) (pair (mutez %merchFunding) (key %merchPk)) : pair (pair bls12_381_fr (pair address mutez)) (pair (pair (mutez %custFunding) (key %custPk)) (pair (timestamp %delayExpiry) (address %merchAddr))) : list operation
                SWAP;       # pair (address %pssigContract) (bytes %revLock) : pair int string : pair (mutez %merchBal) (pair (mutez %merchFunding) (key %merchPk)) : pair (pair bls12_381_fr (pair address mutez)) (pair (pair (mutez %custFunding) (key %custPk)) (pair (timestamp %delayExpiry) (address %merchAddr))) : list operation
                PAIR;       # pair (pair (address %pssigContract) (bytes %revLock)) (pair int string) : pair (mutez %merchBal) (pair (mutez %merchFunding) (key %merchPk)) : pair (pair bls12_381_fr (pair address mutez)) (pair (pair (mutez %custFunding) (key %custPk)) (pair (timestamp %delayExpiry) (address %merchAddr))) : list operation
                SWAP;       # pair (mutez %merchBal) (pair (mutez %merchFunding) (key %merchPk)) : pair (pair (address %pssigContract) (bytes %revLock)) (pair int string) : pair (pair bls12_381_fr (pair address mutez)) (pair (pair (mutez %custFunding) (key %custPk)) (pair (timestamp %delayExpiry) (address %merchAddr))) : list operation
                PAIR;       # pair (pair (mutez %merchBal) (pair (mutez %merchFunding) (key %merchPk))) (pair (pair (address %pssigContract) (bytes %revLock)) (pair int string)) : pair (pair bls12_381_fr (pair address mutez)) (pair (pair (mutez %custFunding) (key %custPk)) (pair (timestamp %delayExpiry) (address %merchAddr))) : list operation
                SWAP;       # pair (pair bls12_381_fr (pair address mutez)) (pair (pair (mutez %custFunding) (key %custPk)) (pair (timestamp %delayExpiry) (address %merchAddr))) : pair (pair (mutez %merchBal) (pair (mutez %merchFunding) (key %merchPk))) (pair (pair (address %pssigContract) (bytes %revLock)) (pair int string)) : list operation
                PAIR;       # pair (pair (pair bls12_381_fr (pair address mutez)) (pair (pair (mutez %custFunding) (key %custPk)) (pair (timestamp %delayExpiry) (address %merchAddr)))) (pair (pair (mutez %merchBal) (pair (mutez %merchFunding) (key %merchPk))) (pair (pair (address %pssigContract) (bytes %revLock)) (pair int string))) : list operation
                SWAP;       # list operation : pair (pair (pair bls12_381_fr (pair address mutez)) (pair (pair (mutez %custFunding) (key %custPk)) (pair (timestamp %delayExpiry) (address %merchAddr)))) (pair (pair (mutez %merchBal) (pair (mutez %merchFunding) (key %merchPk))) (pair (pair (address %pssigContract) (bytes %revLock)) (pair int string)))
              }; # list operation : pair (pair (pair bls12_381_fr (pair address mutez)) (pair (pair (mutez %custFunding) (key %custPk)) (pair (timestamp %delayExpiry) (address %merchAddr)))) (pair (pair mutez (pair (mutez %merchFunding) (key %merchPk))) (pair (pair (address %pssigContract) (bytes %revLock)) (pair int string)))
          }
          {
            IF_LEFT
              {
                # == custClose ==
                # sp.verify(self.data.custAddr == sp.sender) # @parameter%custClose : @storage
                SENDER;     # address : @parameter%custClose : @storage
                DIG 2;      # @storage : address : @parameter%custClose
                DUP;        # @storage : @storage : address : @parameter%custClose
                DUG 3;      # @storage : address : @parameter%custClose : @storage
                CAR;        # pair (pair (bls12_381_fr %chanID) (pair (address %custAddr) (mutez %custBal))) (pair (pair (mutez %custFunding) (key %custPk)) (pair (timestamp %delayExpiry) (address %merchAddr))) : address : @parameter%custClose : @storage
                CAR;        # pair (bls12_381_fr %chanID) (pair (address %custAddr) (mutez %custBal)) : address : @parameter%custClose : @storage
                CDR;        # pair (address %custAddr) (mutez %custBal) : address : @parameter%custClose : @storage
                CAR;        # address : address : @parameter%custClose : @storage
                COMPARE;    # int : @parameter%custClose : @storage
                EQ;         # bool : @parameter%custClose : @storage
                IF
                  {}
                  {
                    PUSH string "WrongCondition: self.data.custAddr == sp.sender"; # string : @parameter%custClose : @storage
                    FAILWITH;   # FAILED
                  }; # @parameter%custClose : @storage
                # sp.verify((self.data.status == 'open') | (self.data.status == 'merchClose')) # @parameter%custClose : @storage
                PUSH string "open"; # string : @parameter%custClose : @storage
                DIG 2;      # @storage : string : @parameter%custClose
                DUP;        # @storage : @storage : string : @parameter%custClose
                DUG 3;      # @storage : string : @parameter%custClose : @storage
                CDR;        # pair (pair (mutez %merchBal) (pair (mutez %merchFunding) (key %merchPk))) (pair (pair (address %pssigContract) (bytes %revLock)) (pair (int %selfDelay) (string %status))) : string : @parameter%custClose : @storage
                CDR;        # pair (pair (address %pssigContract) (bytes %revLock)) (pair (int %selfDelay) (string %status)) : string : @parameter%custClose : @storage
                CDR;        # pair (int %selfDelay) (string %status) : string : @parameter%custClose : @storage
                CDR;        # string : string : @parameter%custClose : @storage
                COMPARE;    # int : @parameter%custClose : @storage
                EQ;         # bool : @parameter%custClose : @storage
                IF
                  {
                    PUSH bool True; # bool : @parameter%custClose : @storage
                  }
                  {
                    PUSH string "merchClose"; # string : @parameter%custClose : @storage
                    DIG 2;      # @storage : string : @parameter%custClose
                    DUP;        # @storage : @storage : string : @parameter%custClose
                    DUG 3;      # @storage : string : @parameter%custClose : @storage
                    CDR;        # pair (pair (mutez %merchBal) (pair (mutez %merchFunding) (key %merchPk))) (pair (pair (address %pssigContract) (bytes %revLock)) (pair (int %selfDelay) (string %status))) : string : @parameter%custClose : @storage
                    CDR;        # pair (pair (address %pssigContract) (bytes %revLock)) (pair (int %selfDelay) (string %status)) : string : @parameter%custClose : @storage
                    CDR;        # pair (int %selfDelay) (string %status) : string : @parameter%custClose : @storage
                    CDR;        # string : string : @parameter%custClose : @storage
                    COMPARE;    # int : @parameter%custClose : @storage
                    EQ;         # bool : @parameter%custClose : @storage
                  }; # bool : @parameter%custClose : @storage
                IF
                  {}
                  {
                    PUSH string "WrongCondition: (self.data.status == 'open') | (self.data.status == 'merchClose')"; # string : @parameter%custClose : @storage
                    FAILWITH;   # FAILED
                  }; # @parameter%custClose : @storage
                SWAP;       # @storage : @parameter%custClose
                # self.data.custBal = params.custBal # @storage : @parameter%custClose
                DUP;        # @storage : @storage : @parameter%custClose
                CDR;        # pair (pair (mutez %merchBal) (pair (mutez %merchFunding) (key %merchPk))) (pair (pair (address %pssigContract) (bytes %revLock)) (pair (int %selfDelay) (string %status))) : @storage : @parameter%custClose
                SWAP;       # @storage : pair (pair (mutez %merchBal) (pair (mutez %merchFunding) (key %merchPk))) (pair (pair (address %pssigContract) (bytes %revLock)) (pair (int %selfDelay) (string %status))) : @parameter%custClose
                CAR;        # pair (pair (bls12_381_fr %chanID) (pair (address %custAddr) (mutez %custBal))) (pair (pair (mutez %custFunding) (key %custPk)) (pair (timestamp %delayExpiry) (address %merchAddr))) : pair (pair (mutez %merchBal) (pair (mutez %merchFunding) (key %merchPk))) (pair (pair (address %pssigContract) (bytes %revLock)) (pair (int %selfDelay) (string %status))) : @parameter%custClose
                DUP;        # pair (pair (bls12_381_fr %chanID) (pair (address %custAddr) (mutez %custBal))) (pair (pair (mutez %custFunding) (key %custPk)) (pair (timestamp %delayExpiry) (address %merchAddr))) : pair (pair (bls12_381_fr %chanID) (pair (address %custAddr) (mutez %custBal))) (pair (pair (mutez %custFunding) (key %custPk)) (pair (timestamp %delayExpiry) (address %merchAddr))) : pair (pair (mutez %merchBal) (pair (mutez %merchFunding) (key %merchPk))) (pair (pair (address %pssigContract) (bytes %revLock)) (pair (int %selfDelay) (string %status))) : @parameter%custClose
                CDR;        # pair (pair (mutez %custFunding) (key %custPk)) (pair (timestamp %delayExpiry) (address %merchAddr)) : pair (pair (bls12_381_fr %chanID) (pair (address %custAddr) (mutez %custBal))) (pair (pair (mutez %custFunding) (key %custPk)) (pair (timestamp %delayExpiry) (address %merchAddr))) : pair (pair (mutez %merchBal) (pair (mutez %merchFunding) (key %merchPk))) (pair (pair (address %pssigContract) (bytes %revLock)) (pair (int %selfDelay) (string %status))) : @parameter%custClose
                SWAP;       # pair (pair (bls12_381_fr %chanID) (pair (address %custAddr) (mutez %custBal))) (pair (pair (mutez %custFunding) (key %custPk)) (pair (timestamp %delayExpiry) (address %merchAddr))) : pair (pair (mutez %custFunding) (key %custPk)) (pair (timestamp %delayExpiry) (address %merchAddr)) : pair (pair (mutez %merchBal) (pair (mutez %merchFunding) (key %merchPk))) (pair (pair (address %pssigContract) (bytes %revLock)) (pair (int %selfDelay) (string %status))) : @parameter%custClose
                CAR;        # pair (bls12_381_fr %chanID) (pair (address %custAddr) (mutez %custBal)) : pair (pair (mutez %custFunding) (key %custPk)) (pair (timestamp %delayExpiry) (address %merchAddr)) : pair (pair (mutez %merchBal) (pair (mutez %merchFunding) (key %merchPk))) (pair (pair (address %pssigContract) (bytes %revLock)) (pair (int %selfDelay) (string %status))) : @parameter%custClose
                DUP;        # pair (bls12_381_fr %chanID) (pair (address %custAddr) (mutez %custBal)) : pair (bls12_381_fr %chanID) (pair (address %custAddr) (mutez %custBal)) : pair (pair (mutez %custFunding) (key %custPk)) (pair (timestamp %delayExpiry) (address %merchAddr)) : pair (pair (mutez %merchBal) (pair (mutez %merchFunding) (key %merchPk))) (pair (pair (address %pssigContract) (bytes %revLock)) (pair (int %selfDelay) (string %status))) : @parameter%custClose
                CAR;        # bls12_381_fr : pair (bls12_381_fr %chanID) (pair (address %custAddr) (mutez %custBal)) : pair (pair (mutez %custFunding) (key %custPk)) (pair (timestamp %delayExpiry) (address %merchAddr)) : pair (pair (mutez %merchBal) (pair (mutez %merchFunding) (key %merchPk))) (pair (pair (address %pssigContract) (bytes %revLock)) (pair (int %selfDelay) (string %status))) : @parameter%custClose
                SWAP;       # pair (bls12_381_fr %chanID) (pair (address %custAddr) (mutez %custBal)) : bls12_381_fr : pair (pair (mutez %custFunding) (key %custPk)) (pair (timestamp %delayExpiry) (address %merchAddr)) : pair (pair (mutez %merchBal) (pair (mutez %merchFunding) (key %merchPk))) (pair (pair (address %pssigContract) (bytes %revLock)) (pair (int %selfDelay) (string %status))) : @parameter%custClose
                CDR;        # pair (address %custAddr) (mutez %custBal) : bls12_381_fr : pair (pair (mutez %custFunding) (key %custPk)) (pair (timestamp %delayExpiry) (address %merchAddr)) : pair (pair (mutez %merchBal) (pair (mutez %merchFunding) (key %merchPk))) (pair (pair (address %pssigContract) (bytes %revLock)) (pair (int %selfDelay) (string %status))) : @parameter%custClose
                CAR;        # address : bls12_381_fr : pair (pair (mutez %custFunding) (key %custPk)) (pair (timestamp %delayExpiry) (address %merchAddr)) : pair (pair (mutez %merchBal) (pair (mutez %merchFunding) (key %merchPk))) (pair (pair (address %pssigContract) (bytes %revLock)) (pair (int %selfDelay) (string %status))) : @parameter%custClose
                DIG 4;      # @parameter%custClose : address : bls12_381_fr : pair (pair (mutez %custFunding) (key %custPk)) (pair (timestamp %delayExpiry) (address %merchAddr)) : pair (pair (mutez %merchBal) (pair (mutez %merchFunding) (key %merchPk))) (pair (pair (address %pssigContract) (bytes %revLock)) (pair (int %selfDelay) (string %status)))
                DUP;        # @parameter%custClose : @parameter%custClose : address : bls12_381_fr : pair (pair (mutez %custFunding) (key %custPk)) (pair (timestamp %delayExpiry) (address %merchAddr)) : pair (pair (mutez %merchBal) (pair (mutez %merchFunding) (key %merchPk))) (pair (pair (address %pssigContract) (bytes %revLock)) (pair (int %selfDelay) (string %status)))
                DUG 5;      # @parameter%custClose : address : bls12_381_fr : pair (pair (mutez %custFunding) (key %custPk)) (pair (timestamp %delayExpiry) (address %merchAddr)) : pair (pair (mutez %merchBal) (pair (mutez %merchFunding) (key %merchPk))) (pair (pair (address %pssigContract) (bytes %revLock)) (pair (int %selfDelay) (string %status))) : @parameter%custClose
                CAR;        # pair (pair (mutez %custBal) (bls12_381_g2 %g2)) (pair (mutez %merchBal) (pair (bls12_381_g2 %merchPk0) (bls12_381_g2 %merchPk1))) : address : bls12_381_fr : pair (pair (mutez %custFunding) (key %custPk)) (pair (timestamp %delayExpiry) (address %merchAddr)) : pair (pair (mutez %merchBal) (pair (mutez %merchFunding) (key %merchPk))) (pair (pair (address %pssigContract) (bytes %revLock)) (pair (int %selfDelay) (string %status))) : @parameter%custClose
                CAR;        # pair (mutez %custBal) (bls12_381_g2 %g2) : address : bls12_381_fr : pair (pair (mutez %custFunding) (key %custPk)) (pair (timestamp %delayExpiry) (address %merchAddr)) : pair (pair (mutez %merchBal) (pair (mutez %merchFunding) (key %merchPk))) (pair (pair (address %pssigContract) (bytes %revLock)) (pair (int %selfDelay) (string %status))) : @parameter%custClose
                CAR;        # mutez : address : bls12_381_fr : pair (pair (mutez %custFunding) (key %custPk)) (pair (timestamp %delayExpiry) (address %merchAddr)) : pair (pair (mutez %merchBal) (pair (mutez %merchFunding) (key %merchPk))) (pair (pair (address %pssigContract) (bytes %revLock)) (pair (int %selfDelay) (string %status))) : @parameter%custClose
                SWAP;       # address : mutez : bls12_381_fr : pair (pair (mutez %custFunding) (key %custPk)) (pair (timestamp %delayExpiry) (address %merchAddr)) : pair (pair (mutez %merchBal) (pair (mutez %merchFunding) (key %merchPk))) (pair (pair (address %pssigContract) (bytes %revLock)) (pair (int %selfDelay) (string %status))) : @parameter%custClose
                PAIR;       # pair address mutez : bls12_381_fr : pair (pair (mutez %custFunding) (key %custPk)) (pair (timestamp %delayExpiry) (address %merchAddr)) : pair (pair (mutez %merchBal) (pair (mutez %merchFunding) (key %merchPk))) (pair (pair (address %pssigContract) (bytes %revLock)) (pair (int %selfDelay) (string %status))) : @parameter%custClose
                SWAP;       # bls12_381_fr : pair address mutez : pair (pair (mutez %custFunding) (key %custPk)) (pair (timestamp %delayExpiry) (address %merchAddr)) : pair (pair (mutez %merchBal) (pair (mutez %merchFunding) (key %merchPk))) (pair (pair (address %pssigContract) (bytes %revLock)) (pair (int %selfDelay) (string %status))) : @parameter%custClose
                PAIR;       # pair bls12_381_fr (pair address mutez) : pair (pair (mutez %custFunding) (key %custPk)) (pair (timestamp %delayExpiry) (address %merchAddr)) : pair (pair (mutez %merchBal) (pair (mutez %merchFunding) (key %merchPk))) (pair (pair (address %pssigContract) (bytes %revLock)) (pair (int %selfDelay) (string %status))) : @parameter%custClose
                PAIR;       # pair (pair bls12_381_fr (pair address mutez)) (pair (pair (mutez %custFunding) (key %custPk)) (pair (timestamp %delayExpiry) (address %merchAddr))) : pair (pair (mutez %merchBal) (pair (mutez %merchFunding) (key %merchPk))) (pair (pair (address %pssigContract) (bytes %revLock)) (pair (int %selfDelay) (string %status))) : @parameter%custClose
                PAIR;       # pair (pair (pair bls12_381_fr (pair address mutez)) (pair (pair (mutez %custFunding) (key %custPk)) (pair (timestamp %delayExpiry) (address %merchAddr)))) (pair (pair (mutez %merchBal) (pair (mutez %merchFunding) (key %merchPk))) (pair (pair (address %pssigContract) (bytes %revLock)) (pair (int %selfDelay) (string %status)))) : @parameter%custClose
                # self.data.merchBal = params.merchBal # pair (pair (pair bls12_381_fr (pair address mutez)) (pair (pair (mutez %custFunding) (key %custPk)) (pair (timestamp %delayExpiry) (address %merchAddr)))) (pair (pair (mutez %merchBal) (pair (mutez %merchFunding) (key %merchPk))) (pair (pair (address %pssigContract) (bytes %revLock)) (pair (int %selfDelay) (string %status)))) : @parameter%custClose
                DUP;        # pair (pair (pair bls12_381_fr (pair address mutez)) (pair (pair (mutez %custFunding) (key %custPk)) (pair (timestamp %delayExpiry) (address %merchAddr)))) (pair (pair (mutez %merchBal) (pair (mutez %merchFunding) (key %merchPk))) (pair (pair (address %pssigContract) (bytes %revLock)) (pair (int %selfDelay) (string %status)))) : pair (pair (pair bls12_381_fr (pair address mutez)) (pair (pair (mutez %custFunding) (key %custPk)) (pair (timestamp %delayExpiry) (address %merchAddr)))) (pair (pair (mutez %merchBal) (pair (mutez %merchFunding) (key %merchPk))) (pair (pair (address %pssigContract) (bytes %revLock)) (pair (int %selfDelay) (string %status)))) : @parameter%custClose
                CAR;        # pair (pair bls12_381_fr (pair address mutez)) (pair (pair (mutez %custFunding) (key %custPk)) (pair (timestamp %delayExpiry) (address %merchAddr))) : pair (pair (pair bls12_381_fr (pair address mutez)) (pair (pair (mutez %custFunding) (key %custPk)) (pair (timestamp %delayExpiry) (address %merchAddr)))) (pair (pair (mutez %merchBal) (pair (mutez %merchFunding) (key %merchPk))) (pair (pair (address %pssigContract) (bytes %revLock)) (pair (int %selfDelay) (string %status)))) : @parameter%custClose
                SWAP;       # pair (pair (pair bls12_381_fr (pair address mutez)) (pair (pair (mutez %custFunding) (key %custPk)) (pair (timestamp %delayExpiry) (address %merchAddr)))) (pair (pair (mutez %merchBal) (pair (mutez %merchFunding) (key %merchPk))) (pair (pair (address %pssigContract) (bytes %revLock)) (pair (int %selfDelay) (string %status)))) : pair (pair bls12_381_fr (pair address mutez)) (pair (pair (mutez %custFunding) (key %custPk)) (pair (timestamp %delayExpiry) (address %merchAddr))) : @parameter%custClose
                CDR;        # pair (pair (mutez %merchBal) (pair (mutez %merchFunding) (key %merchPk))) (pair (pair (address %pssigContract) (bytes %revLock)) (pair (int %selfDelay) (string %status))) : pair (pair bls12_381_fr (pair address mutez)) (pair (pair (mutez %custFunding) (key %custPk)) (pair (timestamp %delayExpiry) (address %merchAddr))) : @parameter%custClose
                DUP;        # pair (pair (mutez %merchBal) (pair (mutez %merchFunding) (key %merchPk))) (pair (pair (address %pssigContract) (bytes %revLock)) (pair (int %selfDelay) (string %status))) : pair (pair (mutez %merchBal) (pair (mutez %merchFunding) (key %merchPk))) (pair (pair (address %pssigContract) (bytes %revLock)) (pair (int %selfDelay) (string %status))) : pair (pair bls12_381_fr (pair address mutez)) (pair (pair (mutez %custFunding) (key %custPk)) (pair (timestamp %delayExpiry) (address %merchAddr))) : @parameter%custClose
                CDR;        # pair (pair (address %pssigContract) (bytes %revLock)) (pair (int %selfDelay) (string %status)) : pair (pair (mutez %merchBal) (pair (mutez %merchFunding) (key %merchPk))) (pair (pair (address %pssigContract) (bytes %revLock)) (pair (int %selfDelay) (string %status))) : pair (pair bls12_381_fr (pair address mutez)) (pair (pair (mutez %custFunding) (key %custPk)) (pair (timestamp %delayExpiry) (address %merchAddr))) : @parameter%custClose
                SWAP;       # pair (pair (mutez %merchBal) (pair (mutez %merchFunding) (key %merchPk))) (pair (pair (address %pssigContract) (bytes %revLock)) (pair (int %selfDelay) (string %status))) : pair (pair (address %pssigContract) (bytes %revLock)) (pair (int %selfDelay) (string %status)) : pair (pair bls12_381_fr (pair address mutez)) (pair (pair (mutez %custFunding) (key %custPk)) (pair (timestamp %delayExpiry) (address %merchAddr))) : @parameter%custClose
                CAR;        # pair (mutez %merchBal) (pair (mutez %merchFunding) (key %merchPk)) : pair (pair (address %pssigContract) (bytes %revLock)) (pair (int %selfDelay) (string %status)) : pair (pair bls12_381_fr (pair address mutez)) (pair (pair (mutez %custFunding) (key %custPk)) (pair (timestamp %delayExpiry) (address %merchAddr))) : @parameter%custClose
                CDR;        # pair (mutez %merchFunding) (key %merchPk) : pair (pair (address %pssigContract) (bytes %revLock)) (pair (int %selfDelay) (string %status)) : pair (pair bls12_381_fr (pair address mutez)) (pair (pair (mutez %custFunding) (key %custPk)) (pair (timestamp %delayExpiry) (address %merchAddr))) : @parameter%custClose
                DIG 3;      # @parameter%custClose : pair (mutez %merchFunding) (key %merchPk) : pair (pair (address %pssigContract) (bytes %revLock)) (pair (int %selfDelay) (string %status)) : pair (pair bls12_381_fr (pair address mutez)) (pair (pair (mutez %custFunding) (key %custPk)) (pair (timestamp %delayExpiry) (address %merchAddr)))
                DUP;        # @parameter%custClose : @parameter%custClose : pair (mutez %merchFunding) (key %merchPk) : pair (pair (address %pssigContract) (bytes %revLock)) (pair (int %selfDelay) (string %status)) : pair (pair bls12_381_fr (pair address mutez)) (pair (pair (mutez %custFunding) (key %custPk)) (pair (timestamp %delayExpiry) (address %merchAddr)))
                DUG 4;      # @parameter%custClose : pair (mutez %merchFunding) (key %merchPk) : pair (pair (address %pssigContract) (bytes %revLock)) (pair (int %selfDelay) (string %status)) : pair (pair bls12_381_fr (pair address mutez)) (pair (pair (mutez %custFunding) (key %custPk)) (pair (timestamp %delayExpiry) (address %merchAddr))) : @parameter%custClose
                CAR;        # pair (pair (mutez %custBal) (bls12_381_g2 %g2)) (pair (mutez %merchBal) (pair (bls12_381_g2 %merchPk0) (bls12_381_g2 %merchPk1))) : pair (mutez %merchFunding) (key %merchPk) : pair (pair (address %pssigContract) (bytes %revLock)) (pair (int %selfDelay) (string %status)) : pair (pair bls12_381_fr (pair address mutez)) (pair (pair (mutez %custFunding) (key %custPk)) (pair (timestamp %delayExpiry) (address %merchAddr))) : @parameter%custClose
                CDR;        # pair (mutez %merchBal) (pair (bls12_381_g2 %merchPk0) (bls12_381_g2 %merchPk1)) : pair (mutez %merchFunding) (key %merchPk) : pair (pair (address %pssigContract) (bytes %revLock)) (pair (int %selfDelay) (string %status)) : pair (pair bls12_381_fr (pair address mutez)) (pair (pair (mutez %custFunding) (key %custPk)) (pair (timestamp %delayExpiry) (address %merchAddr))) : @parameter%custClose
                CAR;        # mutez : pair (mutez %merchFunding) (key %merchPk) : pair (pair (address %pssigContract) (bytes %revLock)) (pair (int %selfDelay) (string %status)) : pair (pair bls12_381_fr (pair address mutez)) (pair (pair (mutez %custFunding) (key %custPk)) (pair (timestamp %delayExpiry) (address %merchAddr))) : @parameter%custClose
                PAIR;       # pair mutez (pair (mutez %merchFunding) (key %merchPk)) : pair (pair (address %pssigContract) (bytes %revLock)) (pair (int %selfDelay) (string %status)) : pair (pair bls12_381_fr (pair address mutez)) (pair (pair (mutez %custFunding) (key %custPk)) (pair (timestamp %delayExpiry) (address %merchAddr))) : @parameter%custClose
                PAIR;       # pair (pair mutez (pair (mutez %merchFunding) (key %merchPk))) (pair (pair (address %pssigContract) (bytes %revLock)) (pair (int %selfDelay) (string %status))) : pair (pair bls12_381_fr (pair address mutez)) (pair (pair (mutez %custFunding) (key %custPk)) (pair (timestamp %delayExpiry) (address %merchAddr))) : @parameter%custClose
                SWAP;       # pair (pair bls12_381_fr (pair address mutez)) (pair (pair (mutez %custFunding) (key %custPk)) (pair (timestamp %delayExpiry) (address %merchAddr))) : pair (pair mutez (pair (mutez %merchFunding) (key %merchPk))) (pair (pair (address %pssigContract) (bytes %revLock)) (pair (int %selfDelay) (string %status))) : @parameter%custClose
                PAIR;       # pair (pair (pair bls12_381_fr (pair address mutez)) (pair (pair (mutez %custFunding) (key %custPk)) (pair (timestamp %delayExpiry) (address %merchAddr)))) (pair (pair mutez (pair (mutez %merchFunding) (key %merchPk))) (pair (pair (address %pssigContract) (bytes %revLock)) (pair (int %selfDelay) (string %status)))) : @parameter%custClose
                # self.data.revLock = params.revLock # pair (pair (pair bls12_381_fr (pair address mutez)) (pair (pair (mutez %custFunding) (key %custPk)) (pair (timestamp %delayExpiry) (address %merchAddr)))) (pair (pair mutez (pair (mutez %merchFunding) (key %merchPk))) (pair (pair (address %pssigContract) (bytes %revLock)) (pair (int %selfDelay) (string %status)))) : @parameter%custClose
                DUP;        # pair (pair (pair bls12_381_fr (pair address mutez)) (pair (pair (mutez %custFunding) (key %custPk)) (pair (timestamp %delayExpiry) (address %merchAddr)))) (pair (pair mutez (pair (mutez %merchFunding) (key %merchPk))) (pair (pair (address %pssigContract) (bytes %revLock)) (pair (int %selfDelay) (string %status)))) : pair (pair (pair bls12_381_fr (pair address mutez)) (pair (pair (mutez %custFunding) (key %custPk)) (pair (timestamp %delayExpiry) (address %merchAddr)))) (pair (pair mutez (pair (mutez %merchFunding) (key %merchPk))) (pair (pair (address %pssigContract) (bytes %revLock)) (pair (int %selfDelay) (string %status)))) : @parameter%custClose
                CAR;        # pair (pair bls12_381_fr (pair address mutez)) (pair (pair (mutez %custFunding) (key %custPk)) (pair (timestamp %delayExpiry) (address %merchAddr))) : pair (pair (pair bls12_381_fr (pair address mutez)) (pair (pair (mutez %custFunding) (key %custPk)) (pair (timestamp %delayExpiry) (address %merchAddr)))) (pair (pair mutez (pair (mutez %merchFunding) (key %merchPk))) (pair (pair (address %pssigContract) (bytes %revLock)) (pair (int %selfDelay) (string %status)))) : @parameter%custClose
                SWAP;       # pair (pair (pair bls12_381_fr (pair address mutez)) (pair (pair (mutez %custFunding) (key %custPk)) (pair (timestamp %delayExpiry) (address %merchAddr)))) (pair (pair mutez (pair (mutez %merchFunding) (key %merchPk))) (pair (pair (address %pssigContract) (bytes %revLock)) (pair (int %selfDelay) (string %status)))) : pair (pair bls12_381_fr (pair address mutez)) (pair (pair (mutez %custFunding) (key %custPk)) (pair (timestamp %delayExpiry) (address %merchAddr))) : @parameter%custClose
                CDR;        # pair (pair mutez (pair (mutez %merchFunding) (key %merchPk))) (pair (pair (address %pssigContract) (bytes %revLock)) (pair (int %selfDelay) (string %status))) : pair (pair bls12_381_fr (pair address mutez)) (pair (pair (mutez %custFunding) (key %custPk)) (pair (timestamp %delayExpiry) (address %merchAddr))) : @parameter%custClose
                DUP;        # pair (pair mutez (pair (mutez %merchFunding) (key %merchPk))) (pair (pair (address %pssigContract) (bytes %revLock)) (pair (int %selfDelay) (string %status))) : pair (pair mutez (pair (mutez %merchFunding) (key %merchPk))) (pair (pair (address %pssigContract) (bytes %revLock)) (pair (int %selfDelay) (string %status))) : pair (pair bls12_381_fr (pair address mutez)) (pair (pair (mutez %custFunding) (key %custPk)) (pair (timestamp %delayExpiry) (address %merchAddr))) : @parameter%custClose
                CAR;        # pair mutez (pair (mutez %merchFunding) (key %merchPk)) : pair (pair mutez (pair (mutez %merchFunding) (key %merchPk))) (pair (pair (address %pssigContract) (bytes %revLock)) (pair (int %selfDelay) (string %status))) : pair (pair bls12_381_fr (pair address mutez)) (pair (pair (mutez %custFunding) (key %custPk)) (pair (timestamp %delayExpiry) (address %merchAddr))) : @parameter%custClose
                SWAP;       # pair (pair mutez (pair (mutez %merchFunding) (key %merchPk))) (pair (pair (address %pssigContract) (bytes %revLock)) (pair (int %selfDelay) (string %status))) : pair mutez (pair (mutez %merchFunding) (key %merchPk)) : pair (pair bls12_381_fr (pair address mutez)) (pair (pair (mutez %custFunding) (key %custPk)) (pair (timestamp %delayExpiry) (address %merchAddr))) : @parameter%custClose
                CDR;        # pair (pair (address %pssigContract) (bytes %revLock)) (pair (int %selfDelay) (string %status)) : pair mutez (pair (mutez %merchFunding) (key %merchPk)) : pair (pair bls12_381_fr (pair address mutez)) (pair (pair (mutez %custFunding) (key %custPk)) (pair (timestamp %delayExpiry) (address %merchAddr))) : @parameter%custClose
                DUP;        # pair (pair (address %pssigContract) (bytes %revLock)) (pair (int %selfDelay) (string %status)) : pair (pair (address %pssigContract) (bytes %revLock)) (pair (int %selfDelay) (string %status)) : pair mutez (pair (mutez %merchFunding) (key %merchPk)) : pair (pair bls12_381_fr (pair address mutez)) (pair (pair (mutez %custFunding) (key %custPk)) (pair (timestamp %delayExpiry) (address %merchAddr))) : @parameter%custClose
                CDR;        # pair (int %selfDelay) (string %status) : pair (pair (address %pssigContract) (bytes %revLock)) (pair (int %selfDelay) (string %status)) : pair mutez (pair (mutez %merchFunding) (key %merchPk)) : pair (pair bls12_381_fr (pair address mutez)) (pair (pair (mutez %custFunding) (key %custPk)) (pair (timestamp %delayExpiry) (address %merchAddr))) : @parameter%custClose
                SWAP;       # pair (pair (address %pssigContract) (bytes %revLock)) (pair (int %selfDelay) (string %status)) : pair (int %selfDelay) (string %status) : pair mutez (pair (mutez %merchFunding) (key %merchPk)) : pair (pair bls12_381_fr (pair address mutez)) (pair (pair (mutez %custFunding) (key %custPk)) (pair (timestamp %delayExpiry) (address %merchAddr))) : @parameter%custClose
                CAR;        # pair (address %pssigContract) (bytes %revLock) : pair (int %selfDelay) (string %status) : pair mutez (pair (mutez %merchFunding) (key %merchPk)) : pair (pair bls12_381_fr (pair address mutez)) (pair (pair (mutez %custFunding) (key %custPk)) (pair (timestamp %delayExpiry) (address %merchAddr))) : @parameter%custClose
                CAR;        # address : pair (int %selfDelay) (string %status) : pair mutez (pair (mutez %merchFunding) (key %merchPk)) : pair (pair bls12_381_fr (pair address mutez)) (pair (pair (mutez %custFunding) (key %custPk)) (pair (timestamp %delayExpiry) (address %merchAddr))) : @parameter%custClose
                DIG 4;      # @parameter%custClose : address : pair (int %selfDelay) (string %status) : pair mutez (pair (mutez %merchFunding) (key %merchPk)) : pair (pair bls12_381_fr (pair address mutez)) (pair (pair (mutez %custFunding) (key %custPk)) (pair (timestamp %delayExpiry) (address %merchAddr)))
                DUP;        # @parameter%custClose : @parameter%custClose : address : pair (int %selfDelay) (string %status) : pair mutez (pair (mutez %merchFunding) (key %merchPk)) : pair (pair bls12_381_fr (pair address mutez)) (pair (pair (mutez %custFunding) (key %custPk)) (pair (timestamp %delayExpiry) (address %merchAddr)))
                DUG 5;      # @parameter%custClose : address : pair (int %selfDelay) (string %status) : pair mutez (pair (mutez %merchFunding) (key %merchPk)) : pair (pair bls12_381_fr (pair address mutez)) (pair (pair (mutez %custFunding) (key %custPk)) (pair (timestamp %delayExpiry) (address %merchAddr))) : @parameter%custClose
                CDR;        # pair (pair (bls12_381_g2 %merchPk2) (pair (bls12_381_g2 %merchPk3) (bls12_381_g2 %merchPk4))) (pair (bytes %revLock) (pair (bls12_381_g1 %s1) (bls12_381_g1 %s2))) : address : pair (int %selfDelay) (string %status) : pair mutez (pair (mutez %merchFunding) (key %merchPk)) : pair (pair bls12_381_fr (pair address mutez)) (pair (pair (mutez %custFunding) (key %custPk)) (pair (timestamp %delayExpiry) (address %merchAddr))) : @parameter%custClose
                CDR;        # pair (bytes %revLock) (pair (bls12_381_g1 %s1) (bls12_381_g1 %s2)) : address : pair (int %selfDelay) (string %status) : pair mutez (pair (mutez %merchFunding) (key %merchPk)) : pair (pair bls12_381_fr (pair address mutez)) (pair (pair (mutez %custFunding) (key %custPk)) (pair (timestamp %delayExpiry) (address %merchAddr))) : @parameter%custClose
                CAR;        # bytes : address : pair (int %selfDelay) (string %status) : pair mutez (pair (mutez %merchFunding) (key %merchPk)) : pair (pair bls12_381_fr (pair address mutez)) (pair (pair (mutez %custFunding) (key %custPk)) (pair (timestamp %delayExpiry) (address %merchAddr))) : @parameter%custClose
                SWAP;       # address : bytes : pair (int %selfDelay) (string %status) : pair mutez (pair (mutez %merchFunding) (key %merchPk)) : pair (pair bls12_381_fr (pair address mutez)) (pair (pair (mutez %custFunding) (key %custPk)) (pair (timestamp %delayExpiry) (address %merchAddr))) : @parameter%custClose
                PAIR;       # pair address bytes : pair (int %selfDelay) (string %status) : pair mutez (pair (mutez %merchFunding) (key %merchPk)) : pair (pair bls12_381_fr (pair address mutez)) (pair (pair (mutez %custFunding) (key %custPk)) (pair (timestamp %delayExpiry) (address %merchAddr))) : @parameter%custClose
                PAIR;       # pair (pair address bytes) (pair (int %selfDelay) (string %status)) : pair mutez (pair (mutez %merchFunding) (key %merchPk)) : pair (pair bls12_381_fr (pair address mutez)) (pair (pair (mutez %custFunding) (key %custPk)) (pair (timestamp %delayExpiry) (address %merchAddr))) : @parameter%custClose
                SWAP;       # pair mutez (pair (mutez %merchFunding) (key %merchPk)) : pair (pair address bytes) (pair (int %selfDelay) (string %status)) : pair (pair bls12_381_fr (pair address mutez)) (pair (pair (mutez %custFunding) (key %custPk)) (pair (timestamp %delayExpiry) (address %merchAddr))) : @parameter%custClose
                PAIR;       # pair (pair mutez (pair (mutez %merchFunding) (key %merchPk))) (pair (pair address bytes) (pair (int %selfDelay) (string %status))) : pair (pair bls12_381_fr (pair address mutez)) (pair (pair (mutez %custFunding) (key %custPk)) (pair (timestamp %delayExpiry) (address %merchAddr))) : @parameter%custClose
                SWAP;       # pair (pair bls12_381_fr (pair address mutez)) (pair (pair (mutez %custFunding) (key %custPk)) (pair (timestamp %delayExpiry) (address %merchAddr))) : pair (pair mutez (pair (mutez %merchFunding) (key %merchPk))) (pair (pair address bytes) (pair (int %selfDelay) (string %status))) : @parameter%custClose
                PAIR;       # pair (pair (pair bls12_381_fr (pair address mutez)) (pair (pair (mutez %custFunding) (key %custPk)) (pair (timestamp %delayExpiry) (address %merchAddr)))) (pair (pair mutez (pair (mutez %merchFunding) (key %merchPk))) (pair (pair address bytes) (pair (int %selfDelay) (string %status)))) : @parameter%custClose
                SWAP;       # @parameter%custClose : pair (pair (pair bls12_381_fr (pair address mutez)) (pair (pair (mutez %custFunding) (key %custPk)) (pair (timestamp %delayExpiry) (address %merchAddr)))) (pair (pair mutez (pair (mutez %merchFunding) (key %merchPk))) (pair (pair address bytes) (pair (int %selfDelay) (string %status))))
                # sp.transfer(sp.record(chanID = self.data.chanID, custBal = params.custBal, g2 = params.g2, merchBal = params.merchBal, merchPk0 = params.merchPk0, merchPk1 = params.merchPk1, merchPk2 = params.merchPk2, merchPk3 = params.merchPk3, merchPk4 = params.merchPk4, revLock = params.revLock, s1 = params.s1, s2 = params.s2), sp.tez(0), sp.contract(sp.TRecord(chanID = sp.TBls12_381_fr, custBal = sp.TMutez, g2 = sp.TBls12_381_g2, merchBal = sp.TMutez, merchPk0 = sp.TBls12_381_g2, merchPk1 = sp.TBls12_381_g2, merchPk2 = sp.TBls12_381_g2, merchPk3 = sp.TBls12_381_g2, merchPk4 = sp.TBls12_381_g2, revLock = sp.TBytes, s1 = sp.TBls12_381_g1, s2 = sp.TBls12_381_g1).layout(((("chanID", ("custBal", "g2")), ("merchBal", ("merchPk0", "merchPk1"))), (("merchPk2", ("merchPk3", "merchPk4")), ("revLock", ("s1", "s2"))))), self.data.pssigContract).open_some()) # @parameter%custClose : pair (pair (pair bls12_381_fr (pair address mutez)) (pair (pair (mutez %custFunding) (key %custPk)) (pair (timestamp %delayExpiry) (address %merchAddr)))) (pair (pair mutez (pair (mutez %merchFunding) (key %merchPk))) (pair (pair address bytes) (pair (int %selfDelay) (string %status))))
                NIL operation; # list operation : @parameter%custClose : pair (pair (pair bls12_381_fr (pair address mutez)) (pair (pair (mutez %custFunding) (key %custPk)) (pair (timestamp %delayExpiry) (address %merchAddr)))) (pair (pair mutez (pair (mutez %merchFunding) (key %merchPk))) (pair (pair address bytes) (pair (int %selfDelay) (string %status))))
                DIG 2;      # pair (pair (pair bls12_381_fr (pair address mutez)) (pair (pair (mutez %custFunding) (key %custPk)) (pair (timestamp %delayExpiry) (address %merchAddr)))) (pair (pair mutez (pair (mutez %merchFunding) (key %merchPk))) (pair (pair address bytes) (pair (int %selfDelay) (string %status)))) : list operation : @parameter%custClose
                DUP;        # pair (pair (pair bls12_381_fr (pair address mutez)) (pair (pair (mutez %custFunding) (key %custPk)) (pair (timestamp %delayExpiry) (address %merchAddr)))) (pair (pair mutez (pair (mutez %merchFunding) (key %merchPk))) (pair (pair address bytes) (pair (int %selfDelay) (string %status)))) : pair (pair (pair bls12_381_fr (pair address mutez)) (pair (pair (mutez %custFunding) (key %custPk)) (pair (timestamp %delayExpiry) (address %merchAddr)))) (pair (pair mutez (pair (mutez %merchFunding) (key %merchPk))) (pair (pair address bytes) (pair (int %selfDelay) (string %status)))) : list operation : @parameter%custClose
                DUG 3;      # pair (pair (pair bls12_381_fr (pair address mutez)) (pair (pair (mutez %custFunding) (key %custPk)) (pair (timestamp %delayExpiry) (address %merchAddr)))) (pair (pair mutez (pair (mutez %merchFunding) (key %merchPk))) (pair (pair address bytes) (pair (int %selfDelay) (string %status)))) : list operation : @parameter%custClose : pair (pair (pair bls12_381_fr (pair address mutez)) (pair (pair (mutez %custFunding) (key %custPk)) (pair (timestamp %delayExpiry) (address %merchAddr)))) (pair (pair mutez (pair (mutez %merchFunding) (key %merchPk))) (pair (pair address bytes) (pair (int %selfDelay) (string %status))))
                CDR;        # pair (pair mutez (pair (mutez %merchFunding) (key %merchPk))) (pair (pair address bytes) (pair (int %selfDelay) (string %status))) : list operation : @parameter%custClose : pair (pair (pair bls12_381_fr (pair address mutez)) (pair (pair (mutez %custFunding) (key %custPk)) (pair (timestamp %delayExpiry) (address %merchAddr)))) (pair (pair mutez (pair (mutez %merchFunding) (key %merchPk))) (pair (pair address bytes) (pair (int %selfDelay) (string %status))))
                CDR;        # pair (pair address bytes) (pair (int %selfDelay) (string %status)) : list operation : @parameter%custClose : pair (pair (pair bls12_381_fr (pair address mutez)) (pair (pair (mutez %custFunding) (key %custPk)) (pair (timestamp %delayExpiry) (address %merchAddr)))) (pair (pair mutez (pair (mutez %merchFunding) (key %merchPk))) (pair (pair address bytes) (pair (int %selfDelay) (string %status))))
                CAR;        # pair address bytes : list operation : @parameter%custClose : pair (pair (pair bls12_381_fr (pair address mutez)) (pair (pair (mutez %custFunding) (key %custPk)) (pair (timestamp %delayExpiry) (address %merchAddr)))) (pair (pair mutez (pair (mutez %merchFunding) (key %merchPk))) (pair (pair address bytes) (pair (int %selfDelay) (string %status))))
                CAR;        # address : list operation : @parameter%custClose : pair (pair (pair bls12_381_fr (pair address mutez)) (pair (pair (mutez %custFunding) (key %custPk)) (pair (timestamp %delayExpiry) (address %merchAddr)))) (pair (pair mutez (pair (mutez %merchFunding) (key %merchPk))) (pair (pair address bytes) (pair (int %selfDelay) (string %status))))
                CONTRACT (pair (pair (pair (bls12_381_fr %chanID) (pair (mutez %custBal) (bls12_381_g2 %g2))) (pair (mutez %merchBal) (pair (bls12_381_g2 %merchPk0) (bls12_381_g2 %merchPk1)))) (pair (pair (bls12_381_g2 %merchPk2) (pair (bls12_381_g2 %merchPk3) (bls12_381_g2 %merchPk4))) (pair (bytes %revLock) (pair (bls12_381_g1 %s1) (bls12_381_g1 %s2))))); # option (contract (pair (pair (pair (bls12_381_fr %chanID) (pair (mutez %custBal) (bls12_381_g2 %g2))) (pair (mutez %merchBal) (pair (bls12_381_g2 %merchPk0) (bls12_381_g2 %merchPk1)))) (pair (pair (bls12_381_g2 %merchPk2) (pair (bls12_381_g2 %merchPk3) (bls12_381_g2 %merchPk4))) (pair (bytes %revLock) (pair (bls12_381_g1 %s1) (bls12_381_g1 %s2)))))) : list operation : @parameter%custClose : pair (pair (pair bls12_381_fr (pair address mutez)) (pair (pair (mutez %custFunding) (key %custPk)) (pair (timestamp %delayExpiry) (address %merchAddr)))) (pair (pair mutez (pair (mutez %merchFunding) (key %merchPk))) (pair (pair address bytes) (pair (int %selfDelay) (string %status))))
                IF_SOME
                  {}
                  {
                    PUSH int 162; # int : list operation : @parameter%custClose : pair (pair (pair bls12_381_fr (pair address mutez)) (pair (pair (mutez %custFunding) (key %custPk)) (pair (timestamp %delayExpiry) (address %merchAddr)))) (pair (pair mutez (pair (mutez %merchFunding) (key %merchPk))) (pair (pair address bytes) (pair (int %selfDelay) (string %status))))
                    FAILWITH;   # FAILED
                  }; # @some : list operation : @parameter%custClose : pair (pair (pair bls12_381_fr (pair address mutez)) (pair (pair (mutez %custFunding) (key %custPk)) (pair (timestamp %delayExpiry) (address %merchAddr)))) (pair (pair mutez (pair (mutez %merchFunding) (key %merchPk))) (pair (pair address bytes) (pair (int %selfDelay) (string %status))))
                PUSH mutez 0; # mutez : @some : list operation : @parameter%custClose : pair (pair (pair bls12_381_fr (pair address mutez)) (pair (pair (mutez %custFunding) (key %custPk)) (pair (timestamp %delayExpiry) (address %merchAddr)))) (pair (pair mutez (pair (mutez %merchFunding) (key %merchPk))) (pair (pair address bytes) (pair (int %selfDelay) (string %status))))
                DIG 3;      # @parameter%custClose : mutez : @some : list operation : pair (pair (pair bls12_381_fr (pair address mutez)) (pair (pair (mutez %custFunding) (key %custPk)) (pair (timestamp %delayExpiry) (address %merchAddr)))) (pair (pair mutez (pair (mutez %merchFunding) (key %merchPk))) (pair (pair address bytes) (pair (int %selfDelay) (string %status))))
                DUP;        # @parameter%custClose : @parameter%custClose : mutez : @some : list operation : pair (pair (pair bls12_381_fr (pair address mutez)) (pair (pair (mutez %custFunding) (key %custPk)) (pair (timestamp %delayExpiry) (address %merchAddr)))) (pair (pair mutez (pair (mutez %merchFunding) (key %merchPk))) (pair (pair address bytes) (pair (int %selfDelay) (string %status))))
                CDR;        # pair (pair (bls12_381_g2 %merchPk2) (pair (bls12_381_g2 %merchPk3) (bls12_381_g2 %merchPk4))) (pair (bytes %revLock) (pair (bls12_381_g1 %s1) (bls12_381_g1 %s2))) : @parameter%custClose : mutez : @some : list operation : pair (pair (pair bls12_381_fr (pair address mutez)) (pair (pair (mutez %custFunding) (key %custPk)) (pair (timestamp %delayExpiry) (address %merchAddr)))) (pair (pair mutez (pair (mutez %merchFunding) (key %merchPk))) (pair (pair address bytes) (pair (int %selfDelay) (string %status))))
                CDR;        # pair (bytes %revLock) (pair (bls12_381_g1 %s1) (bls12_381_g1 %s2)) : @parameter%custClose : mutez : @some : list operation : pair (pair (pair bls12_381_fr (pair address mutez)) (pair (pair (mutez %custFunding) (key %custPk)) (pair (timestamp %delayExpiry) (address %merchAddr)))) (pair (pair mutez (pair (mutez %merchFunding) (key %merchPk))) (pair (pair address bytes) (pair (int %selfDelay) (string %status))))
                CDR;        # pair (bls12_381_g1 %s1) (bls12_381_g1 %s2) : @parameter%custClose : mutez : @some : list operation : pair (pair (pair bls12_381_fr (pair address mutez)) (pair (pair (mutez %custFunding) (key %custPk)) (pair (timestamp %delayExpiry) (address %merchAddr)))) (pair (pair mutez (pair (mutez %merchFunding) (key %merchPk))) (pair (pair address bytes) (pair (int %selfDelay) (string %status))))
                CDR;        # bls12_381_g1 : @parameter%custClose : mutez : @some : list operation : pair (pair (pair bls12_381_fr (pair address mutez)) (pair (pair (mutez %custFunding) (key %custPk)) (pair (timestamp %delayExpiry) (address %merchAddr)))) (pair (pair mutez (pair (mutez %merchFunding) (key %merchPk))) (pair (pair address bytes) (pair (int %selfDelay) (string %status))))
                SWAP;       # @parameter%custClose : bls12_381_g1 : mutez : @some : list operation : pair (pair (pair bls12_381_fr (pair address mutez)) (pair (pair (mutez %custFunding) (key %custPk)) (pair (timestamp %delayExpiry) (address %merchAddr)))) (pair (pair mutez (pair (mutez %merchFunding) (key %merchPk))) (pair (pair address bytes) (pair (int %selfDelay) (string %status))))
                DUP;        # @parameter%custClose : @parameter%custClose : bls12_381_g1 : mutez : @some : list operation : pair (pair (pair bls12_381_fr (pair address mutez)) (pair (pair (mutez %custFunding) (key %custPk)) (pair (timestamp %delayExpiry) (address %merchAddr)))) (pair (pair mutez (pair (mutez %merchFunding) (key %merchPk))) (pair (pair address bytes) (pair (int %selfDelay) (string %status))))
                DUG 5;      # @parameter%custClose : bls12_381_g1 : mutez : @some : list operation : @parameter%custClose : pair (pair (pair bls12_381_fr (pair address mutez)) (pair (pair (mutez %custFunding) (key %custPk)) (pair (timestamp %delayExpiry) (address %merchAddr)))) (pair (pair mutez (pair (mutez %merchFunding) (key %merchPk))) (pair (pair address bytes) (pair (int %selfDelay) (string %status))))
                CDR;        # pair (pair (bls12_381_g2 %merchPk2) (pair (bls12_381_g2 %merchPk3) (bls12_381_g2 %merchPk4))) (pair (bytes %revLock) (pair (bls12_381_g1 %s1) (bls12_381_g1 %s2))) : bls12_381_g1 : mutez : @some : list operation : @parameter%custClose : pair (pair (pair bls12_381_fr (pair address mutez)) (pair (pair (mutez %custFunding) (key %custPk)) (pair (timestamp %delayExpiry) (address %merchAddr)))) (pair (pair mutez (pair (mutez %merchFunding) (key %merchPk))) (pair (pair address bytes) (pair (int %selfDelay) (string %status))))
                CDR;        # pair (bytes %revLock) (pair (bls12_381_g1 %s1) (bls12_381_g1 %s2)) : bls12_381_g1 : mutez : @some : list operation : @parameter%custClose : pair (pair (pair bls12_381_fr (pair address mutez)) (pair (pair (mutez %custFunding) (key %custPk)) (pair (timestamp %delayExpiry) (address %merchAddr)))) (pair (pair mutez (pair (mutez %merchFunding) (key %merchPk))) (pair (pair address bytes) (pair (int %selfDelay) (string %status))))
                CDR;        # pair (bls12_381_g1 %s1) (bls12_381_g1 %s2) : bls12_381_g1 : mutez : @some : list operation : @parameter%custClose : pair (pair (pair bls12_381_fr (pair address mutez)) (pair (pair (mutez %custFunding) (key %custPk)) (pair (timestamp %delayExpiry) (address %merchAddr)))) (pair (pair mutez (pair (mutez %merchFunding) (key %merchPk))) (pair (pair address bytes) (pair (int %selfDelay) (string %status))))
                CAR;        # bls12_381_g1 : bls12_381_g1 : mutez : @some : list operation : @parameter%custClose : pair (pair (pair bls12_381_fr (pair address mutez)) (pair (pair (mutez %custFunding) (key %custPk)) (pair (timestamp %delayExpiry) (address %merchAddr)))) (pair (pair mutez (pair (mutez %merchFunding) (key %merchPk))) (pair (pair address bytes) (pair (int %selfDelay) (string %status))))
                PAIR %s1 %s2; # pair (bls12_381_g1 %s1) (bls12_381_g1 %s2) : mutez : @some : list operation : @parameter%custClose : pair (pair (pair bls12_381_fr (pair address mutez)) (pair (pair (mutez %custFunding) (key %custPk)) (pair (timestamp %delayExpiry) (address %merchAddr)))) (pair (pair mutez (pair (mutez %merchFunding) (key %merchPk))) (pair (pair address bytes) (pair (int %selfDelay) (string %status))))
                DIG 4;      # @parameter%custClose : pair (bls12_381_g1 %s1) (bls12_381_g1 %s2) : mutez : @some : list operation : pair (pair (pair bls12_381_fr (pair address mutez)) (pair (pair (mutez %custFunding) (key %custPk)) (pair (timestamp %delayExpiry) (address %merchAddr)))) (pair (pair mutez (pair (mutez %merchFunding) (key %merchPk))) (pair (pair address bytes) (pair (int %selfDelay) (string %status))))
                DUP;        # @parameter%custClose : @parameter%custClose : pair (bls12_381_g1 %s1) (bls12_381_g1 %s2) : mutez : @some : list operation : pair (pair (pair bls12_381_fr (pair address mutez)) (pair (pair (mutez %custFunding) (key %custPk)) (pair (timestamp %delayExpiry) (address %merchAddr)))) (pair (pair mutez (pair (mutez %merchFunding) (key %merchPk))) (pair (pair address bytes) (pair (int %selfDelay) (string %status))))
                DUG 5;      # @parameter%custClose : pair (bls12_381_g1 %s1) (bls12_381_g1 %s2) : mutez : @some : list operation : @parameter%custClose : pair (pair (pair bls12_381_fr (pair address mutez)) (pair (pair (mutez %custFunding) (key %custPk)) (pair (timestamp %delayExpiry) (address %merchAddr)))) (pair (pair mutez (pair (mutez %merchFunding) (key %merchPk))) (pair (pair address bytes) (pair (int %selfDelay) (string %status))))
                CDR;        # pair (pair (bls12_381_g2 %merchPk2) (pair (bls12_381_g2 %merchPk3) (bls12_381_g2 %merchPk4))) (pair (bytes %revLock) (pair (bls12_381_g1 %s1) (bls12_381_g1 %s2))) : pair (bls12_381_g1 %s1) (bls12_381_g1 %s2) : mutez : @some : list operation : @parameter%custClose : pair (pair (pair bls12_381_fr (pair address mutez)) (pair (pair (mutez %custFunding) (key %custPk)) (pair (timestamp %delayExpiry) (address %merchAddr)))) (pair (pair mutez (pair (mutez %merchFunding) (key %merchPk))) (pair (pair address bytes) (pair (int %selfDelay) (string %status))))
                CDR;        # pair (bytes %revLock) (pair (bls12_381_g1 %s1) (bls12_381_g1 %s2)) : pair (bls12_381_g1 %s1) (bls12_381_g1 %s2) : mutez : @some : list operation : @parameter%custClose : pair (pair (pair bls12_381_fr (pair address mutez)) (pair (pair (mutez %custFunding) (key %custPk)) (pair (timestamp %delayExpiry) (address %merchAddr)))) (pair (pair mutez (pair (mutez %merchFunding) (key %merchPk))) (pair (pair address bytes) (pair (int %selfDelay) (string %status))))
                CAR;        # bytes : pair (bls12_381_g1 %s1) (bls12_381_g1 %s2) : mutez : @some : list operation : @parameter%custClose : pair (pair (pair bls12_381_fr (pair address mutez)) (pair (pair (mutez %custFunding) (key %custPk)) (pair (timestamp %delayExpiry) (address %merchAddr)))) (pair (pair mutez (pair (mutez %merchFunding) (key %merchPk))) (pair (pair address bytes) (pair (int %selfDelay) (string %status))))
                PAIR %revLock; # pair (bytes %revLock) (pair (bls12_381_g1 %s1) (bls12_381_g1 %s2)) : mutez : @some : list operation : @parameter%custClose : pair (pair (pair bls12_381_fr (pair address mutez)) (pair (pair (mutez %custFunding) (key %custPk)) (pair (timestamp %delayExpiry) (address %merchAddr)))) (pair (pair mutez (pair (mutez %merchFunding) (key %merchPk))) (pair (pair address bytes) (pair (int %selfDelay) (string %status))))
                DIG 4;      # @parameter%custClose : pair (bytes %revLock) (pair (bls12_381_g1 %s1) (bls12_381_g1 %s2)) : mutez : @some : list operation : pair (pair (pair bls12_381_fr (pair address mutez)) (pair (pair (mutez %custFunding) (key %custPk)) (pair (timestamp %delayExpiry) (address %merchAddr)))) (pair (pair mutez (pair (mutez %merchFunding) (key %merchPk))) (pair (pair address bytes) (pair (int %selfDelay) (string %status))))
                DUP;        # @parameter%custClose : @parameter%custClose : pair (bytes %revLock) (pair (bls12_381_g1 %s1) (bls12_381_g1 %s2)) : mutez : @some : list operation : pair (pair (pair bls12_381_fr (pair address mutez)) (pair (pair (mutez %custFunding) (key %custPk)) (pair (timestamp %delayExpiry) (address %merchAddr)))) (pair (pair mutez (pair (mutez %merchFunding) (key %merchPk))) (pair (pair address bytes) (pair (int %selfDelay) (string %status))))
                CDR;        # pair (pair (bls12_381_g2 %merchPk2) (pair (bls12_381_g2 %merchPk3) (bls12_381_g2 %merchPk4))) (pair (bytes %revLock) (pair (bls12_381_g1 %s1) (bls12_381_g1 %s2))) : @parameter%custClose : pair (bytes %revLock) (pair (bls12_381_g1 %s1) (bls12_381_g1 %s2)) : mutez : @some : list operation : pair (pair (pair bls12_381_fr (pair address mutez)) (pair (pair (mutez %custFunding) (key %custPk)) (pair (timestamp %delayExpiry) (address %merchAddr)))) (pair (pair mutez (pair (mutez %merchFunding) (key %merchPk))) (pair (pair address bytes) (pair (int %selfDelay) (string %status))))
                CAR;        # pair (bls12_381_g2 %merchPk2) (pair (bls12_381_g2 %merchPk3) (bls12_381_g2 %merchPk4)) : @parameter%custClose : pair (bytes %revLock) (pair (bls12_381_g1 %s1) (bls12_381_g1 %s2)) : mutez : @some : list operation : pair (pair (pair bls12_381_fr (pair address mutez)) (pair (pair (mutez %custFunding) (key %custPk)) (pair (timestamp %delayExpiry) (address %merchAddr)))) (pair (pair mutez (pair (mutez %merchFunding) (key %merchPk))) (pair (pair address bytes) (pair (int %selfDelay) (string %status))))
                CDR;        # pair (bls12_381_g2 %merchPk3) (bls12_381_g2 %merchPk4) : @parameter%custClose : pair (bytes %revLock) (pair (bls12_381_g1 %s1) (bls12_381_g1 %s2)) : mutez : @some : list operation : pair (pair (pair bls12_381_fr (pair address mutez)) (pair (pair (mutez %custFunding) (key %custPk)) (pair (timestamp %delayExpiry) (address %merchAddr)))) (pair (pair mutez (pair (mutez %merchFunding) (key %merchPk))) (pair (pair address bytes) (pair (int %selfDelay) (string %status))))
                CDR;        # bls12_381_g2 : @parameter%custClose : pair (bytes %revLock) (pair (bls12_381_g1 %s1) (bls12_381_g1 %s2)) : mutez : @some : list operation : pair (pair (pair bls12_381_fr (pair address mutez)) (pair (pair (mutez %custFunding) (key %custPk)) (pair (timestamp %delayExpiry) (address %merchAddr)))) (pair (pair mutez (pair (mutez %merchFunding) (key %merchPk))) (pair (pair address bytes) (pair (int %selfDelay) (string %status))))
                SWAP;       # @parameter%custClose : bls12_381_g2 : pair (bytes %revLock) (pair (bls12_381_g1 %s1) (bls12_381_g1 %s2)) : mutez : @some : list operation : pair (pair (pair bls12_381_fr (pair address mutez)) (pair (pair (mutez %custFunding) (key %custPk)) (pair (timestamp %delayExpiry) (address %merchAddr)))) (pair (pair mutez (pair (mutez %merchFunding) (key %merchPk))) (pair (pair address bytes) (pair (int %selfDelay) (string %status))))
                DUP;        # @parameter%custClose : @parameter%custClose : bls12_381_g2 : pair (bytes %revLock) (pair (bls12_381_g1 %s1) (bls12_381_g1 %s2)) : mutez : @some : list operation : pair (pair (pair bls12_381_fr (pair address mutez)) (pair (pair (mutez %custFunding) (key %custPk)) (pair (timestamp %delayExpiry) (address %merchAddr)))) (pair (pair mutez (pair (mutez %merchFunding) (key %merchPk))) (pair (pair address bytes) (pair (int %selfDelay) (string %status))))
                DUG 6;      # @parameter%custClose : bls12_381_g2 : pair (bytes %revLock) (pair (bls12_381_g1 %s1) (bls12_381_g1 %s2)) : mutez : @some : list operation : @parameter%custClose : pair (pair (pair bls12_381_fr (pair address mutez)) (pair (pair (mutez %custFunding) (key %custPk)) (pair (timestamp %delayExpiry) (address %merchAddr)))) (pair (pair mutez (pair (mutez %merchFunding) (key %merchPk))) (pair (pair address bytes) (pair (int %selfDelay) (string %status))))
                CDR;        # pair (pair (bls12_381_g2 %merchPk2) (pair (bls12_381_g2 %merchPk3) (bls12_381_g2 %merchPk4))) (pair (bytes %revLock) (pair (bls12_381_g1 %s1) (bls12_381_g1 %s2))) : bls12_381_g2 : pair (bytes %revLock) (pair (bls12_381_g1 %s1) (bls12_381_g1 %s2)) : mutez : @some : list operation : @parameter%custClose : pair (pair (pair bls12_381_fr (pair address mutez)) (pair (pair (mutez %custFunding) (key %custPk)) (pair (timestamp %delayExpiry) (address %merchAddr)))) (pair (pair mutez (pair (mutez %merchFunding) (key %merchPk))) (pair (pair address bytes) (pair (int %selfDelay) (string %status))))
                CAR;        # pair (bls12_381_g2 %merchPk2) (pair (bls12_381_g2 %merchPk3) (bls12_381_g2 %merchPk4)) : bls12_381_g2 : pair (bytes %revLock) (pair (bls12_381_g1 %s1) (bls12_381_g1 %s2)) : mutez : @some : list operation : @parameter%custClose : pair (pair (pair bls12_381_fr (pair address mutez)) (pair (pair (mutez %custFunding) (key %custPk)) (pair (timestamp %delayExpiry) (address %merchAddr)))) (pair (pair mutez (pair (mutez %merchFunding) (key %merchPk))) (pair (pair address bytes) (pair (int %selfDelay) (string %status))))
                CDR;        # pair (bls12_381_g2 %merchPk3) (bls12_381_g2 %merchPk4) : bls12_381_g2 : pair (bytes %revLock) (pair (bls12_381_g1 %s1) (bls12_381_g1 %s2)) : mutez : @some : list operation : @parameter%custClose : pair (pair (pair bls12_381_fr (pair address mutez)) (pair (pair (mutez %custFunding) (key %custPk)) (pair (timestamp %delayExpiry) (address %merchAddr)))) (pair (pair mutez (pair (mutez %merchFunding) (key %merchPk))) (pair (pair address bytes) (pair (int %selfDelay) (string %status))))
                CAR;        # bls12_381_g2 : bls12_381_g2 : pair (bytes %revLock) (pair (bls12_381_g1 %s1) (bls12_381_g1 %s2)) : mutez : @some : list operation : @parameter%custClose : pair (pair (pair bls12_381_fr (pair address mutez)) (pair (pair (mutez %custFunding) (key %custPk)) (pair (timestamp %delayExpiry) (address %merchAddr)))) (pair (pair mutez (pair (mutez %merchFunding) (key %merchPk))) (pair (pair address bytes) (pair (int %selfDelay) (string %status))))
                PAIR %merchPk3 %merchPk4; # pair (bls12_381_g2 %merchPk3) (bls12_381_g2 %merchPk4) : pair (bytes %revLock) (pair (bls12_381_g1 %s1) (bls12_381_g1 %s2)) : mutez : @some : list operation : @parameter%custClose : pair (pair (pair bls12_381_fr (pair address mutez)) (pair (pair (mutez %custFunding) (key %custPk)) (pair (timestamp %delayExpiry) (address %merchAddr)))) (pair (pair mutez (pair (mutez %merchFunding) (key %merchPk))) (pair (pair address bytes) (pair (int %selfDelay) (string %status))))
                DIG 5;      # @parameter%custClose : pair (bls12_381_g2 %merchPk3) (bls12_381_g2 %merchPk4) : pair (bytes %revLock) (pair (bls12_381_g1 %s1) (bls12_381_g1 %s2)) : mutez : @some : list operation : pair (pair (pair bls12_381_fr (pair address mutez)) (pair (pair (mutez %custFunding) (key %custPk)) (pair (timestamp %delayExpiry) (address %merchAddr)))) (pair (pair mutez (pair (mutez %merchFunding) (key %merchPk))) (pair (pair address bytes) (pair (int %selfDelay) (string %status))))
                DUP;        # @parameter%custClose : @parameter%custClose : pair (bls12_381_g2 %merchPk3) (bls12_381_g2 %merchPk4) : pair (bytes %revLock) (pair (bls12_381_g1 %s1) (bls12_381_g1 %s2)) : mutez : @some : list operation : pair (pair (pair bls12_381_fr (pair address mutez)) (pair (pair (mutez %custFunding) (key %custPk)) (pair (timestamp %delayExpiry) (address %merchAddr)))) (pair (pair mutez (pair (mutez %merchFunding) (key %merchPk))) (pair (pair address bytes) (pair (int %selfDelay) (string %status))))
                DUG 6;      # @parameter%custClose : pair (bls12_381_g2 %merchPk3) (bls12_381_g2 %merchPk4) : pair (bytes %revLock) (pair (bls12_381_g1 %s1) (bls12_381_g1 %s2)) : mutez : @some : list operation : @parameter%custClose : pair (pair (pair bls12_381_fr (pair address mutez)) (pair (pair (mutez %custFunding) (key %custPk)) (pair (timestamp %delayExpiry) (address %merchAddr)))) (pair (pair mutez (pair (mutez %merchFunding) (key %merchPk))) (pair (pair address bytes) (pair (int %selfDelay) (string %status))))
                CDR;        # pair (pair (bls12_381_g2 %merchPk2) (pair (bls12_381_g2 %merchPk3) (bls12_381_g2 %merchPk4))) (pair (bytes %revLock) (pair (bls12_381_g1 %s1) (bls12_381_g1 %s2))) : pair (bls12_381_g2 %merchPk3) (bls12_381_g2 %merchPk4) : pair (bytes %revLock) (pair (bls12_381_g1 %s1) (bls12_381_g1 %s2)) : mutez : @some : list operation : @parameter%custClose : pair (pair (pair bls12_381_fr (pair address mutez)) (pair (pair (mutez %custFunding) (key %custPk)) (pair (timestamp %delayExpiry) (address %merchAddr)))) (pair (pair mutez (pair (mutez %merchFunding) (key %merchPk))) (pair (pair address bytes) (pair (int %selfDelay) (string %status))))
                CAR;        # pair (bls12_381_g2 %merchPk2) (pair (bls12_381_g2 %merchPk3) (bls12_381_g2 %merchPk4)) : pair (bls12_381_g2 %merchPk3) (bls12_381_g2 %merchPk4) : pair (bytes %revLock) (pair (bls12_381_g1 %s1) (bls12_381_g1 %s2)) : mutez : @some : list operation : @parameter%custClose : pair (pair (pair bls12_381_fr (pair address mutez)) (pair (pair (mutez %custFunding) (key %custPk)) (pair (timestamp %delayExpiry) (address %merchAddr)))) (pair (pair mutez (pair (mutez %merchFunding) (key %merchPk))) (pair (pair address bytes) (pair (int %selfDelay) (string %status))))
                CAR;        # bls12_381_g2 : pair (bls12_381_g2 %merchPk3) (bls12_381_g2 %merchPk4) : pair (bytes %revLock) (pair (bls12_381_g1 %s1) (bls12_381_g1 %s2)) : mutez : @some : list operation : @parameter%custClose : pair (pair (pair bls12_381_fr (pair address mutez)) (pair (pair (mutez %custFunding) (key %custPk)) (pair (timestamp %delayExpiry) (address %merchAddr)))) (pair (pair mutez (pair (mutez %merchFunding) (key %merchPk))) (pair (pair address bytes) (pair (int %selfDelay) (string %status))))
                PAIR %merchPk2; # pair (bls12_381_g2 %merchPk2) (pair (bls12_381_g2 %merchPk3) (bls12_381_g2 %merchPk4)) : pair (bytes %revLock) (pair (bls12_381_g1 %s1) (bls12_381_g1 %s2)) : mutez : @some : list operation : @parameter%custClose : pair (pair (pair bls12_381_fr (pair address mutez)) (pair (pair (mutez %custFunding) (key %custPk)) (pair (timestamp %delayExpiry) (address %merchAddr)))) (pair (pair mutez (pair (mutez %merchFunding) (key %merchPk))) (pair (pair address bytes) (pair (int %selfDelay) (string %status))))
                PAIR;       # pair (pair (bls12_381_g2 %merchPk2) (pair (bls12_381_g2 %merchPk3) (bls12_381_g2 %merchPk4))) (pair (bytes %revLock) (pair (bls12_381_g1 %s1) (bls12_381_g1 %s2))) : mutez : @some : list operation : @parameter%custClose : pair (pair (pair bls12_381_fr (pair address mutez)) (pair (pair (mutez %custFunding) (key %custPk)) (pair (timestamp %delayExpiry) (address %merchAddr)))) (pair (pair mutez (pair (mutez %merchFunding) (key %merchPk))) (pair (pair address bytes) (pair (int %selfDelay) (string %status))))
                DIG 4;      # @parameter%custClose : pair (pair (bls12_381_g2 %merchPk2) (pair (bls12_381_g2 %merchPk3) (bls12_381_g2 %merchPk4))) (pair (bytes %revLock) (pair (bls12_381_g1 %s1) (bls12_381_g1 %s2))) : mutez : @some : list operation : pair (pair (pair bls12_381_fr (pair address mutez)) (pair (pair (mutez %custFunding) (key %custPk)) (pair (timestamp %delayExpiry) (address %merchAddr)))) (pair (pair mutez (pair (mutez %merchFunding) (key %merchPk))) (pair (pair address bytes) (pair (int %selfDelay) (string %status))))
                DUP;        # @parameter%custClose : @parameter%custClose : pair (pair (bls12_381_g2 %merchPk2) (pair (bls12_381_g2 %merchPk3) (bls12_381_g2 %merchPk4))) (pair (bytes %revLock) (pair (bls12_381_g1 %s1) (bls12_381_g1 %s2))) : mutez : @some : list operation : pair (pair (pair bls12_381_fr (pair address mutez)) (pair (pair (mutez %custFunding) (key %custPk)) (pair (timestamp %delayExpiry) (address %merchAddr)))) (pair (pair mutez (pair (mutez %merchFunding) (key %merchPk))) (pair (pair address bytes) (pair (int %selfDelay) (string %status))))
                CAR;        # pair (pair (mutez %custBal) (bls12_381_g2 %g2)) (pair (mutez %merchBal) (pair (bls12_381_g2 %merchPk0) (bls12_381_g2 %merchPk1))) : @parameter%custClose : pair (pair (bls12_381_g2 %merchPk2) (pair (bls12_381_g2 %merchPk3) (bls12_381_g2 %merchPk4))) (pair (bytes %revLock) (pair (bls12_381_g1 %s1) (bls12_381_g1 %s2))) : mutez : @some : list operation : pair (pair (pair bls12_381_fr (pair address mutez)) (pair (pair (mutez %custFunding) (key %custPk)) (pair (timestamp %delayExpiry) (address %merchAddr)))) (pair (pair mutez (pair (mutez %merchFunding) (key %merchPk))) (pair (pair address bytes) (pair (int %selfDelay) (string %status))))
                CDR;        # pair (mutez %merchBal) (pair (bls12_381_g2 %merchPk0) (bls12_381_g2 %merchPk1)) : @parameter%custClose : pair (pair (bls12_381_g2 %merchPk2) (pair (bls12_381_g2 %merchPk3) (bls12_381_g2 %merchPk4))) (pair (bytes %revLock) (pair (bls12_381_g1 %s1) (bls12_381_g1 %s2))) : mutez : @some : list operation : pair (pair (pair bls12_381_fr (pair address mutez)) (pair (pair (mutez %custFunding) (key %custPk)) (pair (timestamp %delayExpiry) (address %merchAddr)))) (pair (pair mutez (pair (mutez %merchFunding) (key %merchPk))) (pair (pair address bytes) (pair (int %selfDelay) (string %status))))
                CDR;        # pair (bls12_381_g2 %merchPk0) (bls12_381_g2 %merchPk1) : @parameter%custClose : pair (pair (bls12_381_g2 %merchPk2) (pair (bls12_381_g2 %merchPk3) (bls12_381_g2 %merchPk4))) (pair (bytes %revLock) (pair (bls12_381_g1 %s1) (bls12_381_g1 %s2))) : mutez : @some : list operation : pair (pair (pair bls12_381_fr (pair address mutez)) (pair (pair (mutez %custFunding) (key %custPk)) (pair (timestamp %delayExpiry) (address %merchAddr)))) (pair (pair mutez (pair (mutez %merchFunding) (key %merchPk))) (pair (pair address bytes) (pair (int %selfDelay) (string %status))))
                CDR;        # bls12_381_g2 : @parameter%custClose : pair (pair (bls12_381_g2 %merchPk2) (pair (bls12_381_g2 %merchPk3) (bls12_381_g2 %merchPk4))) (pair (bytes %revLock) (pair (bls12_381_g1 %s1) (bls12_381_g1 %s2))) : mutez : @some : list operation : pair (pair (pair bls12_381_fr (pair address mutez)) (pair (pair (mutez %custFunding) (key %custPk)) (pair (timestamp %delayExpiry) (address %merchAddr)))) (pair (pair mutez (pair (mutez %merchFunding) (key %merchPk))) (pair (pair address bytes) (pair (int %selfDelay) (string %status))))
                SWAP;       # @parameter%custClose : bls12_381_g2 : pair (pair (bls12_381_g2 %merchPk2) (pair (bls12_381_g2 %merchPk3) (bls12_381_g2 %merchPk4))) (pair (bytes %revLock) (pair (bls12_381_g1 %s1) (bls12_381_g1 %s2))) : mutez : @some : list operation : pair (pair (pair bls12_381_fr (pair address mutez)) (pair (pair (mutez %custFunding) (key %custPk)) (pair (timestamp %delayExpiry) (address %merchAddr)))) (pair (pair mutez (pair (mutez %merchFunding) (key %merchPk))) (pair (pair address bytes) (pair (int %selfDelay) (string %status))))
                DUP;        # @parameter%custClose : @parameter%custClose : bls12_381_g2 : pair (pair (bls12_381_g2 %merchPk2) (pair (bls12_381_g2 %merchPk3) (bls12_381_g2 %merchPk4))) (pair (bytes %revLock) (pair (bls12_381_g1 %s1) (bls12_381_g1 %s2))) : mutez : @some : list operation : pair (pair (pair bls12_381_fr (pair address mutez)) (pair (pair (mutez %custFunding) (key %custPk)) (pair (timestamp %delayExpiry) (address %merchAddr)))) (pair (pair mutez (pair (mutez %merchFunding) (key %merchPk))) (pair (pair address bytes) (pair (int %selfDelay) (string %status))))
                DUG 6;      # @parameter%custClose : bls12_381_g2 : pair (pair (bls12_381_g2 %merchPk2) (pair (bls12_381_g2 %merchPk3) (bls12_381_g2 %merchPk4))) (pair (bytes %revLock) (pair (bls12_381_g1 %s1) (bls12_381_g1 %s2))) : mutez : @some : list operation : @parameter%custClose : pair (pair (pair bls12_381_fr (pair address mutez)) (pair (pair (mutez %custFunding) (key %custPk)) (pair (timestamp %delayExpiry) (address %merchAddr)))) (pair (pair mutez (pair (mutez %merchFunding) (key %merchPk))) (pair (pair address bytes) (pair (int %selfDelay) (string %status))))
                CAR;        # pair (pair (mutez %custBal) (bls12_381_g2 %g2)) (pair (mutez %merchBal) (pair (bls12_381_g2 %merchPk0) (bls12_381_g2 %merchPk1))) : bls12_381_g2 : pair (pair (bls12_381_g2 %merchPk2) (pair (bls12_381_g2 %merchPk3) (bls12_381_g2 %merchPk4))) (pair (bytes %revLock) (pair (bls12_381_g1 %s1) (bls12_381_g1 %s2))) : mutez : @some : list operation : @parameter%custClose : pair (pair (pair bls12_381_fr (pair address mutez)) (pair (pair (mutez %custFunding) (key %custPk)) (pair (timestamp %delayExpiry) (address %merchAddr)))) (pair (pair mutez (pair (mutez %merchFunding) (key %merchPk))) (pair (pair address bytes) (pair (int %selfDelay) (string %status))))
                CDR;        # pair (mutez %merchBal) (pair (bls12_381_g2 %merchPk0) (bls12_381_g2 %merchPk1)) : bls12_381_g2 : pair (pair (bls12_381_g2 %merchPk2) (pair (bls12_381_g2 %merchPk3) (bls12_381_g2 %merchPk4))) (pair (bytes %revLock) (pair (bls12_381_g1 %s1) (bls12_381_g1 %s2))) : mutez : @some : list operation : @parameter%custClose : pair (pair (pair bls12_381_fr (pair address mutez)) (pair (pair (mutez %custFunding) (key %custPk)) (pair (timestamp %delayExpiry) (address %merchAddr)))) (pair (pair mutez (pair (mutez %merchFunding) (key %merchPk))) (pair (pair address bytes) (pair (int %selfDelay) (string %status))))
                CDR;        # pair (bls12_381_g2 %merchPk0) (bls12_381_g2 %merchPk1) : bls12_381_g2 : pair (pair (bls12_381_g2 %merchPk2) (pair (bls12_381_g2 %merchPk3) (bls12_381_g2 %merchPk4))) (pair (bytes %revLock) (pair (bls12_381_g1 %s1) (bls12_381_g1 %s2))) : mutez : @some : list operation : @parameter%custClose : pair (pair (pair bls12_381_fr (pair address mutez)) (pair (pair (mutez %custFunding) (key %custPk)) (pair (timestamp %delayExpiry) (address %merchAddr)))) (pair (pair mutez (pair (mutez %merchFunding) (key %merchPk))) (pair (pair address bytes) (pair (int %selfDelay) (string %status))))
                CAR;        # bls12_381_g2 : bls12_381_g2 : pair (pair (bls12_381_g2 %merchPk2) (pair (bls12_381_g2 %merchPk3) (bls12_381_g2 %merchPk4))) (pair (bytes %revLock) (pair (bls12_381_g1 %s1) (bls12_381_g1 %s2))) : mutez : @some : list operation : @parameter%custClose : pair (pair (pair bls12_381_fr (pair address mutez)) (pair (pair (mutez %custFunding) (key %custPk)) (pair (timestamp %delayExpiry) (address %merchAddr)))) (pair (pair mutez (pair (mutez %merchFunding) (key %merchPk))) (pair (pair address bytes) (pair (int %selfDelay) (string %status))))
                PAIR %merchPk0 %merchPk1; # pair (bls12_381_g2 %merchPk0) (bls12_381_g2 %merchPk1) : pair (pair (bls12_381_g2 %merchPk2) (pair (bls12_381_g2 %merchPk3) (bls12_381_g2 %merchPk4))) (pair (bytes %revLock) (pair (bls12_381_g1 %s1) (bls12_381_g1 %s2))) : mutez : @some : list operation : @parameter%custClose : pair (pair (pair bls12_381_fr (pair address mutez)) (pair (pair (mutez %custFunding) (key %custPk)) (pair (timestamp %delayExpiry) (address %merchAddr)))) (pair (pair mutez (pair (mutez %merchFunding) (key %merchPk))) (pair (pair address bytes) (pair (int %selfDelay) (string %status))))
                DIG 5;      # @parameter%custClose : pair (bls12_381_g2 %merchPk0) (bls12_381_g2 %merchPk1) : pair (pair (bls12_381_g2 %merchPk2) (pair (bls12_381_g2 %merchPk3) (bls12_381_g2 %merchPk4))) (pair (bytes %revLock) (pair (bls12_381_g1 %s1) (bls12_381_g1 %s2))) : mutez : @some : list operation : pair (pair (pair bls12_381_fr (pair address mutez)) (pair (pair (mutez %custFunding) (key %custPk)) (pair (timestamp %delayExpiry) (address %merchAddr)))) (pair (pair mutez (pair (mutez %merchFunding) (key %merchPk))) (pair (pair address bytes) (pair (int %selfDelay) (string %status))))
                DUP;        # @parameter%custClose : @parameter%custClose : pair (bls12_381_g2 %merchPk0) (bls12_381_g2 %merchPk1) : pair (pair (bls12_381_g2 %merchPk2) (pair (bls12_381_g2 %merchPk3) (bls12_381_g2 %merchPk4))) (pair (bytes %revLock) (pair (bls12_381_g1 %s1) (bls12_381_g1 %s2))) : mutez : @some : list operation : pair (pair (pair bls12_381_fr (pair address mutez)) (pair (pair (mutez %custFunding) (key %custPk)) (pair (timestamp %delayExpiry) (address %merchAddr)))) (pair (pair mutez (pair (mutez %merchFunding) (key %merchPk))) (pair (pair address bytes) (pair (int %selfDelay) (string %status))))
                DUG 6;      # @parameter%custClose : pair (bls12_381_g2 %merchPk0) (bls12_381_g2 %merchPk1) : pair (pair (bls12_381_g2 %merchPk2) (pair (bls12_381_g2 %merchPk3) (bls12_381_g2 %merchPk4))) (pair (bytes %revLock) (pair (bls12_381_g1 %s1) (bls12_381_g1 %s2))) : mutez : @some : list operation : @parameter%custClose : pair (pair (pair bls12_381_fr (pair address mutez)) (pair (pair (mutez %custFunding) (key %custPk)) (pair (timestamp %delayExpiry) (address %merchAddr)))) (pair (pair mutez (pair (mutez %merchFunding) (key %merchPk))) (pair (pair address bytes) (pair (int %selfDelay) (string %status))))
                CAR;        # pair (pair (mutez %custBal) (bls12_381_g2 %g2)) (pair (mutez %merchBal) (pair (bls12_381_g2 %merchPk0) (bls12_381_g2 %merchPk1))) : pair (bls12_381_g2 %merchPk0) (bls12_381_g2 %merchPk1) : pair (pair (bls12_381_g2 %merchPk2) (pair (bls12_381_g2 %merchPk3) (bls12_381_g2 %merchPk4))) (pair (bytes %revLock) (pair (bls12_381_g1 %s1) (bls12_381_g1 %s2))) : mutez : @some : list operation : @parameter%custClose : pair (pair (pair bls12_381_fr (pair address mutez)) (pair (pair (mutez %custFunding) (key %custPk)) (pair (timestamp %delayExpiry) (address %merchAddr)))) (pair (pair mutez (pair (mutez %merchFunding) (key %merchPk))) (pair (pair address bytes) (pair (int %selfDelay) (string %status))))
                CDR;        # pair (mutez %merchBal) (pair (bls12_381_g2 %merchPk0) (bls12_381_g2 %merchPk1)) : pair (bls12_381_g2 %merchPk0) (bls12_381_g2 %merchPk1) : pair (pair (bls12_381_g2 %merchPk2) (pair (bls12_381_g2 %merchPk3) (bls12_381_g2 %merchPk4))) (pair (bytes %revLock) (pair (bls12_381_g1 %s1) (bls12_381_g1 %s2))) : mutez : @some : list operation : @parameter%custClose : pair (pair (pair bls12_381_fr (pair address mutez)) (pair (pair (mutez %custFunding) (key %custPk)) (pair (timestamp %delayExpiry) (address %merchAddr)))) (pair (pair mutez (pair (mutez %merchFunding) (key %merchPk))) (pair (pair address bytes) (pair (int %selfDelay) (string %status))))
                CAR;        # mutez : pair (bls12_381_g2 %merchPk0) (bls12_381_g2 %merchPk1) : pair (pair (bls12_381_g2 %merchPk2) (pair (bls12_381_g2 %merchPk3) (bls12_381_g2 %merchPk4))) (pair (bytes %revLock) (pair (bls12_381_g1 %s1) (bls12_381_g1 %s2))) : mutez : @some : list operation : @parameter%custClose : pair (pair (pair bls12_381_fr (pair address mutez)) (pair (pair (mutez %custFunding) (key %custPk)) (pair (timestamp %delayExpiry) (address %merchAddr)))) (pair (pair mutez (pair (mutez %merchFunding) (key %merchPk))) (pair (pair address bytes) (pair (int %selfDelay) (string %status))))
                PAIR %merchBal; # pair (mutez %merchBal) (pair (bls12_381_g2 %merchPk0) (bls12_381_g2 %merchPk1)) : pair (pair (bls12_381_g2 %merchPk2) (pair (bls12_381_g2 %merchPk3) (bls12_381_g2 %merchPk4))) (pair (bytes %revLock) (pair (bls12_381_g1 %s1) (bls12_381_g1 %s2))) : mutez : @some : list operation : @parameter%custClose : pair (pair (pair bls12_381_fr (pair address mutez)) (pair (pair (mutez %custFunding) (key %custPk)) (pair (timestamp %delayExpiry) (address %merchAddr)))) (pair (pair mutez (pair (mutez %merchFunding) (key %merchPk))) (pair (pair address bytes) (pair (int %selfDelay) (string %status))))
                DIG 5;      # @parameter%custClose : pair (mutez %merchBal) (pair (bls12_381_g2 %merchPk0) (bls12_381_g2 %merchPk1)) : pair (pair (bls12_381_g2 %merchPk2) (pair (bls12_381_g2 %merchPk3) (bls12_381_g2 %merchPk4))) (pair (bytes %revLock) (pair (bls12_381_g1 %s1) (bls12_381_g1 %s2))) : mutez : @some : list operation : pair (pair (pair bls12_381_fr (pair address mutez)) (pair (pair (mutez %custFunding) (key %custPk)) (pair (timestamp %delayExpiry) (address %merchAddr)))) (pair (pair mutez (pair (mutez %merchFunding) (key %merchPk))) (pair (pair address bytes) (pair (int %selfDelay) (string %status))))
                DUP;        # @parameter%custClose : @parameter%custClose : pair (mutez %merchBal) (pair (bls12_381_g2 %merchPk0) (bls12_381_g2 %merchPk1)) : pair (pair (bls12_381_g2 %merchPk2) (pair (bls12_381_g2 %merchPk3) (bls12_381_g2 %merchPk4))) (pair (bytes %revLock) (pair (bls12_381_g1 %s1) (bls12_381_g1 %s2))) : mutez : @some : list operation : pair (pair (pair bls12_381_fr (pair address mutez)) (pair (pair (mutez %custFunding) (key %custPk)) (pair (timestamp %delayExpiry) (address %merchAddr)))) (pair (pair mutez (pair (mutez %merchFunding) (key %merchPk))) (pair (pair address bytes) (pair (int %selfDelay) (string %status))))
                CAR;        # pair (pair (mutez %custBal) (bls12_381_g2 %g2)) (pair (mutez %merchBal) (pair (bls12_381_g2 %merchPk0) (bls12_381_g2 %merchPk1))) : @parameter%custClose : pair (mutez %merchBal) (pair (bls12_381_g2 %merchPk0) (bls12_381_g2 %merchPk1)) : pair (pair (bls12_381_g2 %merchPk2) (pair (bls12_381_g2 %merchPk3) (bls12_381_g2 %merchPk4))) (pair (bytes %revLock) (pair (bls12_381_g1 %s1) (bls12_381_g1 %s2))) : mutez : @some : list operation : pair (pair (pair bls12_381_fr (pair address mutez)) (pair (pair (mutez %custFunding) (key %custPk)) (pair (timestamp %delayExpiry) (address %merchAddr)))) (pair (pair mutez (pair (mutez %merchFunding) (key %merchPk))) (pair (pair address bytes) (pair (int %selfDelay) (string %status))))
                CAR;        # pair (mutez %custBal) (bls12_381_g2 %g2) : @parameter%custClose : pair (mutez %merchBal) (pair (bls12_381_g2 %merchPk0) (bls12_381_g2 %merchPk1)) : pair (pair (bls12_381_g2 %merchPk2) (pair (bls12_381_g2 %merchPk3) (bls12_381_g2 %merchPk4))) (pair (bytes %revLock) (pair (bls12_381_g1 %s1) (bls12_381_g1 %s2))) : mutez : @some : list operation : pair (pair (pair bls12_381_fr (pair address mutez)) (pair (pair (mutez %custFunding) (key %custPk)) (pair (timestamp %delayExpiry) (address %merchAddr)))) (pair (pair mutez (pair (mutez %merchFunding) (key %merchPk))) (pair (pair address bytes) (pair (int %selfDelay) (string %status))))
                CDR;        # bls12_381_g2 : @parameter%custClose : pair (mutez %merchBal) (pair (bls12_381_g2 %merchPk0) (bls12_381_g2 %merchPk1)) : pair (pair (bls12_381_g2 %merchPk2) (pair (bls12_381_g2 %merchPk3) (bls12_381_g2 %merchPk4))) (pair (bytes %revLock) (pair (bls12_381_g1 %s1) (bls12_381_g1 %s2))) : mutez : @some : list operation : pair (pair (pair bls12_381_fr (pair address mutez)) (pair (pair (mutez %custFunding) (key %custPk)) (pair (timestamp %delayExpiry) (address %merchAddr)))) (pair (pair mutez (pair (mutez %merchFunding) (key %merchPk))) (pair (pair address bytes) (pair (int %selfDelay) (string %status))))
                SWAP;       # @parameter%custClose : bls12_381_g2 : pair (mutez %merchBal) (pair (bls12_381_g2 %merchPk0) (bls12_381_g2 %merchPk1)) : pair (pair (bls12_381_g2 %merchPk2) (pair (bls12_381_g2 %merchPk3) (bls12_381_g2 %merchPk4))) (pair (bytes %revLock) (pair (bls12_381_g1 %s1) (bls12_381_g1 %s2))) : mutez : @some : list operation : pair (pair (pair bls12_381_fr (pair address mutez)) (pair (pair (mutez %custFunding) (key %custPk)) (pair (timestamp %delayExpiry) (address %merchAddr)))) (pair (pair mutez (pair (mutez %merchFunding) (key %merchPk))) (pair (pair address bytes) (pair (int %selfDelay) (string %status))))
                CAR;        # pair (pair (mutez %custBal) (bls12_381_g2 %g2)) (pair (mutez %merchBal) (pair (bls12_381_g2 %merchPk0) (bls12_381_g2 %merchPk1))) : bls12_381_g2 : pair (mutez %merchBal) (pair (bls12_381_g2 %merchPk0) (bls12_381_g2 %merchPk1)) : pair (pair (bls12_381_g2 %merchPk2) (pair (bls12_381_g2 %merchPk3) (bls12_381_g2 %merchPk4))) (pair (bytes %revLock) (pair (bls12_381_g1 %s1) (bls12_381_g1 %s2))) : mutez : @some : list operation : pair (pair (pair bls12_381_fr (pair address mutez)) (pair (pair (mutez %custFunding) (key %custPk)) (pair (timestamp %delayExpiry) (address %merchAddr)))) (pair (pair mutez (pair (mutez %merchFunding) (key %merchPk))) (pair (pair address bytes) (pair (int %selfDelay) (string %status))))
                CAR;        # pair (mutez %custBal) (bls12_381_g2 %g2) : bls12_381_g2 : pair (mutez %merchBal) (pair (bls12_381_g2 %merchPk0) (bls12_381_g2 %merchPk1)) : pair (pair (bls12_381_g2 %merchPk2) (pair (bls12_381_g2 %merchPk3) (bls12_381_g2 %merchPk4))) (pair (bytes %revLock) (pair (bls12_381_g1 %s1) (bls12_381_g1 %s2))) : mutez : @some : list operation : pair (pair (pair bls12_381_fr (pair address mutez)) (pair (pair (mutez %custFunding) (key %custPk)) (pair (timestamp %delayExpiry) (address %merchAddr)))) (pair (pair mutez (pair (mutez %merchFunding) (key %merchPk))) (pair (pair address bytes) (pair (int %selfDelay) (string %status))))
                CAR;        # mutez : bls12_381_g2 : pair (mutez %merchBal) (pair (bls12_381_g2 %merchPk0) (bls12_381_g2 %merchPk1)) : pair (pair (bls12_381_g2 %merchPk2) (pair (bls12_381_g2 %merchPk3) (bls12_381_g2 %merchPk4))) (pair (bytes %revLock) (pair (bls12_381_g1 %s1) (bls12_381_g1 %s2))) : mutez : @some : list operation : pair (pair (pair bls12_381_fr (pair address mutez)) (pair (pair (mutez %custFunding) (key %custPk)) (pair (timestamp %delayExpiry) (address %merchAddr)))) (pair (pair mutez (pair (mutez %merchFunding) (key %merchPk))) (pair (pair address bytes) (pair (int %selfDelay) (string %status))))
                PAIR %custBal %g2; # pair (mutez %custBal) (bls12_381_g2 %g2) : pair (mutez %merchBal) (pair (bls12_381_g2 %merchPk0) (bls12_381_g2 %merchPk1)) : pair (pair (bls12_381_g2 %merchPk2) (pair (bls12_381_g2 %merchPk3) (bls12_381_g2 %merchPk4))) (pair (bytes %revLock) (pair (bls12_381_g1 %s1) (bls12_381_g1 %s2))) : mutez : @some : list operation : pair (pair (pair bls12_381_fr (pair address mutez)) (pair (pair (mutez %custFunding) (key %custPk)) (pair (timestamp %delayExpiry) (address %merchAddr)))) (pair (pair mutez (pair (mutez %merchFunding) (key %merchPk))) (pair (pair address bytes) (pair (int %selfDelay) (string %status))))
                DIG 6;      # pair (pair (pair bls12_381_fr (pair address mutez)) (pair (pair (mutez %custFunding) (key %custPk)) (pair (timestamp %delayExpiry) (address %merchAddr)))) (pair (pair mutez (pair (mutez %merchFunding) (key %merchPk))) (pair (pair address bytes) (pair (int %selfDelay) (string %status)))) : pair (mutez %custBal) (bls12_381_g2 %g2) : pair (mutez %merchBal) (pair (bls12_381_g2 %merchPk0) (bls12_381_g2 %merchPk1)) : pair (pair (bls12_381_g2 %merchPk2) (pair (bls12_381_g2 %merchPk3) (bls12_381_g2 %merchPk4))) (pair (bytes %revLock) (pair (bls12_381_g1 %s1) (bls12_381_g1 %s2))) : mutez : @some : list operation
                DUP;        # pair (pair (pair bls12_381_fr (pair address mutez)) (pair (pair (mutez %custFunding) (key %custPk)) (pair (timestamp %delayExpiry) (address %merchAddr)))) (pair (pair mutez (pair (mutez %merchFunding) (key %merchPk))) (pair (pair address bytes) (pair (int %selfDelay) (string %status)))) : pair (pair (pair bls12_381_fr (pair address mutez)) (pair (pair (mutez %custFunding) (key %custPk)) (pair (timestamp %delayExpiry) (address %merchAddr)))) (pair (pair mutez (pair (mutez %merchFunding) (key %merchPk))) (pair (pair address bytes) (pair (int %selfDelay) (string %status)))) : pair (mutez %custBal) (bls12_381_g2 %g2) : pair (mutez %merchBal) (pair (bls12_381_g2 %merchPk0) (bls12_381_g2 %merchPk1)) : pair (pair (bls12_381_g2 %merchPk2) (pair (bls12_381_g2 %merchPk3) (bls12_381_g2 %merchPk4))) (pair (bytes %revLock) (pair (bls12_381_g1 %s1) (bls12_381_g1 %s2))) : mutez : @some : list operation
                DUG 7;      # pair (pair (pair bls12_381_fr (pair address mutez)) (pair (pair (mutez %custFunding) (key %custPk)) (pair (timestamp %delayExpiry) (address %merchAddr)))) (pair (pair mutez (pair (mutez %merchFunding) (key %merchPk))) (pair (pair address bytes) (pair (int %selfDelay) (string %status)))) : pair (mutez %custBal) (bls12_381_g2 %g2) : pair (mutez %merchBal) (pair (bls12_381_g2 %merchPk0) (bls12_381_g2 %merchPk1)) : pair (pair (bls12_381_g2 %merchPk2) (pair (bls12_381_g2 %merchPk3) (bls12_381_g2 %merchPk4))) (pair (bytes %revLock) (pair (bls12_381_g1 %s1) (bls12_381_g1 %s2))) : mutez : @some : list operation : pair (pair (pair bls12_381_fr (pair address mutez)) (pair (pair (mutez %custFunding) (key %custPk)) (pair (timestamp %delayExpiry) (address %merchAddr)))) (pair (pair mutez (pair (mutez %merchFunding) (key %merchPk))) (pair (pair address bytes) (pair (int %selfDelay) (string %status))))
                CAR;        # pair (pair bls12_381_fr (pair address mutez)) (pair (pair (mutez %custFunding) (key %custPk)) (pair (timestamp %delayExpiry) (address %merchAddr))) : pair (mutez %custBal) (bls12_381_g2 %g2) : pair (mutez %merchBal) (pair (bls12_381_g2 %merchPk0) (bls12_381_g2 %merchPk1)) : pair (pair (bls12_381_g2 %merchPk2) (pair (bls12_381_g2 %merchPk3) (bls12_381_g2 %merchPk4))) (pair (bytes %revLock) (pair (bls12_381_g1 %s1) (bls12_381_g1 %s2))) : mutez : @some : list operation : pair (pair (pair bls12_381_fr (pair address mutez)) (pair (pair (mutez %custFunding) (key %custPk)) (pair (timestamp %delayExpiry) (address %merchAddr)))) (pair (pair mutez (pair (mutez %merchFunding) (key %merchPk))) (pair (pair address bytes) (pair (int %selfDelay) (string %status))))
                CAR;        # pair bls12_381_fr (pair address mutez) : pair (mutez %custBal) (bls12_381_g2 %g2) : pair (mutez %merchBal) (pair (bls12_381_g2 %merchPk0) (bls12_381_g2 %merchPk1)) : pair (pair (bls12_381_g2 %merchPk2) (pair (bls12_381_g2 %merchPk3) (bls12_381_g2 %merchPk4))) (pair (bytes %revLock) (pair (bls12_381_g1 %s1) (bls12_381_g1 %s2))) : mutez : @some : list operation : pair (pair (pair bls12_381_fr (pair address mutez)) (pair (pair (mutez %custFunding) (key %custPk)) (pair (timestamp %delayExpiry) (address %merchAddr)))) (pair (pair mutez (pair (mutez %merchFunding) (key %merchPk))) (pair (pair address bytes) (pair (int %selfDelay) (string %status))))
                CAR;        # bls12_381_fr : pair (mutez %custBal) (bls12_381_g2 %g2) : pair (mutez %merchBal) (pair (bls12_381_g2 %merchPk0) (bls12_381_g2 %merchPk1)) : pair (pair (bls12_381_g2 %merchPk2) (pair (bls12_381_g2 %merchPk3) (bls12_381_g2 %merchPk4))) (pair (bytes %revLock) (pair (bls12_381_g1 %s1) (bls12_381_g1 %s2))) : mutez : @some : list operation : pair (pair (pair bls12_381_fr (pair address mutez)) (pair (pair (mutez %custFunding) (key %custPk)) (pair (timestamp %delayExpiry) (address %merchAddr)))) (pair (pair mutez (pair (mutez %merchFunding) (key %merchPk))) (pair (pair address bytes) (pair (int %selfDelay) (string %status))))
                PAIR %chanID; # pair (bls12_381_fr %chanID) (pair (mutez %custBal) (bls12_381_g2 %g2)) : pair (mutez %merchBal) (pair (bls12_381_g2 %merchPk0) (bls12_381_g2 %merchPk1)) : pair (pair (bls12_381_g2 %merchPk2) (pair (bls12_381_g2 %merchPk3) (bls12_381_g2 %merchPk4))) (pair (bytes %revLock) (pair (bls12_381_g1 %s1) (bls12_381_g1 %s2))) : mutez : @some : list operation : pair (pair (pair bls12_381_fr (pair address mutez)) (pair (pair (mutez %custFunding) (key %custPk)) (pair (timestamp %delayExpiry) (address %merchAddr)))) (pair (pair mutez (pair (mutez %merchFunding) (key %merchPk))) (pair (pair address bytes) (pair (int %selfDelay) (string %status))))
                PAIR;       # pair (pair (bls12_381_fr %chanID) (pair (mutez %custBal) (bls12_381_g2 %g2))) (pair (mutez %merchBal) (pair (bls12_381_g2 %merchPk0) (bls12_381_g2 %merchPk1))) : pair (pair (bls12_381_g2 %merchPk2) (pair (bls12_381_g2 %merchPk3) (bls12_381_g2 %merchPk4))) (pair (bytes %revLock) (pair (bls12_381_g1 %s1) (bls12_381_g1 %s2))) : mutez : @some : list operation : pair (pair (pair bls12_381_fr (pair address mutez)) (pair (pair (mutez %custFunding) (key %custPk)) (pair (timestamp %delayExpiry) (address %merchAddr)))) (pair (pair mutez (pair (mutez %merchFunding) (key %merchPk))) (pair (pair address bytes) (pair (int %selfDelay) (string %status))))
                PAIR;       # pair (pair (pair (bls12_381_fr %chanID) (pair (mutez %custBal) (bls12_381_g2 %g2))) (pair (mutez %merchBal) (pair (bls12_381_g2 %merchPk0) (bls12_381_g2 %merchPk1)))) (pair (pair (bls12_381_g2 %merchPk2) (pair (bls12_381_g2 %merchPk3) (bls12_381_g2 %merchPk4))) (pair (bytes %revLock) (pair (bls12_381_g1 %s1) (bls12_381_g1 %s2)))) : mutez : @some : list operation : pair (pair (pair bls12_381_fr (pair address mutez)) (pair (pair (mutez %custFunding) (key %custPk)) (pair (timestamp %delayExpiry) (address %merchAddr)))) (pair (pair mutez (pair (mutez %merchFunding) (key %merchPk))) (pair (pair address bytes) (pair (int %selfDelay) (string %status))))
                TRANSFER_TOKENS; # operation : list operation : pair (pair (pair bls12_381_fr (pair address mutez)) (pair (pair (mutez %custFunding) (key %custPk)) (pair (timestamp %delayExpiry) (address %merchAddr)))) (pair (pair mutez (pair (mutez %merchFunding) (key %merchPk))) (pair (pair address bytes) (pair (int %selfDelay) (string %status))))
                CONS;       # list operation : pair (pair (pair bls12_381_fr (pair address mutez)) (pair (pair (mutez %custFunding) (key %custPk)) (pair (timestamp %delayExpiry) (address %merchAddr)))) (pair (pair mutez (pair (mutez %merchFunding) (key %merchPk))) (pair (pair address bytes) (pair (int %selfDelay) (string %status))))
                SWAP;       # pair (pair (pair bls12_381_fr (pair address mutez)) (pair (pair (mutez %custFunding) (key %custPk)) (pair (timestamp %delayExpiry) (address %merchAddr)))) (pair (pair mutez (pair (mutez %merchFunding) (key %merchPk))) (pair (pair address bytes) (pair (int %selfDelay) (string %status)))) : list operation
                # self.data.delayExpiry = sp.add_seconds(sp.now, self.data.selfDelay) # pair (pair (pair bls12_381_fr (pair address mutez)) (pair (pair (mutez %custFunding) (key %custPk)) (pair (timestamp %delayExpiry) (address %merchAddr)))) (pair (pair mutez (pair (mutez %merchFunding) (key %merchPk))) (pair (pair address bytes) (pair (int %selfDelay) (string %status)))) : list operation
                DUP;        # pair (pair (pair bls12_381_fr (pair address mutez)) (pair (pair (mutez %custFunding) (key %custPk)) (pair (timestamp %delayExpiry) (address %merchAddr)))) (pair (pair mutez (pair (mutez %merchFunding) (key %merchPk))) (pair (pair address bytes) (pair (int %selfDelay) (string %status)))) : pair (pair (pair bls12_381_fr (pair address mutez)) (pair (pair (mutez %custFunding) (key %custPk)) (pair (timestamp %delayExpiry) (address %merchAddr)))) (pair (pair mutez (pair (mutez %merchFunding) (key %merchPk))) (pair (pair address bytes) (pair (int %selfDelay) (string %status)))) : list operation
                DUG 2;      # pair (pair (pair bls12_381_fr (pair address mutez)) (pair (pair (mutez %custFunding) (key %custPk)) (pair (timestamp %delayExpiry) (address %merchAddr)))) (pair (pair mutez (pair (mutez %merchFunding) (key %merchPk))) (pair (pair address bytes) (pair (int %selfDelay) (string %status)))) : list operation : pair (pair (pair bls12_381_fr (pair address mutez)) (pair (pair (mutez %custFunding) (key %custPk)) (pair (timestamp %delayExpiry) (address %merchAddr)))) (pair (pair mutez (pair (mutez %merchFunding) (key %merchPk))) (pair (pair address bytes) (pair (int %selfDelay) (string %status))))
                DUP;        # pair (pair (pair bls12_381_fr (pair address mutez)) (pair (pair (mutez %custFunding) (key %custPk)) (pair (timestamp %delayExpiry) (address %merchAddr)))) (pair (pair mutez (pair (mutez %merchFunding) (key %merchPk))) (pair (pair address bytes) (pair (int %selfDelay) (string %status)))) : pair (pair (pair bls12_381_fr (pair address mutez)) (pair (pair (mutez %custFunding) (key %custPk)) (pair (timestamp %delayExpiry) (address %merchAddr)))) (pair (pair mutez (pair (mutez %merchFunding) (key %merchPk))) (pair (pair address bytes) (pair (int %selfDelay) (string %status)))) : list operation : pair (pair (pair bls12_381_fr (pair address mutez)) (pair (pair (mutez %custFunding) (key %custPk)) (pair (timestamp %delayExpiry) (address %merchAddr)))) (pair (pair mutez (pair (mutez %merchFunding) (key %merchPk))) (pair (pair address bytes) (pair (int %selfDelay) (string %status))))
                CDR;        # pair (pair mutez (pair (mutez %merchFunding) (key %merchPk))) (pair (pair address bytes) (pair (int %selfDelay) (string %status))) : pair (pair (pair bls12_381_fr (pair address mutez)) (pair (pair (mutez %custFunding) (key %custPk)) (pair (timestamp %delayExpiry) (address %merchAddr)))) (pair (pair mutez (pair (mutez %merchFunding) (key %merchPk))) (pair (pair address bytes) (pair (int %selfDelay) (string %status)))) : list operation : pair (pair (pair bls12_381_fr (pair address mutez)) (pair (pair (mutez %custFunding) (key %custPk)) (pair (timestamp %delayExpiry) (address %merchAddr)))) (pair (pair mutez (pair (mutez %merchFunding) (key %merchPk))) (pair (pair address bytes) (pair (int %selfDelay) (string %status))))
                SWAP;       # pair (pair (pair bls12_381_fr (pair address mutez)) (pair (pair (mutez %custFunding) (key %custPk)) (pair (timestamp %delayExpiry) (address %merchAddr)))) (pair (pair mutez (pair (mutez %merchFunding) (key %merchPk))) (pair (pair address bytes) (pair (int %selfDelay) (string %status)))) : pair (pair mutez (pair (mutez %merchFunding) (key %merchPk))) (pair (pair address bytes) (pair (int %selfDelay) (string %status))) : list operation : pair (pair (pair bls12_381_fr (pair address mutez)) (pair (pair (mutez %custFunding) (key %custPk)) (pair (timestamp %delayExpiry) (address %merchAddr)))) (pair (pair mutez (pair (mutez %merchFunding) (key %merchPk))) (pair (pair address bytes) (pair (int %selfDelay) (string %status))))
                CAR;        # pair (pair bls12_381_fr (pair address mutez)) (pair (pair (mutez %custFunding) (key %custPk)) (pair (timestamp %delayExpiry) (address %merchAddr))) : pair (pair mutez (pair (mutez %merchFunding) (key %merchPk))) (pair (pair address bytes) (pair (int %selfDelay) (string %status))) : list operation : pair (pair (pair bls12_381_fr (pair address mutez)) (pair (pair (mutez %custFunding) (key %custPk)) (pair (timestamp %delayExpiry) (address %merchAddr)))) (pair (pair mutez (pair (mutez %merchFunding) (key %merchPk))) (pair (pair address bytes) (pair (int %selfDelay) (string %status))))
                DUP;        # pair (pair bls12_381_fr (pair address mutez)) (pair (pair (mutez %custFunding) (key %custPk)) (pair (timestamp %delayExpiry) (address %merchAddr))) : pair (pair bls12_381_fr (pair address mutez)) (pair (pair (mutez %custFunding) (key %custPk)) (pair (timestamp %delayExpiry) (address %merchAddr))) : pair (pair mutez (pair (mutez %merchFunding) (key %merchPk))) (pair (pair address bytes) (pair (int %selfDelay) (string %status))) : list operation : pair (pair (pair bls12_381_fr (pair address mutez)) (pair (pair (mutez %custFunding) (key %custPk)) (pair (timestamp %delayExpiry) (address %merchAddr)))) (pair (pair mutez (pair (mutez %merchFunding) (key %merchPk))) (pair (pair address bytes) (pair (int %selfDelay) (string %status))))
                CAR;        # pair bls12_381_fr (pair address mutez) : pair (pair bls12_381_fr (pair address mutez)) (pair (pair (mutez %custFunding) (key %custPk)) (pair (timestamp %delayExpiry) (address %merchAddr))) : pair (pair mutez (pair (mutez %merchFunding) (key %merchPk))) (pair (pair address bytes) (pair (int %selfDelay) (string %status))) : list operation : pair (pair (pair bls12_381_fr (pair address mutez)) (pair (pair (mutez %custFunding) (key %custPk)) (pair (timestamp %delayExpiry) (address %merchAddr)))) (pair (pair mutez (pair (mutez %merchFunding) (key %merchPk))) (pair (pair address bytes) (pair (int %selfDelay) (string %status))))
                SWAP;       # pair (pair bls12_381_fr (pair address mutez)) (pair (pair (mutez %custFunding) (key %custPk)) (pair (timestamp %delayExpiry) (address %merchAddr))) : pair bls12_381_fr (pair address mutez) : pair (pair mutez (pair (mutez %merchFunding) (key %merchPk))) (pair (pair address bytes) (pair (int %selfDelay) (string %status))) : list operation : pair (pair (pair bls12_381_fr (pair address mutez)) (pair (pair (mutez %custFunding) (key %custPk)) (pair (timestamp %delayExpiry) (address %merchAddr)))) (pair (pair mutez (pair (mutez %merchFunding) (key %merchPk))) (pair (pair address bytes) (pair (int %selfDelay) (string %status))))
                CDR;        # pair (pair (mutez %custFunding) (key %custPk)) (pair (timestamp %delayExpiry) (address %merchAddr)) : pair bls12_381_fr (pair address mutez) : pair (pair mutez (pair (mutez %merchFunding) (key %merchPk))) (pair (pair address bytes) (pair (int %selfDelay) (string %status))) : list operation : pair (pair (pair bls12_381_fr (pair address mutez)) (pair (pair (mutez %custFunding) (key %custPk)) (pair (timestamp %delayExpiry) (address %merchAddr)))) (pair (pair mutez (pair (mutez %merchFunding) (key %merchPk))) (pair (pair address bytes) (pair (int %selfDelay) (string %status))))
                DUP;        # pair (pair (mutez %custFunding) (key %custPk)) (pair (timestamp %delayExpiry) (address %merchAddr)) : pair (pair (mutez %custFunding) (key %custPk)) (pair (timestamp %delayExpiry) (address %merchAddr)) : pair bls12_381_fr (pair address mutez) : pair (pair mutez (pair (mutez %merchFunding) (key %merchPk))) (pair (pair address bytes) (pair (int %selfDelay) (string %status))) : list operation : pair (pair (pair bls12_381_fr (pair address mutez)) (pair (pair (mutez %custFunding) (key %custPk)) (pair (timestamp %delayExpiry) (address %merchAddr)))) (pair (pair mutez (pair (mutez %merchFunding) (key %merchPk))) (pair (pair address bytes) (pair (int %selfDelay) (string %status))))
                CAR;        # pair (mutez %custFunding) (key %custPk) : pair (pair (mutez %custFunding) (key %custPk)) (pair (timestamp %delayExpiry) (address %merchAddr)) : pair bls12_381_fr (pair address mutez) : pair (pair mutez (pair (mutez %merchFunding) (key %merchPk))) (pair (pair address bytes) (pair (int %selfDelay) (string %status))) : list operation : pair (pair (pair bls12_381_fr (pair address mutez)) (pair (pair (mutez %custFunding) (key %custPk)) (pair (timestamp %delayExpiry) (address %merchAddr)))) (pair (pair mutez (pair (mutez %merchFunding) (key %merchPk))) (pair (pair address bytes) (pair (int %selfDelay) (string %status))))
                SWAP;       # pair (pair (mutez %custFunding) (key %custPk)) (pair (timestamp %delayExpiry) (address %merchAddr)) : pair (mutez %custFunding) (key %custPk) : pair bls12_381_fr (pair address mutez) : pair (pair mutez (pair (mutez %merchFunding) (key %merchPk))) (pair (pair address bytes) (pair (int %selfDelay) (string %status))) : list operation : pair (pair (pair bls12_381_fr (pair address mutez)) (pair (pair (mutez %custFunding) (key %custPk)) (pair (timestamp %delayExpiry) (address %merchAddr)))) (pair (pair mutez (pair (mutez %merchFunding) (key %merchPk))) (pair (pair address bytes) (pair (int %selfDelay) (string %status))))
                CDR;        # pair (timestamp %delayExpiry) (address %merchAddr) : pair (mutez %custFunding) (key %custPk) : pair bls12_381_fr (pair address mutez) : pair (pair mutez (pair (mutez %merchFunding) (key %merchPk))) (pair (pair address bytes) (pair (int %selfDelay) (string %status))) : list operation : pair (pair (pair bls12_381_fr (pair address mutez)) (pair (pair (mutez %custFunding) (key %custPk)) (pair (timestamp %delayExpiry) (address %merchAddr)))) (pair (pair mutez (pair (mutez %merchFunding) (key %merchPk))) (pair (pair address bytes) (pair (int %selfDelay) (string %status))))
                CDR;        # address : pair (mutez %custFunding) (key %custPk) : pair bls12_381_fr (pair address mutez) : pair (pair mutez (pair (mutez %merchFunding) (key %merchPk))) (pair (pair address bytes) (pair (int %selfDelay) (string %status))) : list operation : pair (pair (pair bls12_381_fr (pair address mutez)) (pair (pair (mutez %custFunding) (key %custPk)) (pair (timestamp %delayExpiry) (address %merchAddr)))) (pair (pair mutez (pair (mutez %merchFunding) (key %merchPk))) (pair (pair address bytes) (pair (int %selfDelay) (string %status))))
                NOW;        # timestamp : address : pair (mutez %custFunding) (key %custPk) : pair bls12_381_fr (pair address mutez) : pair (pair mutez (pair (mutez %merchFunding) (key %merchPk))) (pair (pair address bytes) (pair (int %selfDelay) (string %status))) : list operation : pair (pair (pair bls12_381_fr (pair address mutez)) (pair (pair (mutez %custFunding) (key %custPk)) (pair (timestamp %delayExpiry) (address %merchAddr)))) (pair (pair mutez (pair (mutez %merchFunding) (key %merchPk))) (pair (pair address bytes) (pair (int %selfDelay) (string %status))))
                DIG 6;      # pair (pair (pair bls12_381_fr (pair address mutez)) (pair (pair (mutez %custFunding) (key %custPk)) (pair (timestamp %delayExpiry) (address %merchAddr)))) (pair (pair mutez (pair (mutez %merchFunding) (key %merchPk))) (pair (pair address bytes) (pair (int %selfDelay) (string %status)))) : timestamp : address : pair (mutez %custFunding) (key %custPk) : pair bls12_381_fr (pair address mutez) : pair (pair mutez (pair (mutez %merchFunding) (key %merchPk))) (pair (pair address bytes) (pair (int %selfDelay) (string %status))) : list operation
                CDR;        # pair (pair mutez (pair (mutez %merchFunding) (key %merchPk))) (pair (pair address bytes) (pair (int %selfDelay) (string %status))) : timestamp : address : pair (mutez %custFunding) (key %custPk) : pair bls12_381_fr (pair address mutez) : pair (pair mutez (pair (mutez %merchFunding) (key %merchPk))) (pair (pair address bytes) (pair (int %selfDelay) (string %status))) : list operation
                CDR;        # pair (pair address bytes) (pair (int %selfDelay) (string %status)) : timestamp : address : pair (mutez %custFunding) (key %custPk) : pair bls12_381_fr (pair address mutez) : pair (pair mutez (pair (mutez %merchFunding) (key %merchPk))) (pair (pair address bytes) (pair (int %selfDelay) (string %status))) : list operation
                CDR;        # pair (int %selfDelay) (string %status) : timestamp : address : pair (mutez %custFunding) (key %custPk) : pair bls12_381_fr (pair address mutez) : pair (pair mutez (pair (mutez %merchFunding) (key %merchPk))) (pair (pair address bytes) (pair (int %selfDelay) (string %status))) : list operation
                CAR;        # int : timestamp : address : pair (mutez %custFunding) (key %custPk) : pair bls12_381_fr (pair address mutez) : pair (pair mutez (pair (mutez %merchFunding) (key %merchPk))) (pair (pair address bytes) (pair (int %selfDelay) (string %status))) : list operation
                ADD;        # timestamp : address : pair (mutez %custFunding) (key %custPk) : pair bls12_381_fr (pair address mutez) : pair (pair mutez (pair (mutez %merchFunding) (key %merchPk))) (pair (pair address bytes) (pair (int %selfDelay) (string %status))) : list operation
                PAIR;       # pair timestamp address : pair (mutez %custFunding) (key %custPk) : pair bls12_381_fr (pair address mutez) : pair (pair mutez (pair (mutez %merchFunding) (key %merchPk))) (pair (pair address bytes) (pair (int %selfDelay) (string %status))) : list operation
                SWAP;       # pair (mutez %custFunding) (key %custPk) : pair timestamp address : pair bls12_381_fr (pair address mutez) : pair (pair mutez (pair (mutez %merchFunding) (key %merchPk))) (pair (pair address bytes) (pair (int %selfDelay) (string %status))) : list operation
                PAIR;       # pair (pair (mutez %custFunding) (key %custPk)) (pair timestamp address) : pair bls12_381_fr (pair address mutez) : pair (pair mutez (pair (mutez %merchFunding) (key %merchPk))) (pair (pair address bytes) (pair (int %selfDelay) (string %status))) : list operation
                SWAP;       # pair bls12_381_fr (pair address mutez) : pair (pair (mutez %custFunding) (key %custPk)) (pair timestamp address) : pair (pair mutez (pair (mutez %merchFunding) (key %merchPk))) (pair (pair address bytes) (pair (int %selfDelay) (string %status))) : list operation
                PAIR;       # pair (pair bls12_381_fr (pair address mutez)) (pair (pair (mutez %custFunding) (key %custPk)) (pair timestamp address)) : pair (pair mutez (pair (mutez %merchFunding) (key %merchPk))) (pair (pair address bytes) (pair (int %selfDelay) (string %status))) : list operation
                PAIR;       # pair (pair (pair bls12_381_fr (pair address mutez)) (pair (pair (mutez %custFunding) (key %custPk)) (pair timestamp address))) (pair (pair mutez (pair (mutez %merchFunding) (key %merchPk))) (pair (pair address bytes) (pair (int %selfDelay) (string %status)))) : list operation
                # sp.send(self.data.merchAddr, self.data.merchBal) # pair (pair (pair bls12_381_fr (pair address mutez)) (pair (pair (mutez %custFunding) (key %custPk)) (pair timestamp address))) (pair (pair mutez (pair (mutez %merchFunding) (key %merchPk))) (pair (pair address bytes) (pair (int %selfDelay) (string %status)))) : list operation
                DUP;        # pair (pair (pair bls12_381_fr (pair address mutez)) (pair (pair (mutez %custFunding) (key %custPk)) (pair timestamp address))) (pair (pair mutez (pair (mutez %merchFunding) (key %merchPk))) (pair (pair address bytes) (pair (int %selfDelay) (string %status)))) : pair (pair (pair bls12_381_fr (pair address mutez)) (pair (pair (mutez %custFunding) (key %custPk)) (pair timestamp address))) (pair (pair mutez (pair (mutez %merchFunding) (key %merchPk))) (pair (pair address bytes) (pair (int %selfDelay) (string %status)))) : list operation
                DUG 2;      # pair (pair (pair bls12_381_fr (pair address mutez)) (pair (pair (mutez %custFunding) (key %custPk)) (pair timestamp address))) (pair (pair mutez (pair (mutez %merchFunding) (key %merchPk))) (pair (pair address bytes) (pair (int %selfDelay) (string %status)))) : list operation : pair (pair (pair bls12_381_fr (pair address mutez)) (pair (pair (mutez %custFunding) (key %custPk)) (pair timestamp address))) (pair (pair mutez (pair (mutez %merchFunding) (key %merchPk))) (pair (pair address bytes) (pair (int %selfDelay) (string %status))))
                CAR;        # pair (pair bls12_381_fr (pair address mutez)) (pair (pair (mutez %custFunding) (key %custPk)) (pair timestamp address)) : list operation : pair (pair (pair bls12_381_fr (pair address mutez)) (pair (pair (mutez %custFunding) (key %custPk)) (pair timestamp address))) (pair (pair mutez (pair (mutez %merchFunding) (key %merchPk))) (pair (pair address bytes) (pair (int %selfDelay) (string %status))))
                CDR;        # pair (pair (mutez %custFunding) (key %custPk)) (pair timestamp address) : list operation : pair (pair (pair bls12_381_fr (pair address mutez)) (pair (pair (mutez %custFunding) (key %custPk)) (pair timestamp address))) (pair (pair mutez (pair (mutez %merchFunding) (key %merchPk))) (pair (pair address bytes) (pair (int %selfDelay) (string %status))))
                CDR;        # pair timestamp address : list operation : pair (pair (pair bls12_381_fr (pair address mutez)) (pair (pair (mutez %custFunding) (key %custPk)) (pair timestamp address))) (pair (pair mutez (pair (mutez %merchFunding) (key %merchPk))) (pair (pair address bytes) (pair (int %selfDelay) (string %status))))
                CDR;        # address : list operation : pair (pair (pair bls12_381_fr (pair address mutez)) (pair (pair (mutez %custFunding) (key %custPk)) (pair timestamp address))) (pair (pair mutez (pair (mutez %merchFunding) (key %merchPk))) (pair (pair address bytes) (pair (int %selfDelay) (string %status))))
                CONTRACT unit; # option (contract unit) : list operation : pair (pair (pair bls12_381_fr (pair address mutez)) (pair (pair (mutez %custFunding) (key %custPk)) (pair timestamp address))) (pair (pair mutez (pair (mutez %merchFunding) (key %merchPk))) (pair (pair address bytes) (pair (int %selfDelay) (string %status))))
                IF_SOME
                  {}
                  {
                    PUSH int 165; # int : list operation : pair (pair (pair bls12_381_fr (pair address mutez)) (pair (pair (mutez %custFunding) (key %custPk)) (pair timestamp address))) (pair (pair mutez (pair (mutez %merchFunding) (key %merchPk))) (pair (pair address bytes) (pair (int %selfDelay) (string %status))))
                    FAILWITH;   # FAILED
                  }; # @some : list operation : pair (pair (pair bls12_381_fr (pair address mutez)) (pair (pair (mutez %custFunding) (key %custPk)) (pair timestamp address))) (pair (pair mutez (pair (mutez %merchFunding) (key %merchPk))) (pair (pair address bytes) (pair (int %selfDelay) (string %status))))
                DIG 2;      # pair (pair (pair bls12_381_fr (pair address mutez)) (pair (pair (mutez %custFunding) (key %custPk)) (pair timestamp address))) (pair (pair mutez (pair (mutez %merchFunding) (key %merchPk))) (pair (pair address bytes) (pair (int %selfDelay) (string %status)))) : @some : list operation
                DUP;        # pair (pair (pair bls12_381_fr (pair address mutez)) (pair (pair (mutez %custFunding) (key %custPk)) (pair timestamp address))) (pair (pair mutez (pair (mutez %merchFunding) (key %merchPk))) (pair (pair address bytes) (pair (int %selfDelay) (string %status)))) : pair (pair (pair bls12_381_fr (pair address mutez)) (pair (pair (mutez %custFunding) (key %custPk)) (pair timestamp address))) (pair (pair mutez (pair (mutez %merchFunding) (key %merchPk))) (pair (pair address bytes) (pair (int %selfDelay) (string %status)))) : @some : list operation
                DUG 3;      # pair (pair (pair bls12_381_fr (pair address mutez)) (pair (pair (mutez %custFunding) (key %custPk)) (pair timestamp address))) (pair (pair mutez (pair (mutez %merchFunding) (key %merchPk))) (pair (pair address bytes) (pair (int %selfDelay) (string %status)))) : @some : list operation : pair (pair (pair bls12_381_fr (pair address mutez)) (pair (pair (mutez %custFunding) (key %custPk)) (pair timestamp address))) (pair (pair mutez (pair (mutez %merchFunding) (key %merchPk))) (pair (pair address bytes) (pair (int %selfDelay) (string %status))))
                CDR;        # pair (pair mutez (pair (mutez %merchFunding) (key %merchPk))) (pair (pair address bytes) (pair (int %selfDelay) (string %status))) : @some : list operation : pair (pair (pair bls12_381_fr (pair address mutez)) (pair (pair (mutez %custFunding) (key %custPk)) (pair timestamp address))) (pair (pair mutez (pair (mutez %merchFunding) (key %merchPk))) (pair (pair address bytes) (pair (int %selfDelay) (string %status))))
                CAR;        # pair mutez (pair (mutez %merchFunding) (key %merchPk)) : @some : list operation : pair (pair (pair bls12_381_fr (pair address mutez)) (pair (pair (mutez %custFunding) (key %custPk)) (pair timestamp address))) (pair (pair mutez (pair (mutez %merchFunding) (key %merchPk))) (pair (pair address bytes) (pair (int %selfDelay) (string %status))))
                CAR;        # mutez : @some : list operation : pair (pair (pair bls12_381_fr (pair address mutez)) (pair (pair (mutez %custFunding) (key %custPk)) (pair timestamp address))) (pair (pair mutez (pair (mutez %merchFunding) (key %merchPk))) (pair (pair address bytes) (pair (int %selfDelay) (string %status))))
                UNIT;       # unit : mutez : @some : list operation : pair (pair (pair bls12_381_fr (pair address mutez)) (pair (pair (mutez %custFunding) (key %custPk)) (pair timestamp address))) (pair (pair mutez (pair (mutez %merchFunding) (key %merchPk))) (pair (pair address bytes) (pair (int %selfDelay) (string %status))))
                TRANSFER_TOKENS; # operation : list operation : pair (pair (pair bls12_381_fr (pair address mutez)) (pair (pair (mutez %custFunding) (key %custPk)) (pair timestamp address))) (pair (pair mutez (pair (mutez %merchFunding) (key %merchPk))) (pair (pair address bytes) (pair (int %selfDelay) (string %status))))
                CONS;       # list operation : pair (pair (pair bls12_381_fr (pair address mutez)) (pair (pair (mutez %custFunding) (key %custPk)) (pair timestamp address))) (pair (pair mutez (pair (mutez %merchFunding) (key %merchPk))) (pair (pair address bytes) (pair (int %selfDelay) (string %status))))
                SWAP;       # pair (pair (pair bls12_381_fr (pair address mutez)) (pair (pair (mutez %custFunding) (key %custPk)) (pair timestamp address))) (pair (pair mutez (pair (mutez %merchFunding) (key %merchPk))) (pair (pair address bytes) (pair (int %selfDelay) (string %status)))) : list operation
                # self.data.merchBal = sp.tez(0) # pair (pair (pair bls12_381_fr (pair address mutez)) (pair (pair (mutez %custFunding) (key %custPk)) (pair timestamp address))) (pair (pair mutez (pair (mutez %merchFunding) (key %merchPk))) (pair (pair address bytes) (pair (int %selfDelay) (string %status)))) : list operation
                DUP;        # pair (pair (pair bls12_381_fr (pair address mutez)) (pair (pair (mutez %custFunding) (key %custPk)) (pair timestamp address))) (pair (pair mutez (pair (mutez %merchFunding) (key %merchPk))) (pair (pair address bytes) (pair (int %selfDelay) (string %status)))) : pair (pair (pair bls12_381_fr (pair address mutez)) (pair (pair (mutez %custFunding) (key %custPk)) (pair timestamp address))) (pair (pair mutez (pair (mutez %merchFunding) (key %merchPk))) (pair (pair address bytes) (pair (int %selfDelay) (string %status)))) : list operation
                CAR;        # pair (pair bls12_381_fr (pair address mutez)) (pair (pair (mutez %custFunding) (key %custPk)) (pair timestamp address)) : pair (pair (pair bls12_381_fr (pair address mutez)) (pair (pair (mutez %custFunding) (key %custPk)) (pair timestamp address))) (pair (pair mutez (pair (mutez %merchFunding) (key %merchPk))) (pair (pair address bytes) (pair (int %selfDelay) (string %status)))) : list operation
                SWAP;       # pair (pair (pair bls12_381_fr (pair address mutez)) (pair (pair (mutez %custFunding) (key %custPk)) (pair timestamp address))) (pair (pair mutez (pair (mutez %merchFunding) (key %merchPk))) (pair (pair address bytes) (pair (int %selfDelay) (string %status)))) : pair (pair bls12_381_fr (pair address mutez)) (pair (pair (mutez %custFunding) (key %custPk)) (pair timestamp address)) : list operation
                CDR;        # pair (pair mutez (pair (mutez %merchFunding) (key %merchPk))) (pair (pair address bytes) (pair (int %selfDelay) (string %status))) : pair (pair bls12_381_fr (pair address mutez)) (pair (pair (mutez %custFunding) (key %custPk)) (pair timestamp address)) : list operation
                DUP;        # pair (pair mutez (pair (mutez %merchFunding) (key %merchPk))) (pair (pair address bytes) (pair (int %selfDelay) (string %status))) : pair (pair mutez (pair (mutez %merchFunding) (key %merchPk))) (pair (pair address bytes) (pair (int %selfDelay) (string %status))) : pair (pair bls12_381_fr (pair address mutez)) (pair (pair (mutez %custFunding) (key %custPk)) (pair timestamp address)) : list operation
                CDR;        # pair (pair address bytes) (pair (int %selfDelay) (string %status)) : pair (pair mutez (pair (mutez %merchFunding) (key %merchPk))) (pair (pair address bytes) (pair (int %selfDelay) (string %status))) : pair (pair bls12_381_fr (pair address mutez)) (pair (pair (mutez %custFunding) (key %custPk)) (pair timestamp address)) : list operation
                SWAP;       # pair (pair mutez (pair (mutez %merchFunding) (key %merchPk))) (pair (pair address bytes) (pair (int %selfDelay) (string %status))) : pair (pair address bytes) (pair (int %selfDelay) (string %status)) : pair (pair bls12_381_fr (pair address mutez)) (pair (pair (mutez %custFunding) (key %custPk)) (pair timestamp address)) : list operation
                CAR;        # pair mutez (pair (mutez %merchFunding) (key %merchPk)) : pair (pair address bytes) (pair (int %selfDelay) (string %status)) : pair (pair bls12_381_fr (pair address mutez)) (pair (pair (mutez %custFunding) (key %custPk)) (pair timestamp address)) : list operation
                CDR;        # pair (mutez %merchFunding) (key %merchPk) : pair (pair address bytes) (pair (int %selfDelay) (string %status)) : pair (pair bls12_381_fr (pair address mutez)) (pair (pair (mutez %custFunding) (key %custPk)) (pair timestamp address)) : list operation
                PUSH mutez 0; # mutez : pair (mutez %merchFunding) (key %merchPk) : pair (pair address bytes) (pair (int %selfDelay) (string %status)) : pair (pair bls12_381_fr (pair address mutez)) (pair (pair (mutez %custFunding) (key %custPk)) (pair timestamp address)) : list operation
                PAIR;       # pair mutez (pair (mutez %merchFunding) (key %merchPk)) : pair (pair address bytes) (pair (int %selfDelay) (string %status)) : pair (pair bls12_381_fr (pair address mutez)) (pair (pair (mutez %custFunding) (key %custPk)) (pair timestamp address)) : list operation
                PAIR;       # pair (pair mutez (pair (mutez %merchFunding) (key %merchPk))) (pair (pair address bytes) (pair (int %selfDelay) (string %status))) : pair (pair bls12_381_fr (pair address mutez)) (pair (pair (mutez %custFunding) (key %custPk)) (pair timestamp address)) : list operation
                SWAP;       # pair (pair bls12_381_fr (pair address mutez)) (pair (pair (mutez %custFunding) (key %custPk)) (pair timestamp address)) : pair (pair mutez (pair (mutez %merchFunding) (key %merchPk))) (pair (pair address bytes) (pair (int %selfDelay) (string %status))) : list operation
                PAIR;       # pair (pair (pair bls12_381_fr (pair address mutez)) (pair (pair (mutez %custFunding) (key %custPk)) (pair timestamp address))) (pair (pair mutez (pair (mutez %merchFunding) (key %merchPk))) (pair (pair address bytes) (pair (int %selfDelay) (string %status)))) : list operation
                # self.data.status = 'custClose' # pair (pair (pair bls12_381_fr (pair address mutez)) (pair (pair (mutez %custFunding) (key %custPk)) (pair timestamp address))) (pair (pair mutez (pair (mutez %merchFunding) (key %merchPk))) (pair (pair address bytes) (pair (int %selfDelay) (string %status)))) : list operation
                DUP;        # pair (pair (pair bls12_381_fr (pair address mutez)) (pair (pair (mutez %custFunding) (key %custPk)) (pair timestamp address))) (pair (pair mutez (pair (mutez %merchFunding) (key %merchPk))) (pair (pair address bytes) (pair (int %selfDelay) (string %status)))) : pair (pair (pair bls12_381_fr (pair address mutez)) (pair (pair (mutez %custFunding) (key %custPk)) (pair timestamp address))) (pair (pair mutez (pair (mutez %merchFunding) (key %merchPk))) (pair (pair address bytes) (pair (int %selfDelay) (string %status)))) : list operation
                CAR;        # pair (pair bls12_381_fr (pair address mutez)) (pair (pair (mutez %custFunding) (key %custPk)) (pair timestamp address)) : pair (pair (pair bls12_381_fr (pair address mutez)) (pair (pair (mutez %custFunding) (key %custPk)) (pair timestamp address))) (pair (pair mutez (pair (mutez %merchFunding) (key %merchPk))) (pair (pair address bytes) (pair (int %selfDelay) (string %status)))) : list operation
                SWAP;       # pair (pair (pair bls12_381_fr (pair address mutez)) (pair (pair (mutez %custFunding) (key %custPk)) (pair timestamp address))) (pair (pair mutez (pair (mutez %merchFunding) (key %merchPk))) (pair (pair address bytes) (pair (int %selfDelay) (string %status)))) : pair (pair bls12_381_fr (pair address mutez)) (pair (pair (mutez %custFunding) (key %custPk)) (pair timestamp address)) : list operation
                CDR;        # pair (pair mutez (pair (mutez %merchFunding) (key %merchPk))) (pair (pair address bytes) (pair (int %selfDelay) (string %status))) : pair (pair bls12_381_fr (pair address mutez)) (pair (pair (mutez %custFunding) (key %custPk)) (pair timestamp address)) : list operation
                DUP;        # pair (pair mutez (pair (mutez %merchFunding) (key %merchPk))) (pair (pair address bytes) (pair (int %selfDelay) (string %status))) : pair (pair mutez (pair (mutez %merchFunding) (key %merchPk))) (pair (pair address bytes) (pair (int %selfDelay) (string %status))) : pair (pair bls12_381_fr (pair address mutez)) (pair (pair (mutez %custFunding) (key %custPk)) (pair timestamp address)) : list operation
                CAR;        # pair mutez (pair (mutez %merchFunding) (key %merchPk)) : pair (pair mutez (pair (mutez %merchFunding) (key %merchPk))) (pair (pair address bytes) (pair (int %selfDelay) (string %status))) : pair (pair bls12_381_fr (pair address mutez)) (pair (pair (mutez %custFunding) (key %custPk)) (pair timestamp address)) : list operation
                SWAP;       # pair (pair mutez (pair (mutez %merchFunding) (key %merchPk))) (pair (pair address bytes) (pair (int %selfDelay) (string %status))) : pair mutez (pair (mutez %merchFunding) (key %merchPk)) : pair (pair bls12_381_fr (pair address mutez)) (pair (pair (mutez %custFunding) (key %custPk)) (pair timestamp address)) : list operation
                CDR;        # pair (pair address bytes) (pair (int %selfDelay) (string %status)) : pair mutez (pair (mutez %merchFunding) (key %merchPk)) : pair (pair bls12_381_fr (pair address mutez)) (pair (pair (mutez %custFunding) (key %custPk)) (pair timestamp address)) : list operation
                DUP;        # pair (pair address bytes) (pair (int %selfDelay) (string %status)) : pair (pair address bytes) (pair (int %selfDelay) (string %status)) : pair mutez (pair (mutez %merchFunding) (key %merchPk)) : pair (pair bls12_381_fr (pair address mutez)) (pair (pair (mutez %custFunding) (key %custPk)) (pair timestamp address)) : list operation
                CAR;        # pair address bytes : pair (pair address bytes) (pair (int %selfDelay) (string %status)) : pair mutez (pair (mutez %merchFunding) (key %merchPk)) : pair (pair bls12_381_fr (pair address mutez)) (pair (pair (mutez %custFunding) (key %custPk)) (pair timestamp address)) : list operation
                SWAP;       # pair (pair address bytes) (pair (int %selfDelay) (string %status)) : pair address bytes : pair mutez (pair (mutez %merchFunding) (key %merchPk)) : pair (pair bls12_381_fr (pair address mutez)) (pair (pair (mutez %custFunding) (key %custPk)) (pair timestamp address)) : list operation
                CDR;        # pair (int %selfDelay) (string %status) : pair address bytes : pair mutez (pair (mutez %merchFunding) (key %merchPk)) : pair (pair bls12_381_fr (pair address mutez)) (pair (pair (mutez %custFunding) (key %custPk)) (pair timestamp address)) : list operation
                CAR;        # int : pair address bytes : pair mutez (pair (mutez %merchFunding) (key %merchPk)) : pair (pair bls12_381_fr (pair address mutez)) (pair (pair (mutez %custFunding) (key %custPk)) (pair timestamp address)) : list operation
                PUSH string "custClose"; # string : int : pair address bytes : pair mutez (pair (mutez %merchFunding) (key %merchPk)) : pair (pair bls12_381_fr (pair address mutez)) (pair (pair (mutez %custFunding) (key %custPk)) (pair timestamp address)) : list operation
                SWAP;       # int : string : pair address bytes : pair mutez (pair (mutez %merchFunding) (key %merchPk)) : pair (pair bls12_381_fr (pair address mutez)) (pair (pair (mutez %custFunding) (key %custPk)) (pair timestamp address)) : list operation
                PAIR;       # pair int string : pair address bytes : pair mutez (pair (mutez %merchFunding) (key %merchPk)) : pair (pair bls12_381_fr (pair address mutez)) (pair (pair (mutez %custFunding) (key %custPk)) (pair timestamp address)) : list operation
                SWAP;       # pair address bytes : pair int string : pair mutez (pair (mutez %merchFunding) (key %merchPk)) : pair (pair bls12_381_fr (pair address mutez)) (pair (pair (mutez %custFunding) (key %custPk)) (pair timestamp address)) : list operation
                PAIR;       # pair (pair address bytes) (pair int string) : pair mutez (pair (mutez %merchFunding) (key %merchPk)) : pair (pair bls12_381_fr (pair address mutez)) (pair (pair (mutez %custFunding) (key %custPk)) (pair timestamp address)) : list operation
                SWAP;       # pair mutez (pair (mutez %merchFunding) (key %merchPk)) : pair (pair address bytes) (pair int string) : pair (pair bls12_381_fr (pair address mutez)) (pair (pair (mutez %custFunding) (key %custPk)) (pair timestamp address)) : list operation
                PAIR;       # pair (pair mutez (pair (mutez %merchFunding) (key %merchPk))) (pair (pair address bytes) (pair int string)) : pair (pair bls12_381_fr (pair address mutez)) (pair (pair (mutez %custFunding) (key %custPk)) (pair timestamp address)) : list operation
                SWAP;       # pair (pair bls12_381_fr (pair address mutez)) (pair (pair (mutez %custFunding) (key %custPk)) (pair timestamp address)) : pair (pair mutez (pair (mutez %merchFunding) (key %merchPk))) (pair (pair address bytes) (pair int string)) : list operation
                PAIR;       # pair (pair (pair bls12_381_fr (pair address mutez)) (pair (pair (mutez %custFunding) (key %custPk)) (pair timestamp address))) (pair (pair mutez (pair (mutez %merchFunding) (key %merchPk))) (pair (pair address bytes) (pair int string))) : list operation
                SWAP;       # list operation : pair (pair (pair bls12_381_fr (pair address mutez)) (pair (pair (mutez %custFunding) (key %custPk)) (pair timestamp address))) (pair (pair mutez (pair (mutez %merchFunding) (key %merchPk))) (pair (pair address bytes) (pair int string)))
              }
              {
                DROP;       # @storage
                # == merchClaim ==
                # sp.verify(self.data.merchAddr == sp.sender) # @storage
                DUP;        # @storage : @storage
                CAR;        # pair (pair (bls12_381_fr %chanID) (pair (address %custAddr) (mutez %custBal))) (pair (pair (mutez %custFunding) (key %custPk)) (pair (timestamp %delayExpiry) (address %merchAddr))) : @storage
                CDR;        # pair (pair (mutez %custFunding) (key %custPk)) (pair (timestamp %delayExpiry) (address %merchAddr)) : @storage
                CDR;        # pair (timestamp %delayExpiry) (address %merchAddr) : @storage
                CDR;        # address : @storage
                SENDER;     # address : address : @storage
                COMPARE;    # int : @storage
                EQ;         # bool : @storage
                IF
                  {}
                  {
                    PUSH string "WrongCondition: self.data.merchAddr == sp.sender"; # string : @storage
                    FAILWITH;   # FAILED
                  }; # @storage
                # sp.verify(self.data.status == 'merchClose') # @storage
                DUP;        # @storage : @storage
                CDR;        # pair (pair (mutez %merchBal) (pair (mutez %merchFunding) (key %merchPk))) (pair (pair (address %pssigContract) (bytes %revLock)) (pair (int %selfDelay) (string %status))) : @storage
                CDR;        # pair (pair (address %pssigContract) (bytes %revLock)) (pair (int %selfDelay) (string %status)) : @storage
                CDR;        # pair (int %selfDelay) (string %status) : @storage
                CDR;        # string : @storage
                PUSH string "merchClose"; # string : string : @storage
                COMPARE;    # int : @storage
                EQ;         # bool : @storage
                IF
                  {}
                  {
                    PUSH string "WrongCondition: self.data.status == 'merchClose'"; # string : @storage
                    FAILWITH;   # FAILED
                  }; # @storage
                # sp.verify(self.data.delayExpiry < sp.now) # @storage
                DUP;        # @storage : @storage
                CAR;        # pair (pair (bls12_381_fr %chanID) (pair (address %custAddr) (mutez %custBal))) (pair (pair (mutez %custFunding) (key %custPk)) (pair (timestamp %delayExpiry) (address %merchAddr))) : @storage
                CDR;        # pair (pair (mutez %custFunding) (key %custPk)) (pair (timestamp %delayExpiry) (address %merchAddr)) : @storage
                CDR;        # pair (timestamp %delayExpiry) (address %merchAddr) : @storage
                CAR;        # timestamp : @storage
                NOW;        # timestamp : timestamp : @storage
                COMPARE;    # int : @storage
                GT;         # bool : @storage
                IF
                  {}
                  {
                    PUSH string "WrongCondition: self.data.delayExpiry < sp.now"; # string : @storage
                    FAILWITH;   # FAILED
                  }; # @storage
                # sp.send(self.data.merchAddr, self.data.custBal + self.data.merchBal) # @storage
                DUP;        # @storage : @storage
                CAR;        # pair (pair (bls12_381_fr %chanID) (pair (address %custAddr) (mutez %custBal))) (pair (pair (mutez %custFunding) (key %custPk)) (pair (timestamp %delayExpiry) (address %merchAddr))) : @storage
                CDR;        # pair (pair (mutez %custFunding) (key %custPk)) (pair (timestamp %delayExpiry) (address %merchAddr)) : @storage
                CDR;        # pair (timestamp %delayExpiry) (address %merchAddr) : @storage
                CDR;        # address : @storage
                CONTRACT unit; # option (contract unit) : @storage
                IF_SOME
                  {}
                  {
                    PUSH int 132; # int : @storage
                    FAILWITH;   # FAILED
                  }; # @some : @storage
                NIL operation; # list operation : @some : @storage
                SWAP;       # @some : list operation : @storage
                DIG 2;      # @storage : @some : list operation
                DUP;        # @storage : @storage : @some : list operation
                CDR;        # pair (pair (mutez %merchBal) (pair (mutez %merchFunding) (key %merchPk))) (pair (pair (address %pssigContract) (bytes %revLock)) (pair (int %selfDelay) (string %status))) : @storage : @some : list operation
                CAR;        # pair (mutez %merchBal) (pair (mutez %merchFunding) (key %merchPk)) : @storage : @some : list operation
                CAR;        # mutez : @storage : @some : list operation
                SWAP;       # @storage : mutez : @some : list operation
                DUP;        # @storage : @storage : mutez : @some : list operation
                DUG 4;      # @storage : mutez : @some : list operation : @storage
                CAR;        # pair (pair (bls12_381_fr %chanID) (pair (address %custAddr) (mutez %custBal))) (pair (pair (mutez %custFunding) (key %custPk)) (pair (timestamp %delayExpiry) (address %merchAddr))) : mutez : @some : list operation : @storage
                CAR;        # pair (bls12_381_fr %chanID) (pair (address %custAddr) (mutez %custBal)) : mutez : @some : list operation : @storage
                CDR;        # pair (address %custAddr) (mutez %custBal) : mutez : @some : list operation : @storage
                CDR;        # mutez : mutez : @some : list operation : @storage
                ADD;        # mutez : @some : list operation : @storage
                UNIT;       # unit : mutez : @some : list operation : @storage
                TRANSFER_TOKENS; # operation : list operation : @storage
                CONS;       # list operation : @storage
                SWAP;       # @storage : list operation
                # self.data.custBal = sp.tez(0) # @storage : list operation
                DUP;        # @storage : @storage : list operation
                CDR;        # pair (pair (mutez %merchBal) (pair (mutez %merchFunding) (key %merchPk))) (pair (pair (address %pssigContract) (bytes %revLock)) (pair (int %selfDelay) (string %status))) : @storage : list operation
                SWAP;       # @storage : pair (pair (mutez %merchBal) (pair (mutez %merchFunding) (key %merchPk))) (pair (pair (address %pssigContract) (bytes %revLock)) (pair (int %selfDelay) (string %status))) : list operation
                CAR;        # pair (pair (bls12_381_fr %chanID) (pair (address %custAddr) (mutez %custBal))) (pair (pair (mutez %custFunding) (key %custPk)) (pair (timestamp %delayExpiry) (address %merchAddr))) : pair (pair (mutez %merchBal) (pair (mutez %merchFunding) (key %merchPk))) (pair (pair (address %pssigContract) (bytes %revLock)) (pair (int %selfDelay) (string %status))) : list operation
                DUP;        # pair (pair (bls12_381_fr %chanID) (pair (address %custAddr) (mutez %custBal))) (pair (pair (mutez %custFunding) (key %custPk)) (pair (timestamp %delayExpiry) (address %merchAddr))) : pair (pair (bls12_381_fr %chanID) (pair (address %custAddr) (mutez %custBal))) (pair (pair (mutez %custFunding) (key %custPk)) (pair (timestamp %delayExpiry) (address %merchAddr))) : pair (pair (mutez %merchBal) (pair (mutez %merchFunding) (key %merchPk))) (pair (pair (address %pssigContract) (bytes %revLock)) (pair (int %selfDelay) (string %status))) : list operation
                CDR;        # pair (pair (mutez %custFunding) (key %custPk)) (pair (timestamp %delayExpiry) (address %merchAddr)) : pair (pair (bls12_381_fr %chanID) (pair (address %custAddr) (mutez %custBal))) (pair (pair (mutez %custFunding) (key %custPk)) (pair (timestamp %delayExpiry) (address %merchAddr))) : pair (pair (mutez %merchBal) (pair (mutez %merchFunding) (key %merchPk))) (pair (pair (address %pssigContract) (bytes %revLock)) (pair (int %selfDelay) (string %status))) : list operation
                SWAP;       # pair (pair (bls12_381_fr %chanID) (pair (address %custAddr) (mutez %custBal))) (pair (pair (mutez %custFunding) (key %custPk)) (pair (timestamp %delayExpiry) (address %merchAddr))) : pair (pair (mutez %custFunding) (key %custPk)) (pair (timestamp %delayExpiry) (address %merchAddr)) : pair (pair (mutez %merchBal) (pair (mutez %merchFunding) (key %merchPk))) (pair (pair (address %pssigContract) (bytes %revLock)) (pair (int %selfDelay) (string %status))) : list operation
                CAR;        # pair (bls12_381_fr %chanID) (pair (address %custAddr) (mutez %custBal)) : pair (pair (mutez %custFunding) (key %custPk)) (pair (timestamp %delayExpiry) (address %merchAddr)) : pair (pair (mutez %merchBal) (pair (mutez %merchFunding) (key %merchPk))) (pair (pair (address %pssigContract) (bytes %revLock)) (pair (int %selfDelay) (string %status))) : list operation
                DUP;        # pair (bls12_381_fr %chanID) (pair (address %custAddr) (mutez %custBal)) : pair (bls12_381_fr %chanID) (pair (address %custAddr) (mutez %custBal)) : pair (pair (mutez %custFunding) (key %custPk)) (pair (timestamp %delayExpiry) (address %merchAddr)) : pair (pair (mutez %merchBal) (pair (mutez %merchFunding) (key %merchPk))) (pair (pair (address %pssigContract) (bytes %revLock)) (pair (int %selfDelay) (string %status))) : list operation
                CAR;        # bls12_381_fr : pair (bls12_381_fr %chanID) (pair (address %custAddr) (mutez %custBal)) : pair (pair (mutez %custFunding) (key %custPk)) (pair (timestamp %delayExpiry) (address %merchAddr)) : pair (pair (mutez %merchBal) (pair (mutez %merchFunding) (key %merchPk))) (pair (pair (address %pssigContract) (bytes %revLock)) (pair (int %selfDelay) (string %status))) : list operation
                SWAP;       # pair (bls12_381_fr %chanID) (pair (address %custAddr) (mutez %custBal)) : bls12_381_fr : pair (pair (mutez %custFunding) (key %custPk)) (pair (timestamp %delayExpiry) (address %merchAddr)) : pair (pair (mutez %merchBal) (pair (mutez %merchFunding) (key %merchPk))) (pair (pair (address %pssigContract) (bytes %revLock)) (pair (int %selfDelay) (string %status))) : list operation
                CDR;        # pair (address %custAddr) (mutez %custBal) : bls12_381_fr : pair (pair (mutez %custFunding) (key %custPk)) (pair (timestamp %delayExpiry) (address %merchAddr)) : pair (pair (mutez %merchBal) (pair (mutez %merchFunding) (key %merchPk))) (pair (pair (address %pssigContract) (bytes %revLock)) (pair (int %selfDelay) (string %status))) : list operation
                CAR;        # address : bls12_381_fr : pair (pair (mutez %custFunding) (key %custPk)) (pair (timestamp %delayExpiry) (address %merchAddr)) : pair (pair (mutez %merchBal) (pair (mutez %merchFunding) (key %merchPk))) (pair (pair (address %pssigContract) (bytes %revLock)) (pair (int %selfDelay) (string %status))) : list operation
                PUSH mutez 0; # mutez : address : bls12_381_fr : pair (pair (mutez %custFunding) (key %custPk)) (pair (timestamp %delayExpiry) (address %merchAddr)) : pair (pair (mutez %merchBal) (pair (mutez %merchFunding) (key %merchPk))) (pair (pair (address %pssigContract) (bytes %revLock)) (pair (int %selfDelay) (string %status))) : list operation
                SWAP;       # address : mutez : bls12_381_fr : pair (pair (mutez %custFunding) (key %custPk)) (pair (timestamp %delayExpiry) (address %merchAddr)) : pair (pair (mutez %merchBal) (pair (mutez %merchFunding) (key %merchPk))) (pair (pair (address %pssigContract) (bytes %revLock)) (pair (int %selfDelay) (string %status))) : list operation
                PAIR;       # pair address mutez : bls12_381_fr : pair (pair (mutez %custFunding) (key %custPk)) (pair (timestamp %delayExpiry) (address %merchAddr)) : pair (pair (mutez %merchBal) (pair (mutez %merchFunding) (key %merchPk))) (pair (pair (address %pssigContract) (bytes %revLock)) (pair (int %selfDelay) (string %status))) : list operation
                SWAP;       # bls12_381_fr : pair address mutez : pair (pair (mutez %custFunding) (key %custPk)) (pair (timestamp %delayExpiry) (address %merchAddr)) : pair (pair (mutez %merchBal) (pair (mutez %merchFunding) (key %merchPk))) (pair (pair (address %pssigContract) (bytes %revLock)) (pair (int %selfDelay) (string %status))) : list operation
                PAIR;       # pair bls12_381_fr (pair address mutez) : pair (pair (mutez %custFunding) (key %custPk)) (pair (timestamp %delayExpiry) (address %merchAddr)) : pair (pair (mutez %merchBal) (pair (mutez %merchFunding) (key %merchPk))) (pair (pair (address %pssigContract) (bytes %revLock)) (pair (int %selfDelay) (string %status))) : list operation
                PAIR;       # pair (pair bls12_381_fr (pair address mutez)) (pair (pair (mutez %custFunding) (key %custPk)) (pair (timestamp %delayExpiry) (address %merchAddr))) : pair (pair (mutez %merchBal) (pair (mutez %merchFunding) (key %merchPk))) (pair (pair (address %pssigContract) (bytes %revLock)) (pair (int %selfDelay) (string %status))) : list operation
                PAIR;       # pair (pair (pair bls12_381_fr (pair address mutez)) (pair (pair (mutez %custFunding) (key %custPk)) (pair (timestamp %delayExpiry) (address %merchAddr)))) (pair (pair (mutez %merchBal) (pair (mutez %merchFunding) (key %merchPk))) (pair (pair (address %pssigContract) (bytes %revLock)) (pair (int %selfDelay) (string %status)))) : list operation
                # self.data.merchBal = sp.tez(0) # pair (pair (pair bls12_381_fr (pair address mutez)) (pair (pair (mutez %custFunding) (key %custPk)) (pair (timestamp %delayExpiry) (address %merchAddr)))) (pair (pair (mutez %merchBal) (pair (mutez %merchFunding) (key %merchPk))) (pair (pair (address %pssigContract) (bytes %revLock)) (pair (int %selfDelay) (string %status)))) : list operation
                DUP;        # pair (pair (pair bls12_381_fr (pair address mutez)) (pair (pair (mutez %custFunding) (key %custPk)) (pair (timestamp %delayExpiry) (address %merchAddr)))) (pair (pair (mutez %merchBal) (pair (mutez %merchFunding) (key %merchPk))) (pair (pair (address %pssigContract) (bytes %revLock)) (pair (int %selfDelay) (string %status)))) : pair (pair (pair bls12_381_fr (pair address mutez)) (pair (pair (mutez %custFunding) (key %custPk)) (pair (timestamp %delayExpiry) (address %merchAddr)))) (pair (pair (mutez %merchBal) (pair (mutez %merchFunding) (key %merchPk))) (pair (pair (address %pssigContract) (bytes %revLock)) (pair (int %selfDelay) (string %status)))) : list operation
                CAR;        # pair (pair bls12_381_fr (pair address mutez)) (pair (pair (mutez %custFunding) (key %custPk)) (pair (timestamp %delayExpiry) (address %merchAddr))) : pair (pair (pair bls12_381_fr (pair address mutez)) (pair (pair (mutez %custFunding) (key %custPk)) (pair (timestamp %delayExpiry) (address %merchAddr)))) (pair (pair (mutez %merchBal) (pair (mutez %merchFunding) (key %merchPk))) (pair (pair (address %pssigContract) (bytes %revLock)) (pair (int %selfDelay) (string %status)))) : list operation
                SWAP;       # pair (pair (pair bls12_381_fr (pair address mutez)) (pair (pair (mutez %custFunding) (key %custPk)) (pair (timestamp %delayExpiry) (address %merchAddr)))) (pair (pair (mutez %merchBal) (pair (mutez %merchFunding) (key %merchPk))) (pair (pair (address %pssigContract) (bytes %revLock)) (pair (int %selfDelay) (string %status)))) : pair (pair bls12_381_fr (pair address mutez)) (pair (pair (mutez %custFunding) (key %custPk)) (pair (timestamp %delayExpiry) (address %merchAddr))) : list operation
                CDR;        # pair (pair (mutez %merchBal) (pair (mutez %merchFunding) (key %merchPk))) (pair (pair (address %pssigContract) (bytes %revLock)) (pair (int %selfDelay) (string %status))) : pair (pair bls12_381_fr (pair address mutez)) (pair (pair (mutez %custFunding) (key %custPk)) (pair (timestamp %delayExpiry) (address %merchAddr))) : list operation
                DUP;        # pair (pair (mutez %merchBal) (pair (mutez %merchFunding) (key %merchPk))) (pair (pair (address %pssigContract) (bytes %revLock)) (pair (int %selfDelay) (string %status))) : pair (pair (mutez %merchBal) (pair (mutez %merchFunding) (key %merchPk))) (pair (pair (address %pssigContract) (bytes %revLock)) (pair (int %selfDelay) (string %status))) : pair (pair bls12_381_fr (pair address mutez)) (pair (pair (mutez %custFunding) (key %custPk)) (pair (timestamp %delayExpiry) (address %merchAddr))) : list operation
                CDR;        # pair (pair (address %pssigContract) (bytes %revLock)) (pair (int %selfDelay) (string %status)) : pair (pair (mutez %merchBal) (pair (mutez %merchFunding) (key %merchPk))) (pair (pair (address %pssigContract) (bytes %revLock)) (pair (int %selfDelay) (string %status))) : pair (pair bls12_381_fr (pair address mutez)) (pair (pair (mutez %custFunding) (key %custPk)) (pair (timestamp %delayExpiry) (address %merchAddr))) : list operation
                SWAP;       # pair (pair (mutez %merchBal) (pair (mutez %merchFunding) (key %merchPk))) (pair (pair (address %pssigContract) (bytes %revLock)) (pair (int %selfDelay) (string %status))) : pair (pair (address %pssigContract) (bytes %revLock)) (pair (int %selfDelay) (string %status)) : pair (pair bls12_381_fr (pair address mutez)) (pair (pair (mutez %custFunding) (key %custPk)) (pair (timestamp %delayExpiry) (address %merchAddr))) : list operation
                CAR;        # pair (mutez %merchBal) (pair (mutez %merchFunding) (key %merchPk)) : pair (pair (address %pssigContract) (bytes %revLock)) (pair (int %selfDelay) (string %status)) : pair (pair bls12_381_fr (pair address mutez)) (pair (pair (mutez %custFunding) (key %custPk)) (pair (timestamp %delayExpiry) (address %merchAddr))) : list operation
                CDR;        # pair (mutez %merchFunding) (key %merchPk) : pair (pair (address %pssigContract) (bytes %revLock)) (pair (int %selfDelay) (string %status)) : pair (pair bls12_381_fr (pair address mutez)) (pair (pair (mutez %custFunding) (key %custPk)) (pair (timestamp %delayExpiry) (address %merchAddr))) : list operation
                PUSH mutez 0; # mutez : pair (mutez %merchFunding) (key %merchPk) : pair (pair (address %pssigContract) (bytes %revLock)) (pair (int %selfDelay) (string %status)) : pair (pair bls12_381_fr (pair address mutez)) (pair (pair (mutez %custFunding) (key %custPk)) (pair (timestamp %delayExpiry) (address %merchAddr))) : list operation
                PAIR;       # pair mutez (pair (mutez %merchFunding) (key %merchPk)) : pair (pair (address %pssigContract) (bytes %revLock)) (pair (int %selfDelay) (string %status)) : pair (pair bls12_381_fr (pair address mutez)) (pair (pair (mutez %custFunding) (key %custPk)) (pair (timestamp %delayExpiry) (address %merchAddr))) : list operation
                PAIR;       # pair (pair mutez (pair (mutez %merchFunding) (key %merchPk))) (pair (pair (address %pssigContract) (bytes %revLock)) (pair (int %selfDelay) (string %status))) : pair (pair bls12_381_fr (pair address mutez)) (pair (pair (mutez %custFunding) (key %custPk)) (pair (timestamp %delayExpiry) (address %merchAddr))) : list operation
                SWAP;       # pair (pair bls12_381_fr (pair address mutez)) (pair (pair (mutez %custFunding) (key %custPk)) (pair (timestamp %delayExpiry) (address %merchAddr))) : pair (pair mutez (pair (mutez %merchFunding) (key %merchPk))) (pair (pair (address %pssigContract) (bytes %revLock)) (pair (int %selfDelay) (string %status))) : list operation
                PAIR;       # pair (pair (pair bls12_381_fr (pair address mutez)) (pair (pair (mutez %custFunding) (key %custPk)) (pair (timestamp %delayExpiry) (address %merchAddr)))) (pair (pair mutez (pair (mutez %merchFunding) (key %merchPk))) (pair (pair (address %pssigContract) (bytes %revLock)) (pair (int %selfDelay) (string %status)))) : list operation
                # self.data.status = 'closed' # pair (pair (pair bls12_381_fr (pair address mutez)) (pair (pair (mutez %custFunding) (key %custPk)) (pair (timestamp %delayExpiry) (address %merchAddr)))) (pair (pair mutez (pair (mutez %merchFunding) (key %merchPk))) (pair (pair (address %pssigContract) (bytes %revLock)) (pair (int %selfDelay) (string %status)))) : list operation
                DUP;        # pair (pair (pair bls12_381_fr (pair address mutez)) (pair (pair (mutez %custFunding) (key %custPk)) (pair (timestamp %delayExpiry) (address %merchAddr)))) (pair (pair mutez (pair (mutez %merchFunding) (key %merchPk))) (pair (pair (address %pssigContract) (bytes %revLock)) (pair (int %selfDelay) (string %status)))) : pair (pair (pair bls12_381_fr (pair address mutez)) (pair (pair (mutez %custFunding) (key %custPk)) (pair (timestamp %delayExpiry) (address %merchAddr)))) (pair (pair mutez (pair (mutez %merchFunding) (key %merchPk))) (pair (pair (address %pssigContract) (bytes %revLock)) (pair (int %selfDelay) (string %status)))) : list operation
                CAR;        # pair (pair bls12_381_fr (pair address mutez)) (pair (pair (mutez %custFunding) (key %custPk)) (pair (timestamp %delayExpiry) (address %merchAddr))) : pair (pair (pair bls12_381_fr (pair address mutez)) (pair (pair (mutez %custFunding) (key %custPk)) (pair (timestamp %delayExpiry) (address %merchAddr)))) (pair (pair mutez (pair (mutez %merchFunding) (key %merchPk))) (pair (pair (address %pssigContract) (bytes %revLock)) (pair (int %selfDelay) (string %status)))) : list operation
                SWAP;       # pair (pair (pair bls12_381_fr (pair address mutez)) (pair (pair (mutez %custFunding) (key %custPk)) (pair (timestamp %delayExpiry) (address %merchAddr)))) (pair (pair mutez (pair (mutez %merchFunding) (key %merchPk))) (pair (pair (address %pssigContract) (bytes %revLock)) (pair (int %selfDelay) (string %status)))) : pair (pair bls12_381_fr (pair address mutez)) (pair (pair (mutez %custFunding) (key %custPk)) (pair (timestamp %delayExpiry) (address %merchAddr))) : list operation
                CDR;        # pair (pair mutez (pair (mutez %merchFunding) (key %merchPk))) (pair (pair (address %pssigContract) (bytes %revLock)) (pair (int %selfDelay) (string %status))) : pair (pair bls12_381_fr (pair address mutez)) (pair (pair (mutez %custFunding) (key %custPk)) (pair (timestamp %delayExpiry) (address %merchAddr))) : list operation
                DUP;        # pair (pair mutez (pair (mutez %merchFunding) (key %merchPk))) (pair (pair (address %pssigContract) (bytes %revLock)) (pair (int %selfDelay) (string %status))) : pair (pair mutez (pair (mutez %merchFunding) (key %merchPk))) (pair (pair (address %pssigContract) (bytes %revLock)) (pair (int %selfDelay) (string %status))) : pair (pair bls12_381_fr (pair address mutez)) (pair (pair (mutez %custFunding) (key %custPk)) (pair (timestamp %delayExpiry) (address %merchAddr))) : list operation
                CAR;        # pair mutez (pair (mutez %merchFunding) (key %merchPk)) : pair (pair mutez (pair (mutez %merchFunding) (key %merchPk))) (pair (pair (address %pssigContract) (bytes %revLock)) (pair (int %selfDelay) (string %status))) : pair (pair bls12_381_fr (pair address mutez)) (pair (pair (mutez %custFunding) (key %custPk)) (pair (timestamp %delayExpiry) (address %merchAddr))) : list operation
                SWAP;       # pair (pair mutez (pair (mutez %merchFunding) (key %merchPk))) (pair (pair (address %pssigContract) (bytes %revLock)) (pair (int %selfDelay) (string %status))) : pair mutez (pair (mutez %merchFunding) (key %merchPk)) : pair (pair bls12_381_fr (pair address mutez)) (pair (pair (mutez %custFunding) (key %custPk)) (pair (timestamp %delayExpiry) (address %merchAddr))) : list operation
                CDR;        # pair (pair (address %pssigContract) (bytes %revLock)) (pair (int %selfDelay) (string %status)) : pair mutez (pair (mutez %merchFunding) (key %merchPk)) : pair (pair bls12_381_fr (pair address mutez)) (pair (pair (mutez %custFunding) (key %custPk)) (pair (timestamp %delayExpiry) (address %merchAddr))) : list operation
                DUP;        # pair (pair (address %pssigContract) (bytes %revLock)) (pair (int %selfDelay) (string %status)) : pair (pair (address %pssigContract) (bytes %revLock)) (pair (int %selfDelay) (string %status)) : pair mutez (pair (mutez %merchFunding) (key %merchPk)) : pair (pair bls12_381_fr (pair address mutez)) (pair (pair (mutez %custFunding) (key %custPk)) (pair (timestamp %delayExpiry) (address %merchAddr))) : list operation
                CAR;        # pair (address %pssigContract) (bytes %revLock) : pair (pair (address %pssigContract) (bytes %revLock)) (pair (int %selfDelay) (string %status)) : pair mutez (pair (mutez %merchFunding) (key %merchPk)) : pair (pair bls12_381_fr (pair address mutez)) (pair (pair (mutez %custFunding) (key %custPk)) (pair (timestamp %delayExpiry) (address %merchAddr))) : list operation
                SWAP;       # pair (pair (address %pssigContract) (bytes %revLock)) (pair (int %selfDelay) (string %status)) : pair (address %pssigContract) (bytes %revLock) : pair mutez (pair (mutez %merchFunding) (key %merchPk)) : pair (pair bls12_381_fr (pair address mutez)) (pair (pair (mutez %custFunding) (key %custPk)) (pair (timestamp %delayExpiry) (address %merchAddr))) : list operation
                CDR;        # pair (int %selfDelay) (string %status) : pair (address %pssigContract) (bytes %revLock) : pair mutez (pair (mutez %merchFunding) (key %merchPk)) : pair (pair bls12_381_fr (pair address mutez)) (pair (pair (mutez %custFunding) (key %custPk)) (pair (timestamp %delayExpiry) (address %merchAddr))) : list operation
                CAR;        # int : pair (address %pssigContract) (bytes %revLock) : pair mutez (pair (mutez %merchFunding) (key %merchPk)) : pair (pair bls12_381_fr (pair address mutez)) (pair (pair (mutez %custFunding) (key %custPk)) (pair (timestamp %delayExpiry) (address %merchAddr))) : list operation
                PUSH string "closed"; # string : int : pair (address %pssigContract) (bytes %revLock) : pair mutez (pair (mutez %merchFunding) (key %merchPk)) : pair (pair bls12_381_fr (pair address mutez)) (pair (pair (mutez %custFunding) (key %custPk)) (pair (timestamp %delayExpiry) (address %merchAddr))) : list operation
                SWAP;       # int : string : pair (address %pssigContract) (bytes %revLock) : pair mutez (pair (mutez %merchFunding) (key %merchPk)) : pair (pair bls12_381_fr (pair address mutez)) (pair (pair (mutez %custFunding) (key %custPk)) (pair (timestamp %delayExpiry) (address %merchAddr))) : list operation
                PAIR;       # pair int string : pair (address %pssigContract) (bytes %revLock) : pair mutez (pair (mutez %merchFunding) (key %merchPk)) : pair (pair bls12_381_fr (pair address mutez)) (pair (pair (mutez %custFunding) (key %custPk)) (pair (timestamp %delayExpiry) (address %merchAddr))) : list operation
                SWAP;       # pair (address %pssigContract) (bytes %revLock) : pair int string : pair mutez (pair (mutez %merchFunding) (key %merchPk)) : pair (pair bls12_381_fr (pair address mutez)) (pair (pair (mutez %custFunding) (key %custPk)) (pair (timestamp %delayExpiry) (address %merchAddr))) : list operation
                PAIR;       # pair (pair (address %pssigContract) (bytes %revLock)) (pair int string) : pair mutez (pair (mutez %merchFunding) (key %merchPk)) : pair (pair bls12_381_fr (pair address mutez)) (pair (pair (mutez %custFunding) (key %custPk)) (pair (timestamp %delayExpiry) (address %merchAddr))) : list operation
                SWAP;       # pair mutez (pair (mutez %merchFunding) (key %merchPk)) : pair (pair (address %pssigContract) (bytes %revLock)) (pair int string) : pair (pair bls12_381_fr (pair address mutez)) (pair (pair (mutez %custFunding) (key %custPk)) (pair (timestamp %delayExpiry) (address %merchAddr))) : list operation
                PAIR;       # pair (pair mutez (pair (mutez %merchFunding) (key %merchPk))) (pair (pair (address %pssigContract) (bytes %revLock)) (pair int string)) : pair (pair bls12_381_fr (pair address mutez)) (pair (pair (mutez %custFunding) (key %custPk)) (pair (timestamp %delayExpiry) (address %merchAddr))) : list operation
                SWAP;       # pair (pair bls12_381_fr (pair address mutez)) (pair (pair (mutez %custFunding) (key %custPk)) (pair (timestamp %delayExpiry) (address %merchAddr))) : pair (pair mutez (pair (mutez %merchFunding) (key %merchPk))) (pair (pair (address %pssigContract) (bytes %revLock)) (pair int string)) : list operation
                PAIR;       # pair (pair (pair bls12_381_fr (pair address mutez)) (pair (pair (mutez %custFunding) (key %custPk)) (pair (timestamp %delayExpiry) (address %merchAddr)))) (pair (pair mutez (pair (mutez %merchFunding) (key %merchPk))) (pair (pair (address %pssigContract) (bytes %revLock)) (pair int string))) : list operation
                SWAP;       # list operation : pair (pair (pair bls12_381_fr (pair address mutez)) (pair (pair (mutez %custFunding) (key %custPk)) (pair (timestamp %delayExpiry) (address %merchAddr)))) (pair (pair mutez (pair (mutez %merchFunding) (key %merchPk))) (pair (pair (address %pssigContract) (bytes %revLock)) (pair int string)))
              }; # list operation : pair (pair (pair bls12_381_fr (pair address mutez)) (pair (pair (mutez %custFunding) (key %custPk)) (pair timestamp address))) (pair (pair mutez (pair (mutez %merchFunding) (key %merchPk))) (pair (pair address bytes) (pair int string)))
          }; # list operation : pair (pair (pair bls12_381_fr (pair address mutez)) (pair (pair (mutez %custFunding) (key %custPk)) (pair (timestamp %delayExpiry) (address %merchAddr)))) (pair (pair mutez (pair (mutez %merchFunding) (key %merchPk))) (pair (pair (address %pssigContract) (bytes %revLock)) (pair int string)))
      }
      {
        IF_LEFT
          {
            IF_LEFT
              {
                DROP;       # @storage
                # == merchClose ==
                # sp.verify(self.data.merchAddr == sp.sender) # @storage
                DUP;        # @storage : @storage
                CAR;        # pair (pair (bls12_381_fr %chanID) (pair (address %custAddr) (mutez %custBal))) (pair (pair (mutez %custFunding) (key %custPk)) (pair (timestamp %delayExpiry) (address %merchAddr))) : @storage
                CDR;        # pair (pair (mutez %custFunding) (key %custPk)) (pair (timestamp %delayExpiry) (address %merchAddr)) : @storage
                CDR;        # pair (timestamp %delayExpiry) (address %merchAddr) : @storage
                CDR;        # address : @storage
                SENDER;     # address : address : @storage
                COMPARE;    # int : @storage
                EQ;         # bool : @storage
                IF
                  {}
                  {
                    PUSH string "WrongCondition: self.data.merchAddr == sp.sender"; # string : @storage
                    FAILWITH;   # FAILED
                  }; # @storage
                # sp.verify(self.data.status == 'open') # @storage
                DUP;        # @storage : @storage
                CDR;        # pair (pair (mutez %merchBal) (pair (mutez %merchFunding) (key %merchPk))) (pair (pair (address %pssigContract) (bytes %revLock)) (pair (int %selfDelay) (string %status))) : @storage
                CDR;        # pair (pair (address %pssigContract) (bytes %revLock)) (pair (int %selfDelay) (string %status)) : @storage
                CDR;        # pair (int %selfDelay) (string %status) : @storage
                CDR;        # string : @storage
                PUSH string "open"; # string : string : @storage
                COMPARE;    # int : @storage
                EQ;         # bool : @storage
                IF
                  {}
                  {
                    PUSH string "WrongCondition: self.data.status == 'open'"; # string : @storage
                    FAILWITH;   # FAILED
                  }; # @storage
                # self.data.delayExpiry = sp.add_seconds(sp.now, self.data.selfDelay) # @storage
                DUP;        # @storage : @storage
                DUP;        # @storage : @storage : @storage
                CDR;        # pair (pair (mutez %merchBal) (pair (mutez %merchFunding) (key %merchPk))) (pair (pair (address %pssigContract) (bytes %revLock)) (pair (int %selfDelay) (string %status))) : @storage : @storage
                SWAP;       # @storage : pair (pair (mutez %merchBal) (pair (mutez %merchFunding) (key %merchPk))) (pair (pair (address %pssigContract) (bytes %revLock)) (pair (int %selfDelay) (string %status))) : @storage
                CAR;        # pair (pair (bls12_381_fr %chanID) (pair (address %custAddr) (mutez %custBal))) (pair (pair (mutez %custFunding) (key %custPk)) (pair (timestamp %delayExpiry) (address %merchAddr))) : pair (pair (mutez %merchBal) (pair (mutez %merchFunding) (key %merchPk))) (pair (pair (address %pssigContract) (bytes %revLock)) (pair (int %selfDelay) (string %status))) : @storage
                DUP;        # pair (pair (bls12_381_fr %chanID) (pair (address %custAddr) (mutez %custBal))) (pair (pair (mutez %custFunding) (key %custPk)) (pair (timestamp %delayExpiry) (address %merchAddr))) : pair (pair (bls12_381_fr %chanID) (pair (address %custAddr) (mutez %custBal))) (pair (pair (mutez %custFunding) (key %custPk)) (pair (timestamp %delayExpiry) (address %merchAddr))) : pair (pair (mutez %merchBal) (pair (mutez %merchFunding) (key %merchPk))) (pair (pair (address %pssigContract) (bytes %revLock)) (pair (int %selfDelay) (string %status))) : @storage
                CAR;        # pair (bls12_381_fr %chanID) (pair (address %custAddr) (mutez %custBal)) : pair (pair (bls12_381_fr %chanID) (pair (address %custAddr) (mutez %custBal))) (pair (pair (mutez %custFunding) (key %custPk)) (pair (timestamp %delayExpiry) (address %merchAddr))) : pair (pair (mutez %merchBal) (pair (mutez %merchFunding) (key %merchPk))) (pair (pair (address %pssigContract) (bytes %revLock)) (pair (int %selfDelay) (string %status))) : @storage
                SWAP;       # pair (pair (bls12_381_fr %chanID) (pair (address %custAddr) (mutez %custBal))) (pair (pair (mutez %custFunding) (key %custPk)) (pair (timestamp %delayExpiry) (address %merchAddr))) : pair (bls12_381_fr %chanID) (pair (address %custAddr) (mutez %custBal)) : pair (pair (mutez %merchBal) (pair (mutez %merchFunding) (key %merchPk))) (pair (pair (address %pssigContract) (bytes %revLock)) (pair (int %selfDelay) (string %status))) : @storage
                CDR;        # pair (pair (mutez %custFunding) (key %custPk)) (pair (timestamp %delayExpiry) (address %merchAddr)) : pair (bls12_381_fr %chanID) (pair (address %custAddr) (mutez %custBal)) : pair (pair (mutez %merchBal) (pair (mutez %merchFunding) (key %merchPk))) (pair (pair (address %pssigContract) (bytes %revLock)) (pair (int %selfDelay) (string %status))) : @storage
                DUP;        # pair (pair (mutez %custFunding) (key %custPk)) (pair (timestamp %delayExpiry) (address %merchAddr)) : pair (pair (mutez %custFunding) (key %custPk)) (pair (timestamp %delayExpiry) (address %merchAddr)) : pair (bls12_381_fr %chanID) (pair (address %custAddr) (mutez %custBal)) : pair (pair (mutez %merchBal) (pair (mutez %merchFunding) (key %merchPk))) (pair (pair (address %pssigContract) (bytes %revLock)) (pair (int %selfDelay) (string %status))) : @storage
                CAR;        # pair (mutez %custFunding) (key %custPk) : pair (pair (mutez %custFunding) (key %custPk)) (pair (timestamp %delayExpiry) (address %merchAddr)) : pair (bls12_381_fr %chanID) (pair (address %custAddr) (mutez %custBal)) : pair (pair (mutez %merchBal) (pair (mutez %merchFunding) (key %merchPk))) (pair (pair (address %pssigContract) (bytes %revLock)) (pair (int %selfDelay) (string %status))) : @storage
                SWAP;       # pair (pair (mutez %custFunding) (key %custPk)) (pair (timestamp %delayExpiry) (address %merchAddr)) : pair (mutez %custFunding) (key %custPk) : pair (bls12_381_fr %chanID) (pair (address %custAddr) (mutez %custBal)) : pair (pair (mutez %merchBal) (pair (mutez %merchFunding) (key %merchPk))) (pair (pair (address %pssigContract) (bytes %revLock)) (pair (int %selfDelay) (string %status))) : @storage
                CDR;        # pair (timestamp %delayExpiry) (address %merchAddr) : pair (mutez %custFunding) (key %custPk) : pair (bls12_381_fr %chanID) (pair (address %custAddr) (mutez %custBal)) : pair (pair (mutez %merchBal) (pair (mutez %merchFunding) (key %merchPk))) (pair (pair (address %pssigContract) (bytes %revLock)) (pair (int %selfDelay) (string %status))) : @storage
                CDR;        # address : pair (mutez %custFunding) (key %custPk) : pair (bls12_381_fr %chanID) (pair (address %custAddr) (mutez %custBal)) : pair (pair (mutez %merchBal) (pair (mutez %merchFunding) (key %merchPk))) (pair (pair (address %pssigContract) (bytes %revLock)) (pair (int %selfDelay) (string %status))) : @storage
                NOW;        # timestamp : address : pair (mutez %custFunding) (key %custPk) : pair (bls12_381_fr %chanID) (pair (address %custAddr) (mutez %custBal)) : pair (pair (mutez %merchBal) (pair (mutez %merchFunding) (key %merchPk))) (pair (pair (address %pssigContract) (bytes %revLock)) (pair (int %selfDelay) (string %status))) : @storage
                DIG 5;      # @storage : timestamp : address : pair (mutez %custFunding) (key %custPk) : pair (bls12_381_fr %chanID) (pair (address %custAddr) (mutez %custBal)) : pair (pair (mutez %merchBal) (pair (mutez %merchFunding) (key %merchPk))) (pair (pair (address %pssigContract) (bytes %revLock)) (pair (int %selfDelay) (string %status)))
                CDR;        # pair (pair (mutez %merchBal) (pair (mutez %merchFunding) (key %merchPk))) (pair (pair (address %pssigContract) (bytes %revLock)) (pair (int %selfDelay) (string %status))) : timestamp : address : pair (mutez %custFunding) (key %custPk) : pair (bls12_381_fr %chanID) (pair (address %custAddr) (mutez %custBal)) : pair (pair (mutez %merchBal) (pair (mutez %merchFunding) (key %merchPk))) (pair (pair (address %pssigContract) (bytes %revLock)) (pair (int %selfDelay) (string %status)))
                CDR;        # pair (pair (address %pssigContract) (bytes %revLock)) (pair (int %selfDelay) (string %status)) : timestamp : address : pair (mutez %custFunding) (key %custPk) : pair (bls12_381_fr %chanID) (pair (address %custAddr) (mutez %custBal)) : pair (pair (mutez %merchBal) (pair (mutez %merchFunding) (key %merchPk))) (pair (pair (address %pssigContract) (bytes %revLock)) (pair (int %selfDelay) (string %status)))
                CDR;        # pair (int %selfDelay) (string %status) : timestamp : address : pair (mutez %custFunding) (key %custPk) : pair (bls12_381_fr %chanID) (pair (address %custAddr) (mutez %custBal)) : pair (pair (mutez %merchBal) (pair (mutez %merchFunding) (key %merchPk))) (pair (pair (address %pssigContract) (bytes %revLock)) (pair (int %selfDelay) (string %status)))
                CAR;        # int : timestamp : address : pair (mutez %custFunding) (key %custPk) : pair (bls12_381_fr %chanID) (pair (address %custAddr) (mutez %custBal)) : pair (pair (mutez %merchBal) (pair (mutez %merchFunding) (key %merchPk))) (pair (pair (address %pssigContract) (bytes %revLock)) (pair (int %selfDelay) (string %status)))
                ADD;        # timestamp : address : pair (mutez %custFunding) (key %custPk) : pair (bls12_381_fr %chanID) (pair (address %custAddr) (mutez %custBal)) : pair (pair (mutez %merchBal) (pair (mutez %merchFunding) (key %merchPk))) (pair (pair (address %pssigContract) (bytes %revLock)) (pair (int %selfDelay) (string %status)))
                PAIR;       # pair timestamp address : pair (mutez %custFunding) (key %custPk) : pair (bls12_381_fr %chanID) (pair (address %custAddr) (mutez %custBal)) : pair (pair (mutez %merchBal) (pair (mutez %merchFunding) (key %merchPk))) (pair (pair (address %pssigContract) (bytes %revLock)) (pair (int %selfDelay) (string %status)))
                SWAP;       # pair (mutez %custFunding) (key %custPk) : pair timestamp address : pair (bls12_381_fr %chanID) (pair (address %custAddr) (mutez %custBal)) : pair (pair (mutez %merchBal) (pair (mutez %merchFunding) (key %merchPk))) (pair (pair (address %pssigContract) (bytes %revLock)) (pair (int %selfDelay) (string %status)))
                PAIR;       # pair (pair (mutez %custFunding) (key %custPk)) (pair timestamp address) : pair (bls12_381_fr %chanID) (pair (address %custAddr) (mutez %custBal)) : pair (pair (mutez %merchBal) (pair (mutez %merchFunding) (key %merchPk))) (pair (pair (address %pssigContract) (bytes %revLock)) (pair (int %selfDelay) (string %status)))
                SWAP;       # pair (bls12_381_fr %chanID) (pair (address %custAddr) (mutez %custBal)) : pair (pair (mutez %custFunding) (key %custPk)) (pair timestamp address) : pair (pair (mutez %merchBal) (pair (mutez %merchFunding) (key %merchPk))) (pair (pair (address %pssigContract) (bytes %revLock)) (pair (int %selfDelay) (string %status)))
                PAIR;       # pair (pair (bls12_381_fr %chanID) (pair (address %custAddr) (mutez %custBal))) (pair (pair (mutez %custFunding) (key %custPk)) (pair timestamp address)) : pair (pair (mutez %merchBal) (pair (mutez %merchFunding) (key %merchPk))) (pair (pair (address %pssigContract) (bytes %revLock)) (pair (int %selfDelay) (string %status)))
                PAIR;       # pair (pair (pair (bls12_381_fr %chanID) (pair (address %custAddr) (mutez %custBal))) (pair (pair (mutez %custFunding) (key %custPk)) (pair timestamp address))) (pair (pair (mutez %merchBal) (pair (mutez %merchFunding) (key %merchPk))) (pair (pair (address %pssigContract) (bytes %revLock)) (pair (int %selfDelay) (string %status))))
                # self.data.status = 'merchClose' # pair (pair (pair (bls12_381_fr %chanID) (pair (address %custAddr) (mutez %custBal))) (pair (pair (mutez %custFunding) (key %custPk)) (pair timestamp address))) (pair (pair (mutez %merchBal) (pair (mutez %merchFunding) (key %merchPk))) (pair (pair (address %pssigContract) (bytes %revLock)) (pair (int %selfDelay) (string %status))))
                DUP;        # pair (pair (pair (bls12_381_fr %chanID) (pair (address %custAddr) (mutez %custBal))) (pair (pair (mutez %custFunding) (key %custPk)) (pair timestamp address))) (pair (pair (mutez %merchBal) (pair (mutez %merchFunding) (key %merchPk))) (pair (pair (address %pssigContract) (bytes %revLock)) (pair (int %selfDelay) (string %status)))) : pair (pair (pair (bls12_381_fr %chanID) (pair (address %custAddr) (mutez %custBal))) (pair (pair (mutez %custFunding) (key %custPk)) (pair timestamp address))) (pair (pair (mutez %merchBal) (pair (mutez %merchFunding) (key %merchPk))) (pair (pair (address %pssigContract) (bytes %revLock)) (pair (int %selfDelay) (string %status))))
                CAR;        # pair (pair (bls12_381_fr %chanID) (pair (address %custAddr) (mutez %custBal))) (pair (pair (mutez %custFunding) (key %custPk)) (pair timestamp address)) : pair (pair (pair (bls12_381_fr %chanID) (pair (address %custAddr) (mutez %custBal))) (pair (pair (mutez %custFunding) (key %custPk)) (pair timestamp address))) (pair (pair (mutez %merchBal) (pair (mutez %merchFunding) (key %merchPk))) (pair (pair (address %pssigContract) (bytes %revLock)) (pair (int %selfDelay) (string %status))))
                SWAP;       # pair (pair (pair (bls12_381_fr %chanID) (pair (address %custAddr) (mutez %custBal))) (pair (pair (mutez %custFunding) (key %custPk)) (pair timestamp address))) (pair (pair (mutez %merchBal) (pair (mutez %merchFunding) (key %merchPk))) (pair (pair (address %pssigContract) (bytes %revLock)) (pair (int %selfDelay) (string %status)))) : pair (pair (bls12_381_fr %chanID) (pair (address %custAddr) (mutez %custBal))) (pair (pair (mutez %custFunding) (key %custPk)) (pair timestamp address))
                CDR;        # pair (pair (mutez %merchBal) (pair (mutez %merchFunding) (key %merchPk))) (pair (pair (address %pssigContract) (bytes %revLock)) (pair (int %selfDelay) (string %status))) : pair (pair (bls12_381_fr %chanID) (pair (address %custAddr) (mutez %custBal))) (pair (pair (mutez %custFunding) (key %custPk)) (pair timestamp address))
                DUP;        # pair (pair (mutez %merchBal) (pair (mutez %merchFunding) (key %merchPk))) (pair (pair (address %pssigContract) (bytes %revLock)) (pair (int %selfDelay) (string %status))) : pair (pair (mutez %merchBal) (pair (mutez %merchFunding) (key %merchPk))) (pair (pair (address %pssigContract) (bytes %revLock)) (pair (int %selfDelay) (string %status))) : pair (pair (bls12_381_fr %chanID) (pair (address %custAddr) (mutez %custBal))) (pair (pair (mutez %custFunding) (key %custPk)) (pair timestamp address))
                CAR;        # pair (mutez %merchBal) (pair (mutez %merchFunding) (key %merchPk)) : pair (pair (mutez %merchBal) (pair (mutez %merchFunding) (key %merchPk))) (pair (pair (address %pssigContract) (bytes %revLock)) (pair (int %selfDelay) (string %status))) : pair (pair (bls12_381_fr %chanID) (pair (address %custAddr) (mutez %custBal))) (pair (pair (mutez %custFunding) (key %custPk)) (pair timestamp address))
                SWAP;       # pair (pair (mutez %merchBal) (pair (mutez %merchFunding) (key %merchPk))) (pair (pair (address %pssigContract) (bytes %revLock)) (pair (int %selfDelay) (string %status))) : pair (mutez %merchBal) (pair (mutez %merchFunding) (key %merchPk)) : pair (pair (bls12_381_fr %chanID) (pair (address %custAddr) (mutez %custBal))) (pair (pair (mutez %custFunding) (key %custPk)) (pair timestamp address))
                CDR;        # pair (pair (address %pssigContract) (bytes %revLock)) (pair (int %selfDelay) (string %status)) : pair (mutez %merchBal) (pair (mutez %merchFunding) (key %merchPk)) : pair (pair (bls12_381_fr %chanID) (pair (address %custAddr) (mutez %custBal))) (pair (pair (mutez %custFunding) (key %custPk)) (pair timestamp address))
                DUP;        # pair (pair (address %pssigContract) (bytes %revLock)) (pair (int %selfDelay) (string %status)) : pair (pair (address %pssigContract) (bytes %revLock)) (pair (int %selfDelay) (string %status)) : pair (mutez %merchBal) (pair (mutez %merchFunding) (key %merchPk)) : pair (pair (bls12_381_fr %chanID) (pair (address %custAddr) (mutez %custBal))) (pair (pair (mutez %custFunding) (key %custPk)) (pair timestamp address))
                CAR;        # pair (address %pssigContract) (bytes %revLock) : pair (pair (address %pssigContract) (bytes %revLock)) (pair (int %selfDelay) (string %status)) : pair (mutez %merchBal) (pair (mutez %merchFunding) (key %merchPk)) : pair (pair (bls12_381_fr %chanID) (pair (address %custAddr) (mutez %custBal))) (pair (pair (mutez %custFunding) (key %custPk)) (pair timestamp address))
                SWAP;       # pair (pair (address %pssigContract) (bytes %revLock)) (pair (int %selfDelay) (string %status)) : pair (address %pssigContract) (bytes %revLock) : pair (mutez %merchBal) (pair (mutez %merchFunding) (key %merchPk)) : pair (pair (bls12_381_fr %chanID) (pair (address %custAddr) (mutez %custBal))) (pair (pair (mutez %custFunding) (key %custPk)) (pair timestamp address))
                CDR;        # pair (int %selfDelay) (string %status) : pair (address %pssigContract) (bytes %revLock) : pair (mutez %merchBal) (pair (mutez %merchFunding) (key %merchPk)) : pair (pair (bls12_381_fr %chanID) (pair (address %custAddr) (mutez %custBal))) (pair (pair (mutez %custFunding) (key %custPk)) (pair timestamp address))
                CAR;        # int : pair (address %pssigContract) (bytes %revLock) : pair (mutez %merchBal) (pair (mutez %merchFunding) (key %merchPk)) : pair (pair (bls12_381_fr %chanID) (pair (address %custAddr) (mutez %custBal))) (pair (pair (mutez %custFunding) (key %custPk)) (pair timestamp address))
                PUSH string "merchClose"; # string : int : pair (address %pssigContract) (bytes %revLock) : pair (mutez %merchBal) (pair (mutez %merchFunding) (key %merchPk)) : pair (pair (bls12_381_fr %chanID) (pair (address %custAddr) (mutez %custBal))) (pair (pair (mutez %custFunding) (key %custPk)) (pair timestamp address))
                SWAP;       # int : string : pair (address %pssigContract) (bytes %revLock) : pair (mutez %merchBal) (pair (mutez %merchFunding) (key %merchPk)) : pair (pair (bls12_381_fr %chanID) (pair (address %custAddr) (mutez %custBal))) (pair (pair (mutez %custFunding) (key %custPk)) (pair timestamp address))
                PAIR;       # pair int string : pair (address %pssigContract) (bytes %revLock) : pair (mutez %merchBal) (pair (mutez %merchFunding) (key %merchPk)) : pair (pair (bls12_381_fr %chanID) (pair (address %custAddr) (mutez %custBal))) (pair (pair (mutez %custFunding) (key %custPk)) (pair timestamp address))
                SWAP;       # pair (address %pssigContract) (bytes %revLock) : pair int string : pair (mutez %merchBal) (pair (mutez %merchFunding) (key %merchPk)) : pair (pair (bls12_381_fr %chanID) (pair (address %custAddr) (mutez %custBal))) (pair (pair (mutez %custFunding) (key %custPk)) (pair timestamp address))
                PAIR;       # pair (pair (address %pssigContract) (bytes %revLock)) (pair int string) : pair (mutez %merchBal) (pair (mutez %merchFunding) (key %merchPk)) : pair (pair (bls12_381_fr %chanID) (pair (address %custAddr) (mutez %custBal))) (pair (pair (mutez %custFunding) (key %custPk)) (pair timestamp address))
                SWAP;       # pair (mutez %merchBal) (pair (mutez %merchFunding) (key %merchPk)) : pair (pair (address %pssigContract) (bytes %revLock)) (pair int string) : pair (pair (bls12_381_fr %chanID) (pair (address %custAddr) (mutez %custBal))) (pair (pair (mutez %custFunding) (key %custPk)) (pair timestamp address))
                PAIR;       # pair (pair (mutez %merchBal) (pair (mutez %merchFunding) (key %merchPk))) (pair (pair (address %pssigContract) (bytes %revLock)) (pair int string)) : pair (pair (bls12_381_fr %chanID) (pair (address %custAddr) (mutez %custBal))) (pair (pair (mutez %custFunding) (key %custPk)) (pair timestamp address))
                SWAP;       # pair (pair (bls12_381_fr %chanID) (pair (address %custAddr) (mutez %custBal))) (pair (pair (mutez %custFunding) (key %custPk)) (pair timestamp address)) : pair (pair (mutez %merchBal) (pair (mutez %merchFunding) (key %merchPk))) (pair (pair (address %pssigContract) (bytes %revLock)) (pair int string))
                PAIR;       # pair (pair (pair (bls12_381_fr %chanID) (pair (address %custAddr) (mutez %custBal))) (pair (pair (mutez %custFunding) (key %custPk)) (pair timestamp address))) (pair (pair (mutez %merchBal) (pair (mutez %merchFunding) (key %merchPk))) (pair (pair (address %pssigContract) (bytes %revLock)) (pair int string)))
                NIL operation; # list operation : pair (pair (pair (bls12_381_fr %chanID) (pair (address %custAddr) (mutez %custBal))) (pair (pair (mutez %custFunding) (key %custPk)) (pair timestamp address))) (pair (pair (mutez %merchBal) (pair (mutez %merchFunding) (key %merchPk))) (pair (pair (address %pssigContract) (bytes %revLock)) (pair int string)))
              }
              {
                # == merchDispute ==
                # sp.verify(self.data.merchAddr == sp.sender) # @parameter%merchDispute : @storage
                SENDER;     # address : @parameter%merchDispute : @storage
                DIG 2;      # @storage : address : @parameter%merchDispute
                DUP;        # @storage : @storage : address : @parameter%merchDispute
                DUG 3;      # @storage : address : @parameter%merchDispute : @storage
                CAR;        # pair (pair (bls12_381_fr %chanID) (pair (address %custAddr) (mutez %custBal))) (pair (pair (mutez %custFunding) (key %custPk)) (pair (timestamp %delayExpiry) (address %merchAddr))) : address : @parameter%merchDispute : @storage
                CDR;        # pair (pair (mutez %custFunding) (key %custPk)) (pair (timestamp %delayExpiry) (address %merchAddr)) : address : @parameter%merchDispute : @storage
                CDR;        # pair (timestamp %delayExpiry) (address %merchAddr) : address : @parameter%merchDispute : @storage
                CDR;        # address : address : @parameter%merchDispute : @storage
                COMPARE;    # int : @parameter%merchDispute : @storage
                EQ;         # bool : @parameter%merchDispute : @storage
                IF
                  {}
                  {
                    PUSH string "WrongCondition: self.data.merchAddr == sp.sender"; # string : @parameter%merchDispute : @storage
                    FAILWITH;   # FAILED
                  }; # @parameter%merchDispute : @storage
                # sp.verify((self.data.status == 'custClose') | (self.data.status == 'checkingSig')) # @parameter%merchDispute : @storage
                PUSH string "custClose"; # string : @parameter%merchDispute : @storage
                DIG 2;      # @storage : string : @parameter%merchDispute
                DUP;        # @storage : @storage : string : @parameter%merchDispute
                DUG 3;      # @storage : string : @parameter%merchDispute : @storage
                CDR;        # pair (pair (mutez %merchBal) (pair (mutez %merchFunding) (key %merchPk))) (pair (pair (address %pssigContract) (bytes %revLock)) (pair (int %selfDelay) (string %status))) : string : @parameter%merchDispute : @storage
                CDR;        # pair (pair (address %pssigContract) (bytes %revLock)) (pair (int %selfDelay) (string %status)) : string : @parameter%merchDispute : @storage
                CDR;        # pair (int %selfDelay) (string %status) : string : @parameter%merchDispute : @storage
                CDR;        # string : string : @parameter%merchDispute : @storage
                COMPARE;    # int : @parameter%merchDispute : @storage
                EQ;         # bool : @parameter%merchDispute : @storage
                IF
                  {
                    PUSH bool True; # bool : @parameter%merchDispute : @storage
                  }
                  {
                    PUSH string "checkingSig"; # string : @parameter%merchDispute : @storage
                    DIG 2;      # @storage : string : @parameter%merchDispute
                    DUP;        # @storage : @storage : string : @parameter%merchDispute
                    DUG 3;      # @storage : string : @parameter%merchDispute : @storage
                    CDR;        # pair (pair (mutez %merchBal) (pair (mutez %merchFunding) (key %merchPk))) (pair (pair (address %pssigContract) (bytes %revLock)) (pair (int %selfDelay) (string %status))) : string : @parameter%merchDispute : @storage
                    CDR;        # pair (pair (address %pssigContract) (bytes %revLock)) (pair (int %selfDelay) (string %status)) : string : @parameter%merchDispute : @storage
                    CDR;        # pair (int %selfDelay) (string %status) : string : @parameter%merchDispute : @storage
                    CDR;        # string : string : @parameter%merchDispute : @storage
                    COMPARE;    # int : @parameter%merchDispute : @storage
                    EQ;         # bool : @parameter%merchDispute : @storage
                  }; # bool : @parameter%merchDispute : @storage
                IF
                  {}
                  {
                    PUSH string "WrongCondition: (self.data.status == 'custClose') | (self.data.status == 'checkingSig')"; # string : @parameter%merchDispute : @storage
                    FAILWITH;   # FAILED
                  }; # @parameter%merchDispute : @storage
                # sp.verify(self.data.revLock == sp.sha256(params.secret)) # @parameter%merchDispute : @storage
                SHA256;     # bytes : @storage
                SWAP;       # @storage : bytes
                DUP;        # @storage : @storage : bytes
                DUG 2;      # @storage : bytes : @storage
                CDR;        # pair (pair (mutez %merchBal) (pair (mutez %merchFunding) (key %merchPk))) (pair (pair (address %pssigContract) (bytes %revLock)) (pair (int %selfDelay) (string %status))) : bytes : @storage
                CDR;        # pair (pair (address %pssigContract) (bytes %revLock)) (pair (int %selfDelay) (string %status)) : bytes : @storage
                CAR;        # pair (address %pssigContract) (bytes %revLock) : bytes : @storage
                CDR;        # bytes : bytes : @storage
                COMPARE;    # int : @storage
                EQ;         # bool : @storage
                IF
                  {}
                  {
                    PUSH string "WrongCondition: self.data.revLock == sp.sha256(params.secret)"; # string : @storage
                    FAILWITH;   # FAILED
                  }; # @storage
                # sp.send(self.data.merchAddr, self.data.custBal) # @storage
                DUP;        # @storage : @storage
                CAR;        # pair (pair (bls12_381_fr %chanID) (pair (address %custAddr) (mutez %custBal))) (pair (pair (mutez %custFunding) (key %custPk)) (pair (timestamp %delayExpiry) (address %merchAddr))) : @storage
                CDR;        # pair (pair (mutez %custFunding) (key %custPk)) (pair (timestamp %delayExpiry) (address %merchAddr)) : @storage
                CDR;        # pair (timestamp %delayExpiry) (address %merchAddr) : @storage
                CDR;        # address : @storage
                CONTRACT unit; # option (contract unit) : @storage
                IF_SOME
                  {}
                  {
                    PUSH int 178; # int : @storage
                    FAILWITH;   # FAILED
                  }; # @some : @storage
                NIL operation; # list operation : @some : @storage
                SWAP;       # @some : list operation : @storage
                DIG 2;      # @storage : @some : list operation
                DUP;        # @storage : @storage : @some : list operation
                DUG 3;      # @storage : @some : list operation : @storage
                CAR;        # pair (pair (bls12_381_fr %chanID) (pair (address %custAddr) (mutez %custBal))) (pair (pair (mutez %custFunding) (key %custPk)) (pair (timestamp %delayExpiry) (address %merchAddr))) : @some : list operation : @storage
                CAR;        # pair (bls12_381_fr %chanID) (pair (address %custAddr) (mutez %custBal)) : @some : list operation : @storage
                CDR;        # pair (address %custAddr) (mutez %custBal) : @some : list operation : @storage
                CDR;        # mutez : @some : list operation : @storage
                UNIT;       # unit : mutez : @some : list operation : @storage
                TRANSFER_TOKENS; # operation : list operation : @storage
                CONS;       # list operation : @storage
                SWAP;       # @storage : list operation
                # self.data.custBal = sp.tez(0) # @storage : list operation
                DUP;        # @storage : @storage : list operation
                CDR;        # pair (pair (mutez %merchBal) (pair (mutez %merchFunding) (key %merchPk))) (pair (pair (address %pssigContract) (bytes %revLock)) (pair (int %selfDelay) (string %status))) : @storage : list operation
                SWAP;       # @storage : pair (pair (mutez %merchBal) (pair (mutez %merchFunding) (key %merchPk))) (pair (pair (address %pssigContract) (bytes %revLock)) (pair (int %selfDelay) (string %status))) : list operation
                CAR;        # pair (pair (bls12_381_fr %chanID) (pair (address %custAddr) (mutez %custBal))) (pair (pair (mutez %custFunding) (key %custPk)) (pair (timestamp %delayExpiry) (address %merchAddr))) : pair (pair (mutez %merchBal) (pair (mutez %merchFunding) (key %merchPk))) (pair (pair (address %pssigContract) (bytes %revLock)) (pair (int %selfDelay) (string %status))) : list operation
                DUP;        # pair (pair (bls12_381_fr %chanID) (pair (address %custAddr) (mutez %custBal))) (pair (pair (mutez %custFunding) (key %custPk)) (pair (timestamp %delayExpiry) (address %merchAddr))) : pair (pair (bls12_381_fr %chanID) (pair (address %custAddr) (mutez %custBal))) (pair (pair (mutez %custFunding) (key %custPk)) (pair (timestamp %delayExpiry) (address %merchAddr))) : pair (pair (mutez %merchBal) (pair (mutez %merchFunding) (key %merchPk))) (pair (pair (address %pssigContract) (bytes %revLock)) (pair (int %selfDelay) (string %status))) : list operation
                CDR;        # pair (pair (mutez %custFunding) (key %custPk)) (pair (timestamp %delayExpiry) (address %merchAddr)) : pair (pair (bls12_381_fr %chanID) (pair (address %custAddr) (mutez %custBal))) (pair (pair (mutez %custFunding) (key %custPk)) (pair (timestamp %delayExpiry) (address %merchAddr))) : pair (pair (mutez %merchBal) (pair (mutez %merchFunding) (key %merchPk))) (pair (pair (address %pssigContract) (bytes %revLock)) (pair (int %selfDelay) (string %status))) : list operation
                SWAP;       # pair (pair (bls12_381_fr %chanID) (pair (address %custAddr) (mutez %custBal))) (pair (pair (mutez %custFunding) (key %custPk)) (pair (timestamp %delayExpiry) (address %merchAddr))) : pair (pair (mutez %custFunding) (key %custPk)) (pair (timestamp %delayExpiry) (address %merchAddr)) : pair (pair (mutez %merchBal) (pair (mutez %merchFunding) (key %merchPk))) (pair (pair (address %pssigContract) (bytes %revLock)) (pair (int %selfDelay) (string %status))) : list operation
                CAR;        # pair (bls12_381_fr %chanID) (pair (address %custAddr) (mutez %custBal)) : pair (pair (mutez %custFunding) (key %custPk)) (pair (timestamp %delayExpiry) (address %merchAddr)) : pair (pair (mutez %merchBal) (pair (mutez %merchFunding) (key %merchPk))) (pair (pair (address %pssigContract) (bytes %revLock)) (pair (int %selfDelay) (string %status))) : list operation
                DUP;        # pair (bls12_381_fr %chanID) (pair (address %custAddr) (mutez %custBal)) : pair (bls12_381_fr %chanID) (pair (address %custAddr) (mutez %custBal)) : pair (pair (mutez %custFunding) (key %custPk)) (pair (timestamp %delayExpiry) (address %merchAddr)) : pair (pair (mutez %merchBal) (pair (mutez %merchFunding) (key %merchPk))) (pair (pair (address %pssigContract) (bytes %revLock)) (pair (int %selfDelay) (string %status))) : list operation
                CAR;        # bls12_381_fr : pair (bls12_381_fr %chanID) (pair (address %custAddr) (mutez %custBal)) : pair (pair (mutez %custFunding) (key %custPk)) (pair (timestamp %delayExpiry) (address %merchAddr)) : pair (pair (mutez %merchBal) (pair (mutez %merchFunding) (key %merchPk))) (pair (pair (address %pssigContract) (bytes %revLock)) (pair (int %selfDelay) (string %status))) : list operation
                SWAP;       # pair (bls12_381_fr %chanID) (pair (address %custAddr) (mutez %custBal)) : bls12_381_fr : pair (pair (mutez %custFunding) (key %custPk)) (pair (timestamp %delayExpiry) (address %merchAddr)) : pair (pair (mutez %merchBal) (pair (mutez %merchFunding) (key %merchPk))) (pair (pair (address %pssigContract) (bytes %revLock)) (pair (int %selfDelay) (string %status))) : list operation
                CDR;        # pair (address %custAddr) (mutez %custBal) : bls12_381_fr : pair (pair (mutez %custFunding) (key %custPk)) (pair (timestamp %delayExpiry) (address %merchAddr)) : pair (pair (mutez %merchBal) (pair (mutez %merchFunding) (key %merchPk))) (pair (pair (address %pssigContract) (bytes %revLock)) (pair (int %selfDelay) (string %status))) : list operation
                CAR;        # address : bls12_381_fr : pair (pair (mutez %custFunding) (key %custPk)) (pair (timestamp %delayExpiry) (address %merchAddr)) : pair (pair (mutez %merchBal) (pair (mutez %merchFunding) (key %merchPk))) (pair (pair (address %pssigContract) (bytes %revLock)) (pair (int %selfDelay) (string %status))) : list operation
                PUSH mutez 0; # mutez : address : bls12_381_fr : pair (pair (mutez %custFunding) (key %custPk)) (pair (timestamp %delayExpiry) (address %merchAddr)) : pair (pair (mutez %merchBal) (pair (mutez %merchFunding) (key %merchPk))) (pair (pair (address %pssigContract) (bytes %revLock)) (pair (int %selfDelay) (string %status))) : list operation
                SWAP;       # address : mutez : bls12_381_fr : pair (pair (mutez %custFunding) (key %custPk)) (pair (timestamp %delayExpiry) (address %merchAddr)) : pair (pair (mutez %merchBal) (pair (mutez %merchFunding) (key %merchPk))) (pair (pair (address %pssigContract) (bytes %revLock)) (pair (int %selfDelay) (string %status))) : list operation
                PAIR;       # pair address mutez : bls12_381_fr : pair (pair (mutez %custFunding) (key %custPk)) (pair (timestamp %delayExpiry) (address %merchAddr)) : pair (pair (mutez %merchBal) (pair (mutez %merchFunding) (key %merchPk))) (pair (pair (address %pssigContract) (bytes %revLock)) (pair (int %selfDelay) (string %status))) : list operation
                SWAP;       # bls12_381_fr : pair address mutez : pair (pair (mutez %custFunding) (key %custPk)) (pair (timestamp %delayExpiry) (address %merchAddr)) : pair (pair (mutez %merchBal) (pair (mutez %merchFunding) (key %merchPk))) (pair (pair (address %pssigContract) (bytes %revLock)) (pair (int %selfDelay) (string %status))) : list operation
                PAIR;       # pair bls12_381_fr (pair address mutez) : pair (pair (mutez %custFunding) (key %custPk)) (pair (timestamp %delayExpiry) (address %merchAddr)) : pair (pair (mutez %merchBal) (pair (mutez %merchFunding) (key %merchPk))) (pair (pair (address %pssigContract) (bytes %revLock)) (pair (int %selfDelay) (string %status))) : list operation
                PAIR;       # pair (pair bls12_381_fr (pair address mutez)) (pair (pair (mutez %custFunding) (key %custPk)) (pair (timestamp %delayExpiry) (address %merchAddr))) : pair (pair (mutez %merchBal) (pair (mutez %merchFunding) (key %merchPk))) (pair (pair (address %pssigContract) (bytes %revLock)) (pair (int %selfDelay) (string %status))) : list operation
                PAIR;       # pair (pair (pair bls12_381_fr (pair address mutez)) (pair (pair (mutez %custFunding) (key %custPk)) (pair (timestamp %delayExpiry) (address %merchAddr)))) (pair (pair (mutez %merchBal) (pair (mutez %merchFunding) (key %merchPk))) (pair (pair (address %pssigContract) (bytes %revLock)) (pair (int %selfDelay) (string %status)))) : list operation
                # self.data.status = 'closed' # pair (pair (pair bls12_381_fr (pair address mutez)) (pair (pair (mutez %custFunding) (key %custPk)) (pair (timestamp %delayExpiry) (address %merchAddr)))) (pair (pair (mutez %merchBal) (pair (mutez %merchFunding) (key %merchPk))) (pair (pair (address %pssigContract) (bytes %revLock)) (pair (int %selfDelay) (string %status)))) : list operation
                DUP;        # pair (pair (pair bls12_381_fr (pair address mutez)) (pair (pair (mutez %custFunding) (key %custPk)) (pair (timestamp %delayExpiry) (address %merchAddr)))) (pair (pair (mutez %merchBal) (pair (mutez %merchFunding) (key %merchPk))) (pair (pair (address %pssigContract) (bytes %revLock)) (pair (int %selfDelay) (string %status)))) : pair (pair (pair bls12_381_fr (pair address mutez)) (pair (pair (mutez %custFunding) (key %custPk)) (pair (timestamp %delayExpiry) (address %merchAddr)))) (pair (pair (mutez %merchBal) (pair (mutez %merchFunding) (key %merchPk))) (pair (pair (address %pssigContract) (bytes %revLock)) (pair (int %selfDelay) (string %status)))) : list operation
                CAR;        # pair (pair bls12_381_fr (pair address mutez)) (pair (pair (mutez %custFunding) (key %custPk)) (pair (timestamp %delayExpiry) (address %merchAddr))) : pair (pair (pair bls12_381_fr (pair address mutez)) (pair (pair (mutez %custFunding) (key %custPk)) (pair (timestamp %delayExpiry) (address %merchAddr)))) (pair (pair (mutez %merchBal) (pair (mutez %merchFunding) (key %merchPk))) (pair (pair (address %pssigContract) (bytes %revLock)) (pair (int %selfDelay) (string %status)))) : list operation
                SWAP;       # pair (pair (pair bls12_381_fr (pair address mutez)) (pair (pair (mutez %custFunding) (key %custPk)) (pair (timestamp %delayExpiry) (address %merchAddr)))) (pair (pair (mutez %merchBal) (pair (mutez %merchFunding) (key %merchPk))) (pair (pair (address %pssigContract) (bytes %revLock)) (pair (int %selfDelay) (string %status)))) : pair (pair bls12_381_fr (pair address mutez)) (pair (pair (mutez %custFunding) (key %custPk)) (pair (timestamp %delayExpiry) (address %merchAddr))) : list operation
                CDR;        # pair (pair (mutez %merchBal) (pair (mutez %merchFunding) (key %merchPk))) (pair (pair (address %pssigContract) (bytes %revLock)) (pair (int %selfDelay) (string %status))) : pair (pair bls12_381_fr (pair address mutez)) (pair (pair (mutez %custFunding) (key %custPk)) (pair (timestamp %delayExpiry) (address %merchAddr))) : list operation
                DUP;        # pair (pair (mutez %merchBal) (pair (mutez %merchFunding) (key %merchPk))) (pair (pair (address %pssigContract) (bytes %revLock)) (pair (int %selfDelay) (string %status))) : pair (pair (mutez %merchBal) (pair (mutez %merchFunding) (key %merchPk))) (pair (pair (address %pssigContract) (bytes %revLock)) (pair (int %selfDelay) (string %status))) : pair (pair bls12_381_fr (pair address mutez)) (pair (pair (mutez %custFunding) (key %custPk)) (pair (timestamp %delayExpiry) (address %merchAddr))) : list operation
                CAR;        # pair (mutez %merchBal) (pair (mutez %merchFunding) (key %merchPk)) : pair (pair (mutez %merchBal) (pair (mutez %merchFunding) (key %merchPk))) (pair (pair (address %pssigContract) (bytes %revLock)) (pair (int %selfDelay) (string %status))) : pair (pair bls12_381_fr (pair address mutez)) (pair (pair (mutez %custFunding) (key %custPk)) (pair (timestamp %delayExpiry) (address %merchAddr))) : list operation
                SWAP;       # pair (pair (mutez %merchBal) (pair (mutez %merchFunding) (key %merchPk))) (pair (pair (address %pssigContract) (bytes %revLock)) (pair (int %selfDelay) (string %status))) : pair (mutez %merchBal) (pair (mutez %merchFunding) (key %merchPk)) : pair (pair bls12_381_fr (pair address mutez)) (pair (pair (mutez %custFunding) (key %custPk)) (pair (timestamp %delayExpiry) (address %merchAddr))) : list operation
                CDR;        # pair (pair (address %pssigContract) (bytes %revLock)) (pair (int %selfDelay) (string %status)) : pair (mutez %merchBal) (pair (mutez %merchFunding) (key %merchPk)) : pair (pair bls12_381_fr (pair address mutez)) (pair (pair (mutez %custFunding) (key %custPk)) (pair (timestamp %delayExpiry) (address %merchAddr))) : list operation
                DUP;        # pair (pair (address %pssigContract) (bytes %revLock)) (pair (int %selfDelay) (string %status)) : pair (pair (address %pssigContract) (bytes %revLock)) (pair (int %selfDelay) (string %status)) : pair (mutez %merchBal) (pair (mutez %merchFunding) (key %merchPk)) : pair (pair bls12_381_fr (pair address mutez)) (pair (pair (mutez %custFunding) (key %custPk)) (pair (timestamp %delayExpiry) (address %merchAddr))) : list operation
                CAR;        # pair (address %pssigContract) (bytes %revLock) : pair (pair (address %pssigContract) (bytes %revLock)) (pair (int %selfDelay) (string %status)) : pair (mutez %merchBal) (pair (mutez %merchFunding) (key %merchPk)) : pair (pair bls12_381_fr (pair address mutez)) (pair (pair (mutez %custFunding) (key %custPk)) (pair (timestamp %delayExpiry) (address %merchAddr))) : list operation
                SWAP;       # pair (pair (address %pssigContract) (bytes %revLock)) (pair (int %selfDelay) (string %status)) : pair (address %pssigContract) (bytes %revLock) : pair (mutez %merchBal) (pair (mutez %merchFunding) (key %merchPk)) : pair (pair bls12_381_fr (pair address mutez)) (pair (pair (mutez %custFunding) (key %custPk)) (pair (timestamp %delayExpiry) (address %merchAddr))) : list operation
                CDR;        # pair (int %selfDelay) (string %status) : pair (address %pssigContract) (bytes %revLock) : pair (mutez %merchBal) (pair (mutez %merchFunding) (key %merchPk)) : pair (pair bls12_381_fr (pair address mutez)) (pair (pair (mutez %custFunding) (key %custPk)) (pair (timestamp %delayExpiry) (address %merchAddr))) : list operation
                CAR;        # int : pair (address %pssigContract) (bytes %revLock) : pair (mutez %merchBal) (pair (mutez %merchFunding) (key %merchPk)) : pair (pair bls12_381_fr (pair address mutez)) (pair (pair (mutez %custFunding) (key %custPk)) (pair (timestamp %delayExpiry) (address %merchAddr))) : list operation
                PUSH string "closed"; # string : int : pair (address %pssigContract) (bytes %revLock) : pair (mutez %merchBal) (pair (mutez %merchFunding) (key %merchPk)) : pair (pair bls12_381_fr (pair address mutez)) (pair (pair (mutez %custFunding) (key %custPk)) (pair (timestamp %delayExpiry) (address %merchAddr))) : list operation
                SWAP;       # int : string : pair (address %pssigContract) (bytes %revLock) : pair (mutez %merchBal) (pair (mutez %merchFunding) (key %merchPk)) : pair (pair bls12_381_fr (pair address mutez)) (pair (pair (mutez %custFunding) (key %custPk)) (pair (timestamp %delayExpiry) (address %merchAddr))) : list operation
                PAIR;       # pair int string : pair (address %pssigContract) (bytes %revLock) : pair (mutez %merchBal) (pair (mutez %merchFunding) (key %merchPk)) : pair (pair bls12_381_fr (pair address mutez)) (pair (pair (mutez %custFunding) (key %custPk)) (pair (timestamp %delayExpiry) (address %merchAddr))) : list operation
                SWAP;       # pair (address %pssigContract) (bytes %revLock) : pair int string : pair (mutez %merchBal) (pair (mutez %merchFunding) (key %merchPk)) : pair (pair bls12_381_fr (pair address mutez)) (pair (pair (mutez %custFunding) (key %custPk)) (pair (timestamp %delayExpiry) (address %merchAddr))) : list operation
                PAIR;       # pair (pair (address %pssigContract) (bytes %revLock)) (pair int string) : pair (mutez %merchBal) (pair (mutez %merchFunding) (key %merchPk)) : pair (pair bls12_381_fr (pair address mutez)) (pair (pair (mutez %custFunding) (key %custPk)) (pair (timestamp %delayExpiry) (address %merchAddr))) : list operation
                SWAP;       # pair (mutez %merchBal) (pair (mutez %merchFunding) (key %merchPk)) : pair (pair (address %pssigContract) (bytes %revLock)) (pair int string) : pair (pair bls12_381_fr (pair address mutez)) (pair (pair (mutez %custFunding) (key %custPk)) (pair (timestamp %delayExpiry) (address %merchAddr))) : list operation
                PAIR;       # pair (pair (mutez %merchBal) (pair (mutez %merchFunding) (key %merchPk))) (pair (pair (address %pssigContract) (bytes %revLock)) (pair int string)) : pair (pair bls12_381_fr (pair address mutez)) (pair (pair (mutez %custFunding) (key %custPk)) (pair (timestamp %delayExpiry) (address %merchAddr))) : list operation
                SWAP;       # pair (pair bls12_381_fr (pair address mutez)) (pair (pair (mutez %custFunding) (key %custPk)) (pair (timestamp %delayExpiry) (address %merchAddr))) : pair (pair (mutez %merchBal) (pair (mutez %merchFunding) (key %merchPk))) (pair (pair (address %pssigContract) (bytes %revLock)) (pair int string)) : list operation
                PAIR;       # pair (pair (pair bls12_381_fr (pair address mutez)) (pair (pair (mutez %custFunding) (key %custPk)) (pair (timestamp %delayExpiry) (address %merchAddr)))) (pair (pair (mutez %merchBal) (pair (mutez %merchFunding) (key %merchPk))) (pair (pair (address %pssigContract) (bytes %revLock)) (pair int string))) : list operation
                SWAP;       # list operation : pair (pair (pair bls12_381_fr (pair address mutez)) (pair (pair (mutez %custFunding) (key %custPk)) (pair (timestamp %delayExpiry) (address %merchAddr)))) (pair (pair (mutez %merchBal) (pair (mutez %merchFunding) (key %merchPk))) (pair (pair (address %pssigContract) (bytes %revLock)) (pair int string)))
              }; # list operation : pair (pair (pair (bls12_381_fr %chanID) (pair (address %custAddr) (mutez %custBal))) (pair (pair (mutez %custFunding) (key %custPk)) (pair timestamp address))) (pair (pair (mutez %merchBal) (pair (mutez %merchFunding) (key %merchPk))) (pair (pair (address %pssigContract) (bytes %revLock)) (pair int string)))
          }
          {
            IF_LEFT
              {
                # == mutualClose ==
                # sp.verify(self.data.status == 'open') # @parameter%mutualClose : @storage
                PUSH string "open"; # string : @parameter%mutualClose : @storage
                DIG 2;      # @storage : string : @parameter%mutualClose
                DUP;        # @storage : @storage : string : @parameter%mutualClose
                DUG 3;      # @storage : string : @parameter%mutualClose : @storage
                CDR;        # pair (pair (mutez %merchBal) (pair (mutez %merchFunding) (key %merchPk))) (pair (pair (address %pssigContract) (bytes %revLock)) (pair (int %selfDelay) (string %status))) : string : @parameter%mutualClose : @storage
                CDR;        # pair (pair (address %pssigContract) (bytes %revLock)) (pair (int %selfDelay) (string %status)) : string : @parameter%mutualClose : @storage
                CDR;        # pair (int %selfDelay) (string %status) : string : @parameter%mutualClose : @storage
                CDR;        # string : string : @parameter%mutualClose : @storage
                COMPARE;    # int : @parameter%mutualClose : @storage
                EQ;         # bool : @parameter%mutualClose : @storage
                IF
                  {}
                  {
                    PUSH string "WrongCondition: self.data.status == 'open'"; # string : @parameter%mutualClose : @storage
                    FAILWITH;   # FAILED
                  }; # @parameter%mutualClose : @storage
                # sp.verify(sp.check_signature(self.data.custPk, params.custSig, sp.pack(sp.record(chanID = self.data.chanID, custAddr = self.data.custAddr, custBal = params.custBal, merchAddr = self.data.merchAddr, merchBal = params.merchBal)))) # @parameter%mutualClose : @storage
                DUP;        # @parameter%mutualClose : @parameter%mutualClose : @storage
                CDR;        # pair (mutez %merchBal) (signature %merchSig) : @parameter%mutualClose : @storage
                CAR;        # mutez : @parameter%mutualClose : @storage
                DIG 2;      # @storage : mutez : @parameter%mutualClose
                DUP;        # @storage : @storage : mutez : @parameter%mutualClose
                DUG 3;      # @storage : mutez : @parameter%mutualClose : @storage
                CAR;        # pair (pair (bls12_381_fr %chanID) (pair (address %custAddr) (mutez %custBal))) (pair (pair (mutez %custFunding) (key %custPk)) (pair (timestamp %delayExpiry) (address %merchAddr))) : mutez : @parameter%mutualClose : @storage
                CDR;        # pair (pair (mutez %custFunding) (key %custPk)) (pair (timestamp %delayExpiry) (address %merchAddr)) : mutez : @parameter%mutualClose : @storage
                CDR;        # pair (timestamp %delayExpiry) (address %merchAddr) : mutez : @parameter%mutualClose : @storage
                CDR;        # address : mutez : @parameter%mutualClose : @storage
                PAIR %merchAddr %merchBal; # pair (address %merchAddr) (mutez %merchBal) : @parameter%mutualClose : @storage
                SWAP;       # @parameter%mutualClose : pair (address %merchAddr) (mutez %merchBal) : @storage
                DUP;        # @parameter%mutualClose : @parameter%mutualClose : pair (address %merchAddr) (mutez %merchBal) : @storage
                DUG 2;      # @parameter%mutualClose : pair (address %merchAddr) (mutez %merchBal) : @parameter%mutualClose : @storage
                CAR;        # pair (mutez %custBal) (signature %custSig) : pair (address %merchAddr) (mutez %merchBal) : @parameter%mutualClose : @storage
                CAR;        # mutez : pair (address %merchAddr) (mutez %merchBal) : @parameter%mutualClose : @storage
                PAIR %custBal; # pair (mutez %custBal) (pair (address %merchAddr) (mutez %merchBal)) : @parameter%mutualClose : @storage
                DIG 2;      # @storage : pair (mutez %custBal) (pair (address %merchAddr) (mutez %merchBal)) : @parameter%mutualClose
                DUP;        # @storage : @storage : pair (mutez %custBal) (pair (address %merchAddr) (mutez %merchBal)) : @parameter%mutualClose
                CAR;        # pair (pair (bls12_381_fr %chanID) (pair (address %custAddr) (mutez %custBal))) (pair (pair (mutez %custFunding) (key %custPk)) (pair (timestamp %delayExpiry) (address %merchAddr))) : @storage : pair (mutez %custBal) (pair (address %merchAddr) (mutez %merchBal)) : @parameter%mutualClose
                CAR;        # pair (bls12_381_fr %chanID) (pair (address %custAddr) (mutez %custBal)) : @storage : pair (mutez %custBal) (pair (address %merchAddr) (mutez %merchBal)) : @parameter%mutualClose
                CDR;        # pair (address %custAddr) (mutez %custBal) : @storage : pair (mutez %custBal) (pair (address %merchAddr) (mutez %merchBal)) : @parameter%mutualClose
                CAR;        # address : @storage : pair (mutez %custBal) (pair (address %merchAddr) (mutez %merchBal)) : @parameter%mutualClose
                SWAP;       # @storage : address : pair (mutez %custBal) (pair (address %merchAddr) (mutez %merchBal)) : @parameter%mutualClose
                DUP;        # @storage : @storage : address : pair (mutez %custBal) (pair (address %merchAddr) (mutez %merchBal)) : @parameter%mutualClose
                DUG 4;      # @storage : address : pair (mutez %custBal) (pair (address %merchAddr) (mutez %merchBal)) : @parameter%mutualClose : @storage
                CAR;        # pair (pair (bls12_381_fr %chanID) (pair (address %custAddr) (mutez %custBal))) (pair (pair (mutez %custFunding) (key %custPk)) (pair (timestamp %delayExpiry) (address %merchAddr))) : address : pair (mutez %custBal) (pair (address %merchAddr) (mutez %merchBal)) : @parameter%mutualClose : @storage
                CAR;        # pair (bls12_381_fr %chanID) (pair (address %custAddr) (mutez %custBal)) : address : pair (mutez %custBal) (pair (address %merchAddr) (mutez %merchBal)) : @parameter%mutualClose : @storage
                CAR;        # bls12_381_fr : address : pair (mutez %custBal) (pair (address %merchAddr) (mutez %merchBal)) : @parameter%mutualClose : @storage
                PAIR %chanID %custAddr; # pair (bls12_381_fr %chanID) (address %custAddr) : pair (mutez %custBal) (pair (address %merchAddr) (mutez %merchBal)) : @parameter%mutualClose : @storage
                PAIR;       # pair (pair (bls12_381_fr %chanID) (address %custAddr)) (pair (mutez %custBal) (pair (address %merchAddr) (mutez %merchBal))) : @parameter%mutualClose : @storage
                PACK;       # bytes : @parameter%mutualClose : @storage
                SWAP;       # @parameter%mutualClose : bytes : @storage
                DUP;        # @parameter%mutualClose : @parameter%mutualClose : bytes : @storage
                DUG 2;      # @parameter%mutualClose : bytes : @parameter%mutualClose : @storage
                CAR;        # pair (mutez %custBal) (signature %custSig) : bytes : @parameter%mutualClose : @storage
                CDR;        # signature : bytes : @parameter%mutualClose : @storage
                DIG 3;      # @storage : signature : bytes : @parameter%mutualClose
                DUP;        # @storage : @storage : signature : bytes : @parameter%mutualClose
                DUG 4;      # @storage : signature : bytes : @parameter%mutualClose : @storage
                CAR;        # pair (pair (bls12_381_fr %chanID) (pair (address %custAddr) (mutez %custBal))) (pair (pair (mutez %custFunding) (key %custPk)) (pair (timestamp %delayExpiry) (address %merchAddr))) : signature : bytes : @parameter%mutualClose : @storage
                CDR;        # pair (pair (mutez %custFunding) (key %custPk)) (pair (timestamp %delayExpiry) (address %merchAddr)) : signature : bytes : @parameter%mutualClose : @storage
                CAR;        # pair (mutez %custFunding) (key %custPk) : signature : bytes : @parameter%mutualClose : @storage
                CDR;        # key : signature : bytes : @parameter%mutualClose : @storage
                CHECK_SIGNATURE; # bool : @parameter%mutualClose : @storage
                IF
                  {}
                  {
                    PUSH string "WrongCondition: sp.check_signature(self.data.custPk, params.custSig, sp.pack(sp.record(chanID = self.data.chanID, custAddr = self.data.custAddr, custBal = params.custBal, merchAddr = self.data.merchAddr, merchBal = params.merchBal)))"; # string : @parameter%mutualClose : @storage
                    FAILWITH;   # FAILED
                  }; # @parameter%mutualClose : @storage
                # sp.verify(sp.check_signature(self.data.merchPk, params.merchSig, sp.pack(sp.record(chanID = self.data.chanID, custAddr = self.data.custAddr, custBal = params.custBal, merchAddr = self.data.merchAddr, merchBal = params.merchBal)))) # @parameter%mutualClose : @storage
                DUP;        # @parameter%mutualClose : @parameter%mutualClose : @storage
                CDR;        # pair (mutez %merchBal) (signature %merchSig) : @parameter%mutualClose : @storage
                CAR;        # mutez : @parameter%mutualClose : @storage
                DIG 2;      # @storage : mutez : @parameter%mutualClose
                DUP;        # @storage : @storage : mutez : @parameter%mutualClose
                DUG 3;      # @storage : mutez : @parameter%mutualClose : @storage
                CAR;        # pair (pair (bls12_381_fr %chanID) (pair (address %custAddr) (mutez %custBal))) (pair (pair (mutez %custFunding) (key %custPk)) (pair (timestamp %delayExpiry) (address %merchAddr))) : mutez : @parameter%mutualClose : @storage
                CDR;        # pair (pair (mutez %custFunding) (key %custPk)) (pair (timestamp %delayExpiry) (address %merchAddr)) : mutez : @parameter%mutualClose : @storage
                CDR;        # pair (timestamp %delayExpiry) (address %merchAddr) : mutez : @parameter%mutualClose : @storage
                CDR;        # address : mutez : @parameter%mutualClose : @storage
                PAIR %merchAddr %merchBal; # pair (address %merchAddr) (mutez %merchBal) : @parameter%mutualClose : @storage
                SWAP;       # @parameter%mutualClose : pair (address %merchAddr) (mutez %merchBal) : @storage
                DUP;        # @parameter%mutualClose : @parameter%mutualClose : pair (address %merchAddr) (mutez %merchBal) : @storage
                DUG 2;      # @parameter%mutualClose : pair (address %merchAddr) (mutez %merchBal) : @parameter%mutualClose : @storage
                CAR;        # pair (mutez %custBal) (signature %custSig) : pair (address %merchAddr) (mutez %merchBal) : @parameter%mutualClose : @storage
                CAR;        # mutez : pair (address %merchAddr) (mutez %merchBal) : @parameter%mutualClose : @storage
                PAIR %custBal; # pair (mutez %custBal) (pair (address %merchAddr) (mutez %merchBal)) : @parameter%mutualClose : @storage
                DIG 2;      # @storage : pair (mutez %custBal) (pair (address %merchAddr) (mutez %merchBal)) : @parameter%mutualClose
                DUP;        # @storage : @storage : pair (mutez %custBal) (pair (address %merchAddr) (mutez %merchBal)) : @parameter%mutualClose
                CAR;        # pair (pair (bls12_381_fr %chanID) (pair (address %custAddr) (mutez %custBal))) (pair (pair (mutez %custFunding) (key %custPk)) (pair (timestamp %delayExpiry) (address %merchAddr))) : @storage : pair (mutez %custBal) (pair (address %merchAddr) (mutez %merchBal)) : @parameter%mutualClose
                CAR;        # pair (bls12_381_fr %chanID) (pair (address %custAddr) (mutez %custBal)) : @storage : pair (mutez %custBal) (pair (address %merchAddr) (mutez %merchBal)) : @parameter%mutualClose
                CDR;        # pair (address %custAddr) (mutez %custBal) : @storage : pair (mutez %custBal) (pair (address %merchAddr) (mutez %merchBal)) : @parameter%mutualClose
                CAR;        # address : @storage : pair (mutez %custBal) (pair (address %merchAddr) (mutez %merchBal)) : @parameter%mutualClose
                SWAP;       # @storage : address : pair (mutez %custBal) (pair (address %merchAddr) (mutez %merchBal)) : @parameter%mutualClose
                DUP;        # @storage : @storage : address : pair (mutez %custBal) (pair (address %merchAddr) (mutez %merchBal)) : @parameter%mutualClose
                DUG 4;      # @storage : address : pair (mutez %custBal) (pair (address %merchAddr) (mutez %merchBal)) : @parameter%mutualClose : @storage
                CAR;        # pair (pair (bls12_381_fr %chanID) (pair (address %custAddr) (mutez %custBal))) (pair (pair (mutez %custFunding) (key %custPk)) (pair (timestamp %delayExpiry) (address %merchAddr))) : address : pair (mutez %custBal) (pair (address %merchAddr) (mutez %merchBal)) : @parameter%mutualClose : @storage
                CAR;        # pair (bls12_381_fr %chanID) (pair (address %custAddr) (mutez %custBal)) : address : pair (mutez %custBal) (pair (address %merchAddr) (mutez %merchBal)) : @parameter%mutualClose : @storage
                CAR;        # bls12_381_fr : address : pair (mutez %custBal) (pair (address %merchAddr) (mutez %merchBal)) : @parameter%mutualClose : @storage
                PAIR %chanID %custAddr; # pair (bls12_381_fr %chanID) (address %custAddr) : pair (mutez %custBal) (pair (address %merchAddr) (mutez %merchBal)) : @parameter%mutualClose : @storage
                PAIR;       # pair (pair (bls12_381_fr %chanID) (address %custAddr)) (pair (mutez %custBal) (pair (address %merchAddr) (mutez %merchBal))) : @parameter%mutualClose : @storage
                PACK;       # bytes : @parameter%mutualClose : @storage
                SWAP;       # @parameter%mutualClose : bytes : @storage
                DUP;        # @parameter%mutualClose : @parameter%mutualClose : bytes : @storage
                DUG 2;      # @parameter%mutualClose : bytes : @parameter%mutualClose : @storage
                CDR;        # pair (mutez %merchBal) (signature %merchSig) : bytes : @parameter%mutualClose : @storage
                CDR;        # signature : bytes : @parameter%mutualClose : @storage
                DIG 3;      # @storage : signature : bytes : @parameter%mutualClose
                DUP;        # @storage : @storage : signature : bytes : @parameter%mutualClose
                DUG 4;      # @storage : signature : bytes : @parameter%mutualClose : @storage
                CDR;        # pair (pair (mutez %merchBal) (pair (mutez %merchFunding) (key %merchPk))) (pair (pair (address %pssigContract) (bytes %revLock)) (pair (int %selfDelay) (string %status))) : signature : bytes : @parameter%mutualClose : @storage
                CAR;        # pair (mutez %merchBal) (pair (mutez %merchFunding) (key %merchPk)) : signature : bytes : @parameter%mutualClose : @storage
                CDR;        # pair (mutez %merchFunding) (key %merchPk) : signature : bytes : @parameter%mutualClose : @storage
                CDR;        # key : signature : bytes : @parameter%mutualClose : @storage
                CHECK_SIGNATURE; # bool : @parameter%mutualClose : @storage
                IF
                  {}
                  {
                    PUSH string "WrongCondition: sp.check_signature(self.data.merchPk, params.merchSig, sp.pack(sp.record(chanID = self.data.chanID, custAddr = self.data.custAddr, custBal = params.custBal, merchAddr = self.data.merchAddr, merchBal = params.merchBal)))"; # string : @parameter%mutualClose : @storage
                    FAILWITH;   # FAILED
                  }; # @parameter%mutualClose : @storage
                SWAP;       # @storage : @parameter%mutualClose
                # self.data.custBal = params.custBal # @storage : @parameter%mutualClose
                DUP;        # @storage : @storage : @parameter%mutualClose
                CDR;        # pair (pair (mutez %merchBal) (pair (mutez %merchFunding) (key %merchPk))) (pair (pair (address %pssigContract) (bytes %revLock)) (pair (int %selfDelay) (string %status))) : @storage : @parameter%mutualClose
                SWAP;       # @storage : pair (pair (mutez %merchBal) (pair (mutez %merchFunding) (key %merchPk))) (pair (pair (address %pssigContract) (bytes %revLock)) (pair (int %selfDelay) (string %status))) : @parameter%mutualClose
                CAR;        # pair (pair (bls12_381_fr %chanID) (pair (address %custAddr) (mutez %custBal))) (pair (pair (mutez %custFunding) (key %custPk)) (pair (timestamp %delayExpiry) (address %merchAddr))) : pair (pair (mutez %merchBal) (pair (mutez %merchFunding) (key %merchPk))) (pair (pair (address %pssigContract) (bytes %revLock)) (pair (int %selfDelay) (string %status))) : @parameter%mutualClose
                DUP;        # pair (pair (bls12_381_fr %chanID) (pair (address %custAddr) (mutez %custBal))) (pair (pair (mutez %custFunding) (key %custPk)) (pair (timestamp %delayExpiry) (address %merchAddr))) : pair (pair (bls12_381_fr %chanID) (pair (address %custAddr) (mutez %custBal))) (pair (pair (mutez %custFunding) (key %custPk)) (pair (timestamp %delayExpiry) (address %merchAddr))) : pair (pair (mutez %merchBal) (pair (mutez %merchFunding) (key %merchPk))) (pair (pair (address %pssigContract) (bytes %revLock)) (pair (int %selfDelay) (string %status))) : @parameter%mutualClose
                CDR;        # pair (pair (mutez %custFunding) (key %custPk)) (pair (timestamp %delayExpiry) (address %merchAddr)) : pair (pair (bls12_381_fr %chanID) (pair (address %custAddr) (mutez %custBal))) (pair (pair (mutez %custFunding) (key %custPk)) (pair (timestamp %delayExpiry) (address %merchAddr))) : pair (pair (mutez %merchBal) (pair (mutez %merchFunding) (key %merchPk))) (pair (pair (address %pssigContract) (bytes %revLock)) (pair (int %selfDelay) (string %status))) : @parameter%mutualClose
                SWAP;       # pair (pair (bls12_381_fr %chanID) (pair (address %custAddr) (mutez %custBal))) (pair (pair (mutez %custFunding) (key %custPk)) (pair (timestamp %delayExpiry) (address %merchAddr))) : pair (pair (mutez %custFunding) (key %custPk)) (pair (timestamp %delayExpiry) (address %merchAddr)) : pair (pair (mutez %merchBal) (pair (mutez %merchFunding) (key %merchPk))) (pair (pair (address %pssigContract) (bytes %revLock)) (pair (int %selfDelay) (string %status))) : @parameter%mutualClose
                CAR;        # pair (bls12_381_fr %chanID) (pair (address %custAddr) (mutez %custBal)) : pair (pair (mutez %custFunding) (key %custPk)) (pair (timestamp %delayExpiry) (address %merchAddr)) : pair (pair (mutez %merchBal) (pair (mutez %merchFunding) (key %merchPk))) (pair (pair (address %pssigContract) (bytes %revLock)) (pair (int %selfDelay) (string %status))) : @parameter%mutualClose
                DUP;        # pair (bls12_381_fr %chanID) (pair (address %custAddr) (mutez %custBal)) : pair (bls12_381_fr %chanID) (pair (address %custAddr) (mutez %custBal)) : pair (pair (mutez %custFunding) (key %custPk)) (pair (timestamp %delayExpiry) (address %merchAddr)) : pair (pair (mutez %merchBal) (pair (mutez %merchFunding) (key %merchPk))) (pair (pair (address %pssigContract) (bytes %revLock)) (pair (int %selfDelay) (string %status))) : @parameter%mutualClose
                CAR;        # bls12_381_fr : pair (bls12_381_fr %chanID) (pair (address %custAddr) (mutez %custBal)) : pair (pair (mutez %custFunding) (key %custPk)) (pair (timestamp %delayExpiry) (address %merchAddr)) : pair (pair (mutez %merchBal) (pair (mutez %merchFunding) (key %merchPk))) (pair (pair (address %pssigContract) (bytes %revLock)) (pair (int %selfDelay) (string %status))) : @parameter%mutualClose
                SWAP;       # pair (bls12_381_fr %chanID) (pair (address %custAddr) (mutez %custBal)) : bls12_381_fr : pair (pair (mutez %custFunding) (key %custPk)) (pair (timestamp %delayExpiry) (address %merchAddr)) : pair (pair (mutez %merchBal) (pair (mutez %merchFunding) (key %merchPk))) (pair (pair (address %pssigContract) (bytes %revLock)) (pair (int %selfDelay) (string %status))) : @parameter%mutualClose
                CDR;        # pair (address %custAddr) (mutez %custBal) : bls12_381_fr : pair (pair (mutez %custFunding) (key %custPk)) (pair (timestamp %delayExpiry) (address %merchAddr)) : pair (pair (mutez %merchBal) (pair (mutez %merchFunding) (key %merchPk))) (pair (pair (address %pssigContract) (bytes %revLock)) (pair (int %selfDelay) (string %status))) : @parameter%mutualClose
                CAR;        # address : bls12_381_fr : pair (pair (mutez %custFunding) (key %custPk)) (pair (timestamp %delayExpiry) (address %merchAddr)) : pair (pair (mutez %merchBal) (pair (mutez %merchFunding) (key %merchPk))) (pair (pair (address %pssigContract) (bytes %revLock)) (pair (int %selfDelay) (string %status))) : @parameter%mutualClose
                DIG 4;      # @parameter%mutualClose : address : bls12_381_fr : pair (pair (mutez %custFunding) (key %custPk)) (pair (timestamp %delayExpiry) (address %merchAddr)) : pair (pair (mutez %merchBal) (pair (mutez %merchFunding) (key %merchPk))) (pair (pair (address %pssigContract) (bytes %revLock)) (pair (int %selfDelay) (string %status)))
                DUP;        # @parameter%mutualClose : @parameter%mutualClose : address : bls12_381_fr : pair (pair (mutez %custFunding) (key %custPk)) (pair (timestamp %delayExpiry) (address %merchAddr)) : pair (pair (mutez %merchBal) (pair (mutez %merchFunding) (key %merchPk))) (pair (pair (address %pssigContract) (bytes %revLock)) (pair (int %selfDelay) (string %status)))
                DUG 5;      # @parameter%mutualClose : address : bls12_381_fr : pair (pair (mutez %custFunding) (key %custPk)) (pair (timestamp %delayExpiry) (address %merchAddr)) : pair (pair (mutez %merchBal) (pair (mutez %merchFunding) (key %merchPk))) (pair (pair (address %pssigContract) (bytes %revLock)) (pair (int %selfDelay) (string %status))) : @parameter%mutualClose
                CAR;        # pair (mutez %custBal) (signature %custSig) : address : bls12_381_fr : pair (pair (mutez %custFunding) (key %custPk)) (pair (timestamp %delayExpiry) (address %merchAddr)) : pair (pair (mutez %merchBal) (pair (mutez %merchFunding) (key %merchPk))) (pair (pair (address %pssigContract) (bytes %revLock)) (pair (int %selfDelay) (string %status))) : @parameter%mutualClose
                CAR;        # mutez : address : bls12_381_fr : pair (pair (mutez %custFunding) (key %custPk)) (pair (timestamp %delayExpiry) (address %merchAddr)) : pair (pair (mutez %merchBal) (pair (mutez %merchFunding) (key %merchPk))) (pair (pair (address %pssigContract) (bytes %revLock)) (pair (int %selfDelay) (string %status))) : @parameter%mutualClose
                SWAP;       # address : mutez : bls12_381_fr : pair (pair (mutez %custFunding) (key %custPk)) (pair (timestamp %delayExpiry) (address %merchAddr)) : pair (pair (mutez %merchBal) (pair (mutez %merchFunding) (key %merchPk))) (pair (pair (address %pssigContract) (bytes %revLock)) (pair (int %selfDelay) (string %status))) : @parameter%mutualClose
                PAIR;       # pair address mutez : bls12_381_fr : pair (pair (mutez %custFunding) (key %custPk)) (pair (timestamp %delayExpiry) (address %merchAddr)) : pair (pair (mutez %merchBal) (pair (mutez %merchFunding) (key %merchPk))) (pair (pair (address %pssigContract) (bytes %revLock)) (pair (int %selfDelay) (string %status))) : @parameter%mutualClose
                SWAP;       # bls12_381_fr : pair address mutez : pair (pair (mutez %custFunding) (key %custPk)) (pair (timestamp %delayExpiry) (address %merchAddr)) : pair (pair (mutez %merchBal) (pair (mutez %merchFunding) (key %merchPk))) (pair (pair (address %pssigContract) (bytes %revLock)) (pair (int %selfDelay) (string %status))) : @parameter%mutualClose
                PAIR;       # pair bls12_381_fr (pair address mutez) : pair (pair (mutez %custFunding) (key %custPk)) (pair (timestamp %delayExpiry) (address %merchAddr)) : pair (pair (mutez %merchBal) (pair (mutez %merchFunding) (key %merchPk))) (pair (pair (address %pssigContract) (bytes %revLock)) (pair (int %selfDelay) (string %status))) : @parameter%mutualClose
                PAIR;       # pair (pair bls12_381_fr (pair address mutez)) (pair (pair (mutez %custFunding) (key %custPk)) (pair (timestamp %delayExpiry) (address %merchAddr))) : pair (pair (mutez %merchBal) (pair (mutez %merchFunding) (key %merchPk))) (pair (pair (address %pssigContract) (bytes %revLock)) (pair (int %selfDelay) (string %status))) : @parameter%mutualClose
                PAIR;       # pair (pair (pair bls12_381_fr (pair address mutez)) (pair (pair (mutez %custFunding) (key %custPk)) (pair (timestamp %delayExpiry) (address %merchAddr)))) (pair (pair (mutez %merchBal) (pair (mutez %merchFunding) (key %merchPk))) (pair (pair (address %pssigContract) (bytes %revLock)) (pair (int %selfDelay) (string %status)))) : @parameter%mutualClose
                # self.data.merchBal = params.merchBal # pair (pair (pair bls12_381_fr (pair address mutez)) (pair (pair (mutez %custFunding) (key %custPk)) (pair (timestamp %delayExpiry) (address %merchAddr)))) (pair (pair (mutez %merchBal) (pair (mutez %merchFunding) (key %merchPk))) (pair (pair (address %pssigContract) (bytes %revLock)) (pair (int %selfDelay) (string %status)))) : @parameter%mutualClose
                DUP;        # pair (pair (pair bls12_381_fr (pair address mutez)) (pair (pair (mutez %custFunding) (key %custPk)) (pair (timestamp %delayExpiry) (address %merchAddr)))) (pair (pair (mutez %merchBal) (pair (mutez %merchFunding) (key %merchPk))) (pair (pair (address %pssigContract) (bytes %revLock)) (pair (int %selfDelay) (string %status)))) : pair (pair (pair bls12_381_fr (pair address mutez)) (pair (pair (mutez %custFunding) (key %custPk)) (pair (timestamp %delayExpiry) (address %merchAddr)))) (pair (pair (mutez %merchBal) (pair (mutez %merchFunding) (key %merchPk))) (pair (pair (address %pssigContract) (bytes %revLock)) (pair (int %selfDelay) (string %status)))) : @parameter%mutualClose
                CAR;        # pair (pair bls12_381_fr (pair address mutez)) (pair (pair (mutez %custFunding) (key %custPk)) (pair (timestamp %delayExpiry) (address %merchAddr))) : pair (pair (pair bls12_381_fr (pair address mutez)) (pair (pair (mutez %custFunding) (key %custPk)) (pair (timestamp %delayExpiry) (address %merchAddr)))) (pair (pair (mutez %merchBal) (pair (mutez %merchFunding) (key %merchPk))) (pair (pair (address %pssigContract) (bytes %revLock)) (pair (int %selfDelay) (string %status)))) : @parameter%mutualClose
                SWAP;       # pair (pair (pair bls12_381_fr (pair address mutez)) (pair (pair (mutez %custFunding) (key %custPk)) (pair (timestamp %delayExpiry) (address %merchAddr)))) (pair (pair (mutez %merchBal) (pair (mutez %merchFunding) (key %merchPk))) (pair (pair (address %pssigContract) (bytes %revLock)) (pair (int %selfDelay) (string %status)))) : pair (pair bls12_381_fr (pair address mutez)) (pair (pair (mutez %custFunding) (key %custPk)) (pair (timestamp %delayExpiry) (address %merchAddr))) : @parameter%mutualClose
                CDR;        # pair (pair (mutez %merchBal) (pair (mutez %merchFunding) (key %merchPk))) (pair (pair (address %pssigContract) (bytes %revLock)) (pair (int %selfDelay) (string %status))) : pair (pair bls12_381_fr (pair address mutez)) (pair (pair (mutez %custFunding) (key %custPk)) (pair (timestamp %delayExpiry) (address %merchAddr))) : @parameter%mutualClose
                DUP;        # pair (pair (mutez %merchBal) (pair (mutez %merchFunding) (key %merchPk))) (pair (pair (address %pssigContract) (bytes %revLock)) (pair (int %selfDelay) (string %status))) : pair (pair (mutez %merchBal) (pair (mutez %merchFunding) (key %merchPk))) (pair (pair (address %pssigContract) (bytes %revLock)) (pair (int %selfDelay) (string %status))) : pair (pair bls12_381_fr (pair address mutez)) (pair (pair (mutez %custFunding) (key %custPk)) (pair (timestamp %delayExpiry) (address %merchAddr))) : @parameter%mutualClose
                CDR;        # pair (pair (address %pssigContract) (bytes %revLock)) (pair (int %selfDelay) (string %status)) : pair (pair (mutez %merchBal) (pair (mutez %merchFunding) (key %merchPk))) (pair (pair (address %pssigContract) (bytes %revLock)) (pair (int %selfDelay) (string %status))) : pair (pair bls12_381_fr (pair address mutez)) (pair (pair (mutez %custFunding) (key %custPk)) (pair (timestamp %delayExpiry) (address %merchAddr))) : @parameter%mutualClose
                SWAP;       # pair (pair (mutez %merchBal) (pair (mutez %merchFunding) (key %merchPk))) (pair (pair (address %pssigContract) (bytes %revLock)) (pair (int %selfDelay) (string %status))) : pair (pair (address %pssigContract) (bytes %revLock)) (pair (int %selfDelay) (string %status)) : pair (pair bls12_381_fr (pair address mutez)) (pair (pair (mutez %custFunding) (key %custPk)) (pair (timestamp %delayExpiry) (address %merchAddr))) : @parameter%mutualClose
                CAR;        # pair (mutez %merchBal) (pair (mutez %merchFunding) (key %merchPk)) : pair (pair (address %pssigContract) (bytes %revLock)) (pair (int %selfDelay) (string %status)) : pair (pair bls12_381_fr (pair address mutez)) (pair (pair (mutez %custFunding) (key %custPk)) (pair (timestamp %delayExpiry) (address %merchAddr))) : @parameter%mutualClose
                CDR;        # pair (mutez %merchFunding) (key %merchPk) : pair (pair (address %pssigContract) (bytes %revLock)) (pair (int %selfDelay) (string %status)) : pair (pair bls12_381_fr (pair address mutez)) (pair (pair (mutez %custFunding) (key %custPk)) (pair (timestamp %delayExpiry) (address %merchAddr))) : @parameter%mutualClose
                DIG 3;      # @parameter%mutualClose : pair (mutez %merchFunding) (key %merchPk) : pair (pair (address %pssigContract) (bytes %revLock)) (pair (int %selfDelay) (string %status)) : pair (pair bls12_381_fr (pair address mutez)) (pair (pair (mutez %custFunding) (key %custPk)) (pair (timestamp %delayExpiry) (address %merchAddr)))
                CDR;        # pair (mutez %merchBal) (signature %merchSig) : pair (mutez %merchFunding) (key %merchPk) : pair (pair (address %pssigContract) (bytes %revLock)) (pair (int %selfDelay) (string %status)) : pair (pair bls12_381_fr (pair address mutez)) (pair (pair (mutez %custFunding) (key %custPk)) (pair (timestamp %delayExpiry) (address %merchAddr)))
                CAR;        # mutez : pair (mutez %merchFunding) (key %merchPk) : pair (pair (address %pssigContract) (bytes %revLock)) (pair (int %selfDelay) (string %status)) : pair (pair bls12_381_fr (pair address mutez)) (pair (pair (mutez %custFunding) (key %custPk)) (pair (timestamp %delayExpiry) (address %merchAddr)))
                PAIR;       # pair mutez (pair (mutez %merchFunding) (key %merchPk)) : pair (pair (address %pssigContract) (bytes %revLock)) (pair (int %selfDelay) (string %status)) : pair (pair bls12_381_fr (pair address mutez)) (pair (pair (mutez %custFunding) (key %custPk)) (pair (timestamp %delayExpiry) (address %merchAddr)))
                PAIR;       # pair (pair mutez (pair (mutez %merchFunding) (key %merchPk))) (pair (pair (address %pssigContract) (bytes %revLock)) (pair (int %selfDelay) (string %status))) : pair (pair bls12_381_fr (pair address mutez)) (pair (pair (mutez %custFunding) (key %custPk)) (pair (timestamp %delayExpiry) (address %merchAddr)))
                SWAP;       # pair (pair bls12_381_fr (pair address mutez)) (pair (pair (mutez %custFunding) (key %custPk)) (pair (timestamp %delayExpiry) (address %merchAddr))) : pair (pair mutez (pair (mutez %merchFunding) (key %merchPk))) (pair (pair (address %pssigContract) (bytes %revLock)) (pair (int %selfDelay) (string %status)))
                PAIR;       # pair (pair (pair bls12_381_fr (pair address mutez)) (pair (pair (mutez %custFunding) (key %custPk)) (pair (timestamp %delayExpiry) (address %merchAddr)))) (pair (pair mutez (pair (mutez %merchFunding) (key %merchPk))) (pair (pair (address %pssigContract) (bytes %revLock)) (pair (int %selfDelay) (string %status))))
                # sp.send(self.data.custAddr, self.data.custBal) # pair (pair (pair bls12_381_fr (pair address mutez)) (pair (pair (mutez %custFunding) (key %custPk)) (pair (timestamp %delayExpiry) (address %merchAddr)))) (pair (pair mutez (pair (mutez %merchFunding) (key %merchPk))) (pair (pair (address %pssigContract) (bytes %revLock)) (pair (int %selfDelay) (string %status))))
                DUP;        # pair (pair (pair bls12_381_fr (pair address mutez)) (pair (pair (mutez %custFunding) (key %custPk)) (pair (timestamp %delayExpiry) (address %merchAddr)))) (pair (pair mutez (pair (mutez %merchFunding) (key %merchPk))) (pair (pair (address %pssigContract) (bytes %revLock)) (pair (int %selfDelay) (string %status)))) : pair (pair (pair bls12_381_fr (pair address mutez)) (pair (pair (mutez %custFunding) (key %custPk)) (pair (timestamp %delayExpiry) (address %merchAddr)))) (pair (pair mutez (pair (mutez %merchFunding) (key %merchPk))) (pair (pair (address %pssigContract) (bytes %revLock)) (pair (int %selfDelay) (string %status))))
                CAR;        # pair (pair bls12_381_fr (pair address mutez)) (pair (pair (mutez %custFunding) (key %custPk)) (pair (timestamp %delayExpiry) (address %merchAddr))) : pair (pair (pair bls12_381_fr (pair address mutez)) (pair (pair (mutez %custFunding) (key %custPk)) (pair (timestamp %delayExpiry) (address %merchAddr)))) (pair (pair mutez (pair (mutez %merchFunding) (key %merchPk))) (pair (pair (address %pssigContract) (bytes %revLock)) (pair (int %selfDelay) (string %status))))
                CAR;        # pair bls12_381_fr (pair address mutez) : pair (pair (pair bls12_381_fr (pair address mutez)) (pair (pair (mutez %custFunding) (key %custPk)) (pair (timestamp %delayExpiry) (address %merchAddr)))) (pair (pair mutez (pair (mutez %merchFunding) (key %merchPk))) (pair (pair (address %pssigContract) (bytes %revLock)) (pair (int %selfDelay) (string %status))))
                CDR;        # pair address mutez : pair (pair (pair bls12_381_fr (pair address mutez)) (pair (pair (mutez %custFunding) (key %custPk)) (pair (timestamp %delayExpiry) (address %merchAddr)))) (pair (pair mutez (pair (mutez %merchFunding) (key %merchPk))) (pair (pair (address %pssigContract) (bytes %revLock)) (pair (int %selfDelay) (string %status))))
                CAR;        # address : pair (pair (pair bls12_381_fr (pair address mutez)) (pair (pair (mutez %custFunding) (key %custPk)) (pair (timestamp %delayExpiry) (address %merchAddr)))) (pair (pair mutez (pair (mutez %merchFunding) (key %merchPk))) (pair (pair (address %pssigContract) (bytes %revLock)) (pair (int %selfDelay) (string %status))))
                CONTRACT unit; # option (contract unit) : pair (pair (pair bls12_381_fr (pair address mutez)) (pair (pair (mutez %custFunding) (key %custPk)) (pair (timestamp %delayExpiry) (address %merchAddr)))) (pair (pair mutez (pair (mutez %merchFunding) (key %merchPk))) (pair (pair (address %pssigContract) (bytes %revLock)) (pair (int %selfDelay) (string %status))))
                IF_SOME
                  {}
                  {
                    PUSH int 223; # int : pair (pair (pair bls12_381_fr (pair address mutez)) (pair (pair (mutez %custFunding) (key %custPk)) (pair (timestamp %delayExpiry) (address %merchAddr)))) (pair (pair mutez (pair (mutez %merchFunding) (key %merchPk))) (pair (pair (address %pssigContract) (bytes %revLock)) (pair (int %selfDelay) (string %status))))
                    FAILWITH;   # FAILED
                  }; # @some : pair (pair (pair bls12_381_fr (pair address mutez)) (pair (pair (mutez %custFunding) (key %custPk)) (pair (timestamp %delayExpiry) (address %merchAddr)))) (pair (pair mutez (pair (mutez %merchFunding) (key %merchPk))) (pair (pair (address %pssigContract) (bytes %revLock)) (pair (int %selfDelay) (string %status))))
                NIL operation; # list operation : @some : pair (pair (pair bls12_381_fr (pair address mutez)) (pair (pair (mutez %custFunding) (key %custPk)) (pair (timestamp %delayExpiry) (address %merchAddr)))) (pair (pair mutez (pair (mutez %merchFunding) (key %merchPk))) (pair (pair (address %pssigContract) (bytes %revLock)) (pair (int %selfDelay) (string %status))))
                SWAP;       # @some : list operation : pair (pair (pair bls12_381_fr (pair address mutez)) (pair (pair (mutez %custFunding) (key %custPk)) (pair (timestamp %delayExpiry) (address %merchAddr)))) (pair (pair mutez (pair (mutez %merchFunding) (key %merchPk))) (pair (pair (address %pssigContract) (bytes %revLock)) (pair (int %selfDelay) (string %status))))
                DIG 2;      # pair (pair (pair bls12_381_fr (pair address mutez)) (pair (pair (mutez %custFunding) (key %custPk)) (pair (timestamp %delayExpiry) (address %merchAddr)))) (pair (pair mutez (pair (mutez %merchFunding) (key %merchPk))) (pair (pair (address %pssigContract) (bytes %revLock)) (pair (int %selfDelay) (string %status)))) : @some : list operation
                DUP;        # pair (pair (pair bls12_381_fr (pair address mutez)) (pair (pair (mutez %custFunding) (key %custPk)) (pair (timestamp %delayExpiry) (address %merchAddr)))) (pair (pair mutez (pair (mutez %merchFunding) (key %merchPk))) (pair (pair (address %pssigContract) (bytes %revLock)) (pair (int %selfDelay) (string %status)))) : pair (pair (pair bls12_381_fr (pair address mutez)) (pair (pair (mutez %custFunding) (key %custPk)) (pair (timestamp %delayExpiry) (address %merchAddr)))) (pair (pair mutez (pair (mutez %merchFunding) (key %merchPk))) (pair (pair (address %pssigContract) (bytes %revLock)) (pair (int %selfDelay) (string %status)))) : @some : list operation
                DUG 3;      # pair (pair (pair bls12_381_fr (pair address mutez)) (pair (pair (mutez %custFunding) (key %custPk)) (pair (timestamp %delayExpiry) (address %merchAddr)))) (pair (pair mutez (pair (mutez %merchFunding) (key %merchPk))) (pair (pair (address %pssigContract) (bytes %revLock)) (pair (int %selfDelay) (string %status)))) : @some : list operation : pair (pair (pair bls12_381_fr (pair address mutez)) (pair (pair (mutez %custFunding) (key %custPk)) (pair (timestamp %delayExpiry) (address %merchAddr)))) (pair (pair mutez (pair (mutez %merchFunding) (key %merchPk))) (pair (pair (address %pssigContract) (bytes %revLock)) (pair (int %selfDelay) (string %status))))
                CAR;        # pair (pair bls12_381_fr (pair address mutez)) (pair (pair (mutez %custFunding) (key %custPk)) (pair (timestamp %delayExpiry) (address %merchAddr))) : @some : list operation : pair (pair (pair bls12_381_fr (pair address mutez)) (pair (pair (mutez %custFunding) (key %custPk)) (pair (timestamp %delayExpiry) (address %merchAddr)))) (pair (pair mutez (pair (mutez %merchFunding) (key %merchPk))) (pair (pair (address %pssigContract) (bytes %revLock)) (pair (int %selfDelay) (string %status))))
                CAR;        # pair bls12_381_fr (pair address mutez) : @some : list operation : pair (pair (pair bls12_381_fr (pair address mutez)) (pair (pair (mutez %custFunding) (key %custPk)) (pair (timestamp %delayExpiry) (address %merchAddr)))) (pair (pair mutez (pair (mutez %merchFunding) (key %merchPk))) (pair (pair (address %pssigContract) (bytes %revLock)) (pair (int %selfDelay) (string %status))))
                CDR;        # pair address mutez : @some : list operation : pair (pair (pair bls12_381_fr (pair address mutez)) (pair (pair (mutez %custFunding) (key %custPk)) (pair (timestamp %delayExpiry) (address %merchAddr)))) (pair (pair mutez (pair (mutez %merchFunding) (key %merchPk))) (pair (pair (address %pssigContract) (bytes %revLock)) (pair (int %selfDelay) (string %status))))
                CDR;        # mutez : @some : list operation : pair (pair (pair bls12_381_fr (pair address mutez)) (pair (pair (mutez %custFunding) (key %custPk)) (pair (timestamp %delayExpiry) (address %merchAddr)))) (pair (pair mutez (pair (mutez %merchFunding) (key %merchPk))) (pair (pair (address %pssigContract) (bytes %revLock)) (pair (int %selfDelay) (string %status))))
                UNIT;       # unit : mutez : @some : list operation : pair (pair (pair bls12_381_fr (pair address mutez)) (pair (pair (mutez %custFunding) (key %custPk)) (pair (timestamp %delayExpiry) (address %merchAddr)))) (pair (pair mutez (pair (mutez %merchFunding) (key %merchPk))) (pair (pair (address %pssigContract) (bytes %revLock)) (pair (int %selfDelay) (string %status))))
                TRANSFER_TOKENS; # operation : list operation : pair (pair (pair bls12_381_fr (pair address mutez)) (pair (pair (mutez %custFunding) (key %custPk)) (pair (timestamp %delayExpiry) (address %merchAddr)))) (pair (pair mutez (pair (mutez %merchFunding) (key %merchPk))) (pair (pair (address %pssigContract) (bytes %revLock)) (pair (int %selfDelay) (string %status))))
                CONS;       # list operation : pair (pair (pair bls12_381_fr (pair address mutez)) (pair (pair (mutez %custFunding) (key %custPk)) (pair (timestamp %delayExpiry) (address %merchAddr)))) (pair (pair mutez (pair (mutez %merchFunding) (key %merchPk))) (pair (pair (address %pssigContract) (bytes %revLock)) (pair (int %selfDelay) (string %status))))
                SWAP;       # pair (pair (pair bls12_381_fr (pair address mutez)) (pair (pair (mutez %custFunding) (key %custPk)) (pair (timestamp %delayExpiry) (address %merchAddr)))) (pair (pair mutez (pair (mutez %merchFunding) (key %merchPk))) (pair (pair (address %pssigContract) (bytes %revLock)) (pair (int %selfDelay) (string %status)))) : list operation
                # sp.send(self.data.merchAddr, self.data.merchBal) # pair (pair (pair bls12_381_fr (pair address mutez)) (pair (pair (mutez %custFunding) (key %custPk)) (pair (timestamp %delayExpiry) (address %merchAddr)))) (pair (pair mutez (pair (mutez %merchFunding) (key %merchPk))) (pair (pair (address %pssigContract) (bytes %revLock)) (pair (int %selfDelay) (string %status)))) : list operation
                DUP;        # pair (pair (pair bls12_381_fr (pair address mutez)) (pair (pair (mutez %custFunding) (key %custPk)) (pair (timestamp %delayExpiry) (address %merchAddr)))) (pair (pair mutez (pair (mutez %merchFunding) (key %merchPk))) (pair (pair (address %pssigContract) (bytes %revLock)) (pair (int %selfDelay) (string %status)))) : pair (pair (pair bls12_381_fr (pair address mutez)) (pair (pair (mutez %custFunding) (key %custPk)) (pair (timestamp %delayExpiry) (address %merchAddr)))) (pair (pair mutez (pair (mutez %merchFunding) (key %merchPk))) (pair (pair (address %pssigContract) (bytes %revLock)) (pair (int %selfDelay) (string %status)))) : list operation
                DUG 2;      # pair (pair (pair bls12_381_fr (pair address mutez)) (pair (pair (mutez %custFunding) (key %custPk)) (pair (timestamp %delayExpiry) (address %merchAddr)))) (pair (pair mutez (pair (mutez %merchFunding) (key %merchPk))) (pair (pair (address %pssigContract) (bytes %revLock)) (pair (int %selfDelay) (string %status)))) : list operation : pair (pair (pair bls12_381_fr (pair address mutez)) (pair (pair (mutez %custFunding) (key %custPk)) (pair (timestamp %delayExpiry) (address %merchAddr)))) (pair (pair mutez (pair (mutez %merchFunding) (key %merchPk))) (pair (pair (address %pssigContract) (bytes %revLock)) (pair (int %selfDelay) (string %status))))
                CAR;        # pair (pair bls12_381_fr (pair address mutez)) (pair (pair (mutez %custFunding) (key %custPk)) (pair (timestamp %delayExpiry) (address %merchAddr))) : list operation : pair (pair (pair bls12_381_fr (pair address mutez)) (pair (pair (mutez %custFunding) (key %custPk)) (pair (timestamp %delayExpiry) (address %merchAddr)))) (pair (pair mutez (pair (mutez %merchFunding) (key %merchPk))) (pair (pair (address %pssigContract) (bytes %revLock)) (pair (int %selfDelay) (string %status))))
                CDR;        # pair (pair (mutez %custFunding) (key %custPk)) (pair (timestamp %delayExpiry) (address %merchAddr)) : list operation : pair (pair (pair bls12_381_fr (pair address mutez)) (pair (pair (mutez %custFunding) (key %custPk)) (pair (timestamp %delayExpiry) (address %merchAddr)))) (pair (pair mutez (pair (mutez %merchFunding) (key %merchPk))) (pair (pair (address %pssigContract) (bytes %revLock)) (pair (int %selfDelay) (string %status))))
                CDR;        # pair (timestamp %delayExpiry) (address %merchAddr) : list operation : pair (pair (pair bls12_381_fr (pair address mutez)) (pair (pair (mutez %custFunding) (key %custPk)) (pair (timestamp %delayExpiry) (address %merchAddr)))) (pair (pair mutez (pair (mutez %merchFunding) (key %merchPk))) (pair (pair (address %pssigContract) (bytes %revLock)) (pair (int %selfDelay) (string %status))))
                CDR;        # address : list operation : pair (pair (pair bls12_381_fr (pair address mutez)) (pair (pair (mutez %custFunding) (key %custPk)) (pair (timestamp %delayExpiry) (address %merchAddr)))) (pair (pair mutez (pair (mutez %merchFunding) (key %merchPk))) (pair (pair (address %pssigContract) (bytes %revLock)) (pair (int %selfDelay) (string %status))))
                CONTRACT unit; # option (contract unit) : list operation : pair (pair (pair bls12_381_fr (pair address mutez)) (pair (pair (mutez %custFunding) (key %custPk)) (pair (timestamp %delayExpiry) (address %merchAddr)))) (pair (pair mutez (pair (mutez %merchFunding) (key %merchPk))) (pair (pair (address %pssigContract) (bytes %revLock)) (pair (int %selfDelay) (string %status))))
                IF_SOME
                  {}
                  {
                    PUSH int 224; # int : list operation : pair (pair (pair bls12_381_fr (pair address mutez)) (pair (pair (mutez %custFunding) (key %custPk)) (pair (timestamp %delayExpiry) (address %merchAddr)))) (pair (pair mutez (pair (mutez %merchFunding) (key %merchPk))) (pair (pair (address %pssigContract) (bytes %revLock)) (pair (int %selfDelay) (string %status))))
                    FAILWITH;   # FAILED
                  }; # @some : list operation : pair (pair (pair bls12_381_fr (pair address mutez)) (pair (pair (mutez %custFunding) (key %custPk)) (pair (timestamp %delayExpiry) (address %merchAddr)))) (pair (pair mutez (pair (mutez %merchFunding) (key %merchPk))) (pair (pair (address %pssigContract) (bytes %revLock)) (pair (int %selfDelay) (string %status))))
                DIG 2;      # pair (pair (pair bls12_381_fr (pair address mutez)) (pair (pair (mutez %custFunding) (key %custPk)) (pair (timestamp %delayExpiry) (address %merchAddr)))) (pair (pair mutez (pair (mutez %merchFunding) (key %merchPk))) (pair (pair (address %pssigContract) (bytes %revLock)) (pair (int %selfDelay) (string %status)))) : @some : list operation
                DUP;        # pair (pair (pair bls12_381_fr (pair address mutez)) (pair (pair (mutez %custFunding) (key %custPk)) (pair (timestamp %delayExpiry) (address %merchAddr)))) (pair (pair mutez (pair (mutez %merchFunding) (key %merchPk))) (pair (pair (address %pssigContract) (bytes %revLock)) (pair (int %selfDelay) (string %status)))) : pair (pair (pair bls12_381_fr (pair address mutez)) (pair (pair (mutez %custFunding) (key %custPk)) (pair (timestamp %delayExpiry) (address %merchAddr)))) (pair (pair mutez (pair (mutez %merchFunding) (key %merchPk))) (pair (pair (address %pssigContract) (bytes %revLock)) (pair (int %selfDelay) (string %status)))) : @some : list operation
                DUG 3;      # pair (pair (pair bls12_381_fr (pair address mutez)) (pair (pair (mutez %custFunding) (key %custPk)) (pair (timestamp %delayExpiry) (address %merchAddr)))) (pair (pair mutez (pair (mutez %merchFunding) (key %merchPk))) (pair (pair (address %pssigContract) (bytes %revLock)) (pair (int %selfDelay) (string %status)))) : @some : list operation : pair (pair (pair bls12_381_fr (pair address mutez)) (pair (pair (mutez %custFunding) (key %custPk)) (pair (timestamp %delayExpiry) (address %merchAddr)))) (pair (pair mutez (pair (mutez %merchFunding) (key %merchPk))) (pair (pair (address %pssigContract) (bytes %revLock)) (pair (int %selfDelay) (string %status))))
                CDR;        # pair (pair mutez (pair (mutez %merchFunding) (key %merchPk))) (pair (pair (address %pssigContract) (bytes %revLock)) (pair (int %selfDelay) (string %status))) : @some : list operation : pair (pair (pair bls12_381_fr (pair address mutez)) (pair (pair (mutez %custFunding) (key %custPk)) (pair (timestamp %delayExpiry) (address %merchAddr)))) (pair (pair mutez (pair (mutez %merchFunding) (key %merchPk))) (pair (pair (address %pssigContract) (bytes %revLock)) (pair (int %selfDelay) (string %status))))
                CAR;        # pair mutez (pair (mutez %merchFunding) (key %merchPk)) : @some : list operation : pair (pair (pair bls12_381_fr (pair address mutez)) (pair (pair (mutez %custFunding) (key %custPk)) (pair (timestamp %delayExpiry) (address %merchAddr)))) (pair (pair mutez (pair (mutez %merchFunding) (key %merchPk))) (pair (pair (address %pssigContract) (bytes %revLock)) (pair (int %selfDelay) (string %status))))
                CAR;        # mutez : @some : list operation : pair (pair (pair bls12_381_fr (pair address mutez)) (pair (pair (mutez %custFunding) (key %custPk)) (pair (timestamp %delayExpiry) (address %merchAddr)))) (pair (pair mutez (pair (mutez %merchFunding) (key %merchPk))) (pair (pair (address %pssigContract) (bytes %revLock)) (pair (int %selfDelay) (string %status))))
                UNIT;       # unit : mutez : @some : list operation : pair (pair (pair bls12_381_fr (pair address mutez)) (pair (pair (mutez %custFunding) (key %custPk)) (pair (timestamp %delayExpiry) (address %merchAddr)))) (pair (pair mutez (pair (mutez %merchFunding) (key %merchPk))) (pair (pair (address %pssigContract) (bytes %revLock)) (pair (int %selfDelay) (string %status))))
                TRANSFER_TOKENS; # operation : list operation : pair (pair (pair bls12_381_fr (pair address mutez)) (pair (pair (mutez %custFunding) (key %custPk)) (pair (timestamp %delayExpiry) (address %merchAddr)))) (pair (pair mutez (pair (mutez %merchFunding) (key %merchPk))) (pair (pair (address %pssigContract) (bytes %revLock)) (pair (int %selfDelay) (string %status))))
                CONS;       # list operation : pair (pair (pair bls12_381_fr (pair address mutez)) (pair (pair (mutez %custFunding) (key %custPk)) (pair (timestamp %delayExpiry) (address %merchAddr)))) (pair (pair mutez (pair (mutez %merchFunding) (key %merchPk))) (pair (pair (address %pssigContract) (bytes %revLock)) (pair (int %selfDelay) (string %status))))
                SWAP;       # pair (pair (pair bls12_381_fr (pair address mutez)) (pair (pair (mutez %custFunding) (key %custPk)) (pair (timestamp %delayExpiry) (address %merchAddr)))) (pair (pair mutez (pair (mutez %merchFunding) (key %merchPk))) (pair (pair (address %pssigContract) (bytes %revLock)) (pair (int %selfDelay) (string %status)))) : list operation
                # self.data.custBal = sp.tez(0) # pair (pair (pair bls12_381_fr (pair address mutez)) (pair (pair (mutez %custFunding) (key %custPk)) (pair (timestamp %delayExpiry) (address %merchAddr)))) (pair (pair mutez (pair (mutez %merchFunding) (key %merchPk))) (pair (pair (address %pssigContract) (bytes %revLock)) (pair (int %selfDelay) (string %status)))) : list operation
                DUP;        # pair (pair (pair bls12_381_fr (pair address mutez)) (pair (pair (mutez %custFunding) (key %custPk)) (pair (timestamp %delayExpiry) (address %merchAddr)))) (pair (pair mutez (pair (mutez %merchFunding) (key %merchPk))) (pair (pair (address %pssigContract) (bytes %revLock)) (pair (int %selfDelay) (string %status)))) : pair (pair (pair bls12_381_fr (pair address mutez)) (pair (pair (mutez %custFunding) (key %custPk)) (pair (timestamp %delayExpiry) (address %merchAddr)))) (pair (pair mutez (pair (mutez %merchFunding) (key %merchPk))) (pair (pair (address %pssigContract) (bytes %revLock)) (pair (int %selfDelay) (string %status)))) : list operation
                CDR;        # pair (pair mutez (pair (mutez %merchFunding) (key %merchPk))) (pair (pair (address %pssigContract) (bytes %revLock)) (pair (int %selfDelay) (string %status))) : pair (pair (pair bls12_381_fr (pair address mutez)) (pair (pair (mutez %custFunding) (key %custPk)) (pair (timestamp %delayExpiry) (address %merchAddr)))) (pair (pair mutez (pair (mutez %merchFunding) (key %merchPk))) (pair (pair (address %pssigContract) (bytes %revLock)) (pair (int %selfDelay) (string %status)))) : list operation
                SWAP;       # pair (pair (pair bls12_381_fr (pair address mutez)) (pair (pair (mutez %custFunding) (key %custPk)) (pair (timestamp %delayExpiry) (address %merchAddr)))) (pair (pair mutez (pair (mutez %merchFunding) (key %merchPk))) (pair (pair (address %pssigContract) (bytes %revLock)) (pair (int %selfDelay) (string %status)))) : pair (pair mutez (pair (mutez %merchFunding) (key %merchPk))) (pair (pair (address %pssigContract) (bytes %revLock)) (pair (int %selfDelay) (string %status))) : list operation
                CAR;        # pair (pair bls12_381_fr (pair address mutez)) (pair (pair (mutez %custFunding) (key %custPk)) (pair (timestamp %delayExpiry) (address %merchAddr))) : pair (pair mutez (pair (mutez %merchFunding) (key %merchPk))) (pair (pair (address %pssigContract) (bytes %revLock)) (pair (int %selfDelay) (string %status))) : list operation
                DUP;        # pair (pair bls12_381_fr (pair address mutez)) (pair (pair (mutez %custFunding) (key %custPk)) (pair (timestamp %delayExpiry) (address %merchAddr))) : pair (pair bls12_381_fr (pair address mutez)) (pair (pair (mutez %custFunding) (key %custPk)) (pair (timestamp %delayExpiry) (address %merchAddr))) : pair (pair mutez (pair (mutez %merchFunding) (key %merchPk))) (pair (pair (address %pssigContract) (bytes %revLock)) (pair (int %selfDelay) (string %status))) : list operation
                CDR;        # pair (pair (mutez %custFunding) (key %custPk)) (pair (timestamp %delayExpiry) (address %merchAddr)) : pair (pair bls12_381_fr (pair address mutez)) (pair (pair (mutez %custFunding) (key %custPk)) (pair (timestamp %delayExpiry) (address %merchAddr))) : pair (pair mutez (pair (mutez %merchFunding) (key %merchPk))) (pair (pair (address %pssigContract) (bytes %revLock)) (pair (int %selfDelay) (string %status))) : list operation
                SWAP;       # pair (pair bls12_381_fr (pair address mutez)) (pair (pair (mutez %custFunding) (key %custPk)) (pair (timestamp %delayExpiry) (address %merchAddr))) : pair (pair (mutez %custFunding) (key %custPk)) (pair (timestamp %delayExpiry) (address %merchAddr)) : pair (pair mutez (pair (mutez %merchFunding) (key %merchPk))) (pair (pair (address %pssigContract) (bytes %revLock)) (pair (int %selfDelay) (string %status))) : list operation
                CAR;        # pair bls12_381_fr (pair address mutez) : pair (pair (mutez %custFunding) (key %custPk)) (pair (timestamp %delayExpiry) (address %merchAddr)) : pair (pair mutez (pair (mutez %merchFunding) (key %merchPk))) (pair (pair (address %pssigContract) (bytes %revLock)) (pair (int %selfDelay) (string %status))) : list operation
                DUP;        # pair bls12_381_fr (pair address mutez) : pair bls12_381_fr (pair address mutez) : pair (pair (mutez %custFunding) (key %custPk)) (pair (timestamp %delayExpiry) (address %merchAddr)) : pair (pair mutez (pair (mutez %merchFunding) (key %merchPk))) (pair (pair (address %pssigContract) (bytes %revLock)) (pair (int %selfDelay) (string %status))) : list operation
                CAR;        # bls12_381_fr : pair bls12_381_fr (pair address mutez) : pair (pair (mutez %custFunding) (key %custPk)) (pair (timestamp %delayExpiry) (address %merchAddr)) : pair (pair mutez (pair (mutez %merchFunding) (key %merchPk))) (pair (pair (address %pssigContract) (bytes %revLock)) (pair (int %selfDelay) (string %status))) : list operation
                SWAP;       # pair bls12_381_fr (pair address mutez) : bls12_381_fr : pair (pair (mutez %custFunding) (key %custPk)) (pair (timestamp %delayExpiry) (address %merchAddr)) : pair (pair mutez (pair (mutez %merchFunding) (key %merchPk))) (pair (pair (address %pssigContract) (bytes %revLock)) (pair (int %selfDelay) (string %status))) : list operation
                CDR;        # pair address mutez : bls12_381_fr : pair (pair (mutez %custFunding) (key %custPk)) (pair (timestamp %delayExpiry) (address %merchAddr)) : pair (pair mutez (pair (mutez %merchFunding) (key %merchPk))) (pair (pair (address %pssigContract) (bytes %revLock)) (pair (int %selfDelay) (string %status))) : list operation
                CAR;        # address : bls12_381_fr : pair (pair (mutez %custFunding) (key %custPk)) (pair (timestamp %delayExpiry) (address %merchAddr)) : pair (pair mutez (pair (mutez %merchFunding) (key %merchPk))) (pair (pair (address %pssigContract) (bytes %revLock)) (pair (int %selfDelay) (string %status))) : list operation
                PUSH mutez 0; # mutez : address : bls12_381_fr : pair (pair (mutez %custFunding) (key %custPk)) (pair (timestamp %delayExpiry) (address %merchAddr)) : pair (pair mutez (pair (mutez %merchFunding) (key %merchPk))) (pair (pair (address %pssigContract) (bytes %revLock)) (pair (int %selfDelay) (string %status))) : list operation
                SWAP;       # address : mutez : bls12_381_fr : pair (pair (mutez %custFunding) (key %custPk)) (pair (timestamp %delayExpiry) (address %merchAddr)) : pair (pair mutez (pair (mutez %merchFunding) (key %merchPk))) (pair (pair (address %pssigContract) (bytes %revLock)) (pair (int %selfDelay) (string %status))) : list operation
                PAIR;       # pair address mutez : bls12_381_fr : pair (pair (mutez %custFunding) (key %custPk)) (pair (timestamp %delayExpiry) (address %merchAddr)) : pair (pair mutez (pair (mutez %merchFunding) (key %merchPk))) (pair (pair (address %pssigContract) (bytes %revLock)) (pair (int %selfDelay) (string %status))) : list operation
                SWAP;       # bls12_381_fr : pair address mutez : pair (pair (mutez %custFunding) (key %custPk)) (pair (timestamp %delayExpiry) (address %merchAddr)) : pair (pair mutez (pair (mutez %merchFunding) (key %merchPk))) (pair (pair (address %pssigContract) (bytes %revLock)) (pair (int %selfDelay) (string %status))) : list operation
                PAIR;       # pair bls12_381_fr (pair address mutez) : pair (pair (mutez %custFunding) (key %custPk)) (pair (timestamp %delayExpiry) (address %merchAddr)) : pair (pair mutez (pair (mutez %merchFunding) (key %merchPk))) (pair (pair (address %pssigContract) (bytes %revLock)) (pair (int %selfDelay) (string %status))) : list operation
                PAIR;       # pair (pair bls12_381_fr (pair address mutez)) (pair (pair (mutez %custFunding) (key %custPk)) (pair (timestamp %delayExpiry) (address %merchAddr))) : pair (pair mutez (pair (mutez %merchFunding) (key %merchPk))) (pair (pair (address %pssigContract) (bytes %revLock)) (pair (int %selfDelay) (string %status))) : list operation
                PAIR;       # pair (pair (pair bls12_381_fr (pair address mutez)) (pair (pair (mutez %custFunding) (key %custPk)) (pair (timestamp %delayExpiry) (address %merchAddr)))) (pair (pair mutez (pair (mutez %merchFunding) (key %merchPk))) (pair (pair (address %pssigContract) (bytes %revLock)) (pair (int %selfDelay) (string %status)))) : list operation
                # self.data.merchBal = sp.tez(0) # pair (pair (pair bls12_381_fr (pair address mutez)) (pair (pair (mutez %custFunding) (key %custPk)) (pair (timestamp %delayExpiry) (address %merchAddr)))) (pair (pair mutez (pair (mutez %merchFunding) (key %merchPk))) (pair (pair (address %pssigContract) (bytes %revLock)) (pair (int %selfDelay) (string %status)))) : list operation
                DUP;        # pair (pair (pair bls12_381_fr (pair address mutez)) (pair (pair (mutez %custFunding) (key %custPk)) (pair (timestamp %delayExpiry) (address %merchAddr)))) (pair (pair mutez (pair (mutez %merchFunding) (key %merchPk))) (pair (pair (address %pssigContract) (bytes %revLock)) (pair (int %selfDelay) (string %status)))) : pair (pair (pair bls12_381_fr (pair address mutez)) (pair (pair (mutez %custFunding) (key %custPk)) (pair (timestamp %delayExpiry) (address %merchAddr)))) (pair (pair mutez (pair (mutez %merchFunding) (key %merchPk))) (pair (pair (address %pssigContract) (bytes %revLock)) (pair (int %selfDelay) (string %status)))) : list operation
                CAR;        # pair (pair bls12_381_fr (pair address mutez)) (pair (pair (mutez %custFunding) (key %custPk)) (pair (timestamp %delayExpiry) (address %merchAddr))) : pair (pair (pair bls12_381_fr (pair address mutez)) (pair (pair (mutez %custFunding) (key %custPk)) (pair (timestamp %delayExpiry) (address %merchAddr)))) (pair (pair mutez (pair (mutez %merchFunding) (key %merchPk))) (pair (pair (address %pssigContract) (bytes %revLock)) (pair (int %selfDelay) (string %status)))) : list operation
                SWAP;       # pair (pair (pair bls12_381_fr (pair address mutez)) (pair (pair (mutez %custFunding) (key %custPk)) (pair (timestamp %delayExpiry) (address %merchAddr)))) (pair (pair mutez (pair (mutez %merchFunding) (key %merchPk))) (pair (pair (address %pssigContract) (bytes %revLock)) (pair (int %selfDelay) (string %status)))) : pair (pair bls12_381_fr (pair address mutez)) (pair (pair (mutez %custFunding) (key %custPk)) (pair (timestamp %delayExpiry) (address %merchAddr))) : list operation
                CDR;        # pair (pair mutez (pair (mutez %merchFunding) (key %merchPk))) (pair (pair (address %pssigContract) (bytes %revLock)) (pair (int %selfDelay) (string %status))) : pair (pair bls12_381_fr (pair address mutez)) (pair (pair (mutez %custFunding) (key %custPk)) (pair (timestamp %delayExpiry) (address %merchAddr))) : list operation
                DUP;        # pair (pair mutez (pair (mutez %merchFunding) (key %merchPk))) (pair (pair (address %pssigContract) (bytes %revLock)) (pair (int %selfDelay) (string %status))) : pair (pair mutez (pair (mutez %merchFunding) (key %merchPk))) (pair (pair (address %pssigContract) (bytes %revLock)) (pair (int %selfDelay) (string %status))) : pair (pair bls12_381_fr (pair address mutez)) (pair (pair (mutez %custFunding) (key %custPk)) (pair (timestamp %delayExpiry) (address %merchAddr))) : list operation
                CDR;        # pair (pair (address %pssigContract) (bytes %revLock)) (pair (int %selfDelay) (string %status)) : pair (pair mutez (pair (mutez %merchFunding) (key %merchPk))) (pair (pair (address %pssigContract) (bytes %revLock)) (pair (int %selfDelay) (string %status))) : pair (pair bls12_381_fr (pair address mutez)) (pair (pair (mutez %custFunding) (key %custPk)) (pair (timestamp %delayExpiry) (address %merchAddr))) : list operation
                SWAP;       # pair (pair mutez (pair (mutez %merchFunding) (key %merchPk))) (pair (pair (address %pssigContract) (bytes %revLock)) (pair (int %selfDelay) (string %status))) : pair (pair (address %pssigContract) (bytes %revLock)) (pair (int %selfDelay) (string %status)) : pair (pair bls12_381_fr (pair address mutez)) (pair (pair (mutez %custFunding) (key %custPk)) (pair (timestamp %delayExpiry) (address %merchAddr))) : list operation
                CAR;        # pair mutez (pair (mutez %merchFunding) (key %merchPk)) : pair (pair (address %pssigContract) (bytes %revLock)) (pair (int %selfDelay) (string %status)) : pair (pair bls12_381_fr (pair address mutez)) (pair (pair (mutez %custFunding) (key %custPk)) (pair (timestamp %delayExpiry) (address %merchAddr))) : list operation
                CDR;        # pair (mutez %merchFunding) (key %merchPk) : pair (pair (address %pssigContract) (bytes %revLock)) (pair (int %selfDelay) (string %status)) : pair (pair bls12_381_fr (pair address mutez)) (pair (pair (mutez %custFunding) (key %custPk)) (pair (timestamp %delayExpiry) (address %merchAddr))) : list operation
                PUSH mutez 0; # mutez : pair (mutez %merchFunding) (key %merchPk) : pair (pair (address %pssigContract) (bytes %revLock)) (pair (int %selfDelay) (string %status)) : pair (pair bls12_381_fr (pair address mutez)) (pair (pair (mutez %custFunding) (key %custPk)) (pair (timestamp %delayExpiry) (address %merchAddr))) : list operation
                PAIR;       # pair mutez (pair (mutez %merchFunding) (key %merchPk)) : pair (pair (address %pssigContract) (bytes %revLock)) (pair (int %selfDelay) (string %status)) : pair (pair bls12_381_fr (pair address mutez)) (pair (pair (mutez %custFunding) (key %custPk)) (pair (timestamp %delayExpiry) (address %merchAddr))) : list operation
                PAIR;       # pair (pair mutez (pair (mutez %merchFunding) (key %merchPk))) (pair (pair (address %pssigContract) (bytes %revLock)) (pair (int %selfDelay) (string %status))) : pair (pair bls12_381_fr (pair address mutez)) (pair (pair (mutez %custFunding) (key %custPk)) (pair (timestamp %delayExpiry) (address %merchAddr))) : list operation
                SWAP;       # pair (pair bls12_381_fr (pair address mutez)) (pair (pair (mutez %custFunding) (key %custPk)) (pair (timestamp %delayExpiry) (address %merchAddr))) : pair (pair mutez (pair (mutez %merchFunding) (key %merchPk))) (pair (pair (address %pssigContract) (bytes %revLock)) (pair (int %selfDelay) (string %status))) : list operation
                PAIR;       # pair (pair (pair bls12_381_fr (pair address mutez)) (pair (pair (mutez %custFunding) (key %custPk)) (pair (timestamp %delayExpiry) (address %merchAddr)))) (pair (pair mutez (pair (mutez %merchFunding) (key %merchPk))) (pair (pair (address %pssigContract) (bytes %revLock)) (pair (int %selfDelay) (string %status)))) : list operation
                # self.data.status = 'closed' # pair (pair (pair bls12_381_fr (pair address mutez)) (pair (pair (mutez %custFunding) (key %custPk)) (pair (timestamp %delayExpiry) (address %merchAddr)))) (pair (pair mutez (pair (mutez %merchFunding) (key %merchPk))) (pair (pair (address %pssigContract) (bytes %revLock)) (pair (int %selfDelay) (string %status)))) : list operation
                DUP;        # pair (pair (pair bls12_381_fr (pair address mutez)) (pair (pair (mutez %custFunding) (key %custPk)) (pair (timestamp %delayExpiry) (address %merchAddr)))) (pair (pair mutez (pair (mutez %merchFunding) (key %merchPk))) (pair (pair (address %pssigContract) (bytes %revLock)) (pair (int %selfDelay) (string %status)))) : pair (pair (pair bls12_381_fr (pair address mutez)) (pair (pair (mutez %custFunding) (key %custPk)) (pair (timestamp %delayExpiry) (address %merchAddr)))) (pair (pair mutez (pair (mutez %merchFunding) (key %merchPk))) (pair (pair (address %pssigContract) (bytes %revLock)) (pair (int %selfDelay) (string %status)))) : list operation
                CAR;        # pair (pair bls12_381_fr (pair address mutez)) (pair (pair (mutez %custFunding) (key %custPk)) (pair (timestamp %delayExpiry) (address %merchAddr))) : pair (pair (pair bls12_381_fr (pair address mutez)) (pair (pair (mutez %custFunding) (key %custPk)) (pair (timestamp %delayExpiry) (address %merchAddr)))) (pair (pair mutez (pair (mutez %merchFunding) (key %merchPk))) (pair (pair (address %pssigContract) (bytes %revLock)) (pair (int %selfDelay) (string %status)))) : list operation
                SWAP;       # pair (pair (pair bls12_381_fr (pair address mutez)) (pair (pair (mutez %custFunding) (key %custPk)) (pair (timestamp %delayExpiry) (address %merchAddr)))) (pair (pair mutez (pair (mutez %merchFunding) (key %merchPk))) (pair (pair (address %pssigContract) (bytes %revLock)) (pair (int %selfDelay) (string %status)))) : pair (pair bls12_381_fr (pair address mutez)) (pair (pair (mutez %custFunding) (key %custPk)) (pair (timestamp %delayExpiry) (address %merchAddr))) : list operation
                CDR;        # pair (pair mutez (pair (mutez %merchFunding) (key %merchPk))) (pair (pair (address %pssigContract) (bytes %revLock)) (pair (int %selfDelay) (string %status))) : pair (pair bls12_381_fr (pair address mutez)) (pair (pair (mutez %custFunding) (key %custPk)) (pair (timestamp %delayExpiry) (address %merchAddr))) : list operation
                DUP;        # pair (pair mutez (pair (mutez %merchFunding) (key %merchPk))) (pair (pair (address %pssigContract) (bytes %revLock)) (pair (int %selfDelay) (string %status))) : pair (pair mutez (pair (mutez %merchFunding) (key %merchPk))) (pair (pair (address %pssigContract) (bytes %revLock)) (pair (int %selfDelay) (string %status))) : pair (pair bls12_381_fr (pair address mutez)) (pair (pair (mutez %custFunding) (key %custPk)) (pair (timestamp %delayExpiry) (address %merchAddr))) : list operation
                CAR;        # pair mutez (pair (mutez %merchFunding) (key %merchPk)) : pair (pair mutez (pair (mutez %merchFunding) (key %merchPk))) (pair (pair (address %pssigContract) (bytes %revLock)) (pair (int %selfDelay) (string %status))) : pair (pair bls12_381_fr (pair address mutez)) (pair (pair (mutez %custFunding) (key %custPk)) (pair (timestamp %delayExpiry) (address %merchAddr))) : list operation
                SWAP;       # pair (pair mutez (pair (mutez %merchFunding) (key %merchPk))) (pair (pair (address %pssigContract) (bytes %revLock)) (pair (int %selfDelay) (string %status))) : pair mutez (pair (mutez %merchFunding) (key %merchPk)) : pair (pair bls12_381_fr (pair address mutez)) (pair (pair (mutez %custFunding) (key %custPk)) (pair (timestamp %delayExpiry) (address %merchAddr))) : list operation
                CDR;        # pair (pair (address %pssigContract) (bytes %revLock)) (pair (int %selfDelay) (string %status)) : pair mutez (pair (mutez %merchFunding) (key %merchPk)) : pair (pair bls12_381_fr (pair address mutez)) (pair (pair (mutez %custFunding) (key %custPk)) (pair (timestamp %delayExpiry) (address %merchAddr))) : list operation
                DUP;        # pair (pair (address %pssigContract) (bytes %revLock)) (pair (int %selfDelay) (string %status)) : pair (pair (address %pssigContract) (bytes %revLock)) (pair (int %selfDelay) (string %status)) : pair mutez (pair (mutez %merchFunding) (key %merchPk)) : pair (pair bls12_381_fr (pair address mutez)) (pair (pair (mutez %custFunding) (key %custPk)) (pair (timestamp %delayExpiry) (address %merchAddr))) : list operation
                CAR;        # pair (address %pssigContract) (bytes %revLock) : pair (pair (address %pssigContract) (bytes %revLock)) (pair (int %selfDelay) (string %status)) : pair mutez (pair (mutez %merchFunding) (key %merchPk)) : pair (pair bls12_381_fr (pair address mutez)) (pair (pair (mutez %custFunding) (key %custPk)) (pair (timestamp %delayExpiry) (address %merchAddr))) : list operation
                SWAP;       # pair (pair (address %pssigContract) (bytes %revLock)) (pair (int %selfDelay) (string %status)) : pair (address %pssigContract) (bytes %revLock) : pair mutez (pair (mutez %merchFunding) (key %merchPk)) : pair (pair bls12_381_fr (pair address mutez)) (pair (pair (mutez %custFunding) (key %custPk)) (pair (timestamp %delayExpiry) (address %merchAddr))) : list operation
                CDR;        # pair (int %selfDelay) (string %status) : pair (address %pssigContract) (bytes %revLock) : pair mutez (pair (mutez %merchFunding) (key %merchPk)) : pair (pair bls12_381_fr (pair address mutez)) (pair (pair (mutez %custFunding) (key %custPk)) (pair (timestamp %delayExpiry) (address %merchAddr))) : list operation
                CAR;        # int : pair (address %pssigContract) (bytes %revLock) : pair mutez (pair (mutez %merchFunding) (key %merchPk)) : pair (pair bls12_381_fr (pair address mutez)) (pair (pair (mutez %custFunding) (key %custPk)) (pair (timestamp %delayExpiry) (address %merchAddr))) : list operation
                PUSH string "closed"; # string : int : pair (address %pssigContract) (bytes %revLock) : pair mutez (pair (mutez %merchFunding) (key %merchPk)) : pair (pair bls12_381_fr (pair address mutez)) (pair (pair (mutez %custFunding) (key %custPk)) (pair (timestamp %delayExpiry) (address %merchAddr))) : list operation
                SWAP;       # int : string : pair (address %pssigContract) (bytes %revLock) : pair mutez (pair (mutez %merchFunding) (key %merchPk)) : pair (pair bls12_381_fr (pair address mutez)) (pair (pair (mutez %custFunding) (key %custPk)) (pair (timestamp %delayExpiry) (address %merchAddr))) : list operation
                PAIR;       # pair int string : pair (address %pssigContract) (bytes %revLock) : pair mutez (pair (mutez %merchFunding) (key %merchPk)) : pair (pair bls12_381_fr (pair address mutez)) (pair (pair (mutez %custFunding) (key %custPk)) (pair (timestamp %delayExpiry) (address %merchAddr))) : list operation
                SWAP;       # pair (address %pssigContract) (bytes %revLock) : pair int string : pair mutez (pair (mutez %merchFunding) (key %merchPk)) : pair (pair bls12_381_fr (pair address mutez)) (pair (pair (mutez %custFunding) (key %custPk)) (pair (timestamp %delayExpiry) (address %merchAddr))) : list operation
                PAIR;       # pair (pair (address %pssigContract) (bytes %revLock)) (pair int string) : pair mutez (pair (mutez %merchFunding) (key %merchPk)) : pair (pair bls12_381_fr (pair address mutez)) (pair (pair (mutez %custFunding) (key %custPk)) (pair (timestamp %delayExpiry) (address %merchAddr))) : list operation
                SWAP;       # pair mutez (pair (mutez %merchFunding) (key %merchPk)) : pair (pair (address %pssigContract) (bytes %revLock)) (pair int string) : pair (pair bls12_381_fr (pair address mutez)) (pair (pair (mutez %custFunding) (key %custPk)) (pair (timestamp %delayExpiry) (address %merchAddr))) : list operation
                PAIR;       # pair (pair mutez (pair (mutez %merchFunding) (key %merchPk))) (pair (pair (address %pssigContract) (bytes %revLock)) (pair int string)) : pair (pair bls12_381_fr (pair address mutez)) (pair (pair (mutez %custFunding) (key %custPk)) (pair (timestamp %delayExpiry) (address %merchAddr))) : list operation
                SWAP;       # pair (pair bls12_381_fr (pair address mutez)) (pair (pair (mutez %custFunding) (key %custPk)) (pair (timestamp %delayExpiry) (address %merchAddr))) : pair (pair mutez (pair (mutez %merchFunding) (key %merchPk))) (pair (pair (address %pssigContract) (bytes %revLock)) (pair int string)) : list operation
                PAIR;       # pair (pair (pair bls12_381_fr (pair address mutez)) (pair (pair (mutez %custFunding) (key %custPk)) (pair (timestamp %delayExpiry) (address %merchAddr)))) (pair (pair mutez (pair (mutez %merchFunding) (key %merchPk))) (pair (pair (address %pssigContract) (bytes %revLock)) (pair int string))) : list operation
                SWAP;       # list operation : pair (pair (pair bls12_381_fr (pair address mutez)) (pair (pair (mutez %custFunding) (key %custPk)) (pair (timestamp %delayExpiry) (address %merchAddr)))) (pair (pair mutez (pair (mutez %merchFunding) (key %merchPk))) (pair (pair (address %pssigContract) (bytes %revLock)) (pair int string)))
              }
              {
                DROP;       # @storage
                # == reclaimFunding ==
                # sp.verify(self.data.status == 'awaitingFunding') # @storage
                DUP;        # @storage : @storage
                CDR;        # pair (pair (mutez %merchBal) (pair (mutez %merchFunding) (key %merchPk))) (pair (pair (address %pssigContract) (bytes %revLock)) (pair (int %selfDelay) (string %status))) : @storage
                CDR;        # pair (pair (address %pssigContract) (bytes %revLock)) (pair (int %selfDelay) (string %status)) : @storage
                CDR;        # pair (int %selfDelay) (string %status) : @storage
                CDR;        # string : @storage
                PUSH string "awaitingFunding"; # string : string : @storage
                COMPARE;    # int : @storage
                EQ;         # bool : @storage
                IF
                  {}
                  {
                    PUSH string "WrongCondition: self.data.status == 'awaitingFunding'"; # string : @storage
                    FAILWITH;   # FAILED
                  }; # @storage
                # if self.data.custAddr == sp.sender: # @storage
                DUP;        # @storage : @storage
                CAR;        # pair (pair (bls12_381_fr %chanID) (pair (address %custAddr) (mutez %custBal))) (pair (pair (mutez %custFunding) (key %custPk)) (pair (timestamp %delayExpiry) (address %merchAddr))) : @storage
                CAR;        # pair (bls12_381_fr %chanID) (pair (address %custAddr) (mutez %custBal)) : @storage
                CDR;        # pair (address %custAddr) (mutez %custBal) : @storage
                CAR;        # address : @storage
                SENDER;     # address : address : @storage
                COMPARE;    # int : @storage
                EQ;         # bool : @storage
                IF
                  {
                    # sp.verify(self.data.custBal == self.data.custFunding) # @storage
                    DUP;        # @storage : @storage
                    CAR;        # pair (pair (bls12_381_fr %chanID) (pair (address %custAddr) (mutez %custBal))) (pair (pair (mutez %custFunding) (key %custPk)) (pair (timestamp %delayExpiry) (address %merchAddr))) : @storage
                    CDR;        # pair (pair (mutez %custFunding) (key %custPk)) (pair (timestamp %delayExpiry) (address %merchAddr)) : @storage
                    CAR;        # pair (mutez %custFunding) (key %custPk) : @storage
                    CAR;        # mutez : @storage
                    SWAP;       # @storage : mutez
                    DUP;        # @storage : @storage : mutez
                    DUG 2;      # @storage : mutez : @storage
                    CAR;        # pair (pair (bls12_381_fr %chanID) (pair (address %custAddr) (mutez %custBal))) (pair (pair (mutez %custFunding) (key %custPk)) (pair (timestamp %delayExpiry) (address %merchAddr))) : mutez : @storage
                    CAR;        # pair (bls12_381_fr %chanID) (pair (address %custAddr) (mutez %custBal)) : mutez : @storage
                    CDR;        # pair (address %custAddr) (mutez %custBal) : mutez : @storage
                    CDR;        # mutez : mutez : @storage
                    COMPARE;    # int : @storage
                    EQ;         # bool : @storage
                    IF
                      {}
                      {
                        PUSH string "WrongCondition: self.data.custBal == self.data.custFunding"; # string : @storage
                        FAILWITH;   # FAILED
                      }; # @storage
                    # sp.send(self.data.custAddr, self.data.custBal) # @storage
                    DUP;        # @storage : @storage
                    CAR;        # pair (pair (bls12_381_fr %chanID) (pair (address %custAddr) (mutez %custBal))) (pair (pair (mutez %custFunding) (key %custPk)) (pair (timestamp %delayExpiry) (address %merchAddr))) : @storage
                    CAR;        # pair (bls12_381_fr %chanID) (pair (address %custAddr) (mutez %custBal)) : @storage
                    CDR;        # pair (address %custAddr) (mutez %custBal) : @storage
                    CAR;        # address : @storage
                    CONTRACT unit; # option (contract unit) : @storage
                    IF_SOME
                      {}
                      {
                        PUSH int 107; # int : @storage
                        FAILWITH;   # FAILED
                      }; # @some : @storage
                    NIL operation; # list operation : @some : @storage
                    SWAP;       # @some : list operation : @storage
                    DIG 2;      # @storage : @some : list operation
                    DUP;        # @storage : @storage : @some : list operation
                    DUG 3;      # @storage : @some : list operation : @storage
                    CAR;        # pair (pair (bls12_381_fr %chanID) (pair (address %custAddr) (mutez %custBal))) (pair (pair (mutez %custFunding) (key %custPk)) (pair (timestamp %delayExpiry) (address %merchAddr))) : @some : list operation : @storage
                    CAR;        # pair (bls12_381_fr %chanID) (pair (address %custAddr) (mutez %custBal)) : @some : list operation : @storage
                    CDR;        # pair (address %custAddr) (mutez %custBal) : @some : list operation : @storage
                    CDR;        # mutez : @some : list operation : @storage
                    UNIT;       # unit : mutez : @some : list operation : @storage
                    TRANSFER_TOKENS; # operation : list operation : @storage
                    CONS;       # list operation : @storage
                    SWAP;       # @storage : list operation
                    # self.data.custBal = sp.tez(0) # @storage : list operation
                    DUP;        # @storage : @storage : list operation
                    CDR;        # pair (pair (mutez %merchBal) (pair (mutez %merchFunding) (key %merchPk))) (pair (pair (address %pssigContract) (bytes %revLock)) (pair (int %selfDelay) (string %status))) : @storage : list operation
                    SWAP;       # @storage : pair (pair (mutez %merchBal) (pair (mutez %merchFunding) (key %merchPk))) (pair (pair (address %pssigContract) (bytes %revLock)) (pair (int %selfDelay) (string %status))) : list operation
                    CAR;        # pair (pair (bls12_381_fr %chanID) (pair (address %custAddr) (mutez %custBal))) (pair (pair (mutez %custFunding) (key %custPk)) (pair (timestamp %delayExpiry) (address %merchAddr))) : pair (pair (mutez %merchBal) (pair (mutez %merchFunding) (key %merchPk))) (pair (pair (address %pssigContract) (bytes %revLock)) (pair (int %selfDelay) (string %status))) : list operation
                    DUP;        # pair (pair (bls12_381_fr %chanID) (pair (address %custAddr) (mutez %custBal))) (pair (pair (mutez %custFunding) (key %custPk)) (pair (timestamp %delayExpiry) (address %merchAddr))) : pair (pair (bls12_381_fr %chanID) (pair (address %custAddr) (mutez %custBal))) (pair (pair (mutez %custFunding) (key %custPk)) (pair (timestamp %delayExpiry) (address %merchAddr))) : pair (pair (mutez %merchBal) (pair (mutez %merchFunding) (key %merchPk))) (pair (pair (address %pssigContract) (bytes %revLock)) (pair (int %selfDelay) (string %status))) : list operation
                    CDR;        # pair (pair (mutez %custFunding) (key %custPk)) (pair (timestamp %delayExpiry) (address %merchAddr)) : pair (pair (bls12_381_fr %chanID) (pair (address %custAddr) (mutez %custBal))) (pair (pair (mutez %custFunding) (key %custPk)) (pair (timestamp %delayExpiry) (address %merchAddr))) : pair (pair (mutez %merchBal) (pair (mutez %merchFunding) (key %merchPk))) (pair (pair (address %pssigContract) (bytes %revLock)) (pair (int %selfDelay) (string %status))) : list operation
                    SWAP;       # pair (pair (bls12_381_fr %chanID) (pair (address %custAddr) (mutez %custBal))) (pair (pair (mutez %custFunding) (key %custPk)) (pair (timestamp %delayExpiry) (address %merchAddr))) : pair (pair (mutez %custFunding) (key %custPk)) (pair (timestamp %delayExpiry) (address %merchAddr)) : pair (pair (mutez %merchBal) (pair (mutez %merchFunding) (key %merchPk))) (pair (pair (address %pssigContract) (bytes %revLock)) (pair (int %selfDelay) (string %status))) : list operation
                    CAR;        # pair (bls12_381_fr %chanID) (pair (address %custAddr) (mutez %custBal)) : pair (pair (mutez %custFunding) (key %custPk)) (pair (timestamp %delayExpiry) (address %merchAddr)) : pair (pair (mutez %merchBal) (pair (mutez %merchFunding) (key %merchPk))) (pair (pair (address %pssigContract) (bytes %revLock)) (pair (int %selfDelay) (string %status))) : list operation
                    DUP;        # pair (bls12_381_fr %chanID) (pair (address %custAddr) (mutez %custBal)) : pair (bls12_381_fr %chanID) (pair (address %custAddr) (mutez %custBal)) : pair (pair (mutez %custFunding) (key %custPk)) (pair (timestamp %delayExpiry) (address %merchAddr)) : pair (pair (mutez %merchBal) (pair (mutez %merchFunding) (key %merchPk))) (pair (pair (address %pssigContract) (bytes %revLock)) (pair (int %selfDelay) (string %status))) : list operation
                    CAR;        # bls12_381_fr : pair (bls12_381_fr %chanID) (pair (address %custAddr) (mutez %custBal)) : pair (pair (mutez %custFunding) (key %custPk)) (pair (timestamp %delayExpiry) (address %merchAddr)) : pair (pair (mutez %merchBal) (pair (mutez %merchFunding) (key %merchPk))) (pair (pair (address %pssigContract) (bytes %revLock)) (pair (int %selfDelay) (string %status))) : list operation
                    SWAP;       # pair (bls12_381_fr %chanID) (pair (address %custAddr) (mutez %custBal)) : bls12_381_fr : pair (pair (mutez %custFunding) (key %custPk)) (pair (timestamp %delayExpiry) (address %merchAddr)) : pair (pair (mutez %merchBal) (pair (mutez %merchFunding) (key %merchPk))) (pair (pair (address %pssigContract) (bytes %revLock)) (pair (int %selfDelay) (string %status))) : list operation
                    CDR;        # pair (address %custAddr) (mutez %custBal) : bls12_381_fr : pair (pair (mutez %custFunding) (key %custPk)) (pair (timestamp %delayExpiry) (address %merchAddr)) : pair (pair (mutez %merchBal) (pair (mutez %merchFunding) (key %merchPk))) (pair (pair (address %pssigContract) (bytes %revLock)) (pair (int %selfDelay) (string %status))) : list operation
                    CAR;        # address : bls12_381_fr : pair (pair (mutez %custFunding) (key %custPk)) (pair (timestamp %delayExpiry) (address %merchAddr)) : pair (pair (mutez %merchBal) (pair (mutez %merchFunding) (key %merchPk))) (pair (pair (address %pssigContract) (bytes %revLock)) (pair (int %selfDelay) (string %status))) : list operation
                    PUSH mutez 0; # mutez : address : bls12_381_fr : pair (pair (mutez %custFunding) (key %custPk)) (pair (timestamp %delayExpiry) (address %merchAddr)) : pair (pair (mutez %merchBal) (pair (mutez %merchFunding) (key %merchPk))) (pair (pair (address %pssigContract) (bytes %revLock)) (pair (int %selfDelay) (string %status))) : list operation
                    SWAP;       # address : mutez : bls12_381_fr : pair (pair (mutez %custFunding) (key %custPk)) (pair (timestamp %delayExpiry) (address %merchAddr)) : pair (pair (mutez %merchBal) (pair (mutez %merchFunding) (key %merchPk))) (pair (pair (address %pssigContract) (bytes %revLock)) (pair (int %selfDelay) (string %status))) : list operation
                    PAIR;       # pair address mutez : bls12_381_fr : pair (pair (mutez %custFunding) (key %custPk)) (pair (timestamp %delayExpiry) (address %merchAddr)) : pair (pair (mutez %merchBal) (pair (mutez %merchFunding) (key %merchPk))) (pair (pair (address %pssigContract) (bytes %revLock)) (pair (int %selfDelay) (string %status))) : list operation
                    SWAP;       # bls12_381_fr : pair address mutez : pair (pair (mutez %custFunding) (key %custPk)) (pair (timestamp %delayExpiry) (address %merchAddr)) : pair (pair (mutez %merchBal) (pair (mutez %merchFunding) (key %merchPk))) (pair (pair (address %pssigContract) (bytes %revLock)) (pair (int %selfDelay) (string %status))) : list operation
                    PAIR;       # pair bls12_381_fr (pair address mutez) : pair (pair (mutez %custFunding) (key %custPk)) (pair (timestamp %delayExpiry) (address %merchAddr)) : pair (pair (mutez %merchBal) (pair (mutez %merchFunding) (key %merchPk))) (pair (pair (address %pssigContract) (bytes %revLock)) (pair (int %selfDelay) (string %status))) : list operation
                    PAIR;       # pair (pair bls12_381_fr (pair address mutez)) (pair (pair (mutez %custFunding) (key %custPk)) (pair (timestamp %delayExpiry) (address %merchAddr))) : pair (pair (mutez %merchBal) (pair (mutez %merchFunding) (key %merchPk))) (pair (pair (address %pssigContract) (bytes %revLock)) (pair (int %selfDelay) (string %status))) : list operation
                    PAIR;       # pair (pair (pair bls12_381_fr (pair address mutez)) (pair (pair (mutez %custFunding) (key %custPk)) (pair (timestamp %delayExpiry) (address %merchAddr)))) (pair (pair (mutez %merchBal) (pair (mutez %merchFunding) (key %merchPk))) (pair (pair (address %pssigContract) (bytes %revLock)) (pair (int %selfDelay) (string %status)))) : list operation
                    SWAP;       # list operation : pair (pair (pair bls12_381_fr (pair address mutez)) (pair (pair (mutez %custFunding) (key %custPk)) (pair (timestamp %delayExpiry) (address %merchAddr)))) (pair (pair (mutez %merchBal) (pair (mutez %merchFunding) (key %merchPk))) (pair (pair (address %pssigContract) (bytes %revLock)) (pair (int %selfDelay) (string %status))))
                  }
                  {
                    NIL operation; # list operation : @storage
                  }; # list operation : pair (pair (pair bls12_381_fr (pair address mutez)) (pair (pair (mutez %custFunding) (key %custPk)) (pair (timestamp %delayExpiry) (address %merchAddr)))) (pair (pair (mutez %merchBal) (pair (mutez %merchFunding) (key %merchPk))) (pair (pair (address %pssigContract) (bytes %revLock)) (pair (int %selfDelay) (string %status))))
                # if self.data.merchAddr == sp.sender: # list operation : pair (pair (pair bls12_381_fr (pair address mutez)) (pair (pair (mutez %custFunding) (key %custPk)) (pair (timestamp %delayExpiry) (address %merchAddr)))) (pair (pair (mutez %merchBal) (pair (mutez %merchFunding) (key %merchPk))) (pair (pair (address %pssigContract) (bytes %revLock)) (pair (int %selfDelay) (string %status))))
                SENDER;     # address : list operation : pair (pair (pair bls12_381_fr (pair address mutez)) (pair (pair (mutez %custFunding) (key %custPk)) (pair (timestamp %delayExpiry) (address %merchAddr)))) (pair (pair (mutez %merchBal) (pair (mutez %merchFunding) (key %merchPk))) (pair (pair (address %pssigContract) (bytes %revLock)) (pair (int %selfDelay) (string %status))))
                DIG 2;      # pair (pair (pair bls12_381_fr (pair address mutez)) (pair (pair (mutez %custFunding) (key %custPk)) (pair (timestamp %delayExpiry) (address %merchAddr)))) (pair (pair (mutez %merchBal) (pair (mutez %merchFunding) (key %merchPk))) (pair (pair (address %pssigContract) (bytes %revLock)) (pair (int %selfDelay) (string %status)))) : address : list operation
                DUP;        # pair (pair (pair bls12_381_fr (pair address mutez)) (pair (pair (mutez %custFunding) (key %custPk)) (pair (timestamp %delayExpiry) (address %merchAddr)))) (pair (pair (mutez %merchBal) (pair (mutez %merchFunding) (key %merchPk))) (pair (pair (address %pssigContract) (bytes %revLock)) (pair (int %selfDelay) (string %status)))) : pair (pair (pair bls12_381_fr (pair address mutez)) (pair (pair (mutez %custFunding) (key %custPk)) (pair (timestamp %delayExpiry) (address %merchAddr)))) (pair (pair (mutez %merchBal) (pair (mutez %merchFunding) (key %merchPk))) (pair (pair (address %pssigContract) (bytes %revLock)) (pair (int %selfDelay) (string %status)))) : address : list operation
                DUG 3;      # pair (pair (pair bls12_381_fr (pair address mutez)) (pair (pair (mutez %custFunding) (key %custPk)) (pair (timestamp %delayExpiry) (address %merchAddr)))) (pair (pair (mutez %merchBal) (pair (mutez %merchFunding) (key %merchPk))) (pair (pair (address %pssigContract) (bytes %revLock)) (pair (int %selfDelay) (string %status)))) : address : list operation : pair (pair (pair bls12_381_fr (pair address mutez)) (pair (pair (mutez %custFunding) (key %custPk)) (pair (timestamp %delayExpiry) (address %merchAddr)))) (pair (pair (mutez %merchBal) (pair (mutez %merchFunding) (key %merchPk))) (pair (pair (address %pssigContract) (bytes %revLock)) (pair (int %selfDelay) (string %status))))
                CAR;        # pair (pair bls12_381_fr (pair address mutez)) (pair (pair (mutez %custFunding) (key %custPk)) (pair (timestamp %delayExpiry) (address %merchAddr))) : address : list operation : pair (pair (pair bls12_381_fr (pair address mutez)) (pair (pair (mutez %custFunding) (key %custPk)) (pair (timestamp %delayExpiry) (address %merchAddr)))) (pair (pair (mutez %merchBal) (pair (mutez %merchFunding) (key %merchPk))) (pair (pair (address %pssigContract) (bytes %revLock)) (pair (int %selfDelay) (string %status))))
                CDR;        # pair (pair (mutez %custFunding) (key %custPk)) (pair (timestamp %delayExpiry) (address %merchAddr)) : address : list operation : pair (pair (pair bls12_381_fr (pair address mutez)) (pair (pair (mutez %custFunding) (key %custPk)) (pair (timestamp %delayExpiry) (address %merchAddr)))) (pair (pair (mutez %merchBal) (pair (mutez %merchFunding) (key %merchPk))) (pair (pair (address %pssigContract) (bytes %revLock)) (pair (int %selfDelay) (string %status))))
                CDR;        # pair (timestamp %delayExpiry) (address %merchAddr) : address : list operation : pair (pair (pair bls12_381_fr (pair address mutez)) (pair (pair (mutez %custFunding) (key %custPk)) (pair (timestamp %delayExpiry) (address %merchAddr)))) (pair (pair (mutez %merchBal) (pair (mutez %merchFunding) (key %merchPk))) (pair (pair (address %pssigContract) (bytes %revLock)) (pair (int %selfDelay) (string %status))))
                CDR;        # address : address : list operation : pair (pair (pair bls12_381_fr (pair address mutez)) (pair (pair (mutez %custFunding) (key %custPk)) (pair (timestamp %delayExpiry) (address %merchAddr)))) (pair (pair (mutez %merchBal) (pair (mutez %merchFunding) (key %merchPk))) (pair (pair (address %pssigContract) (bytes %revLock)) (pair (int %selfDelay) (string %status))))
                COMPARE;    # int : list operation : pair (pair (pair bls12_381_fr (pair address mutez)) (pair (pair (mutez %custFunding) (key %custPk)) (pair (timestamp %delayExpiry) (address %merchAddr)))) (pair (pair (mutez %merchBal) (pair (mutez %merchFunding) (key %merchPk))) (pair (pair (address %pssigContract) (bytes %revLock)) (pair (int %selfDelay) (string %status))))
                EQ;         # bool : list operation : pair (pair (pair bls12_381_fr (pair address mutez)) (pair (pair (mutez %custFunding) (key %custPk)) (pair (timestamp %delayExpiry) (address %merchAddr)))) (pair (pair (mutez %merchBal) (pair (mutez %merchFunding) (key %merchPk))) (pair (pair (address %pssigContract) (bytes %revLock)) (pair (int %selfDelay) (string %status))))
                IF
                  {
                    SWAP;       # pair (pair (pair bls12_381_fr (pair address mutez)) (pair (pair (mutez %custFunding) (key %custPk)) (pair (timestamp %delayExpiry) (address %merchAddr)))) (pair (pair (mutez %merchBal) (pair (mutez %merchFunding) (key %merchPk))) (pair (pair (address %pssigContract) (bytes %revLock)) (pair (int %selfDelay) (string %status)))) : list operation
                    # sp.verify(self.data.merchBal == self.data.merchFunding) # pair (pair (pair bls12_381_fr (pair address mutez)) (pair (pair (mutez %custFunding) (key %custPk)) (pair (timestamp %delayExpiry) (address %merchAddr)))) (pair (pair (mutez %merchBal) (pair (mutez %merchFunding) (key %merchPk))) (pair (pair (address %pssigContract) (bytes %revLock)) (pair (int %selfDelay) (string %status)))) : list operation
                    DUP;        # pair (pair (pair bls12_381_fr (pair address mutez)) (pair (pair (mutez %custFunding) (key %custPk)) (pair (timestamp %delayExpiry) (address %merchAddr)))) (pair (pair (mutez %merchBal) (pair (mutez %merchFunding) (key %merchPk))) (pair (pair (address %pssigContract) (bytes %revLock)) (pair (int %selfDelay) (string %status)))) : pair (pair (pair bls12_381_fr (pair address mutez)) (pair (pair (mutez %custFunding) (key %custPk)) (pair (timestamp %delayExpiry) (address %merchAddr)))) (pair (pair (mutez %merchBal) (pair (mutez %merchFunding) (key %merchPk))) (pair (pair (address %pssigContract) (bytes %revLock)) (pair (int %selfDelay) (string %status)))) : list operation
                    CDR;        # pair (pair (mutez %merchBal) (pair (mutez %merchFunding) (key %merchPk))) (pair (pair (address %pssigContract) (bytes %revLock)) (pair (int %selfDelay) (string %status))) : pair (pair (pair bls12_381_fr (pair address mutez)) (pair (pair (mutez %custFunding) (key %custPk)) (pair (timestamp %delayExpiry) (address %merchAddr)))) (pair (pair (mutez %merchBal) (pair (mutez %merchFunding) (key %merchPk))) (pair (pair (address %pssigContract) (bytes %revLock)) (pair (int %selfDelay) (string %status)))) : list operation
                    CAR;        # pair (mutez %merchBal) (pair (mutez %merchFunding) (key %merchPk)) : pair (pair (pair bls12_381_fr (pair address mutez)) (pair (pair (mutez %custFunding) (key %custPk)) (pair (timestamp %delayExpiry) (address %merchAddr)))) (pair (pair (mutez %merchBal) (pair (mutez %merchFunding) (key %merchPk))) (pair (pair (address %pssigContract) (bytes %revLock)) (pair (int %selfDelay) (string %status)))) : list operation
                    CDR;        # pair (mutez %merchFunding) (key %merchPk) : pair (pair (pair bls12_381_fr (pair address mutez)) (pair (pair (mutez %custFunding) (key %custPk)) (pair (timestamp %delayExpiry) (address %merchAddr)))) (pair (pair (mutez %merchBal) (pair (mutez %merchFunding) (key %merchPk))) (pair (pair (address %pssigContract) (bytes %revLock)) (pair (int %selfDelay) (string %status)))) : list operation
                    CAR;        # mutez : pair (pair (pair bls12_381_fr (pair address mutez)) (pair (pair (mutez %custFunding) (key %custPk)) (pair (timestamp %delayExpiry) (address %merchAddr)))) (pair (pair (mutez %merchBal) (pair (mutez %merchFunding) (key %merchPk))) (pair (pair (address %pssigContract) (bytes %revLock)) (pair (int %selfDelay) (string %status)))) : list operation
                    SWAP;       # pair (pair (pair bls12_381_fr (pair address mutez)) (pair (pair (mutez %custFunding) (key %custPk)) (pair (timestamp %delayExpiry) (address %merchAddr)))) (pair (pair (mutez %merchBal) (pair (mutez %merchFunding) (key %merchPk))) (pair (pair (address %pssigContract) (bytes %revLock)) (pair (int %selfDelay) (string %status)))) : mutez : list operation
                    DUP;        # pair (pair (pair bls12_381_fr (pair address mutez)) (pair (pair (mutez %custFunding) (key %custPk)) (pair (timestamp %delayExpiry) (address %merchAddr)))) (pair (pair (mutez %merchBal) (pair (mutez %merchFunding) (key %merchPk))) (pair (pair (address %pssigContract) (bytes %revLock)) (pair (int %selfDelay) (string %status)))) : pair (pair (pair bls12_381_fr (pair address mutez)) (pair (pair (mutez %custFunding) (key %custPk)) (pair (timestamp %delayExpiry) (address %merchAddr)))) (pair (pair (mutez %merchBal) (pair (mutez %merchFunding) (key %merchPk))) (pair (pair (address %pssigContract) (bytes %revLock)) (pair (int %selfDelay) (string %status)))) : mutez : list operation
                    DUG 3;      # pair (pair (pair bls12_381_fr (pair address mutez)) (pair (pair (mutez %custFunding) (key %custPk)) (pair (timestamp %delayExpiry) (address %merchAddr)))) (pair (pair (mutez %merchBal) (pair (mutez %merchFunding) (key %merchPk))) (pair (pair (address %pssigContract) (bytes %revLock)) (pair (int %selfDelay) (string %status)))) : mutez : list operation : pair (pair (pair bls12_381_fr (pair address mutez)) (pair (pair (mutez %custFunding) (key %custPk)) (pair (timestamp %delayExpiry) (address %merchAddr)))) (pair (pair (mutez %merchBal) (pair (mutez %merchFunding) (key %merchPk))) (pair (pair (address %pssigContract) (bytes %revLock)) (pair (int %selfDelay) (string %status))))
                    CDR;        # pair (pair (mutez %merchBal) (pair (mutez %merchFunding) (key %merchPk))) (pair (pair (address %pssigContract) (bytes %revLock)) (pair (int %selfDelay) (string %status))) : mutez : list operation : pair (pair (pair bls12_381_fr (pair address mutez)) (pair (pair (mutez %custFunding) (key %custPk)) (pair (timestamp %delayExpiry) (address %merchAddr)))) (pair (pair (mutez %merchBal) (pair (mutez %merchFunding) (key %merchPk))) (pair (pair (address %pssigContract) (bytes %revLock)) (pair (int %selfDelay) (string %status))))
                    CAR;        # pair (mutez %merchBal) (pair (mutez %merchFunding) (key %merchPk)) : mutez : list operation : pair (pair (pair bls12_381_fr (pair address mutez)) (pair (pair (mutez %custFunding) (key %custPk)) (pair (timestamp %delayExpiry) (address %merchAddr)))) (pair (pair (mutez %merchBal) (pair (mutez %merchFunding) (key %merchPk))) (pair (pair (address %pssigContract) (bytes %revLock)) (pair (int %selfDelay) (string %status))))
                    CAR;        # mutez : mutez : list operation : pair (pair (pair bls12_381_fr (pair address mutez)) (pair (pair (mutez %custFunding) (key %custPk)) (pair (timestamp %delayExpiry) (address %merchAddr)))) (pair (pair (mutez %merchBal) (pair (mutez %merchFunding) (key %merchPk))) (pair (pair (address %pssigContract) (bytes %revLock)) (pair (int %selfDelay) (string %status))))
                    COMPARE;    # int : list operation : pair (pair (pair bls12_381_fr (pair address mutez)) (pair (pair (mutez %custFunding) (key %custPk)) (pair (timestamp %delayExpiry) (address %merchAddr)))) (pair (pair (mutez %merchBal) (pair (mutez %merchFunding) (key %merchPk))) (pair (pair (address %pssigContract) (bytes %revLock)) (pair (int %selfDelay) (string %status))))
                    EQ;         # bool : list operation : pair (pair (pair bls12_381_fr (pair address mutez)) (pair (pair (mutez %custFunding) (key %custPk)) (pair (timestamp %delayExpiry) (address %merchAddr)))) (pair (pair (mutez %merchBal) (pair (mutez %merchFunding) (key %merchPk))) (pair (pair (address %pssigContract) (bytes %revLock)) (pair (int %selfDelay) (string %status))))
                    IF
                      {}
                      {
                        PUSH string "WrongCondition: self.data.merchBal == self.data.merchFunding"; # string : list operation : pair (pair (pair bls12_381_fr (pair address mutez)) (pair (pair (mutez %custFunding) (key %custPk)) (pair (timestamp %delayExpiry) (address %merchAddr)))) (pair (pair (mutez %merchBal) (pair (mutez %merchFunding) (key %merchPk))) (pair (pair (address %pssigContract) (bytes %revLock)) (pair (int %selfDelay) (string %status))))
                        FAILWITH;   # FAILED
                      }; # list operation : pair (pair (pair bls12_381_fr (pair address mutez)) (pair (pair (mutez %custFunding) (key %custPk)) (pair (timestamp %delayExpiry) (address %merchAddr)))) (pair (pair (mutez %merchBal) (pair (mutez %merchFunding) (key %merchPk))) (pair (pair (address %pssigContract) (bytes %revLock)) (pair (int %selfDelay) (string %status))))
                    SWAP;       # pair (pair (pair bls12_381_fr (pair address mutez)) (pair (pair (mutez %custFunding) (key %custPk)) (pair (timestamp %delayExpiry) (address %merchAddr)))) (pair (pair (mutez %merchBal) (pair (mutez %merchFunding) (key %merchPk))) (pair (pair (address %pssigContract) (bytes %revLock)) (pair (int %selfDelay) (string %status)))) : list operation
                    # sp.send(self.data.merchAddr, self.data.merchBal) # pair (pair (pair bls12_381_fr (pair address mutez)) (pair (pair (mutez %custFunding) (key %custPk)) (pair (timestamp %delayExpiry) (address %merchAddr)))) (pair (pair (mutez %merchBal) (pair (mutez %merchFunding) (key %merchPk))) (pair (pair (address %pssigContract) (bytes %revLock)) (pair (int %selfDelay) (string %status)))) : list operation
                    DUP;        # pair (pair (pair bls12_381_fr (pair address mutez)) (pair (pair (mutez %custFunding) (key %custPk)) (pair (timestamp %delayExpiry) (address %merchAddr)))) (pair (pair (mutez %merchBal) (pair (mutez %merchFunding) (key %merchPk))) (pair (pair (address %pssigContract) (bytes %revLock)) (pair (int %selfDelay) (string %status)))) : pair (pair (pair bls12_381_fr (pair address mutez)) (pair (pair (mutez %custFunding) (key %custPk)) (pair (timestamp %delayExpiry) (address %merchAddr)))) (pair (pair (mutez %merchBal) (pair (mutez %merchFunding) (key %merchPk))) (pair (pair (address %pssigContract) (bytes %revLock)) (pair (int %selfDelay) (string %status)))) : list operation
                    DUG 2;      # pair (pair (pair bls12_381_fr (pair address mutez)) (pair (pair (mutez %custFunding) (key %custPk)) (pair (timestamp %delayExpiry) (address %merchAddr)))) (pair (pair (mutez %merchBal) (pair (mutez %merchFunding) (key %merchPk))) (pair (pair (address %pssigContract) (bytes %revLock)) (pair (int %selfDelay) (string %status)))) : list operation : pair (pair (pair bls12_381_fr (pair address mutez)) (pair (pair (mutez %custFunding) (key %custPk)) (pair (timestamp %delayExpiry) (address %merchAddr)))) (pair (pair (mutez %merchBal) (pair (mutez %merchFunding) (key %merchPk))) (pair (pair (address %pssigContract) (bytes %revLock)) (pair (int %selfDelay) (string %status))))
                    CAR;        # pair (pair bls12_381_fr (pair address mutez)) (pair (pair (mutez %custFunding) (key %custPk)) (pair (timestamp %delayExpiry) (address %merchAddr))) : list operation : pair (pair (pair bls12_381_fr (pair address mutez)) (pair (pair (mutez %custFunding) (key %custPk)) (pair (timestamp %delayExpiry) (address %merchAddr)))) (pair (pair (mutez %merchBal) (pair (mutez %merchFunding) (key %merchPk))) (pair (pair (address %pssigContract) (bytes %revLock)) (pair (int %selfDelay) (string %status))))
                    CDR;        # pair (pair (mutez %custFunding) (key %custPk)) (pair (timestamp %delayExpiry) (address %merchAddr)) : list operation : pair (pair (pair bls12_381_fr (pair address mutez)) (pair (pair (mutez %custFunding) (key %custPk)) (pair (timestamp %delayExpiry) (address %merchAddr)))) (pair (pair (mutez %merchBal) (pair (mutez %merchFunding) (key %merchPk))) (pair (pair (address %pssigContract) (bytes %revLock)) (pair (int %selfDelay) (string %status))))
                    CDR;        # pair (timestamp %delayExpiry) (address %merchAddr) : list operation : pair (pair (pair bls12_381_fr (pair address mutez)) (pair (pair (mutez %custFunding) (key %custPk)) (pair (timestamp %delayExpiry) (address %merchAddr)))) (pair (pair (mutez %merchBal) (pair (mutez %merchFunding) (key %merchPk))) (pair (pair (address %pssigContract) (bytes %revLock)) (pair (int %selfDelay) (string %status))))
                    CDR;        # address : list operation : pair (pair (pair bls12_381_fr (pair address mutez)) (pair (pair (mutez %custFunding) (key %custPk)) (pair (timestamp %delayExpiry) (address %merchAddr)))) (pair (pair (mutez %merchBal) (pair (mutez %merchFunding) (key %merchPk))) (pair (pair (address %pssigContract) (bytes %revLock)) (pair (int %selfDelay) (string %status))))
                    CONTRACT unit; # option (contract unit) : list operation : pair (pair (pair bls12_381_fr (pair address mutez)) (pair (pair (mutez %custFunding) (key %custPk)) (pair (timestamp %delayExpiry) (address %merchAddr)))) (pair (pair (mutez %merchBal) (pair (mutez %merchFunding) (key %merchPk))) (pair (pair (address %pssigContract) (bytes %revLock)) (pair (int %selfDelay) (string %status))))
                    IF_SOME
                      {}
                      {
                        PUSH int 111; # int : list operation : pair (pair (pair bls12_381_fr (pair address mutez)) (pair (pair (mutez %custFunding) (key %custPk)) (pair (timestamp %delayExpiry) (address %merchAddr)))) (pair (pair (mutez %merchBal) (pair (mutez %merchFunding) (key %merchPk))) (pair (pair (address %pssigContract) (bytes %revLock)) (pair (int %selfDelay) (string %status))))
                        FAILWITH;   # FAILED
                      }; # @some : list operation : pair (pair (pair bls12_381_fr (pair address mutez)) (pair (pair (mutez %custFunding) (key %custPk)) (pair (timestamp %delayExpiry) (address %merchAddr)))) (pair (pair (mutez %merchBal) (pair (mutez %merchFunding) (key %merchPk))) (pair (pair (address %pssigContract) (bytes %revLock)) (pair (int %selfDelay) (string %status))))
                    DIG 2;      # pair (pair (pair bls12_381_fr (pair address mutez)) (pair (pair (mutez %custFunding) (key %custPk)) (pair (timestamp %delayExpiry) (address %merchAddr)))) (pair (pair (mutez %merchBal) (pair (mutez %merchFunding) (key %merchPk))) (pair (pair (address %pssigContract) (bytes %revLock)) (pair (int %selfDelay) (string %status)))) : @some : list operation
                    DUP;        # pair (pair (pair bls12_381_fr (pair address mutez)) (pair (pair (mutez %custFunding) (key %custPk)) (pair (timestamp %delayExpiry) (address %merchAddr)))) (pair (pair (mutez %merchBal) (pair (mutez %merchFunding) (key %merchPk))) (pair (pair (address %pssigContract) (bytes %revLock)) (pair (int %selfDelay) (string %status)))) : pair (pair (pair bls12_381_fr (pair address mutez)) (pair (pair (mutez %custFunding) (key %custPk)) (pair (timestamp %delayExpiry) (address %merchAddr)))) (pair (pair (mutez %merchBal) (pair (mutez %merchFunding) (key %merchPk))) (pair (pair (address %pssigContract) (bytes %revLock)) (pair (int %selfDelay) (string %status)))) : @some : list operation
                    DUG 3;      # pair (pair (pair bls12_381_fr (pair address mutez)) (pair (pair (mutez %custFunding) (key %custPk)) (pair (timestamp %delayExpiry) (address %merchAddr)))) (pair (pair (mutez %merchBal) (pair (mutez %merchFunding) (key %merchPk))) (pair (pair (address %pssigContract) (bytes %revLock)) (pair (int %selfDelay) (string %status)))) : @some : list operation : pair (pair (pair bls12_381_fr (pair address mutez)) (pair (pair (mutez %custFunding) (key %custPk)) (pair (timestamp %delayExpiry) (address %merchAddr)))) (pair (pair (mutez %merchBal) (pair (mutez %merchFunding) (key %merchPk))) (pair (pair (address %pssigContract) (bytes %revLock)) (pair (int %selfDelay) (string %status))))
                    CDR;        # pair (pair (mutez %merchBal) (pair (mutez %merchFunding) (key %merchPk))) (pair (pair (address %pssigContract) (bytes %revLock)) (pair (int %selfDelay) (string %status))) : @some : list operation : pair (pair (pair bls12_381_fr (pair address mutez)) (pair (pair (mutez %custFunding) (key %custPk)) (pair (timestamp %delayExpiry) (address %merchAddr)))) (pair (pair (mutez %merchBal) (pair (mutez %merchFunding) (key %merchPk))) (pair (pair (address %pssigContract) (bytes %revLock)) (pair (int %selfDelay) (string %status))))
                    CAR;        # pair (mutez %merchBal) (pair (mutez %merchFunding) (key %merchPk)) : @some : list operation : pair (pair (pair bls12_381_fr (pair address mutez)) (pair (pair (mutez %custFunding) (key %custPk)) (pair (timestamp %delayExpiry) (address %merchAddr)))) (pair (pair (mutez %merchBal) (pair (mutez %merchFunding) (key %merchPk))) (pair (pair (address %pssigContract) (bytes %revLock)) (pair (int %selfDelay) (string %status))))
                    CAR;        # mutez : @some : list operation : pair (pair (pair bls12_381_fr (pair address mutez)) (pair (pair (mutez %custFunding) (key %custPk)) (pair (timestamp %delayExpiry) (address %merchAddr)))) (pair (pair (mutez %merchBal) (pair (mutez %merchFunding) (key %merchPk))) (pair (pair (address %pssigContract) (bytes %revLock)) (pair (int %selfDelay) (string %status))))
                    UNIT;       # unit : mutez : @some : list operation : pair (pair (pair bls12_381_fr (pair address mutez)) (pair (pair (mutez %custFunding) (key %custPk)) (pair (timestamp %delayExpiry) (address %merchAddr)))) (pair (pair (mutez %merchBal) (pair (mutez %merchFunding) (key %merchPk))) (pair (pair (address %pssigContract) (bytes %revLock)) (pair (int %selfDelay) (string %status))))
                    TRANSFER_TOKENS; # operation : list operation : pair (pair (pair bls12_381_fr (pair address mutez)) (pair (pair (mutez %custFunding) (key %custPk)) (pair (timestamp %delayExpiry) (address %merchAddr)))) (pair (pair (mutez %merchBal) (pair (mutez %merchFunding) (key %merchPk))) (pair (pair (address %pssigContract) (bytes %revLock)) (pair (int %selfDelay) (string %status))))
                    CONS;       # list operation : pair (pair (pair bls12_381_fr (pair address mutez)) (pair (pair (mutez %custFunding) (key %custPk)) (pair (timestamp %delayExpiry) (address %merchAddr)))) (pair (pair (mutez %merchBal) (pair (mutez %merchFunding) (key %merchPk))) (pair (pair (address %pssigContract) (bytes %revLock)) (pair (int %selfDelay) (string %status))))
                    SWAP;       # pair (pair (pair bls12_381_fr (pair address mutez)) (pair (pair (mutez %custFunding) (key %custPk)) (pair (timestamp %delayExpiry) (address %merchAddr)))) (pair (pair (mutez %merchBal) (pair (mutez %merchFunding) (key %merchPk))) (pair (pair (address %pssigContract) (bytes %revLock)) (pair (int %selfDelay) (string %status)))) : list operation
                    # self.data.merchBal = sp.tez(0) # pair (pair (pair bls12_381_fr (pair address mutez)) (pair (pair (mutez %custFunding) (key %custPk)) (pair (timestamp %delayExpiry) (address %merchAddr)))) (pair (pair (mutez %merchBal) (pair (mutez %merchFunding) (key %merchPk))) (pair (pair (address %pssigContract) (bytes %revLock)) (pair (int %selfDelay) (string %status)))) : list operation
                    DUP;        # pair (pair (pair bls12_381_fr (pair address mutez)) (pair (pair (mutez %custFunding) (key %custPk)) (pair (timestamp %delayExpiry) (address %merchAddr)))) (pair (pair (mutez %merchBal) (pair (mutez %merchFunding) (key %merchPk))) (pair (pair (address %pssigContract) (bytes %revLock)) (pair (int %selfDelay) (string %status)))) : pair (pair (pair bls12_381_fr (pair address mutez)) (pair (pair (mutez %custFunding) (key %custPk)) (pair (timestamp %delayExpiry) (address %merchAddr)))) (pair (pair (mutez %merchBal) (pair (mutez %merchFunding) (key %merchPk))) (pair (pair (address %pssigContract) (bytes %revLock)) (pair (int %selfDelay) (string %status)))) : list operation
                    CAR;        # pair (pair bls12_381_fr (pair address mutez)) (pair (pair (mutez %custFunding) (key %custPk)) (pair (timestamp %delayExpiry) (address %merchAddr))) : pair (pair (pair bls12_381_fr (pair address mutez)) (pair (pair (mutez %custFunding) (key %custPk)) (pair (timestamp %delayExpiry) (address %merchAddr)))) (pair (pair (mutez %merchBal) (pair (mutez %merchFunding) (key %merchPk))) (pair (pair (address %pssigContract) (bytes %revLock)) (pair (int %selfDelay) (string %status)))) : list operation
                    SWAP;       # pair (pair (pair bls12_381_fr (pair address mutez)) (pair (pair (mutez %custFunding) (key %custPk)) (pair (timestamp %delayExpiry) (address %merchAddr)))) (pair (pair (mutez %merchBal) (pair (mutez %merchFunding) (key %merchPk))) (pair (pair (address %pssigContract) (bytes %revLock)) (pair (int %selfDelay) (string %status)))) : pair (pair bls12_381_fr (pair address mutez)) (pair (pair (mutez %custFunding) (key %custPk)) (pair (timestamp %delayExpiry) (address %merchAddr))) : list operation
                    CDR;        # pair (pair (mutez %merchBal) (pair (mutez %merchFunding) (key %merchPk))) (pair (pair (address %pssigContract) (bytes %revLock)) (pair (int %selfDelay) (string %status))) : pair (pair bls12_381_fr (pair address mutez)) (pair (pair (mutez %custFunding) (key %custPk)) (pair (timestamp %delayExpiry) (address %merchAddr))) : list operation
                    DUP;        # pair (pair (mutez %merchBal) (pair (mutez %merchFunding) (key %merchPk))) (pair (pair (address %pssigContract) (bytes %revLock)) (pair (int %selfDelay) (string %status))) : pair (pair (mutez %merchBal) (pair (mutez %merchFunding) (key %merchPk))) (pair (pair (address %pssigContract) (bytes %revLock)) (pair (int %selfDelay) (string %status))) : pair (pair bls12_381_fr (pair address mutez)) (pair (pair (mutez %custFunding) (key %custPk)) (pair (timestamp %delayExpiry) (address %merchAddr))) : list operation
                    CDR;        # pair (pair (address %pssigContract) (bytes %revLock)) (pair (int %selfDelay) (string %status)) : pair (pair (mutez %merchBal) (pair (mutez %merchFunding) (key %merchPk))) (pair (pair (address %pssigContract) (bytes %revLock)) (pair (int %selfDelay) (string %status))) : pair (pair bls12_381_fr (pair address mutez)) (pair (pair (mutez %custFunding) (key %custPk)) (pair (timestamp %delayExpiry) (address %merchAddr))) : list operation
                    SWAP;       # pair (pair (mutez %merchBal) (pair (mutez %merchFunding) (key %merchPk))) (pair (pair (address %pssigContract) (bytes %revLock)) (pair (int %selfDelay) (string %status))) : pair (pair (address %pssigContract) (bytes %revLock)) (pair (int %selfDelay) (string %status)) : pair (pair bls12_381_fr (pair address mutez)) (pair (pair (mutez %custFunding) (key %custPk)) (pair (timestamp %delayExpiry) (address %merchAddr))) : list operation
                    CAR;        # pair (mutez %merchBal) (pair (mutez %merchFunding) (key %merchPk)) : pair (pair (address %pssigContract) (bytes %revLock)) (pair (int %selfDelay) (string %status)) : pair (pair bls12_381_fr (pair address mutez)) (pair (pair (mutez %custFunding) (key %custPk)) (pair (timestamp %delayExpiry) (address %merchAddr))) : list operation
                    CDR;        # pair (mutez %merchFunding) (key %merchPk) : pair (pair (address %pssigContract) (bytes %revLock)) (pair (int %selfDelay) (string %status)) : pair (pair bls12_381_fr (pair address mutez)) (pair (pair (mutez %custFunding) (key %custPk)) (pair (timestamp %delayExpiry) (address %merchAddr))) : list operation
                    PUSH mutez 0; # mutez : pair (mutez %merchFunding) (key %merchPk) : pair (pair (address %pssigContract) (bytes %revLock)) (pair (int %selfDelay) (string %status)) : pair (pair bls12_381_fr (pair address mutez)) (pair (pair (mutez %custFunding) (key %custPk)) (pair (timestamp %delayExpiry) (address %merchAddr))) : list operation
                    PAIR;       # pair mutez (pair (mutez %merchFunding) (key %merchPk)) : pair (pair (address %pssigContract) (bytes %revLock)) (pair (int %selfDelay) (string %status)) : pair (pair bls12_381_fr (pair address mutez)) (pair (pair (mutez %custFunding) (key %custPk)) (pair (timestamp %delayExpiry) (address %merchAddr))) : list operation
                    PAIR;       # pair (pair mutez (pair (mutez %merchFunding) (key %merchPk))) (pair (pair (address %pssigContract) (bytes %revLock)) (pair (int %selfDelay) (string %status))) : pair (pair bls12_381_fr (pair address mutez)) (pair (pair (mutez %custFunding) (key %custPk)) (pair (timestamp %delayExpiry) (address %merchAddr))) : list operation
                    SWAP;       # pair (pair bls12_381_fr (pair address mutez)) (pair (pair (mutez %custFunding) (key %custPk)) (pair (timestamp %delayExpiry) (address %merchAddr))) : pair (pair mutez (pair (mutez %merchFunding) (key %merchPk))) (pair (pair (address %pssigContract) (bytes %revLock)) (pair (int %selfDelay) (string %status))) : list operation
                    PAIR;       # pair (pair (pair bls12_381_fr (pair address mutez)) (pair (pair (mutez %custFunding) (key %custPk)) (pair (timestamp %delayExpiry) (address %merchAddr)))) (pair (pair mutez (pair (mutez %merchFunding) (key %merchPk))) (pair (pair (address %pssigContract) (bytes %revLock)) (pair (int %selfDelay) (string %status)))) : list operation
                    SWAP;       # list operation : pair (pair (pair bls12_381_fr (pair address mutez)) (pair (pair (mutez %custFunding) (key %custPk)) (pair (timestamp %delayExpiry) (address %merchAddr)))) (pair (pair mutez (pair (mutez %merchFunding) (key %merchPk))) (pair (pair (address %pssigContract) (bytes %revLock)) (pair (int %selfDelay) (string %status))))
                  }
                  {}; # list operation : pair (pair (pair bls12_381_fr (pair address mutez)) (pair (pair (mutez %custFunding) (key %custPk)) (pair (timestamp %delayExpiry) (address %merchAddr)))) (pair (pair mutez (pair (mutez %merchFunding) (key %merchPk))) (pair (pair (address %pssigContract) (bytes %revLock)) (pair (int %selfDelay) (string %status))))
              }; # list operation : pair (pair (pair bls12_381_fr (pair address mutez)) (pair (pair (mutez %custFunding) (key %custPk)) (pair (timestamp %delayExpiry) (address %merchAddr)))) (pair (pair mutez (pair (mutez %merchFunding) (key %merchPk))) (pair (pair (address %pssigContract) (bytes %revLock)) (pair int string)))
          }; # list operation : pair (pair (pair (bls12_381_fr %chanID) (pair (address %custAddr) (mutez %custBal))) (pair (pair (mutez %custFunding) (key %custPk)) (pair timestamp address))) (pair (pair (mutez %merchBal) (pair (mutez %merchFunding) (key %merchPk))) (pair (pair (address %pssigContract) (bytes %revLock)) (pair int string)))
      }; # list operation : pair (pair (pair bls12_381_fr (pair address mutez)) (pair (pair (mutez %custFunding) (key %custPk)) (pair (timestamp %delayExpiry) (address %merchAddr)))) (pair (pair mutez (pair (mutez %merchFunding) (key %merchPk))) (pair (pair (address %pssigContract) (bytes %revLock)) (pair int string)))
    NIL operation; # list operation : list operation : pair (pair (pair bls12_381_fr (pair address mutez)) (pair (pair (mutez %custFunding) (key %custPk)) (pair (timestamp %delayExpiry) (address %merchAddr)))) (pair (pair mutez (pair (mutez %merchFunding) (key %merchPk))) (pair (pair (address %pssigContract) (bytes %revLock)) (pair int string)))
    SWAP;       # list operation : list operation : pair (pair (pair bls12_381_fr (pair address mutez)) (pair (pair (mutez %custFunding) (key %custPk)) (pair (timestamp %delayExpiry) (address %merchAddr)))) (pair (pair mutez (pair (mutez %merchFunding) (key %merchPk))) (pair (pair (address %pssigContract) (bytes %revLock)) (pair int string)))
    ITER
      {
        CONS;       # list operation : pair (pair (pair bls12_381_fr (pair address mutez)) (pair (pair (mutez %custFunding) (key %custPk)) (pair (timestamp %delayExpiry) (address %merchAddr)))) (pair (pair mutez (pair (mutez %merchFunding) (key %merchPk))) (pair (pair (address %pssigContract) (bytes %revLock)) (pair int string)))
      }; # list operation : pair (pair (pair bls12_381_fr (pair address mutez)) (pair (pair (mutez %custFunding) (key %custPk)) (pair (timestamp %delayExpiry) (address %merchAddr)))) (pair (pair mutez (pair (mutez %merchFunding) (key %merchPk))) (pair (pair (address %pssigContract) (bytes %revLock)) (pair int string)))
    PAIR;       # pair (list operation) (pair (pair (pair bls12_381_fr (pair address mutez)) (pair (pair (mutez %custFunding) (key %custPk)) (pair (timestamp %delayExpiry) (address %merchAddr)))) (pair (pair mutez (pair (mutez %merchFunding) (key %merchPk))) (pair (pair (address %pssigContract) (bytes %revLock)) (pair int string))))
  };